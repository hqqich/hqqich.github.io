import{_ as e}from"./plugin-vue_export-helper-c27b6911.js";import{r as p,o,c as l,a as n,d as s,e as t,f as c}from"./app-6847d3e4.js";const i={},u={href:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/adbc507fc3704fd8955aae739a433db2~tplv-k3u1fbpfcp-zoom-1.image",target:"_blank",rel:"noopener noreferrer"},r=n("p",null,"å¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ© ğŸ¤£ğŸ¤£",-1),k=c(`<p>åœ¨ 2019 å¹´ Google I/O å¤§ä¼šä¸Šï¼ŒGoogle å®£å¸ƒäº†ä»Šå Android å¼€å‘å°†ä¼˜å…ˆä½¿ç”¨ Kotlin ï¼Œå³ Kotlin-firstï¼Œéšä¹‹åœ¨ Android å¼€å‘ç•Œå…´èµ·äº†ä¸€é˜µå…¨æ°‘å­¦ä¹  Kotlin çš„çƒ­æ½®ã€‚ä¹‹å Google ä¹Ÿæ¨å‡ºäº†ä¸€ç³»åˆ—ç”¨ Kotlin å®ç°çš„ ktx æ‰©å±•åº“ï¼Œä¾‹å¦‚ <code>activity-ktx</code>ã€<code>fragment-ktx</code>ã€<code>core-ktx</code>ç­‰ï¼Œæä¾›äº†å„ç§æ–¹ä¾¿çš„æ‰©å±•æ–¹æ³•ç”¨äºç®€åŒ–å¼€å‘è€…çš„å·¥ä½œï¼ŒKotlin åç¨‹ç›®å‰ä¹Ÿæ˜¯å®˜æ–¹åœ¨ Android ä¸Šè¿›è¡Œå¼‚æ­¥ç¼–ç¨‹çš„æ¨èè§£å†³æ–¹æ¡ˆ</p><p>Google æ¨èä¼˜å…ˆä½¿ç”¨ Kotlinï¼Œä¹Ÿå®£ç§°ä¸ä¼šæ”¾å¼ƒ Javaï¼Œä½†ç›®å‰å„ç§ ktx æ‰©å±•åº“è¿˜æ˜¯éœ€è¦ç”± Kotlin ä»£ç è¿›è¡Œä½¿ç”¨æ‰èƒ½æœ€å¤§åŒ–åœ°äº«å—åˆ°å…¶ä¾¿åˆ©æ€§ï¼ŒJava ä»£ç æ¥è°ƒç”¨æ˜¾å¾—æœ‰ç‚¹ä¸ä¼¦ä¸ç±»ã€‚ä½œä¸º Jetpack ä¸»è¦ç»„ä»¶ä¹‹ä¸€çš„ Paging 3.x ç‰ˆæœ¬ç›®å‰ä¹Ÿå·²ç»å®Œå…¨ç”¨ Kotlin å®ç°ï¼Œä¸º Kotlin åç¨‹æä¾›äº†ä¸€æµçš„æ”¯æŒã€‚åˆšå‡ºæ­£å¼ç‰ˆæœ¬ä¸ä¹…çš„ Jetpack Compose ä¹Ÿåªæ”¯æŒ Kotlinï¼ŒJava æ— ç¼˜å£°æ˜å¼ UI</p><p>å¼€å‘è€…å¯ä»¥æ„Ÿå—åˆ° Kotlin åœ¨ Android å¼€å‘ä¸­çš„é‡è¦æ€§åœ¨ä¸æ–­æé«˜ï¼Œè™½ç„¶ Google è¯´ä¸ä¼šæ”¾å¼ƒ Javaï¼Œä½†ä»¥åçš„äº‹è°è¯´å¾—å‡†å‘¢ï¼Ÿå¼€å‘è€…è¿˜æ˜¯éœ€è¦å°½æ—©è¿ç§»åˆ° Kotlinï¼Œè¿™ä¹Ÿæ˜¯å¿…ä¸å¯æŒ¡çš„æŠ€æœ¯è¶‹åŠ¿</p><p>Kotlin åœ¨è®¾è®¡ç†å¿µä¸Šæœ‰å¾ˆå¤šå’Œ Java ä¸åŒçš„åœ°æ–¹ï¼Œå¼€å‘è€…èƒ½å¤Ÿç›´è§‚æ„Ÿå—åˆ°çš„æ˜¯è¯­æ³•å±‚é¢ä¸Šçš„å·®å¼‚æ€§ï¼ŒèƒŒåä¹ŸåŒ…å«æœ‰<strong>ä¸€ç³»åˆ—éšè—çš„æ€§èƒ½å¼€é”€ä»¥åŠä¸€äº›éšè—å¾—å¾ˆæ·±çš„â€œå‘â€</strong>ï¼Œæœ¬ç¯‡æ–‡ç« å°±æ¥ä»‹ç»åœ¨ä½¿ç”¨ Kotlin è¿‡ç¨‹ä¸­å­˜åœ¨çš„éšè—æ€§èƒ½å¼€é”€ï¼Œå¸®åŠ©è¯»è€…é¿å‘ï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ© ğŸ¤£ğŸ¤£</p><h1 id="æ…ç”¨-jvmoverloads" tabindex="-1"><a class="header-anchor" href="#æ…ç”¨-jvmoverloads" aria-hidden="true">#</a> æ…ç”¨ @JvmOverloads</h1><p><code>@JvmOverloads</code> æ³¨è§£å¤§å®¶åº”è¯¥ä¸é™Œç”Ÿï¼Œå…¶ä½œç”¨åœ¨å…·æœ‰é»˜è®¤å‚æ•°çš„æ–¹æ³•ä¸Šï¼Œç”¨äºå‘ Java ä»£ç ç”Ÿæˆå¤šä¸ªé‡è½½æ–¹æ³•</p><p>ä¾‹å¦‚ï¼Œä»¥ä¸‹çš„ <code>println</code> æ–¹æ³•å¯¹äº Java ä»£ç æ¥è¯´å°±ç›¸å½“äºä¸¤ä¸ªé‡è½½æ–¹æ³•ï¼Œé»˜è®¤ä½¿ç”¨ç©ºå­—ç¬¦ä¸²ä½œä¸ºå…¥å‚å‚æ•°</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token comment">//Kotlin</span>
<span class="token annotation builtin">@JvmOverloads</span>
<span class="token keyword">fun</span> <span class="token function">println</span><span class="token punctuation">(</span>log<span class="token operator">:</span> String <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//Java</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">String</span> log<span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>@JvmOverloads</code> å¾ˆæ–¹ä¾¿ï¼Œå‡å°‘äº† Java ä»£ç è°ƒç”¨ Kotlin ä»£ç æ—¶çš„è°ƒç”¨æˆæœ¬ï¼Œä½¿å¾— Java ä»£ç ä¹Ÿå¯ä»¥äº«å—åˆ°é»˜è®¤å‚æ•°çš„ä¾¿åˆ©ï¼Œä½†åœ¨æŸäº›ç‰¹æ®Šåœºæ™¯ä¸‹ä¹Ÿä¼šå¼•å‘ä¸€ä¸ªéšè—å¾—å¾ˆæ·±çš„ bug</p><p>ä¸¾ä¸ªä¾‹å­</p><p>æˆ‘ä»¬çŸ¥é“ Android ç³»ç»Ÿçš„ View ç±»åŒ…å«æœ‰å¤šä¸ªæ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬åœ¨å®ç°è‡ªå®šä¹‰ View æ—¶è‡³å°‘å°±è¦å£°æ˜ä¸€ä¸ª<strong>åŒ…å«æœ‰ä¸¤ä¸ªå‚æ•°çš„æ„é€ å‡½æ•°</strong>ï¼Œå‚æ•°ç±»å‹å¿…é¡»ä¾æ¬¡æ˜¯ Context å’Œ AttributeSetï¼Œè¿™æ ·è¯¥è‡ªå®šä¹‰ View æ‰èƒ½åœ¨å¸ƒå±€æ–‡ä»¶ä¸­ä½¿ç”¨ã€‚è€Œ View ç±»çš„æ„é€ å‡½æ•°æœ€å¤šåŒ…å«æœ‰å››ä¸ªå…¥å‚å‚æ•°ï¼Œæœ€å°‘åªæœ‰ä¸€ä¸ªï¼Œä¸ºäº†çœäº‹ï¼Œæˆ‘ä»¬åœ¨ç”¨ Kotlin ä»£ç å®ç°è‡ªå®šä¹‰ View æ—¶ï¼Œå°±å¯ä»¥ç”¨ <code>@JvmOverloads</code> æ¥å¾ˆæ–¹ä¾¿åœ°ç»§æ‰¿ View ç±»ï¼Œå°±åƒä»¥ä¸‹ä»£ç </p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">open</span> <span class="token keyword">class</span> BaseView <span class="token annotation builtin">@JvmOverloads</span> <span class="token keyword">constructor</span><span class="token punctuation">(</span>
    context<span class="token operator">:</span> Context<span class="token punctuation">,</span> attrs<span class="token operator">:</span> AttributeSet<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    defStyleAttr<span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> defStyleRes<span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token number">0</span>
<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">View</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> attrs<span class="token punctuation">,</span> defStyleAttr<span class="token punctuation">,</span> defStyleRes<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœæˆ‘ä»¬æ˜¯åƒ BaseView ä¸€æ ·ç›´æ¥ç»§æ‰¿äº View çš„è¯ï¼Œæ­¤æ—¶ä½¿ç”¨<code>@JvmOverloads</code>å°±ä¸ä¼šäº§ç”Ÿä»»ä½•é—®é¢˜ï¼Œå¯å¦‚æœæˆ‘ä»¬ç»§æ‰¿çš„æ˜¯ TextView çš„è¯ï¼Œé‚£ä¹ˆé—®é¢˜å°±æ¥äº†</p><p>ç›´æ¥ç»§æ‰¿äº TextView ä¸åšä»»ä½•ä¿®æ”¹ï¼Œåœ¨å¸ƒå±€æ–‡ä»¶ä¸­åˆ†åˆ«ä½¿ç”¨ MyTextView å’Œ TextViewï¼Œç»™å®ƒä»¬å®Œå…¨ä¸€æ ·çš„å‚æ•°ï¼Œçœ‹çœ‹è¿è¡Œæ•ˆæœ</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">open</span> <span class="token keyword">class</span> MyTextView <span class="token annotation builtin">@JvmOverloads</span> <span class="token keyword">constructor</span><span class="token punctuation">(</span>
    context<span class="token operator">:</span> Context<span class="token punctuation">,</span> attrs<span class="token operator">:</span> AttributeSet<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    defStyleAttr<span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> defStyleRes<span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token number">0</span>
<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">TextView</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> attrs<span class="token punctuation">,</span> defStyleAttr<span class="token punctuation">,</span> defStyleRes<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>github.leavesc.demo.MyTextView</span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ä¸šå¿—é™ˆ<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>42sp<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ä¸šå¿—é™ˆ<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>42sp<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤æ—¶ä¸¤ä¸ª TextView å°±ä¼šå‘ˆç°å‡ºä¸ä¸€æ ·çš„æ–‡æœ¬é¢œè‰²äº†ï¼Œååˆ†ç¥å¥‡</p><figure><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a8db31ff83054797a9a0048919df668a~tplv-k3u1fbpfcp-watermark.image" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>è¿™å°±æ˜¯ <code>@JvmOverloads</code> å¸¦æ¥çš„ä¸€ä¸ªéšè—é—®é¢˜ã€‚å› ä¸º TextView çš„ <code>defStyleAttr</code> å®é™…ä¸Šæ˜¯æœ‰ä¸€ä¸ªé»˜è®¤å€¼çš„ï¼Œå³ <code>R.attr.textViewStyle</code>ï¼Œå½“ä¸­å°±åŒ…å«äº† TextView çš„é»˜è®¤æ–‡æœ¬é¢œè‰²ï¼Œè€Œç”±äº MyTextView ä¸º <code>defStyleAttr</code> æŒ‡å®šäº†ä¸€ä¸ªé»˜è®¤å€¼ 0ï¼Œè¿™å°±å¯¼è‡´ MyTextView ä¸¢å¤±äº†ä¸€äº›é»˜è®¤é£æ ¼å±æ€§</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">TextView</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">AttributeSet</span> attrs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> attrs<span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>internal<span class="token punctuation">.</span></span>R</span><span class="token punctuation">.</span>attr<span class="token punctuation">.</span>textViewStyle<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬è¦ç›´æ¥ç»§æ‰¿çš„æ˜¯ View ç±»çš„è¯å¯ä»¥ç›´æ¥ä½¿ç”¨<code>@JvmOverloads</code>ï¼Œæ­¤æ—¶ä¸ä¼šæœ‰ä»»ä½•é—®é¢˜ï¼Œè€Œå¦‚æœæˆ‘ä»¬è¦ç»§æ‰¿çš„æ˜¯ç°æœ‰æ§ä»¶çš„è¯ï¼Œå°±éœ€è¦è€ƒè™‘åº”è¯¥å¦‚ä½•è®¾ç½®é»˜è®¤å€¼äº†</p><h1 id="æ…ç”¨-è§£æ„å£°æ˜" tabindex="-1"><a class="header-anchor" href="#æ…ç”¨-è§£æ„å£°æ˜" aria-hidden="true">#</a> æ…ç”¨ è§£æ„å£°æ˜</h1><p>æœ‰æ—¶æˆ‘ä»¬ä¼šæœ‰æŠŠä¸€ä¸ªå¯¹è±¡æ‹†è§£æˆå¤šä¸ªå˜é‡çš„éœ€æ±‚ï¼ŒKotlin ä¹Ÿæä¾›äº†è¿™ç±»è¯­æ³•ç³–æ”¯æŒï¼Œç§°ä¸ºè§£æ„å£°æ˜</p><p>ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç å°±å°† People å˜é‡è§£æ„ä¸ºäº†ä¸¤ä¸ªå˜é‡ï¼šname å’Œ nicknameï¼Œå˜é‡åå¯ä»¥éšæ„å–ï¼Œæ¯ä¸ªå˜é‡å°±æŒ‰é¡ºåºå¯¹åº”ç€ People ä¸­çš„å­—æ®µ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>data <span class="token keyword">class</span> <span class="token class-name">People</span><span class="token punctuation">(</span>val name<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> val nickname<span class="token operator">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span>

<span class="token keyword">private</span> fun <span class="token function">printInfo</span><span class="token punctuation">(</span>people<span class="token operator">:</span> <span class="token class-name">People</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    val <span class="token punctuation">(</span>name<span class="token punctuation">,</span> nickname<span class="token punctuation">)</span> <span class="token operator">=</span> people
    <span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span>nickname<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¯ä¸ªè§£æ„å£°æ˜å…¶å®éƒ½ä¼šè¢«ç¼–è¯‘æˆä»¥ä¸‹ä»£ç ï¼Œè§£æ„æ“ä½œå…¶å®å°±æ˜¯åœ¨æŒ‰ç…§é¡ºåºè·å–ç‰¹å®šæ–¹æ³•çš„è¿”å›å€¼</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">String</span> name <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token function">component1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">String</span> nickname <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token function">component2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>component1()</code> å’Œ <code>component2()</code> å‡½æ•°æ˜¯ Kotlin ä¸ºæ•°æ®ç±»è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•ï¼ŒPeople åç¼–è¯‘ä¸º Java ä»£ç åå°±å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸ªæ–¹æ³•è¿”å›çš„å…¶å®éƒ½æ˜¯æˆå‘˜å˜é‡ï¼Œæ–¹æ³•ååŒ…å«çš„æ•°å­—å¯¹åº”çš„å°±æ˜¯æˆå‘˜å˜é‡åœ¨æ•°æ®ç±»ä¸­çš„å£°æ˜é¡ºåº</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">People</span> <span class="token punctuation">{</span>
   <span class="token annotation punctuation">@NotNull</span>
   <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
   <span class="token annotation punctuation">@NotNull</span>
   <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> nickname<span class="token punctuation">;</span>

   <span class="token annotation punctuation">@NotNull</span>
   <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token function">component1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token annotation punctuation">@NotNull</span>
   <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token function">component2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nickname<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è§£æ„å£°æ˜å’Œæ•°æ®ç±»é…å¥—ä½¿ç”¨æ—¶å°±æœ‰ä¸€ä¸ªéšè—çš„çŸ¥è¯†ç‚¹ï¼Œçœ‹ä»¥ä¸‹ä¾‹å­</p><p>å‡è®¾åç»­æˆ‘ä»¬ä¸º People æ·»åŠ äº†ä¸€ä¸ªæ–°å­—æ®µ cityï¼Œæ­¤æ—¶ <code>printInfo</code> æ–¹æ³•ä¸€æ ·å¯ä»¥æ­£å¸¸è°ƒç”¨ï¼Œä½† nickname æŒ‡å‘çš„å…¶å®å°±å˜æˆäº† people å˜é‡å†…çš„ city å­—æ®µäº†ï¼Œå«ä¹‰æ‚„æ‚„å‘ç”Ÿäº†å˜åŒ–ï¼Œæ­¤æ—¶å°±ä¼šå¯¼è‡´é€»è¾‘é”™è¯¯äº†</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">data</span> <span class="token keyword">class</span> <span class="token function">People</span><span class="token punctuation">(</span><span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">val</span> city<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">val</span> nickname<span class="token operator">:</span> String<span class="token punctuation">)</span>

<span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">printInfo</span><span class="token punctuation">(</span>people<span class="token operator">:</span> People<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span> nickname<span class="token punctuation">)</span> <span class="token operator">=</span> people
    <span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span>nickname<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ•°æ®ç±»ä¸­çš„å­—æ®µæ˜¯å¯ä»¥éšæ—¶å¢å‡æˆ–è€…å˜æ¢ä½ç½®çš„ï¼Œä»è€Œä½¿å¾—è§£æ„ç»“æœå’Œæˆ‘ä»¬ä¸€å¼€å§‹é¢„æƒ³çš„ä¸ä¸€è‡´ï¼Œå› æ­¤æˆ‘è§‰å¾—è§£æ„å£°æ˜å’Œæ•°æ®ç±»ä¸å¤ªé€‚åˆæ”¾åœ¨ä¸€èµ·ä½¿ç”¨</p><h1 id="æ…ç”¨-tolowercase-å’Œ-touppercase" tabindex="-1"><a class="header-anchor" href="#æ…ç”¨-tolowercase-å’Œ-touppercase" aria-hidden="true">#</a> æ…ç”¨ toLowerCase å’Œ toUpperCase</h1><p>å½“æˆ‘ä»¬è¦ä»¥å¿½ç•¥å¤§å°å†™çš„æ–¹å¼æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰æ—¶ï¼Œé€šå¸¸æƒ³åˆ°çš„æ˜¯é€šè¿‡ <code>toUpperCase</code> æˆ– <code>toLowerCase</code> æ–¹æ³•å°†ä¸¤ä¸ªå­—ç¬¦ä¸²è½¬æ¢ä¸ºå…¨å¤§å†™æˆ–è€…å…¨å°å†™ï¼Œç„¶åå†è¿›è¡Œæ¯”è¾ƒï¼Œè¿™ç§æ–¹å¼å®Œå…¨å¯ä»¥æ»¡è¶³éœ€æ±‚ï¼Œä½†å½“ä¸­ä¹ŸåŒ…å«ç€ä¸€ä¸ªéšè—å¼€é”€</p><p>ä¾‹å¦‚ï¼Œä»¥ä¸‹çš„ Kotlin ä»£ç åç¼–è¯‘ä¸º Java ä»£ç åï¼Œå¯ä»¥çœ‹åˆ°æ¯æ¬¡è°ƒç”¨<code>toUpperCase</code>æ–¹æ³•éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ä¸´æ—¶å˜é‡ï¼Œç„¶åå†å»è°ƒç”¨ä¸´æ—¶å˜é‡çš„ <code>equals</code> æ–¹æ³•è¿›è¡Œæ¯”è¾ƒ</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> name <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;leavesC&quot;</span></span>
    <span class="token keyword">val</span> nickname <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;leavesc&quot;</span></span>
    <span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> nickname<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> static <span class="token keyword">final</span> void <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    String name <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;leavesC&quot;</span></span><span class="token punctuation">;</span>
    String nickname <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;leavesc&quot;</span></span><span class="token punctuation">;</span>
    String var10000 <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    String var10001 <span class="token operator">=</span> nickname<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    boolean var2 <span class="token operator">=</span> Intrinsics<span class="token punctuation">.</span><span class="token function">areEqual</span><span class="token punctuation">(</span>var10000<span class="token punctuation">,</span> var10001<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>var2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥ä¸Šä»£ç å°±å¤šåˆ›å»ºäº†ä¸¤ä¸ªä¸´æ—¶å˜é‡ï¼Œè¿™æ ·çš„ä»£ç æ— ç–‘ä¼šæ¯”è¾ƒä½æ•ˆ</p><p>æœ‰ä¸€ä¸ªæ›´å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œå°±æ˜¯é€šè¿‡ Kotlin æä¾›çš„æ”¯æŒå¿½ç•¥å¤§å°å†™çš„ <code>equals</code> æ‰©å±•æ–¹æ³•æ¥è¿›è¡Œæ¯”è¾ƒï¼Œæ­¤æ–¹æ³•å†…éƒ¨ä¼šè°ƒç”¨ String ç±»åŸç”Ÿçš„ <code>equalsIgnoreCase</code>æ¥è¿›è¡Œæ¯”è¾ƒï¼Œä»è€Œé¿å…äº†åˆ›å»ºä¸´æ—¶å˜é‡ï¼Œç›¸å¯¹æ¥è¯´ä¼šæ¯”è¾ƒé«˜æ•ˆä¸€äº›</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> name <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;leavesC&quot;</span></span>
    <span class="token keyword">val</span> nickname <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;leavesc&quot;</span></span>
    <span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>other <span class="token operator">=</span> nickname<span class="token punctuation">,</span> ignoreCase <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> static <span class="token keyword">final</span> void <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    String name <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;leavesC&quot;</span></span><span class="token punctuation">;</span>
    String nickname <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;leavesc&quot;</span></span><span class="token punctuation">;</span>
    boolean var2 <span class="token operator">=</span> StringsKt<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> nickname<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    boolean var3 <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>var2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="æ…ç”¨-arrayof" tabindex="-1"><a class="header-anchor" href="#æ…ç”¨-arrayof" aria-hidden="true">#</a> æ…ç”¨ arrayOf</h1><p>Kotlin ä¸­çš„æ•°ç»„ç±»å‹å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š</p><ul><li><code>IntArrayã€LongArrayã€FloatArray</code> å½¢å¼çš„<strong>åŸºæœ¬æ•°æ®ç±»å‹æ•°ç»„</strong>ï¼Œé€šè¿‡ <code>intArrayOfã€longArrayOfã€floatArrayOf</code> ç­‰æ–¹æ³•æ¥å£°æ˜</li><li><code>Array&lt;T&gt;</code> å½¢å¼çš„<strong>å¯¹è±¡ç±»å‹æ•°ç»„</strong>ï¼Œé€šè¿‡ <code>arrayOfã€arrayOfNulls</code> ç­‰æ–¹æ³•æ¥å£°æ˜</li></ul><p>ä¾‹å¦‚ï¼Œä»¥ä¸‹çš„ Kotlin ä»£ç éƒ½æ˜¯ç”¨äºå£°æ˜æ•´æ•°æ•°ç»„ï¼Œä½†å®é™…ä¸Šå­˜å‚¨çš„æ•°æ®ç±»å‹å¹¶ä¸ä¸€æ ·</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">val</span> intArray<span class="token operator">:</span> IntArray <span class="token operator">=</span> <span class="token function">intArrayOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>

<span class="token keyword">val</span> integerArray<span class="token operator">:</span> Array<span class="token operator">&lt;</span>Int<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token function">arrayOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†ä»¥ä¸Šä»£ç åç¼–è¯‘ä¸º Java ä»£ç åï¼Œå°±å¯ä»¥æ˜ç¡®åœ°çœ‹å‡ºä¸€ç§æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ intï¼Œä¸€ç§æ˜¯åŒ…è£…ç±»å‹ Integerï¼Œ<code>arrayOf</code> æ–¹æ³•ä¼šè‡ªåŠ¨å¯¹å…¥å‚å€¼è¿›è¡Œ<strong>è£…ç®±</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> intArray <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> integerArray <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸ºäº†è¡¨ç¤ºåŸºæœ¬æ•°æ®ç±»å‹çš„æ•°ç»„ï¼ŒKotlin ä¸ºæ¯ä¸€ç§åŸºæœ¬æ•°æ®ç±»å‹éƒ½æä¾›äº†è‹¥å¹²ç›¸åº”çš„ç±»å¹¶åšäº†ç‰¹æ®Šçš„ä¼˜åŒ–ã€‚ä¾‹å¦‚ï¼Œ<code>IntArrayã€ByteArrayã€BooleanArray</code> ç­‰ç±»å‹éƒ½ä¼šè¢«ç¼–è¯‘æˆæ™®é€šçš„ Java åŸºæœ¬æ•°æ®ç±»å‹æ•°ç»„ï¼š<code>int[]ã€byte[]ã€boolean[]</code>ï¼Œè¿™äº›æ•°ç»„ä¸­çš„å€¼åœ¨å­˜å‚¨æ—¶ä¸ä¼šè¿›è¡Œè£…ç®±æ“ä½œï¼Œè€Œæ˜¯ä½¿ç”¨äº†å¯èƒ½çš„æœ€é«˜æ•ˆçš„æ–¹å¼</p><p>å› æ­¤ï¼Œå¦‚æœæ²¡æœ‰å¿…è¦çš„è¯ï¼Œæˆ‘ä»¬åœ¨å¼€å‘ä¸­è¦æ…ç”¨ <code>arrayOf</code> æ–¹æ³•ï¼Œé¿å…ä¸å¿…è¦çš„è£…ç®±æ¶ˆè€—</p><h1 id="æ…ç”¨-vararg" tabindex="-1"><a class="header-anchor" href="#æ…ç”¨-vararg" aria-hidden="true">#</a> æ…ç”¨ vararg</h1><p>å’Œ Java ä¸€æ ·ï¼ŒKotlin ä¹Ÿæ”¯æŒå¯å˜å‚æ•°ï¼Œå…è®¸å°†ä»»æ„å¤šä¸ªå‚æ•°æ‰“åŒ…åˆ°ä¸€ä¸ªæ•°ç»„ä¸­å†ä¸€å¹¶ä¼ ç»™å‡½æ•°ï¼ŒKotlin é€šè¿‡ä½¿ç”¨ varage å…³é”®å­—æ¥å£°æ˜å¯å˜å‚æ•°</p><p>æˆ‘ä»¬å¯ä»¥å‘ <code>printValue</code> æ–¹æ³•ä¼ é€’ä»»æ„æ•°é‡çš„å…¥å‚å‚æ•°ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä¼ å…¥ä¸€ä¸ªæ•°ç»„å¯¹è±¡ï¼Œä½† Kotlin è¦æ±‚æ˜¾å¼åœ°è§£åŒ…æ•°ç»„ï¼Œä»¥ä¾¿æ¯ä¸ªæ•°ç»„å…ƒç´ åœ¨å‡½æ•°ä¸­èƒ½å¤Ÿä½œä¸ºå•ç‹¬çš„å‚æ•°æ¥è°ƒç”¨ï¼Œè¿™ä¸ªåŠŸèƒ½è¢«ç§°ä¸ºå±•å¼€è¿ç®—ç¬¦ï¼Œä½¿ç”¨æ–¹å¼å°±æ˜¯åœ¨æ•°ç»„å‰åŠ ä¸€ä¸ª *</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">printValue</span><span class="token punctuation">(</span><span class="token keyword">vararg</span> values<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    values<span class="token punctuation">.</span><span class="token function">forEach</span> <span class="token punctuation">{</span>
        <span class="token function">println</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">printValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">printValue</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token function">printValue</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> values <span class="token operator">=</span> <span class="token function">intArrayOf</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
    <span class="token function">printValue</span><span class="token punctuation">(</span><span class="token operator">*</span>values<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœæˆ‘ä»¬æ˜¯ä»¥ç›´æ¥ä¼ é€’è‹¥å¹²ä¸ªå…¥å‚å‚æ•°çš„å½¢å¼æ¥è°ƒç”¨ <code>printValue</code> æ–¹æ³•çš„è¯ï¼ŒKotlin ä¼šè‡ªåŠ¨å°†è¿™äº›å‚æ•°æ‰“åŒ…ä¸ºä¸€ä¸ªæ•°ç»„è¿›è¡Œä¼ é€’ï¼Œè¿™é‡Œé¢å°±åŒ…å«ç€åˆ›å»ºæ•°ç»„çš„å¼€é”€ï¼Œè¿™æ–¹é¢å’Œ Java ä¿æŒä¸€è‡´ã€‚ å¦‚æœæˆ‘ä»¬ä¼ å…¥çš„å‚æ•°å°±å·²ç»æ˜¯æ•°ç»„çš„è¯ï¼ŒKotlin ç›¸æ¯” Java å°±å­˜åœ¨ç€ä¸€ä¸ªéšè—å¼€é”€ï¼ŒKotlin ä¼šå¤åˆ¶ç°æœ‰æ•°ç»„ä½œä¸ºå‚æ•°æ‹¿æ¥ä½¿ç”¨ï¼Œç›¸å½“äºå¤šåˆ†é…äº†é¢å¤–çš„æ•°ç»„ç©ºé—´ï¼Œè¿™å¯ä»¥ä»åç¼–è¯‘åçš„ Java ä»£ç çœ‹å‡ºæ¥</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">printValue</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NotNull</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> values<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token class-name">Intrinsics</span><span class="token punctuation">.</span><span class="token function">checkNotNullParameter</span><span class="token punctuation">(</span>values<span class="token punctuation">,</span> <span class="token string">&quot;values&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  	<span class="token keyword">int</span> $i$f$forEach <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  	<span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> var3 <span class="token operator">=</span> values<span class="token punctuation">;</span>
  	<span class="token keyword">int</span> var4 <span class="token operator">=</span> values<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

  	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> var5 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> var5 <span class="token operator">&lt;</span> var4<span class="token punctuation">;</span> <span class="token operator">++</span>var5<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     	<span class="token keyword">int</span> element$iv <span class="token operator">=</span> var3<span class="token punctuation">[</span>var5<span class="token punctuation">]</span><span class="token punctuation">;</span>
     	<span class="token keyword">int</span> var8 <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
     	<span class="token keyword">boolean</span> var9 <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
     	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>element$iv<span class="token punctuation">)</span><span class="token punctuation">;</span>
  	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token function">printValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  	<span class="token function">printValue</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  	<span class="token function">printValue</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  	<span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> values <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  	<span class="token comment">//å¤åˆ¶åå†è¿›è¡Œè°ƒç”¨</span>
  	<span class="token function">printValue</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>values<span class="token punctuation">,</span> values<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// $FF: synthetic method</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> var0<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ° Kotlin ä¼šé€šè¿‡ <code>Arrays.copyOf</code> å¤åˆ¶ç°æœ‰æ•°ç»„ï¼Œå°†å¤åˆ¶åçš„æ•°ç»„ä½œä¸ºå‚æ•°è¿›è¡Œè°ƒç”¨ï¼Œè¿™æ ·åšçš„å¥½å¤„å°±æ˜¯å¯ä»¥é¿å… <code>printValue</code> æ–¹æ³•å½±å“åˆ°åŸæœ‰æ•°ç»„ï¼Œåå¤„å°±æ˜¯ä¼šé¢å¤–æ¶ˆè€—å¤šä¸€ä»½çš„å†…å­˜ç©ºé—´</p><h1 id="æ…ç”¨-lazy" tabindex="-1"><a class="header-anchor" href="#æ…ç”¨-lazy" aria-hidden="true">#</a> æ…ç”¨ lazy</h1><p>æˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨<code>lazy()</code>å‡½æ•°æ¥æƒ°æ€§åŠ è½½åªè¯»å±æ€§ï¼Œå°†åŠ è½½æ“ä½œå»¶è¿Ÿåˆ°éœ€è¦ä½¿ç”¨çš„æ—¶å€™ï¼Œé€‚ç”¨äºæŸäº›ä¸é€‚åˆç«‹åˆ»åŠ è½½æˆ–è€…åŠ è½½æˆæœ¬è¾ƒé«˜çš„æƒ…å†µ</p><p>ä¾‹å¦‚ï¼Œä»¥ä¸‹çš„ <code>lazyValue</code> åªä¼šç­‰åˆ°æˆ‘ä»¬è°ƒç”¨åˆ°çš„æ—¶å€™æ‰ä¼šè¢«èµ‹å€¼</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">val</span> lazyValue <span class="token keyword">by</span> lazy <span class="token punctuation">{</span>
    <span class="token string-literal singleline"><span class="token string">&quot;it is lazy value&quot;</span></span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è€Œåœ¨ä½¿ç”¨<code>lazy()</code>å‡½æ•°æ—¶å¾ˆå®¹æ˜“è¢«å¿½ç•¥çš„åœ°æ–¹å°±æ˜¯å…¶åŒ…å«æœ‰ä¸€ä¸ªå¯é€‰çš„ model å‚æ•°ï¼š</p><ul><li>LazyThreadSafetyMode.SYNCHRONIZEDã€‚åªå…è®¸ç”±å•ä¸ªçº¿ç¨‹æ¥å®Œæˆåˆå§‹åŒ–ï¼Œä¸”åˆå§‹åŒ–æ“ä½œåŒ…å«æœ‰åŒé‡é”æ£€æŸ¥ï¼Œä»è€Œä½¿å¾—æ‰€æœ‰çº¿ç¨‹éƒ½å¾—åˆ°ç›¸åŒçš„å€¼</li><li>LazyThreadSafetyMode.PUBLICATIONã€‚å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œåˆå§‹åŒ–æ“ä½œï¼Œä½†åªæœ‰ç¬¬ä¸€ä¸ªåˆå§‹åŒ–æˆåŠŸçš„å€¼ä¼šè¢«å½“åšæœ€ç»ˆå€¼ï¼Œæœ€ç»ˆæ‰€æœ‰çº¿ç¨‹ä¹Ÿéƒ½ä¼šå¾—åˆ°ç›¸åŒçš„å€¼</li><li>LazyThreadSafetyMode.NONEã€‚å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œåˆå§‹åŒ–æ“ä½œï¼Œä¸è¿›è¡Œä»»ä½•çº¿ç¨‹åŒæ­¥ï¼Œå¯¼è‡´ä¸åŒçº¿ç¨‹å¯èƒ½ä¼šå¾—åˆ°ä¸åŒçš„åˆå§‹åŒ–å€¼ï¼Œå› æ­¤ä¸åº”è¯¥ç”¨äºå¤šçº¿ç¨‹ç¯å¢ƒ</li></ul><p><code>lazy()</code>å‡½æ•°é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨çš„å°±æ˜¯<code>LazyThreadSafetyMode.SYNCHRONIZED</code>ï¼Œä» SynchronizedLazyImpl å¯ä»¥çœ‹åˆ°ï¼Œå…¶å†…éƒ¨å°±ä½¿ç”¨åˆ°äº†<code>synchronized</code>æ¥å®ç°å¤šçº¿ç¨‹åŒæ­¥ï¼Œä»¥æ­¤é¿å…å¤šçº¿ç¨‹ç«äº‰</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">public</span> <span class="token keyword">actual</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token function">lazy</span><span class="token punctuation">(</span>initializer<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> T<span class="token punctuation">)</span><span class="token operator">:</span> Lazy<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token function">SynchronizedLazyImpl</span><span class="token punctuation">(</span>initializer<span class="token punctuation">)</span>

<span class="token keyword">private</span> <span class="token keyword">class</span> SynchronizedLazyImpl<span class="token operator">&lt;</span><span class="token keyword">out</span> T<span class="token operator">&gt;</span><span class="token punctuation">(</span>initializer<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> T<span class="token punctuation">,</span> lock<span class="token operator">:</span> Any<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">:</span> Lazy<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">,</span> Serializable <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">var</span> initializer<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> T<span class="token punctuation">)</span><span class="token operator">?</span> <span class="token operator">=</span> initializer
    <span class="token annotation builtin">@Volatile</span> <span class="token keyword">private</span> <span class="token keyword">var</span> _value<span class="token operator">:</span> Any<span class="token operator">?</span> <span class="token operator">=</span> UNINITIALIZED_VALUE
    <span class="token comment">// final field is required to enable safe publication of constructed instance</span>
    <span class="token keyword">private</span> <span class="token keyword">val</span> lock <span class="token operator">=</span> lock <span class="token operator">?:</span> <span class="token keyword">this</span>

    <span class="token keyword">override</span> <span class="token keyword">val</span> value<span class="token operator">:</span> T
        <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">val</span> _v1 <span class="token operator">=</span> _value
            <span class="token keyword">if</span> <span class="token punctuation">(</span>_v1 <span class="token operator">!==</span> UNINITIALIZED_VALUE<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token annotation builtin">@Suppress</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;UNCHECKED_CAST&quot;</span></span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> _v1 <span class="token keyword">as</span> T
            <span class="token punctuation">}</span>

            <span class="token keyword">return</span> <span class="token function">synchronized</span><span class="token punctuation">(</span>lock<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">val</span> _v2 <span class="token operator">=</span> _value
                <span class="token keyword">if</span> <span class="token punctuation">(</span>_v2 <span class="token operator">!==</span> UNINITIALIZED_VALUE<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token annotation builtin">@Suppress</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;UNCHECKED_CAST&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">(</span>_v2 <span class="token keyword">as</span> T<span class="token punctuation">)</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token keyword">val</span> typedValue <span class="token operator">=</span> initializer<span class="token operator">!!</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    _value <span class="token operator">=</span> typedValue
                    initializer <span class="token operator">=</span> <span class="token keyword">null</span>
                    typedValue
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">isInitialized</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Boolean <span class="token operator">=</span> _value <span class="token operator">!==</span> UNINITIALIZED_VALUE

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token operator">=</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isInitialized</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> value<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token string-literal singleline"><span class="token string">&quot;Lazy value not initialized yet.&quot;</span></span>

    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">writeReplace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Any <span class="token operator">=</span> <span class="token function">InitializedLazyImpl</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹äº Android å¼€å‘è€…æ¥è¯´ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬éƒ½æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­è°ƒç”¨ <code>lazy()</code> å‡½æ•°ï¼Œæ­¤æ—¶ä½¿ç”¨ <code>LazyThreadSafetyMode.SYNCHRONIZED</code> å°±ä¼šå¸¦æ¥ä¸å¿…è¦çš„çº¿ç¨‹åŒæ­¥å¼€é”€ï¼Œå› æ­¤å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè€ƒè™‘æ›¿æ¢ä¸º<code>LazyThreadSafetyMode.NONE</code></p><h1 id="æ…ç”¨-lateinit-var" tabindex="-1"><a class="header-anchor" href="#æ…ç”¨-lateinit-var" aria-hidden="true">#</a> æ…ç”¨ lateinit var</h1><p>lateinit var é€‚ç”¨äºæŸäº›ä¸æ–¹ä¾¿é©¬ä¸Šå°±åˆå§‹åŒ–å˜é‡çš„åœºæ™¯ï¼Œç”¨äºå°†åˆå§‹åŒ–æ“ä½œå»¶åï¼ŒåŒæ—¶ä¹Ÿå­˜åœ¨ä¸€äº›ä½¿ç”¨ä¸Šçš„é™åˆ¶ï¼šå¦‚æœåœ¨æœªåˆå§‹åŒ–çš„æƒ…å†µä¸‹å°±ä½¿ç”¨è¯¥å˜é‡çš„è¯ä¼šå¯¼è‡´ NPE</p><p>ä¾‹å¦‚ï¼Œå¦‚æœåœ¨ name å˜é‡è¿˜æœªåˆå§‹åŒ–æ—¶å°±è°ƒç”¨äº† <code>print</code> æ–¹æ³•çš„è¯ï¼Œæ­¤æ—¶å°±ä¼šå¯¼è‡´ NPEã€‚ä¸”ç”±äº lateinit var å˜é‡ä¸å…è®¸ä¸º nullï¼Œå› æ­¤æ­¤æ—¶æˆ‘ä»¬ä¹Ÿæ— æ³•é€šè¿‡åˆ¤ç©ºæ¥å¾—çŸ¥ name æ˜¯å¦å·²ç»è¢«åˆå§‹åŒ–äº†ï¼Œè€Œä¸”åˆ¤ç©ºæ“ä½œæœ¬èº«ä¹Ÿç›¸å½“äºåœ¨è°ƒç”¨ name å˜é‡ï¼Œåœ¨æœªåˆå§‹åŒ–çš„æ—¶å€™ä¸€æ ·ä¼šå¯¼è‡´ NPE</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">lateinit</span> <span class="token keyword">var</span> name<span class="token operator">:</span> String

<span class="token keyword">fun</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å¦ä¸€ç§æ–¹å¼æ¥åˆ¤æ–­ lateinit å˜é‡æ˜¯å¦å·²åˆå§‹åŒ–</p><p>lateinit å®é™…ä¸Šæ˜¯é€šè¿‡ä»£ç†æœºåˆ¶æ¥å®ç°çš„ï¼Œå…³è”çš„æ˜¯ KProperty0 æ¥å£ï¼ŒKProperty0 å°±æä¾›äº†ä¸€ä¸ªæ‰©å±•å±æ€§ç”¨äºåˆ¤æ–­å…¶ä»£ç†çš„å€¼æ˜¯å¦å·²ç»åˆå§‹åŒ–äº†</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token annotation builtin">@SinceKotlin</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;1.2&quot;</span></span><span class="token punctuation">)</span>
<span class="token annotation builtin">@InlineOnly</span>
<span class="token keyword">inline</span> <span class="token keyword">val</span> <span class="token annotation builtin">@receiver:AccessibleLateinitPropertyLiteral</span> KProperty0<span class="token operator">&lt;</span><span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">.</span>isInitialized<span class="token operator">:</span> Boolean
    <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">throw</span> <span class="token function">NotImplementedError</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;Implementation is intrinsic&quot;</span></span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥è¿›è¡Œåˆ¤æ–­ï¼Œä»è€Œé¿å…ä¸å®‰å…¨çš„è®¿é—®æ“ä½œ</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">lateinit</span> <span class="token keyword">var</span> name<span class="token operator">:</span> String

<span class="token keyword">fun</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">::</span>name<span class="token punctuation">.</span>isInitialized<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;isInitialized true&quot;</span></span><span class="token punctuation">)</span>
        <span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;isInitialized false&quot;</span></span><span class="token punctuation">)</span>
        <span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token comment">//ä¼šå¯¼è‡´ NPE</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="lambda-è¡¨è¾¾å¼" tabindex="-1"><a class="header-anchor" href="#lambda-è¡¨è¾¾å¼" aria-hidden="true">#</a> lambda è¡¨è¾¾å¼</h1><p>lambda è¡¨è¾¾å¼åœ¨è¯­ä¹‰ä¸Šå¾ˆç®€æ´ï¼Œæ—¢é¿å…äº†å†—é•¿çš„å‡½æ•°å£°æ˜ï¼Œä¹Ÿè§£å†³äº†ä»¥å‰éœ€è¦å¼ºç±»å‹å£°æ˜å‡½æ•°ç±»å‹çš„æƒ…å†µ</p><p>ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç å°±é€šè¿‡ lambda è¡¨è¾¾å¼å£°æ˜äº†ä¸€ä¸ªå›è°ƒå‡½æ•° callbackï¼Œæˆ‘ä»¬æ— éœ€åˆ›å»ºä¸€ä¸ªå…·ä½“çš„å‡½æ•°ç±»å‹ï¼Œè€Œåªéœ€å£°æ˜éœ€è¦çš„<strong>å…¥å‚å‚æ•°ã€å…¥å‚ç±»å‹ã€å‡½æ•°è¿”å›å€¼</strong>å°±å¯ä»¥</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">requestHttp</span><span class="token punctuation">(</span>callback<span class="token operator">:</span> <span class="token punctuation">(</span>code<span class="token operator">:</span> Int<span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;success&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    requestHttp <span class="token punctuation">{</span> code<span class="token punctuation">,</span> <span class="token keyword">data</span> <span class="token operator">-&gt;</span>
        <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;code: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">code</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;data: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression"><span class="token keyword">data</span></span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>lambda è¡¨è¾¾å¼è¯­æ³•è™½ç„¶æ–¹ä¾¿ï¼Œä½†ä¹Ÿéšè—ç€ä¸¤ä¸ªæ€§èƒ½é—®é¢˜ï¼š</p><ul><li>æ¯æ¬¡è°ƒç”¨ lambda è¡¨è¾¾å¼éƒ½ç›¸å½“äºåœ¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡</li><li>lambda è¡¨è¾¾å¼å†…éƒ¨éšè—äº†è‡ªåŠ¨è£…ç®±å’Œè‡ªåŠ¨æ‹†ç®±çš„æ“ä½œ</li></ul><p>å°†ä»¥ä¸Šä»£ç åç¼–è¯‘ä¸º Java ä»£ç åï¼Œå¯ä»¥çœ‹åˆ° callback æœ€ç»ˆçš„å®é™…ç±»å‹å°±æ˜¯ Function2ï¼Œæ¯æ¬¡è°ƒç”¨<code>requestHttp</code> æ–¹æ³•å°±ç›¸å½“äºæ˜¯åœ¨åˆ›å»ºä¸€ä¸ª Function2 å˜é‡</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">requestHttp</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NotNull</span> <span class="token class-name">Function2</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">Intrinsics</span><span class="token punctuation">.</span><span class="token function">checkNotNullParameter</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	callback<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Function2 æ˜¯ Kotlin æä¾›çš„ä¸€ä¸ªçš„æ³›å‹æ¥å£ï¼Œæ•°å­— 2 å³ä»£è¡¨å…¶åŒ…å«ä¸¤ä¸ªå…¥å‚å€¼</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> Function2<span class="token operator">&lt;</span><span class="token keyword">in</span> P1<span class="token punctuation">,</span> <span class="token keyword">in</span> P2<span class="token punctuation">,</span> <span class="token keyword">out</span> R<span class="token operator">&gt;</span> <span class="token operator">:</span> Function<span class="token operator">&lt;</span>R<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">/** Invokes the function with the specified arguments. */</span>
    <span class="token keyword">public</span> <span class="token keyword">operator</span> <span class="token keyword">fun</span> <span class="token function">invoke</span><span class="token punctuation">(</span>p1<span class="token operator">:</span> P1<span class="token punctuation">,</span> p2<span class="token operator">:</span> P2<span class="token punctuation">)</span><span class="token operator">:</span> R
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Kotlin ä¼šåœ¨ç¼–è¯‘é˜¶æ®µå°†å¼€å‘è€…å£°æ˜çš„ lambda è¡¨è¾¾å¼è½¬æ¢ä¸ºç›¸åº”çš„ FunctionX å¯¹è±¡ï¼Œè°ƒç”¨ lambda è¡¨è¾¾å¼å°±ç›¸å½“äºåœ¨è°ƒç”¨å…¶ <code>invoke</code> æ–¹æ³•ï¼Œä»¥æ­¤ä¸ºä½ç‰ˆæœ¬ JVM å¹³å°ï¼ˆä¾‹å¦‚ Java 6 / 7ï¼‰ä¹Ÿèƒ½æä¾› lambda è¡¨è¾¾å¼åŠŸèƒ½ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬ä¹ŸçŸ¥é“æ³›å‹ç±»å‹ä¸å¯èƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå› æ­¤æˆ‘ä»¬åœ¨ Kotlin ä¸­å£°æ˜çš„ Int æœ€ç»ˆä¼šè¢«è‡ªåŠ¨è£…ç®±ä¸º Integerï¼Œlambda è¡¨è¾¾å¼å†…éƒ¨è‡ªåŠ¨å®Œæˆäº†è£…ç®±å’Œæ‹†ç®±çš„æ“ä½œ</p><p>æ‰€ä»¥è¯´ï¼Œç®€æ´çš„ lambda è¡¨è¾¾å¼èƒŒåå°±éšè—äº†<strong>è‡ªåŠ¨åˆ›å»º Function å¯¹è±¡è¿›è¡Œä¸­è½¬è°ƒç”¨ï¼Œè‡ªåŠ¨è£…ç®±å’Œè‡ªåŠ¨æ‹†ç®±çš„è¿‡ç¨‹ï¼Œä¸”æœ€ç»ˆåˆ›å»ºçš„æ–¹æ³•æ€»æ•°è¦å¤šäºè¡¨é¢ä¸Šçœ‹åˆ°çš„</strong></p><p>å¦‚æœæƒ³è¦é¿å… lambda è¡¨è¾¾å¼çš„ä»¥ä¸Šå¼€é”€ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨ inline å†…è”å‡½æ•°æ¥å®ç°</p><p>åœ¨ä½¿ç”¨ inline å…³é”®å­—ä¿®é¥° <code>requestHttp</code> æ–¹æ³•åï¼Œå¯ä»¥çœ‹åˆ°æ­¤æ—¶ <code>requestHttp</code> çš„é€»è¾‘å°±ç›¸å½“äºè¢«ç›´æ¥å¤åˆ¶åˆ°äº† <code>main</code> æ–¹æ³•å†…éƒ¨ï¼Œä¸ä¼šåˆ›å»ºä»»ä½•å¤šä½™çš„å¯¹è±¡ï¼Œä¸”æ­¤æ—¶ä½¿ç”¨çš„ä¹Ÿæ˜¯ int è€Œé Integer</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token function">requestHttp</span><span class="token punctuation">(</span>callback<span class="token operator">:</span> <span class="token punctuation">(</span>code<span class="token operator">:</span> Int<span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;success&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    requestHttp <span class="token punctuation">{</span> code<span class="token punctuation">,</span> <span class="token keyword">data</span> <span class="token operator">-&gt;</span>
        <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;code: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">code</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;data: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression"><span class="token keyword">data</span></span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">String</span> data <span class="token operator">=</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> code <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
	<span class="token class-name">String</span> var4 <span class="token operator">=</span> <span class="token string">&quot;code: &quot;</span> <span class="token operator">+</span> code<span class="token punctuation">;</span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>var4<span class="token punctuation">)</span><span class="token punctuation">;</span>
	var4 <span class="token operator">=</span> <span class="token string">&quot;data: &quot;</span> <span class="token operator">+</span> data<span class="token punctuation">;</span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>var4<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡å†…è”å‡½æ•°ï¼Œå¯ä»¥ä½¿å¾—ç¼–è¯‘å™¨ç›´æ¥åœ¨è°ƒç”¨æ–¹ä¸­ä½¿ç”¨å†…è”å‡½æ•°ä½“ä¸­çš„ä»£ç ï¼Œç›¸å½“äºç›´æ¥æŠŠå†…è”å‡½æ•°ä¸­çš„é€»è¾‘å¤åˆ¶åˆ°äº†è°ƒç”¨æ–¹ä¸­ï¼Œå®Œå…¨é¿å…äº†è°ƒç”¨å¸¦æ¥çš„å¼€é”€ã€‚å¯¹äºé«˜é˜¶å‡½æ•°ï¼Œä½œä¸ºå‚æ•°ä¼ é€’çš„ lambda è¡¨è¾¾å¼çš„ä¸»ä½“ä¹Ÿå°†è¢«å†…è”ï¼Œè¿™ä½¿å¾—ï¼š</p><ul><li>å£°æ˜å’Œè°ƒç”¨ lambda è¡¨è¾¾å¼æ—¶ï¼Œä¸ä¼šå®ä¾‹åŒ– Function å¯¹è±¡</li><li>æ²¡æœ‰è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±çš„æ“ä½œ</li><li>ä¸ä¼šå¯¼è‡´æ–¹æ³•æ•°å¢å¤šï¼Œä½†å¦‚æœå†…è”å‡½æ•°æ–¹æ³•ä½“è¾ƒå¤§ä¸”è¢«å¤šå¤„è°ƒç”¨çš„è¯ï¼Œå¯èƒ½å¯¼è‡´æœ€ç»ˆä»£ç é‡æ˜¾è‘—å¢åŠ </li></ul><h1 id="init-çš„å£°æ˜é¡ºåºå¾ˆé‡è¦" tabindex="-1"><a class="header-anchor" href="#init-çš„å£°æ˜é¡ºåºå¾ˆé‡è¦" aria-hidden="true">#</a> init çš„å£°æ˜é¡ºåºå¾ˆé‡è¦</h1><p>çœ‹ä»¥ä¸‹ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ init å—ä¸­è°ƒç”¨ parameter1ï¼Œå´æ— æ³•è°ƒç”¨ parameter2ï¼Œä» IDE çš„æç¤ºä¿¡æ¯ <code> Variable &#39;parameter2&#39; must be initialized</code>ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥ï¼Œå¯¹äº init å—æ¥è¯´ parameter2 æ­¤æ—¶è¿˜æœªèµ‹å€¼ï¼Œè‡ªç„¶å°±æ— æ³•ä½¿ç”¨äº†</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">class</span> KotlinMode <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">val</span> parameter1 <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;leavesC&quot;</span></span>

    <span class="token keyword">init</span> <span class="token punctuation">{</span>
        <span class="token function">println</span><span class="token punctuation">(</span>parameter1<span class="token punctuation">)</span>
        <span class="token comment">//error: Variable &#39;parameter2&#39; must be initialized</span>
        <span class="token comment">//println(parameter2)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">val</span> parameter2 <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;ä¸šå¿—é™ˆ&quot;</span></span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»åç¼–è¯‘å‡ºçš„ Java ä»£ç ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥ï¼Œç”±äº parameter2 æ˜¯å£°æ˜åœ¨ init å—ä¹‹åï¼Œæ‰€ä»¥ parameter2 çš„èµ‹å€¼æ“ä½œå…¶å®æ˜¯æ”¾åœ¨æ„é€ å‡½æ•°ä¸­çš„æœ€åé¢ï¼Œå› æ­¤ IDE çš„è¯­æ³•æ£€æŸ¥å™¨å°±ä¼šé˜»æ­¢æˆ‘ä»¬åœ¨ init å—ä¸­æ¥è°ƒç”¨ parameter2 äº†</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">KotlinMode</span> <span class="token punctuation">{</span>
   <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> parameter1 <span class="token operator">=</span> <span class="token string">&quot;leavesC&quot;</span><span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> parameter2<span class="token punctuation">;</span>

   <span class="token keyword">public</span> <span class="token class-name">KotlinMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">String</span> var1 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>parameter1<span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>var1<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>parameter2 <span class="token operator">=</span> <span class="token string">&quot;ä¸šå¿—é™ˆ&quot;</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>IDE ä¼šé˜»æ­¢å¼€å‘è€…å»è°ƒç”¨è¿˜æœªåˆå§‹åŒ–çš„å˜é‡ï¼Œé˜²æ­¢æˆ‘ä»¬å†™å‡ºä¸å®‰å…¨çš„ä»£ç ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ä»¥ä¸‹æ–¹å¼æ¥ç»•è¿‡è¯­æ³•æ£€æŸ¥ï¼Œä½†åŒæ—¶ä¹Ÿå†™å‡ºäº†ä¸å®‰å…¨çš„ä»£ç </p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ init å—ä¸­è°ƒç”¨ <code>print()</code> æ–¹æ³•çš„æ–¹å¼æ¥é—´æ¥è®¿é—® parameter2ï¼Œæ­¤æ—¶ä»£ç æ˜¯å¯ä»¥æ­£å¸¸ç¼–è¯‘çš„ï¼Œä½†æ­¤æ—¶ parameter2 ä¹Ÿåªä¼šä¸º null</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">class</span> KotlinMode <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">val</span> parameter1 <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;leavesC&quot;</span></span>

    <span class="token keyword">init</span> <span class="token punctuation">{</span>
        <span class="token function">println</span><span class="token punctuation">(</span>parameter1<span class="token punctuation">)</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">println</span><span class="token punctuation">(</span>parameter2<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">val</span> parameter2 <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;ä¸šå¿—é™ˆ&quot;</span></span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»åç¼–è¯‘å‡ºçš„ Java ä»£ç å¯ä»¥çœ‹å‡ºæ¥ï¼Œ<code>print()</code>æ–¹æ³•ä¾æ—§æ˜¯ä¼šåœ¨ parameter2 åˆå§‹åŒ–ä¹‹å‰è¢«è°ƒç”¨ï¼Œæ­¤æ—¶<code>print()</code>æ–¹æ³•è®¿é—®åˆ°çš„ parameter2 ä¹Ÿåªä¼šä¸º nullï¼Œä»è€Œå¼•å‘æ„æ–™ä¹‹å¤–çš„ NPE</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">KotlinMode</span> <span class="token punctuation">{</span>
   <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> parameter1 <span class="token operator">=</span> <span class="token string">&quot;leavesC&quot;</span><span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> parameter2<span class="token punctuation">;</span>

   <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">String</span> var1 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>parameter2<span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>var1<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">public</span> <span class="token class-name">KotlinMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">String</span> var1 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>parameter1<span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>var1<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>parameter2 <span class="token operator">=</span> <span class="token string">&quot;ä¸šå¿—é™ˆ&quot;</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰€ä»¥è¯´ï¼Œinit å—å’Œæˆå‘˜å˜é‡ä¹‹é—´çš„å£°æ˜é¡ºåºå†³å®šäº†åœ¨æ„é€ å‡½æ•°ä¸­çš„åˆå§‹åŒ–é¡ºåºï¼Œæˆ‘ä»¬åº”è¯¥å…ˆå£°æ˜æˆå‘˜å˜é‡å†å£°æ˜ init å—ï¼Œå¦åˆ™å°±æœ‰å¯èƒ½å¯¼è‡´ NPE</p><h1 id="gson-data-class" tabindex="-1"><a class="header-anchor" href="#gson-data-class" aria-hidden="true">#</a> Gson &amp; data class</h1><p>æ¥çœ‹ä¸ªå°ä¾‹å­ï¼ŒçŒœçŒœå…¶è¿è¡Œç»“æœä¼šæ˜¯æ€æ ·çš„</p><p>UserBean æ˜¯ä¸€ä¸ª dataClassï¼Œå…¶ userName å­—æ®µè¢«å£°æ˜ä¸ºé null ç±»å‹ï¼Œè€Œ json å­—ç¬¦ä¸²ä¸­ userName å¯¹åº”çš„å€¼æ˜ç¡®å°±æ˜¯ nullï¼Œé‚£ç”¨ Gson åˆ°åº•èƒ½ä¸èƒ½ååºåˆ—åŒ–æˆåŠŸå‘¢ï¼Ÿç¨‹åºèƒ½ä¸èƒ½æˆåŠŸè¿è¡Œå®Œä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼Ÿ</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">data</span> <span class="token keyword">class</span> <span class="token function">UserBean</span><span class="token punctuation">(</span><span class="token keyword">val</span> userName<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">val</span> userAge<span class="token operator">:</span> Int<span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> json <span class="token operator">=</span> <span class="token string-literal multiline"><span class="token string">&quot;&quot;&quot;{&quot;userName&quot;:null,&quot;userAge&quot;:26}&quot;&quot;&quot;</span></span>  
    <span class="token keyword">val</span> userBean <span class="token operator">=</span> <span class="token function">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> UserBean<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span> <span class="token comment">//ç¬¬ä¸€æ­¥</span>
    <span class="token function">println</span><span class="token punctuation">(</span>userBean<span class="token punctuation">)</span> <span class="token comment">//ç¬¬äºŒæ­¥</span>
    <span class="token function">printMsg</span><span class="token punctuation">(</span>userBean<span class="token punctuation">.</span>userName<span class="token punctuation">)</span> <span class="token comment">//ç¬¬ä¸‰æ­¥</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">printMsg</span><span class="token punctuation">(</span>msg<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®é™…ä¸Šç¨‹åºèƒ½å¤Ÿæ­£å¸¸è¿è¡Œåˆ°ç¬¬äºŒæ­¥ï¼Œä½†åœ¨æ‰§è¡Œç¬¬ä¸‰æ­¥çš„æ—¶å€™åè€Œç›´æ¥æŠ¥ NPE å¼‚å¸¸äº†</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token function">UserBean</span><span class="token punctuation">(</span>userName<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">,</span> userAge<span class="token operator">=</span><span class="token number">26</span><span class="token punctuation">)</span>
Exception <span class="token keyword">in</span> thread <span class="token string-literal singleline"><span class="token string">&quot;main&quot;</span></span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>NullPointerException<span class="token operator">:</span> Parameter specified <span class="token keyword">as</span> non<span class="token operator">-</span><span class="token keyword">null</span> <span class="token keyword">is</span> <span class="token keyword">null</span><span class="token operator">:</span> method temp<span class="token punctuation">.</span>TestKt<span class="token punctuation">.</span>printMsg<span class="token punctuation">,</span> parameter msg
	at temp<span class="token punctuation">.</span>TestKt<span class="token punctuation">.</span><span class="token function">printMsg</span><span class="token punctuation">(</span>Test<span class="token punctuation">.</span>kt<span class="token punctuation">)</span>
	at temp<span class="token punctuation">.</span>TestKt<span class="token punctuation">.</span><span class="token function">main</span><span class="token punctuation">(</span>Test<span class="token punctuation">.</span>kt<span class="token operator">:</span><span class="token number">16</span><span class="token punctuation">)</span>
	at temp<span class="token punctuation">.</span>TestKt<span class="token punctuation">.</span><span class="token function">main</span><span class="token punctuation">(</span>Test<span class="token punctuation">.</span>kt<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>printMsg</code> æ–¹æ³•æ¥æ”¶äº†å‚æ•°åå®é™…ä¸Šä»€ä¹ˆä¹Ÿæ²¡åšï¼Œä¸ºå•¥ä¼šæŠ›å‡º NPE ï¼Ÿ</p><p>å°†<code>printMsg</code>åç¼–è¯‘ä¸º Java æ–¹æ³•ï¼Œå¯ä»¥å‘ç°æ–¹æ³•å†…éƒ¨ä¼šå¯¹å…¥å‚è¿›è¡Œç©ºæ ¡éªŒï¼Œå½“å‘ç°ä¸º null æ—¶å°±ä¼šç›´æ¥æŠ›å‡º NPEã€‚è¿™ä¸ªæ¯”è¾ƒå¥½ç†è§£ï¼Œæ¯•ç«Ÿ Kotlin çš„ç±»å‹ç³»ç»Ÿä¼šä¸¥æ ¼åŒºåˆ† <strong>å¯ null</strong> å’Œ <strong>ä¸å¯ä¸º null</strong> ä¸¤ç§ç±»å‹ï¼Œå…¶åŒºåˆ†æ‰‹æ®µä¹‹ä¸€å°±æ˜¯ä¼šè‡ªåŠ¨åœ¨æˆ‘ä»¬çš„ä»£ç é‡Œæ’å…¥ä¸€äº›ç±»å‹æ ¡éªŒé€»è¾‘ï¼Œå³è‡ªåŠ¨åŠ ä¸Šäº†éç©ºæ–­è¨€ï¼Œå½“å‘ç°ä¸å¯ä¸º null çš„å‚æ•°ä¼ å…¥äº† null çš„è¯å°±ä¼šé©¬ä¸ŠæŠ›å‡º NPEï¼Œå³ä½¿æˆ‘ä»¬å¹¶æ²¡æœ‰ä½¿ç”¨åˆ°è¯¥å‚æ•°</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">printMsg</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NotNull</span> <span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">Intrinsics</span><span class="token punctuation">.</span><span class="token function">checkNotNullParameter</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> <span class="token string">&quot;msg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‚£æ—¢ç„¶ UserBean ä¸­çš„ userName å­—æ®µå·²ç»è¢«å£°æ˜ä¸ºé null ç±»å‹äº†ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜å¯ä»¥ååºåˆ—åŒ–æˆåŠŸå‘¢ï¼ŸæŒ‰ç…§æˆ‘è‡ªå·±çš„ç¬¬ä¸€ç›´è§‰ï¼Œåº”è¯¥åœ¨è¿›è¡Œååºåˆ—çš„æ—¶å€™å°±ç›´æ¥æŠ›å‡ºå¼‚å¸¸æ‰å¯¹</p><p>å°† UserBean åç¼–è¯‘ä¸º Java ä»£ç åï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°å…¶æ„é€ å‡½æ•°ä¸­æ˜¯æœ‰å¯¹ userName è¿›è¡Œ null æ£€æŸ¥çš„ï¼Œå½“å‘ç°ä¸º null çš„è¯ä¼šç›´æ¥æŠ›å‡º NPE</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">UserBean</span> <span class="token punctuation">{</span>
   <span class="token annotation punctuation">@NotNull</span>
   <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> userName<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> userAge<span class="token punctuation">;</span>

   <span class="token annotation punctuation">@NotNull</span>
   <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token function">getUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userName<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">getUserAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userAge<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">public</span> <span class="token class-name">UserBean</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NotNull</span> <span class="token class-name">String</span> userName<span class="token punctuation">,</span> <span class="token keyword">int</span> userAge<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//è¿›è¡Œ null æ£€æŸ¥</span>
      <span class="token class-name">Intrinsics</span><span class="token punctuation">.</span><span class="token function">checkNotNullParameter</span><span class="token punctuation">(</span>userName<span class="token punctuation">,</span> <span class="token string">&quot;userName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>userName <span class="token operator">=</span> userName<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>userAge <span class="token operator">=</span> userAge<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   Â·Â·Â·
    
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‚£ Gson æ˜¯æ€ä¹ˆç»•è¿‡ Kotlin çš„ null æ£€æŸ¥çš„å‘¢ï¼Ÿ</p><p>å…¶å®ï¼Œé€šè¿‡æŸ¥çœ‹ Gson å†…éƒ¨æºç ï¼Œå¯ä»¥çŸ¥é“ Gson æ˜¯é€šè¿‡ Unsafe åŒ…æ¥å®ä¾‹åŒ– UserBean å¯¹è±¡çš„ï¼ŒUnsafe æä¾›äº†ä¸€ä¸ªéå¸¸è§„å®ä¾‹åŒ–å¯¹è±¡çš„æ–¹æ³•ï¼š<code>allocateInstance</code>ï¼Œè¯¥æ–¹æ³•æä¾›äº†é€šè¿‡ Class å¯¹è±¡å°±å¯ä»¥åˆ›å»ºå‡ºç›¸åº”å®ä¾‹çš„åŠŸèƒ½ï¼Œè€Œä¸”ä¸éœ€è¦è°ƒç”¨å…¶æ„é€ å‡½æ•°ã€åˆå§‹åŒ–ä»£ç ã€JVM å®‰å…¨æ£€æŸ¥ç­‰ï¼Œå³ä½¿æ„é€ å‡½æ•°æ˜¯ private çš„ä¹Ÿèƒ½é€šè¿‡æ­¤æ–¹æ³•è¿›è¡Œå®ä¾‹åŒ–ã€‚å› æ­¤ Gson å®é™…ä¸Šå¹¶ä¸ä¼šè°ƒç”¨åˆ° UserBean çš„æ„é€ å‡½æ•°ï¼Œç›¸å½“äºç»•è¿‡äº† Kotlin çš„ null æ£€æŸ¥ï¼Œæ‰€ä»¥å³ä½¿ userName å€¼ä¸º null æœ€ç»ˆä¹Ÿèƒ½å¤Ÿååºåˆ—åŒ–æˆåŠŸ</p><figure><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/af135d36b80341e68befd0c0bbe091ce~tplv-k3u1fbpfcp-watermark.image?" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æ­¤é—®é¢˜çš„å‡ºç°åœºæ™¯å¤§å¤šæ˜¯åœ¨ç§»åŠ¨ç«¯è§£ææœåŠ¡ç«¯ä¼ æ¥çš„æ•°æ®çš„æ—¶å€™ï¼Œç§»åŠ¨ç«¯å°†æ•°æ®å£°æ˜ä¸ºéç©ºç±»å‹ï¼Œä½†æœåŠ¡ç«¯ç»™è¿‡æ¥çš„æ•°æ®å´ä¸º null å€¼ï¼Œæ­¤æ—¶ç”¨æˆ·çœ‹åˆ°çš„å¯èƒ½å°±æ˜¯åº”ç”¨å´©æºƒäº†â€¦â€¦</p><p>ä¸€æ–¹é¢ï¼Œæˆ‘è§‰å¾—ç§»åŠ¨ç«¯åº”è¯¥å¯¹æœåŠ¡ç«¯ä¼ æ¥çš„æ•°æ®ä¿æŒä¸ä¿¡ä»»çš„æ€åº¦ï¼Œä¸èƒ½è§‰å¾—å¯¹æ–¹ä¼ æ¥çš„æ•°æ®å°±ä¸€å®šæ˜¯ç¬¦åˆçº¦å®šçš„ï¼Œä¸ºäº†ä¿è¯å®‰å…¨éœ€è¦å°†æ•°æ®å‡å£°æ˜ä¸ºå¯ç©ºç±»å‹ã€‚å¦ä¸€æ–¹é¢ï¼Œè¿™ä¹Ÿæ— ç–‘å¯¼è‡´ç§»åŠ¨ç«¯éœ€è¦åŠ ä¸Šå¾ˆå¤šå¤šä½™çš„åˆ¤ç©ºæ“ä½œï¼Œç®€ç›´æœ‰ç‚¹æ— è§£ =_=</p><h1 id="arouter-jvmfield" tabindex="-1"><a class="header-anchor" href="#arouter-jvmfield" aria-hidden="true">#</a> ARouter &amp; JvmField</h1><p>åœ¨ Java ä¸­ï¼Œå­—æ®µå’Œå…¶è®¿é—®å™¨çš„ç»„åˆè¢«ç§°ä½œå±æ€§ã€‚åœ¨ Kotlin ä¸­ï¼Œå±æ€§æ˜¯å¤´ç­‰çš„è¯­è¨€ç‰¹æ€§ï¼Œå®Œå…¨æ›¿ä»£äº†å­—æ®µå’Œè®¿é—®å™¨æ–¹æ³•ã€‚åœ¨ç±»ä¸­å£°æ˜ä¸€ä¸ªå±æ€§å’Œå£°æ˜ä¸€ä¸ªå˜é‡ä¸€æ ·æ˜¯ä½¿ç”¨ val å’Œ var å…³é”®å­—ï¼Œä¸¤è€…åœ¨ä½¿ç”¨ä¸Šçš„å·®å¼‚å°±åœ¨äºèµ‹å€¼åæ˜¯å¦è¿˜å…è®¸ä¿®æ”¹ï¼Œåœ¨å­—èŠ‚ç ä¸Šçš„å·®å¼‚æ€§ä¹‹ä¸€å°±åœ¨äºæ˜¯å¦ä¼šè‡ªåŠ¨ç”Ÿæˆç›¸åº”çš„ <code>setValue</code> æ–¹æ³•</p><p>ä¾‹å¦‚ï¼Œä»¥ä¸‹çš„ Kotlin ä»£ç åœ¨åç¼–è¯‘ä¸º Java ä»£ç åï¼Œå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªå±æ€§çš„å¯è§æ€§éƒ½å˜ä¸ºäº† privateï¼Œ name å˜é‡ä¼šåŒæ—¶åŒ…å«æœ‰<code>getValue</code>å’Œ<code>setValue</code> æ–¹æ³•ï¼Œè€Œ nickname å˜é‡åªæœ‰ <code>getValue</code> æ–¹æ³•ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬åœ¨ Java ä»£ç ä¸­åªèƒ½ä»¥ <code>kotlinMode.getName()</code> çš„æ–¹å¼æ¥è®¿é—® name å˜é‡çš„åŸå› </p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">class</span> KotlinMode <span class="token punctuation">{</span>

    <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;ä¸šå¿—é™ˆ&quot;</span></span>

    <span class="token keyword">val</span> nickname <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;leavesC&quot;</span></span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">KotlinMode</span> <span class="token punctuation">{</span>
   <span class="token annotation punctuation">@NotNull</span>
   <span class="token keyword">private</span> <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">&quot;ä¸šå¿—é™ˆ&quot;</span><span class="token punctuation">;</span>
   <span class="token annotation punctuation">@NotNull</span>
   <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> nickname <span class="token operator">=</span> <span class="token string">&quot;leavesC&quot;</span><span class="token punctuation">;</span>

   <span class="token annotation punctuation">@NotNull</span>
   <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NotNull</span> <span class="token class-name">String</span> var1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">Intrinsics</span><span class="token punctuation">.</span><span class="token function">checkNotNullParameter</span><span class="token punctuation">(</span>var1<span class="token punctuation">,</span> <span class="token string">&quot;&lt;set-?&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> var1<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token annotation punctuation">@NotNull</span>
   <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token function">getNickname</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nickname<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸ºäº†ä¸è®© Kotlin çš„ var / val å˜é‡è‡ªåŠ¨ç”Ÿæˆ <code>getValue</code> æˆ– <code>setValue</code> æ–¹æ³•ï¼Œè¾¾åˆ°å’Œåœ¨ Java ä»£ç ä¸­å£°æ˜å…¬å¼€å˜é‡ä¸€æ ·çš„æ•ˆæœï¼Œæ­¤æ—¶å°±éœ€è¦ä¸ºå±æ€§æ·»åŠ  <code>@JvmField</code> æ³¨è§£äº†ï¼Œæ·»åŠ åå°±ä¼šå˜ä¸º public ç±»å‹çš„æˆå‘˜å˜é‡ï¼Œä¸”ä¸åŒ…å«ä»»ä½• <code>getValue</code> å’Œ <code>setValue</code> æ–¹æ³•</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">class</span> KotlinMode <span class="token punctuation">{</span>

    <span class="token annotation builtin">@JvmField</span>
    <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;ä¸šå¿—é™ˆ&quot;</span></span>

    <span class="token annotation builtin">@JvmField</span>
    <span class="token keyword">val</span> nickname <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;leavesC&quot;</span></span>

<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> KotlinMode <span class="token punctuation">{</span>
   <span class="token annotation builtin">@JvmField</span>
   <span class="token annotation builtin">@NotNull</span>
   <span class="token keyword">public</span> String name <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;ä¸šå¿—é™ˆ&quot;</span></span><span class="token punctuation">;</span>
   <span class="token annotation builtin">@JvmField</span>
   <span class="token annotation builtin">@NotNull</span>
   <span class="token keyword">public</span> <span class="token keyword">final</span> String nickname <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;leavesC&quot;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p><code>@JvmField</code> çš„ä¸€ä¸ªä½¿ç”¨åœºæ™¯å°±æ˜¯åœ¨é…å¥—ä½¿ç”¨ ARouter çš„æ—¶å€™ã€‚æˆ‘ä»¬åœ¨ä½¿ç”¨ ARouter è¿›è¡Œå‚æ•°è‡ªåŠ¨æ³¨å…¥æ—¶ï¼Œå°±éœ€è¦ä¸ºå¾…æ³¨å…¥çš„å‚æ•°æ·»åŠ  <code>@JvmField</code>æ³¨è§£ï¼Œå°±åƒä»¥ä¸‹ä»£ç ä¸€æ ·ï¼Œä¸æ·»åŠ çš„è¯å°±ä¼šå¯¼è‡´ç¼–è¯‘å¤±è´¥</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token annotation builtin">@Route</span><span class="token punctuation">(</span>path <span class="token operator">=</span> RoutePath<span class="token punctuation">.</span>USER_HOME<span class="token punctuation">)</span>
<span class="token keyword">class</span> UserHomeActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token annotation builtin">@Autowired</span><span class="token punctuation">(</span>name <span class="token operator">=</span> RoutePath<span class="token punctuation">.</span>USER_HOME_PARAMETER_ID<span class="token punctuation">)</span>
    <span class="token annotation builtin">@JvmField</span>
    <span class="token keyword">var</span> userId<span class="token operator">:</span> Long <span class="token operator">=</span> <span class="token number">0</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_user_home<span class="token punctuation">)</span>
        ARouter<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">inject</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‚£ä¸ºä»€ä¹ˆä¸æ·»åŠ è¯¥æ³¨è§£å°±ä¼šå¯¼è‡´ç¼–è¯‘å¤±è´¥å‘¢ï¼Ÿ</p><p>å…¶å®ï¼ŒARouter å®ç°å‚æ•°è‡ªåŠ¨æ³¨å…¥æ˜¯éœ€è¦ä¾é æ³¨è§£å¤„ç†å™¨ç”Ÿæˆçš„è¾…åŠ©æ–‡ä»¶æ¥å®ç°çš„ï¼Œå³ä¼šç”Ÿæˆä»¥ä¸‹çš„è¾…åŠ©ä»£ç ï¼Œå½“ä¸­ä¼šä»¥ <code>substitute.userId</code> ã€<code>substitute.userName</code>çš„å½¢å¼æ¥è°ƒç”¨ Activity ä¸­çš„ä¸¤ä¸ªå‚æ•°å€¼ï¼Œå¦‚æœä¸æ·»åŠ  <code>@JvmField</code>æ³¨è§£ï¼Œè¾…åŠ©æ–‡ä»¶å°±æ²¡æ³•ä»¥ç›´æ¥è°ƒç”¨å˜é‡åçš„æ–¹å¼æ¥å®Œæˆæ³¨å…¥ï¼Œè‡ªç„¶å°±ä¼šå¯¼è‡´ç¼–è¯‘å¤±è´¥äº†</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">public</span> <span class="token keyword">class</span> UserHomeActivity$$ARouter$$Autowired implements ISyringe <span class="token punctuation">{</span>
    
  <span class="token keyword">private</span> SerializationService serializationService<span class="token punctuation">;</span>

  <span class="token annotation builtin">@Override</span>
  <span class="token keyword">public</span> void <span class="token function">inject</span><span class="token punctuation">(</span>Object target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    serializationService <span class="token operator">=</span> ARouter<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">navigation</span><span class="token punctuation">(</span>SerializationService<span class="token punctuation">.</span>class<span class="token punctuation">)</span><span class="token punctuation">;</span>
    UserHomeActivity substitute <span class="token operator">=</span> <span class="token punctuation">(</span>UserHomeActivity<span class="token punctuation">)</span>target<span class="token punctuation">;</span>
    substitute<span class="token punctuation">.</span>userId <span class="token operator">=</span> substitute<span class="token punctuation">.</span><span class="token function">getIntent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getLongExtra</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;userHomeId&quot;</span></span><span class="token punctuation">,</span> substitute<span class="token punctuation">.</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Kotlin è¿™å¥—ä¸ºå±æ€§è‡ªåŠ¨ç”Ÿæˆ <code>getValue</code>å’Œ<code>setValue</code> æ–¹æ³•çš„æœºåˆ¶æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯å¯èƒ½ä¼šå¯¼è‡´æ–¹æ³•æ•°æé€Ÿè†¨èƒ€ï¼Œä½¿å¾— Android App çš„ dex æ–‡ä»¶å¾ˆå¿«å°±è¾¾åˆ°æœ€å¤§æ–¹æ³•æ•°é™åˆ¶ï¼Œä¸å¾—ä¸è¿›è¡Œåˆ†åŒ…å¤„ç†</p><h1 id="æ¨èé˜…è¯»" tabindex="-1"><a class="header-anchor" href="#æ¨èé˜…è¯»" aria-hidden="true">#</a> æ¨èé˜…è¯»</h1>`,136),d={href:"https://juejin.cn/post/6908391430977224718",target:"_blank",rel:"noopener noreferrer"},v=n("p",null,"æ›´åŠ è¯¦ç»†åœ°ä»‹ç»äº† Gson å’Œ Kotlin data class åœ¨é…å¥—ä½¿ç”¨æ—¶å¯èƒ½å‡ºç°çš„å‘ï¼Œå€¼å¾—ä¸€çœ‹ ï¼ï¼ï¼",-1),m={href:"https://juejin.cn/post/6880602489297895438",target:"_blank",rel:"noopener noreferrer"},b=n("p",null,"è¯»è€…æ˜¯å¦è¿˜æœªå¼€å§‹å­¦ä¹  Kotlin å‘¢ï¼Ÿæˆ–è€…æ˜¯å¯¹ Kotlin è¿˜äº†è§£å¾—ä¸å¤Ÿæ¸…æ¥šå‘¢ï¼Ÿå¦‚æœæ˜¯çš„è¯ï¼Œæ¨èé˜…è¯»æˆ‘çš„ä¸€ç¯‡ Kotlin å…¥é—¨æ•™ç¨‹ï¼Œå…¨æ–‡ä¸¤ä¸‡å…­åƒå¤šå­—ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ å­¦ä¼š Kotlin ï¼ï¼ï¼",-1);function g(y,w){const a=p("ExternalLinkIcon");return o(),l("div",null,[n("blockquote",null,[n("p",null,[s("å…¬ä¼—å·ï¼š"),n("a",u,[s("å­—èŠ‚æ•°ç»„"),t(a)])]),r]),k,n("ul",null,[n("li",null,[n("p",null,[n("a",d,[s("Gson å’Œ Kotlin data class çš„é¿å‘æŒ‡å—"),t(a)])]),v]),n("li",null,[n("p",null,[n("a",m,[s("ä¸¤ä¸‡å…­åƒå­—å¸¦ä½  Kotlin å…¥é—¨"),t(a)])]),b])])])}const q=e(i,[["render",g],["__file","æ¢ç©¶ Kotlin çš„éšè—æ€§èƒ½å¼€é”€ä¸é¿å‘æŒ‡å—.html.vue"]]);export{q as default};
