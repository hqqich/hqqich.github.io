import{_ as e}from"./plugin-vue_export-helper-c27b6911.js";import{r as o,o as c,c as l,a as n,d as s,e as t,f as p}from"./app-6847d3e4.js";const i={},u={href:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/adbc507fc3704fd8955aae739a433db2~tplv-k3u1fbpfcp-zoom-1.image",target:"_blank",rel:"noopener noreferrer"},k=n("p",null,"å¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ© ğŸ¤£ğŸ¤£",-1),r=p(`<p>Java å’Œ Kotlin çš„æ³›å‹ç®—ä½œæ˜¯ä¸€å—æŒºå¤§çš„çŸ¥è¯†éš¾ç‚¹äº†ï¼Œæ¶‰åŠåˆ°å¾ˆå¤šå¾ˆéš¾ç†è§£çš„æ¦‚å¿µï¼š<strong>æ³›å‹å‹å‚ã€æ³›å‹å®å‚ã€ç±»å‹å‚æ•°ã€ä¸å˜ã€å‹å˜ã€åå˜ã€é€†å˜ã€å†…è”</strong>ç­‰ç­‰ã€‚æœ¬ç¯‡æ–‡ç« å°±å°† Java å’Œ Kotlin ç»“åˆç€ä¸€èµ·è®²ï¼ŒæŒ‰ç…§æˆ‘çš„ä¸ªäººç†è§£æ¥é˜è¿°æ³›å‹çš„å„ä¸ªçŸ¥è¯†éš¾ç‚¹ï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ© ğŸ¤£ğŸ¤£</p><h1 id="ä¸€ã€æ³›å‹ç±»å‹" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€æ³›å‹ç±»å‹" aria-hidden="true">#</a> ä¸€ã€æ³›å‹ç±»å‹</h1><p>æ³›å‹å…è®¸ä½ å®šä¹‰å¸¦<strong>ç±»å‹å½¢å‚</strong>çš„æ•°æ®ç±»å‹ï¼Œå½“è¿™ç§ç±»å‹çš„å®ä¾‹è¢«åˆ›å»ºå‡ºæ¥åï¼Œ<strong>ç±»å‹å½¢å‚</strong>ä¾¿è¢«æ›¿æ¢ä¸ºç§°ä¸º<strong>ç±»å‹å®å‚</strong>çš„å…·ä½“ç±»å‹ã€‚ä¾‹å¦‚ï¼Œå¯¹äº <code>List&lt;T&gt;</code>ï¼ŒList ç§°ä¸º<strong>åŸºç¡€ç±»å‹</strong>ï¼ŒT ä¾¿æ˜¯<strong>ç±»å‹å‹å‚</strong>ï¼ŒT å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œå½“æ²¡æœ‰æŒ‡å®š T çš„å…·ä½“ç±»å‹æ—¶ï¼Œæˆ‘ä»¬åªèƒ½çŸ¥é“<code>List&lt;T&gt;</code>æ˜¯ä¸€ä¸ªé›†åˆåˆ—è¡¨ï¼Œä½†ä¸çŸ¥é“æ‰¿è½½çš„å…·ä½“æ•°æ®ç±»å‹ã€‚è€Œå¯¹äº <code>List&lt;String&gt;</code>ï¼Œå½“ä¸­çš„ String ä¾¿æ˜¯<strong>ç±»å‹å®å‚</strong>ï¼Œæˆ‘ä»¬å¯ä»¥æ˜ç™½åœ°çŸ¥é“è¯¥åˆ—è¡¨æ‰¿è½½çš„éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œåœ¨è¿™é‡Œ String å°±ç›¸å½“äºä¸€ä¸ªå‚æ•°ä¼ é€’ç»™äº† Listï¼Œåœ¨è¿™è¯­ä¹‰ä¸‹ String ä¹Ÿç§°ä¸º<strong>ç±»å‹å‚æ•°</strong></p><p>æ­¤å¤–ï¼Œåœ¨ Kotlin ä¸­æˆ‘ä»¬å¯ä»¥å®ç°<strong>å®åŒ–ç±»å‹å‚æ•°</strong>ï¼Œåœ¨è¿è¡Œæ—¶çš„<strong>å†…è”å‡½æ•°</strong>ä¸­æ‹¿åˆ°ä½œä¸º<strong>ç±»å‹å®å‚</strong>çš„å…·ä½“ç±»å‹ï¼Œå³å¯ä»¥å®ç° <code>T::class.java</code>ï¼Œä½†åœ¨ Java ä¸­å´æ— æ³•å®ç°ï¼Œå› ä¸º<strong>å†…è”å‡½æ•°</strong>æ˜¯ Kotlin ä¸­çš„æ¦‚å¿µï¼ŒJava ä¸­å¹¶ä¸å­˜åœ¨</p><h1 id="äºŒã€ä¸ºä»€ä¹ˆéœ€è¦æ³›å‹" tabindex="-1"><a class="header-anchor" href="#äºŒã€ä¸ºä»€ä¹ˆéœ€è¦æ³›å‹" aria-hidden="true">#</a> äºŒã€ä¸ºä»€ä¹ˆéœ€è¦æ³›å‹</h1><p>æ³›å‹æ˜¯åœ¨ Java 5 ç‰ˆæœ¬å¼€å§‹å¼•å…¥çš„ï¼Œå…ˆé€šè¿‡å‡ ä¸ªå°ä¾‹å­æ¥æ˜ç™½æ³›å‹çš„é‡è¦æ€§</p><p>ä»¥ä¸‹ä»£ç å¯ä»¥æˆåŠŸç¼–è¯‘ï¼Œä½†æ˜¯åœ¨è¿è¡Œæ—¶å´æŠ›å‡ºäº† ClassCastExceptionã€‚äº†è§£ ArrayList æºç çš„åŒå­¦å°±çŸ¥é“å…¶å†…éƒ¨æ˜¯ç”¨ä¸€ä¸ª<code>Object[]</code>æ•°ç»„æ¥å­˜å‚¨æ•°æ®çš„ï¼Œè¿™ä½¿å¾— ArrayList èƒ½å¤Ÿå­˜å‚¨ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼Œæ‰€ä»¥åœ¨æ²¡æœ‰æ³›å‹çš„å¹´ä»£å¼€å‘è€…ä¸€ä¸å°å¿ƒå°±æœ‰å¯èƒ½å‘ ArrayList å­˜å…¥äº†éæœŸæœ›å€¼ï¼Œç¼–è¯‘æœŸå®Œå…¨æ­£å¸¸ï¼Œç­‰åˆ°åœ¨è¿è¡Œæ—¶å°±ä¼šæŠ›å‡ºç±»å‹è½¬æ¢å¼‚å¸¸äº†</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GenericTest</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span> stringList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">addData</span><span class="token punctuation">(</span>stringList<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> stringList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">addData</span><span class="token punctuation">(</span><span class="token class-name">List</span> dataList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dataList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Exception</span> in thread <span class="token string">&quot;main&quot;</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>ClassCastException</span><span class="token operator">:</span> 
<span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Integer</span> cannot be cast <span class="token keyword">to</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span><span class="token class-name">String</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è€Œæœ‰äº†æ³›å‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å†™å‡ºæ›´åŠ å¥å£®å®‰å…¨çš„ä»£ç ï¼Œä»¥ä¸‹é”™è¯¯å°±å®Œå…¨å¯ä»¥åœ¨ç¼–è¯‘é˜¶æ®µè¢«å‘ç°ï¼Œä¸”å–å€¼çš„æ—¶å€™ä¹Ÿä¸éœ€è¦è¿›è¡Œç±»å‹å¼ºè½¬</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stringList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">addData</span><span class="token punctuation">(</span>stringList<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//æŠ¥é”™</span>
    <span class="token class-name">String</span> str <span class="token operator">=</span> stringList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">addData</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> dataList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    dataList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤å¤–ï¼Œåˆ©ç”¨æ³›å‹æˆ‘ä»¬å¯ä»¥å†™å‡ºæ›´åŠ å…·å¤‡é€šç”¨æ€§çš„ä»£ç ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦ä»ä¸€ä¸ª List ä¸­ç­›é€‰å‡ºå¤§äº 0 çš„å…¨éƒ¨æ•°å­—ï¼Œé‚£æˆ‘ä»¬è‡ªç„¶ä¸æƒ³ä¸º Integerã€Floatã€Double ç­‰å¤šç§ç±»å‹å„å†™ä¸€ä¸ªç­›é€‰æ–¹æ³•ï¼Œæ­¤æ—¶å°±å¯ä»¥åˆ©ç”¨æ³›å‹æ¥æŠ½è±¡ç­›é€‰é€»è¾‘</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> integerList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    integerList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    integerList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    integerList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> result1 <span class="token operator">=</span> <span class="token function">filter</span><span class="token punctuation">(</span>integerList<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Float</span><span class="token punctuation">&gt;</span></span> floatList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    floatList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    floatList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    floatList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Float</span><span class="token punctuation">&gt;</span></span> result2 <span class="token operator">=</span> <span class="token function">filter</span><span class="token punctuation">(</span>floatList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">Number</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> filterList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">T</span> datum <span class="token operator">:</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>datum<span class="token punctuation">.</span><span class="token function">doubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            filterList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>datum<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> filterList<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ€»çš„æ¥è¯´ï¼Œæ³›å‹æœ‰ä»¥ä¸‹å‡ ç‚¹ä¼˜åŠ¿ï¼š</p><ul><li>ç±»å‹æ£€æŸ¥ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µå°±èƒ½å‘ç°é”™è¯¯</li><li>æ›´åŠ è¯­ä¹‰åŒ–ï¼Œçœ‹åˆ° <code>List&lt;String&gt;</code>æˆ‘ä»¬å°±çŸ¥é“å­˜å‚¨çš„æ•°æ®ç±»å‹æ˜¯ String</li><li>è‡ªåŠ¨ç±»å‹è½¬æ¢ï¼Œåœ¨å–å€¼æ—¶æ— éœ€è¿›è¡Œæ‰‹åŠ¨ç±»å‹è½¬æ¢</li><li>èƒ½å¤Ÿå°†é€»è¾‘æŠ½è±¡å‡ºæ¥ï¼Œä½¿å¾—ä»£ç æ›´åŠ å…·æœ‰é€šç”¨æ€§</li></ul><h1 id="ä¸‰ã€ç±»å‹æ“¦é™¤" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€ç±»å‹æ“¦é™¤" aria-hidden="true">#</a> ä¸‰ã€ç±»å‹æ“¦é™¤</h1><p>æ³›å‹æ˜¯åœ¨ Java 5 ç‰ˆæœ¬å¼€å§‹å¼•å…¥çš„ï¼Œæ‰€ä»¥åœ¨ Java 4 ä¸­ ArrayList è¿˜ä¸å±äºæ³›å‹ç±»ï¼Œå…¶å†…éƒ¨é€šè¿‡ <strong>Object å‘ä¸Šè½¬å‹</strong>å’Œ<strong>å¤–éƒ¨å¼ºåˆ¶ç±»å‹è½¬æ¢</strong>æ¥å®ç°æ•°æ®å­˜å‚¨å’Œé€»è¾‘å¤ç”¨ï¼Œæ­¤æ—¶å¼€å‘è€…çš„é¡¹ç›®ä¸­å·²ç»å……æ–¥äº†å¤§é‡ä»¥ä¸‹ç±»å‹çš„ä»£ç ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span> stringList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stringList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸šå¿—é™ˆ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stringList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;https://juejin.cn/user/923245496518439&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> stringList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è€Œåœ¨æ¨å‡ºæ³›å‹çš„åŒæ—¶ï¼ŒJava å®˜æ–¹ä¹Ÿå¿…é¡»ä¿è¯äºŒè¿›åˆ¶çš„å‘åå…¼å®¹æ€§ï¼Œç”¨ Java 4 ç¼–è¯‘å‡ºçš„ Class æ–‡ä»¶ä¹Ÿå¿…é¡»èƒ½å¤Ÿåœ¨ Java 5 ä¸Šæ­£å¸¸è¿è¡Œï¼Œå³ Java 5 å¿…é¡»ä¿è¯ä»¥ä¸‹ä¸¤ç§ç±»å‹çš„ä»£ç èƒ½å¤Ÿåœ¨ Java 5 ä¸Šå…±å­˜ä¸”æ­£å¸¸è¿è¡Œ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span> stringList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stringList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸ºäº†å®ç°è¿™ä¸€ç›®çš„ï¼ŒJava å°±é€šè¿‡<strong>ç±»å‹æ“¦é™¤</strong>è¿™ç§æ¯”è¾ƒåˆ«æ‰­çš„æ–¹å¼æ¥å®ç°æ³›å‹ã€‚ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶ä¼šæ“¦é™¤ç±»å‹å®å‚ï¼Œåœ¨è¿è¡Œæ—¶ä¸å­˜åœ¨ä»»ä½•ç±»å‹ç›¸å…³çš„ä¿¡æ¯ï¼Œæ³›å‹å¯¹äº JVM æ¥è¯´æ˜¯é€æ˜çš„ï¼Œæœ‰æ³›å‹å’Œæ²¡æœ‰æ³›å‹çš„ä»£ç é€šè¿‡ç¼–è¯‘å™¨ç¼–è¯‘åæ‰€ç”Ÿæˆçš„äºŒè¿›åˆ¶ä»£ç æ˜¯å®Œå…¨ç›¸åŒçš„</p><p>ä¾‹å¦‚ï¼Œåˆ†åˆ«å£°æ˜ä¸¤ä¸ªæ³›å‹ç±»å’Œéæ³›å‹ç±»ï¼Œæ‹¿åˆ°å…¶ class æ–‡ä»¶</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GenericTest</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">NodeA</span> <span class="token punctuation">{</span>

        <span class="token keyword">private</span> <span class="token class-name">Object</span> obj<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">NodeA</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>obj <span class="token operator">=</span> obj<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">NodeB</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

        <span class="token keyword">private</span> <span class="token class-name">T</span> obj<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">NodeB</span><span class="token punctuation">(</span><span class="token class-name">T</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>obj <span class="token operator">=</span> obj<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">NodeA</span> nodeA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NodeA</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸šå¿—é™ˆ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">NodeB</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> nodeB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NodeB</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;ä¸šå¿—é™ˆ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>nodeB<span class="token punctuation">.</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ° NodeA å’Œ NodeB ä¸¤ä¸ªå¯¹è±¡å¯¹åº”çš„å­—èŠ‚ç å…¶å®æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œæœ€ç»ˆéƒ½æ˜¯ä½¿ç”¨ Object æ¥æ‰¿è½½æ•°æ®ï¼Œå°±å¥½åƒä¼ é€’ç»™ NodeB çš„ç±»å‹å‚æ•° String ä¸è§äº†ä¸€æ ·ï¼Œè¿™ä¾¿æ˜¯ç±»å‹æ“¦é™¤</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token namespace">generic<span class="token punctuation">.</span></span>GenericTest</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token namespace">generic<span class="token punctuation">.</span></span>GenericTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Code</span><span class="token operator">:</span>
       <span class="token number">0</span><span class="token operator">:</span> aload_0
       <span class="token number">1</span><span class="token operator">:</span> invokespecial #<span class="token number">1</span>                  <span class="token comment">// Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span>
       <span class="token number">4</span><span class="token operator">:</span> <span class="token keyword">return</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Code</span><span class="token operator">:</span>
       <span class="token number">0</span><span class="token operator">:</span> <span class="token keyword">new</span>           #<span class="token number">2</span>                  <span class="token comment">// class generic/GenericTest$NodeA</span>
       <span class="token number">3</span><span class="token operator">:</span> dup
       <span class="token number">4</span><span class="token operator">:</span> ldc           #<span class="token number">3</span>                  <span class="token comment">// String ä¸šå¿—é™ˆ</span>
       <span class="token number">6</span><span class="token operator">:</span> invokespecial #<span class="token number">4</span>                  <span class="token comment">// Method generic/GenericTest$NodeA.&quot;&lt;init&gt;&quot;:(Ljava/lang/Object;)V</span>
       <span class="token number">9</span><span class="token operator">:</span> astore_1
      <span class="token number">10</span><span class="token operator">:</span> <span class="token keyword">new</span>           #<span class="token number">5</span>                  <span class="token comment">// class generic/GenericTest$NodeB</span>
      <span class="token number">13</span><span class="token operator">:</span> dup
      <span class="token number">14</span><span class="token operator">:</span> ldc           #<span class="token number">3</span>                  <span class="token comment">// String ä¸šå¿—é™ˆ</span>
      <span class="token number">16</span><span class="token operator">:</span> invokespecial #<span class="token number">6</span>                  <span class="token comment">// Method generic/GenericTest$NodeB.&quot;&lt;init&gt;&quot;:(Ljava/lang/Object;)V</span>
      <span class="token number">19</span><span class="token operator">:</span> astore_2
      <span class="token number">20</span><span class="token operator">:</span> getstatic     #<span class="token number">7</span>                  <span class="token comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span>
      <span class="token number">23</span><span class="token operator">:</span> aload_2
      <span class="token number">24</span><span class="token operator">:</span> invokestatic  #<span class="token number">8</span>                  <span class="token comment">// Method generic/GenericTest$NodeB.access$000:(Lgeneric/GenericTest$NodeB;)Ljava/lang/Object;</span>
      <span class="token number">27</span><span class="token operator">:</span> checkcast     #<span class="token number">9</span>                  <span class="token comment">// class java/lang/String</span>
      <span class="token number">30</span><span class="token operator">:</span> invokevirtual #<span class="token number">10</span>                 <span class="token comment">// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span>
      <span class="token number">33</span><span class="token operator">:</span> <span class="token keyword">return</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è€Œå¦‚æœè®© NodeA ç›´æ¥ä½¿ç”¨ String ç±»å‹ï¼Œå¹¶ä¸”ä¸ºæ³›å‹ç±» NodeB è®¾å®šä¸Šç•Œçº¦æŸ Stringï¼Œä¸¤è€…çš„å­—èŠ‚ç ä¹Ÿä¼šå®Œå…¨ä¸€æ ·</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GenericTest</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">NodeA</span> <span class="token punctuation">{</span>

        <span class="token keyword">private</span> <span class="token class-name">String</span> obj<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">NodeA</span><span class="token punctuation">(</span><span class="token class-name">String</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>obj <span class="token operator">=</span> obj<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">NodeB</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

        <span class="token keyword">private</span> <span class="token class-name">T</span> obj<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">NodeB</span><span class="token punctuation">(</span><span class="token class-name">T</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>obj <span class="token operator">=</span> obj<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">NodeA</span> nodeA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NodeA</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸šå¿—é™ˆ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">NodeB</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> nodeB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NodeB</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;ä¸šå¿—é™ˆ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>nodeB<span class="token punctuation">.</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ° NodeA å’Œ NodeB çš„å­—èŠ‚ç æ˜¯å®Œå…¨ç›¸åŒçš„</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token namespace">generic<span class="token punctuation">.</span></span>GenericTest</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token class-name"><span class="token namespace">generic<span class="token punctuation">.</span></span>GenericTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Code</span><span class="token operator">:</span>
       <span class="token number">0</span><span class="token operator">:</span> aload_0
       <span class="token number">1</span><span class="token operator">:</span> invokespecial #<span class="token number">1</span>                  <span class="token comment">// Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span>
       <span class="token number">4</span><span class="token operator">:</span> <span class="token keyword">return</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Code</span><span class="token operator">:</span>
       <span class="token number">0</span><span class="token operator">:</span> <span class="token keyword">new</span>           #<span class="token number">2</span>                  <span class="token comment">// class generic/GenericTest$NodeA</span>
       <span class="token number">3</span><span class="token operator">:</span> dup
       <span class="token number">4</span><span class="token operator">:</span> ldc           #<span class="token number">3</span>                  <span class="token comment">// String ä¸šå¿—é™ˆ</span>
       <span class="token number">6</span><span class="token operator">:</span> invokespecial #<span class="token number">4</span>                  <span class="token comment">// Method generic/GenericTest$NodeA.&quot;&lt;init&gt;&quot;:(Ljava/lang/String;)V</span>
       <span class="token number">9</span><span class="token operator">:</span> astore_1
      <span class="token number">10</span><span class="token operator">:</span> <span class="token keyword">new</span>           #<span class="token number">5</span>                  <span class="token comment">// class generic/GenericTest$NodeB</span>
      <span class="token number">13</span><span class="token operator">:</span> dup
      <span class="token number">14</span><span class="token operator">:</span> ldc           #<span class="token number">3</span>                  <span class="token comment">// String ä¸šå¿—é™ˆ</span>
      <span class="token number">16</span><span class="token operator">:</span> invokespecial #<span class="token number">6</span>                  <span class="token comment">// Method generic/GenericTest$NodeB.&quot;&lt;init&gt;&quot;:(Ljava/lang/String;)V</span>
      <span class="token number">19</span><span class="token operator">:</span> astore_2
      <span class="token number">20</span><span class="token operator">:</span> getstatic     #<span class="token number">7</span>                  <span class="token comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span>
      <span class="token number">23</span><span class="token operator">:</span> aload_2
      <span class="token number">24</span><span class="token operator">:</span> invokestatic  #<span class="token number">8</span>                  <span class="token comment">// Method generic/GenericTest$NodeB.access$000:(Lgeneric/GenericTest$NodeB;)Ljava/lang/String;</span>
      <span class="token number">27</span><span class="token operator">:</span> invokevirtual #<span class="token number">9</span>                  <span class="token comment">// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span>
      <span class="token number">30</span><span class="token operator">:</span> <span class="token keyword">return</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰€ä»¥è¯´ï¼Œå½“æ³›å‹ç±»å‹è¢«æ“¦é™¤åæœ‰ä¸¤ç§è½¬æ¢æ–¹å¼</p><ul><li>å¦‚æœæ³›å‹æ²¡æœ‰è®¾ç½®ä¸Šç•Œçº¦æŸï¼Œé‚£ä¹ˆå°†æ³›å‹è½¬åŒ–æˆ Object ç±»å‹</li><li>å¦‚æœæ³›å‹è®¾ç½®äº†ä¸Šç•Œçº¦æŸï¼Œé‚£ä¹ˆå°†æ³›å‹è½¬åŒ–æˆè¯¥ä¸Šç•Œçº¦æŸ</li></ul><p>è¯¥ç»“è®ºä¹Ÿå¯ä»¥é€šè¿‡åå°„æ³›å‹ç±»çš„ Class å¯¹è±¡æ¥éªŒè¯</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GenericTest</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">NodeA</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

        <span class="token keyword">private</span> <span class="token class-name">T</span> obj<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">NodeA</span><span class="token punctuation">(</span><span class="token class-name">T</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>obj <span class="token operator">=</span> obj<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">NodeB</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

        <span class="token keyword">private</span> <span class="token class-name">T</span> obj<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">NodeB</span><span class="token punctuation">(</span><span class="token class-name">T</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>obj <span class="token operator">=</span> obj<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">NodeA</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> nodeA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NodeA</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;ä¸šå¿—é™ˆ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">getField</span><span class="token punctuation">(</span>nodeA<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">NodeB</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> nodeB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NodeB</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;https://juejin.cn/user/923245496518439&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">getField</span><span class="token punctuation">(</span>nodeB<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">getField</span><span class="token punctuation">(</span><span class="token class-name">Class</span> clazz<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> field <span class="token operator">:</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;fieldName: &quot;</span> <span class="token operator">+</span> field<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;fieldTypeName: &quot;</span> <span class="token operator">+</span> field<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>NodeA å¯¹åº”çš„æ˜¯ Objectï¼ŒNodeB å¯¹åº”çš„æ˜¯ String</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>fieldName<span class="token operator">:</span> obj
fieldTypeName<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Object</span>
fieldName<span class="token operator">:</span> obj
fieldTypeName<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>String</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‚£æ—¢ç„¶åœ¨è¿è¡Œæ—¶ä¸å­˜åœ¨ä»»ä½•ç±»å‹ç›¸å…³çš„ä¿¡æ¯ï¼Œæ³›å‹åˆä¸ºä»€ä¹ˆèƒ½å¤Ÿå®ç°<strong>ç±»å‹æ£€æŸ¥</strong>å’Œ<strong>ç±»å‹è‡ªåŠ¨è½¬æ¢</strong>ç­‰åŠŸèƒ½å‘¢ï¼Ÿ</p><p>å…¶å®ï¼Œç±»å‹æ£€æŸ¥æ˜¯ç¼–è¯‘å™¨åœ¨<strong>ç¼–è¯‘å‰</strong>å¸®æˆ‘ä»¬å®Œæˆçš„ï¼Œç¼–è¯‘å™¨çŸ¥é“æˆ‘ä»¬å£°æ˜çš„å…·ä½“çš„ç±»å‹å®å‚ï¼Œæ‰€ä»¥ç±»å‹æ“¦é™¤å¹¶ä¸å½±å“ç±»å‹æ£€æŸ¥åŠŸèƒ½ã€‚è€Œç±»å‹è‡ªåŠ¨è½¬æ¢å…¶å®æ˜¯é€šè¿‡å†…éƒ¨å¼ºåˆ¶ç±»å‹è½¬æ¢æ¥å®ç°çš„ï¼Œä¸Šé¢ç»™å‡ºçš„å­—èŠ‚ç ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°æœ‰ä¸€æ¡ç±»å‹å¼ºè½¬ checkcast çš„è¯­å¥</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token number">27</span><span class="token operator">:</span> checkcast     #<span class="token number">9</span>                  <span class="token comment">// class java/lang/String</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¾‹å¦‚ï¼ŒArrayList å†…éƒ¨è™½ç„¶ç”¨äºå­˜å‚¨æ•°æ®çš„æ˜¯ Object æ•°ç»„ï¼Œä½† get æ–¹æ³•å†…éƒ¨ä¼šè‡ªåŠ¨å®Œæˆç±»å‹å¼ºè½¬</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">transient</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData<span class="token punctuation">;</span>
    
<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">rangeCheck</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token function">elementData</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
    
<span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">E</span> <span class="token function">elementData</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">//å¼ºåˆ¶ç±»å‹è½¬æ¢</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰€ä»¥ Java çš„æ³›å‹å¯ä»¥çœ‹åšæ˜¯ä¸€ç§ç‰¹æ®Šçš„è¯­æ³•ç³–ï¼Œå› æ­¤ä¹Ÿè¢«äººç§°ä¸º<strong>ä¼ªæ³›å‹</strong></p><h1 id="å››ã€ç±»å‹æ“¦é™¤çš„åé—ç—‡" tabindex="-1"><a class="header-anchor" href="#å››ã€ç±»å‹æ“¦é™¤çš„åé—ç—‡" aria-hidden="true">#</a> å››ã€ç±»å‹æ“¦é™¤çš„åé—ç—‡</h1><p>Java æ³›å‹å¯¹äºç±»å‹çš„çº¦æŸåªåœ¨ç¼–è¯‘æœŸå­˜åœ¨ï¼Œè¿è¡Œæ—¶ä»ç„¶ä¼šæŒ‰ç…§ Java 5 ä¹‹å‰çš„æœºåˆ¶æ¥è¿è¡Œï¼Œæ³›å‹çš„å…·ä½“ç±»å‹åœ¨è¿è¡Œæ—¶å·²ç»è¢«åˆ é™¤äº†ï¼Œæ‰€ä»¥ JVM æ˜¯è¯†åˆ«ä¸åˆ°æˆ‘ä»¬åœ¨ä»£ç ä¸­æŒ‡å®šçš„å…·ä½“çš„æ³›å‹ç±»å‹çš„</p><p>ä¾‹å¦‚ï¼Œè™½ç„¶<code>List&lt;String&gt;</code>åªèƒ½ç”¨äºæ·»åŠ å­—ç¬¦ä¸²ï¼Œä½†æˆ‘ä»¬åªèƒ½<strong>æ³›åŒ–åœ°</strong>è¯†åˆ«åˆ°å®ƒå±äº<code>List&lt;?&gt;</code>ç±»å‹ï¼Œè€Œæ— æ³•å…·ä½“åˆ¤æ–­å‡ºè¯¥ List å†…éƒ¨åŒ…å«çš„å…·ä½“ç±»å‹</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stringList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//æ­£å¸¸</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>stringList <span class="token keyword">instanceof</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
<span class="token comment">//æŠ¥é”™</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>stringList <span class="token keyword">instanceof</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬åªèƒ½å¯¹å…·ä½“çš„å¯¹è±¡å®ä¾‹è¿›è¡Œç±»å‹æ ¡éªŒï¼Œä½†æ— æ³•åˆ¤æ–­å‡ºæ³›å‹å½¢å‚çš„å…·ä½“ç±»å‹</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">T</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">//æ­£å¸¸</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token punctuation">}</span>
	<span class="token comment">//æŠ¥é”™</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">T</span> <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token punctuation">}</span>
	<span class="token comment">//æŠ¥é”™</span>
	<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> tClass <span class="token operator">=</span> <span class="token class-name">T</span><span class="token operator">::</span><span class="token function">getClass</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤å¤–ï¼Œç±»å‹æ“¦é™¤ä¹Ÿä¼šå¯¼è‡´ Java ä¸­å‡ºç°å¤šæ€é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•çš„æ–¹æ³•ç­¾åå¹¶ä¸å®Œå…¨ç›¸åŒï¼Œä½†ç”±äºç±»å‹æ“¦é™¤çš„åŸå› ï¼Œå…¥å‚å‚æ•°çš„æ•°æ®ç±»å‹éƒ½ä¼šè¢«çœ‹æˆ <code>List&lt;Object&gt;</code>ï¼Œä»è€Œå¯¼è‡´ä¸¤è€…æ— æ³•å…±å­˜åœ¨åŒä¸€ä¸ªåŒºåŸŸå†…</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stringList<span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> stringList<span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="äº”ã€kotlin-æ³›å‹" tabindex="-1"><a class="header-anchor" href="#äº”ã€kotlin-æ³›å‹" aria-hidden="true">#</a> äº”ã€Kotlin æ³›å‹</h1><p>Kotlin æ³›å‹åœ¨å¤§ä½“ä¸Šå’Œ Java ä¸€è‡´ï¼Œæ¯•ç«Ÿä¸¤è€…éœ€è¦ä¿è¯å…¼å®¹æ€§</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">class</span> Plate<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">val</span> t<span class="token operator">:</span> T<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">fun</span> <span class="token function">cut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">println</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">class</span> Apple

<span class="token keyword">class</span> Banana

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> plateApple <span class="token operator">=</span> Plate<span class="token operator">&lt;</span>Apple<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token function">Apple</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">//æ³›å‹ç±»å‹è‡ªåŠ¨æ¨å¯¼</span>
    <span class="token keyword">val</span> plateBanana <span class="token operator">=</span> <span class="token function">Plate</span><span class="token punctuation">(</span><span class="token function">Banana</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    plateApple<span class="token punctuation">.</span><span class="token function">cut</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    plateBanana<span class="token punctuation">.</span><span class="token function">cut</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Kotlin ä¹Ÿæ”¯æŒåœ¨æ‰©å±•å‡½æ•°ä¸­ä½¿ç”¨æ³›å‹</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> List<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>t<span class="token operator">:</span> T<span class="token punctuation">)</span><span class="token operator">:</span> T<span class="token operator">?</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> index <span class="token operator">=</span> <span class="token function">indexOf</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">get</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ºäº†å®ç°å‘åå…¼å®¹ï¼Œç›®å‰é«˜ç‰ˆæœ¬ Java ä¾ç„¶å…è®¸å®ä¾‹åŒ–æ²¡æœ‰å…·ä½“ç±»å‹å‚æ•°çš„æ³›å‹ç±»ï¼Œè¿™å¯ä»¥è¯´æ˜¯ä¸€ä¸ªå¯¹æ–°ç‰ˆæœ¬ JDK å±é™©ä½†å¯¹æ—§ç‰ˆæœ¬å‹å¥½çš„å…¼å®¹æªæ–½ã€‚ä½† Kotlin è¦æ±‚åœ¨ä½¿ç”¨æ³›å‹æ—¶éœ€è¦<strong>æ˜¾å¼å£°æ˜æ³›å‹ç±»å‹</strong>æˆ–è€…æ˜¯<strong>ç¼–è¯‘å™¨èƒ½å¤Ÿç±»å‹æ¨å¯¼å‡ºå…·ä½“ç±»å‹</strong>ï¼Œä»»ä½•ä¸å…·å¤‡å…·ä½“æ³›å‹ç±»å‹çš„æ³›å‹ç±»éƒ½æ— æ³•è¢«å®ä¾‹åŒ–ã€‚å› ä¸º Kotlin ä¸€å¼€å§‹å°±æ˜¯åŸºäº Java 6 ç‰ˆæœ¬çš„ï¼Œä¸€å¼€å§‹å°±å­˜åœ¨äº†æ³›å‹ï¼Œè‡ªç„¶å°±ä¸å­˜åœ¨éœ€è¦å…¼å®¹è€ä»£ç çš„é—®é¢˜ï¼Œå› æ­¤ä»¥ä¸‹ä¾‹å­å’Œ Java ä¼šæœ‰ä¸åŒçš„è¡¨ç°</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">val</span> arrayList1 <span class="token operator">=</span> <span class="token function">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//é”™è¯¯ï¼Œç¼–è¯‘å™¨æŠ¥é”™</span>

<span class="token keyword">val</span> arrayList2 <span class="token operator">=</span> arrayListOf<span class="token operator">&lt;</span>Int<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//æ­£å¸¸</span>

<span class="token keyword">val</span> arrayList3 <span class="token operator">=</span> <span class="token function">arrayListOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">//æ­£å¸¸</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒå®¹æ˜“è®©äººè¯¯è§£çš„ç‚¹ã€‚æˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨ <code>as</code> å’Œ <code>as?</code> æ¥è¿›è¡Œç±»å‹è½¬æ¢ï¼Œä½†å¦‚æœè½¬æ¢å¯¹è±¡æ˜¯æ³›å‹ç±»å‹çš„è¯ï¼Œé‚£å°±ä¼šç”±äºç±»å‹æ“¦é™¤è€Œå‡ºç°è¯¯åˆ¤ã€‚å¦‚æœè½¬æ¢å¯¹è±¡æœ‰æ­£ç¡®çš„<strong>åŸºç¡€ç±»å‹</strong>ï¼Œé‚£ä¹ˆè½¬æ¢å°±ä¼šæˆåŠŸï¼Œè€Œä¸ç®¡ç±»å‹å®å‚æ˜¯å¦ç›¸ç¬¦ã€‚å› ä¸ºåœ¨è¿è¡Œæ—¶è½¬æ¢å‘ç”Ÿçš„æ—¶å€™ç±»å‹å®å‚æ˜¯æœªçŸ¥çš„ï¼Œæ­¤æ—¶ç¼–è¯‘å™¨åªä¼šå‘å‡º â€œunchecked castâ€ è­¦å‘Šï¼Œä»£ç è¿˜æ˜¯å¯ä»¥æ­£å¸¸ç¼–è¯‘çš„</p><p>ä¾‹å¦‚ï¼Œåœ¨ä»¥ä¸‹ä¾‹å­ä¸­ä»£ç çš„è¿è¡Œç»“æœè¿˜ç¬¦åˆæˆ‘ä»¬çš„é¢„çŸ¥ã€‚ç¬¬ä¸€ä¸ªè½¬æ¢æ“ä½œç”±äºç±»å‹ç›¸ç¬¦ï¼Œæ‰€ä»¥æ‰“å°å‡ºäº†ç›¸åŠ å€¼ã€‚ç¬¬äºŒä¸ªè½¬æ¢æ“ä½œç”±äºåŸºç¡€ç±»å‹æ˜¯ Set è€Œé Listï¼Œæ‰€ä»¥æŠ›å‡ºäº† IllegalAccessException</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">printSum</span><span class="token punctuation">(</span><span class="token function">listOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//6</span>
    <span class="token function">printSum</span><span class="token punctuation">(</span><span class="token function">setOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//IllegalAccessException</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">printSum</span><span class="token punctuation">(</span>c<span class="token operator">:</span> Collection<span class="token operator">&lt;</span><span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> intList <span class="token operator">=</span> c <span class="token keyword">as</span><span class="token operator">?</span> List<span class="token operator">&lt;</span>Int<span class="token operator">&gt;</span> <span class="token operator">?:</span> <span class="token keyword">throw</span> <span class="token function">IllegalAccessException</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;List is expected&quot;</span></span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span>intList<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è€Œåœ¨ä»¥ä¸‹ä¾‹å­ä¸­æŠ›å‡ºçš„å´æ˜¯ ClassCastExceptionï¼Œè¿™æ˜¯å› ä¸ºåœ¨è¿è¡Œæ—¶ä¸ä¼šåˆ¤æ–­ä¸”æ— æ³•åˆ¤æ–­å‡ºç±»å‹å®å‚åˆ°åº•æ˜¯å¦æ˜¯ Intï¼Œè€Œåªä¼šåˆ¤æ–­åŸºç¡€ç±»å‹ List æ˜¯å¦ç›¸ç¬¦ï¼Œæ‰€ä»¥ <code>as?</code> æ“ä½œä¼šæˆåŠŸï¼Œç­‰åˆ°è¦æ‰§è¡Œç›¸åŠ æ“ä½œæ—¶æ‰ä¼šå‘ç°æ‹¿åˆ°çš„æ˜¯ String è€Œé Number</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token function">printSum</span><span class="token punctuation">(</span><span class="token function">listOf</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;1&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;2&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;3&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>

Exception <span class="token keyword">in</span> thread <span class="token string-literal singleline"><span class="token string">&quot;main&quot;</span></span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>ClassCastException<span class="token operator">:</span> 
java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>String cannot be cast <span class="token keyword">to</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Number
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="å…­ã€ä¸Šç•Œçº¦æŸ" tabindex="-1"><a class="header-anchor" href="#å…­ã€ä¸Šç•Œçº¦æŸ" aria-hidden="true">#</a> å…­ã€ä¸Šç•Œçº¦æŸ</h1><p>æ³›å‹æœ¬èº«å·²ç»å¸¦æœ‰ç±»å‹çº¦æŸçš„ä½œç”¨ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è¿›ä¸€æ­¥ç»†åŒ–å…¶æ”¯æŒçš„å…·ä½“ç±»å‹</p><p>ä¾‹å¦‚ï¼Œå‡è®¾å­˜åœ¨ä¸€ä¸ªç›˜å­ Plateï¼Œæˆ‘ä»¬è¦æ±‚è¯¥ Plate åªèƒ½ç”¨äºè£…æ°´æœ Fruitï¼Œé‚£ä¹ˆå°±å¯ä»¥å¯¹å…¶æ³›å‹å£°æ˜åšè¿›ä¸€æ­¥çº¦æŸï¼ŒJava ä¸­ä½¿ç”¨ extend å…³é”®å­—æ¥å£°æ˜çº¦æŸè§„åˆ™ï¼Œè€Œ Kotlin ä½¿ç”¨çš„æ˜¯ <strong>:</strong> ã€‚è¿™æ · Plate å°±åªèƒ½ç”¨äº Fruit å’Œå…¶å­ç±»ï¼Œè€Œæ— æ³•ç”¨äº Noodles ç­‰ä¸ç›¸å…³çš„ç±»å‹ï¼Œè¿™ç§ç±»å‹çº¦æŸå°±è¢«ç§°ä¸º<strong>ä¸Šç•Œçº¦æŸ</strong></p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">open</span> <span class="token keyword">class</span> Fruit

<span class="token keyword">class</span> Apple <span class="token operator">:</span> <span class="token function">Fruit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> Noodles

<span class="token keyword">class</span> Plate<span class="token operator">&lt;</span>T <span class="token operator">:</span> Fruit<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">val</span> t<span class="token operator">:</span> T<span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> applePlate <span class="token operator">=</span> <span class="token function">Plate</span><span class="token punctuation">(</span><span class="token function">Apple</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//æ­£å¸¸</span>
    <span class="token keyword">val</span> noodlesPlate <span class="token operator">=</span> <span class="token function">Plate</span><span class="token punctuation">(</span><span class="token function">Noodles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//æŠ¥é”™</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä¸Šç•Œçº¦æŸæ‹¥æœ‰å¤šå±‚ç±»å‹å…ƒç´ ï¼ŒJava æ˜¯ä½¿ç”¨ &amp; ç¬¦å·è¿›è¡Œé“¾å¼å£°æ˜ï¼ŒKotlin åˆ™æ˜¯ç”¨ where å…³é”®å­—æ¥ä¾æ¬¡è¿›è¡Œå£°æ˜</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">interface</span> Soft

<span class="token keyword">class</span> Plate<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">val</span> t<span class="token operator">:</span> T<span class="token punctuation">)</span> <span class="token keyword">where</span> T <span class="token operator">:</span> Fruit<span class="token punctuation">,</span> T <span class="token operator">:</span> Soft

<span class="token keyword">open</span> <span class="token keyword">class</span> Fruit

<span class="token keyword">class</span> Apple <span class="token operator">:</span> <span class="token function">Fruit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> Banana <span class="token operator">:</span> <span class="token function">Fruit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Soft

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> applePlate <span class="token operator">=</span> <span class="token function">Plate</span><span class="token punctuation">(</span><span class="token function">Apple</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//æŠ¥é”™</span>
    <span class="token keyword">val</span> bananaPlate <span class="token operator">=</span> <span class="token function">Plate</span><span class="token punctuation">(</span><span class="token function">Banana</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//æ­£å¸¸</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤å¤–ï¼Œæ²¡æœ‰æŒ‡å®šä¸Šç•Œçº¦æŸçš„ç±»å‹å½¢å‚ä¼šé»˜è®¤ä½¿ç”¨ Any? ä½œä¸ºä¸Šç•Œï¼Œå³æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ String æˆ– String? ä½œä¸ºå…·ä½“çš„ç±»å‹å®å‚ã€‚å¦‚æœæƒ³ç¡®ä¿æœ€ç»ˆçš„ç±»å‹å®å‚ä¸€å®šæ˜¯éç©ºç±»å‹ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸»åŠ¨å£°æ˜ä¸Šç•Œçº¦æŸä¸º Any</p><h1 id="ä¸ƒã€ç±»å‹é€šé…ç¬¦-æ˜Ÿå·æŠ•å½±" tabindex="-1"><a class="header-anchor" href="#ä¸ƒã€ç±»å‹é€šé…ç¬¦-æ˜Ÿå·æŠ•å½±" aria-hidden="true">#</a> ä¸ƒã€ç±»å‹é€šé…ç¬¦ &amp; æ˜Ÿå·æŠ•å½±</h1><p>å‡è®¾ç°åœ¨æœ‰ä¸ªéœ€æ±‚ï¼Œéœ€è¦æˆ‘ä»¬æä¾›ä¸€ä¸ªæ–¹æ³•ç”¨äºéå†æ‰€æœ‰ç±»å‹çš„ List é›†åˆå¹¶æ‰“å°å…ƒç´ </p><p>ç¬¬ä¸€ç§åšæ³•å°±æ˜¯ç›´æ¥å°†æ–¹æ³•å‚æ•°ç±»å‹å£°æ˜ä¸º Listï¼Œä¸åŒ…å«ä»»ä½•æ³›å‹ç±»å‹å£°æ˜ã€‚è¿™ç§åšæ³•å¯è¡Œï¼Œä½†ç¼–è¯‘å™¨ä¼šè­¦å‘Šæ— æ³•ç¡®å®š <code>list</code>å…ƒç´ çš„å…·ä½“ç±»å‹ï¼Œæ‰€ä»¥è¿™ä¸æ˜¯æœ€ä¼˜è§£æ³•</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printList1</span><span class="token punctuation">(</span><span class="token class-name">List</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> o <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯èƒ½ä¼šæƒ³åˆ°çš„ç¬¬äºŒç§åšæ³•æ˜¯ï¼šå°†æ³›å‹ç±»å‹ç›´æ¥å£°æ˜ä¸º Objectï¼Œå¸Œæœ›è®©å…¶é€‚ç”¨äºä»»ä½•ç±»å‹çš„ Listã€‚è¿™ç§åšæ³•å®Œå…¨ä¸å¯è¡Œï¼Œå› ä¸ºå³ä½¿ <code>String</code> æ˜¯ <code>Object</code> çš„å­ç±»ï¼Œä½† <code>List&lt;String&gt;</code> å’Œ <code>List&lt;Object&gt;</code>å¹¶ä¸å…·å¤‡ä»å±å…³ç³»ï¼Œè¿™å¯¼è‡´ <code>printList2</code> æ–¹æ³•å®é™…ä¸Šåªèƒ½ç”¨äº<code>List&lt;Object&gt;</code>è¿™ä¸€ç§å…·ä½“ç±»å‹</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printList2</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> o <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€ä¼˜è§£æ³•å°±æ˜¯è¦ç”¨åˆ° Java çš„ç±»å‹é€šé…ç¬¦ <strong>?</strong> äº†ï¼Œ<code>printList3</code>æ–¹æ³•å®Œå…¨å¯è¡Œä¸”ç¼–è¯‘å™¨ä¹Ÿä¸ä¼šè­¦å‘ŠæŠ¥é”™</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printList3</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> o <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ï¼Ÿ è¡¨ç¤ºæˆ‘ä»¬å¹¶ä¸å…³å¿ƒå…·ä½“çš„æ³›å‹ç±»å‹ï¼Œè€Œåªæ˜¯æƒ³é…åˆå…¶å®ƒç±»å‹è¿›è¡Œä¸€äº›æ¡ä»¶é™åˆ¶ã€‚ä¾‹å¦‚ï¼Œ<code>printList3</code>æ–¹æ³•å¸Œæœ›ä¼ å…¥çš„æ˜¯ä¸€ä¸ª Listï¼Œä½†ä¸é™åˆ¶æ³›å‹çš„å…·ä½“ç±»å‹ï¼Œæ­¤æ—¶<code>List&lt;?&gt;</code>å°±è¾¾åˆ°äº†è¿™ä¸€å±‚é™åˆ¶æ¡ä»¶</p><p>ç±»å‹é€šé…ç¬¦ä¹Ÿå­˜åœ¨ç€ä¸€äº›é™åˆ¶ã€‚å› ä¸º <code>printList3</code> æ–¹æ³•å¹¶ä¸åŒ…å«å…·ä½“çš„æ³›å‹ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»ä¸­å–å‡ºçš„å€¼åªèƒ½æ˜¯ Object ç±»å‹ï¼Œä¸”æ— æ³•å‘å…¶æ’å…¥å€¼ï¼Œè¿™éƒ½æ˜¯ä¸ºäº†é¿å…å‘ç”Ÿ ClassCastException</p><p>Java çš„<strong>ç±»å‹é€šé…ç¬¦</strong>å¯¹åº” Kotlin ä¸­çš„æ¦‚å¿µå°±æ˜¯**æ˜Ÿå·æŠ•å½± * **ï¼ŒJava å­˜åœ¨çš„é™åˆ¶åœ¨ Kotlin ä¸­ä¸€æ ·æœ‰</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">printList</span><span class="token punctuation">(</span>list<span class="token operator">:</span> List<span class="token operator">&lt;</span><span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>any <span class="token keyword">in</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">println</span><span class="token punctuation">(</span>any<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤å¤–ï¼Œæ˜Ÿå·æŠ•å½±åªèƒ½å‡ºç°åœ¨<strong>ç±»å‹å½¢å‚</strong>çš„ä½ç½®ï¼Œä¸èƒ½ä½œä¸º<strong>ç±»å‹å®å‚</strong></p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">val</span> list<span class="token operator">:</span> MutableList<span class="token operator">&lt;</span><span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token operator">=</span> ArrayList<span class="token operator">&lt;</span>Number<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//æ­£å¸¸</span>

<span class="token keyword">val</span> list2<span class="token operator">:</span> MutableList<span class="token operator">&lt;</span><span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token operator">=</span> ArrayList<span class="token operator">&lt;</span><span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//æŠ¥é”™</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="å…«ã€åå˜-ä¸å˜" tabindex="-1"><a class="header-anchor" href="#å…«ã€åå˜-ä¸å˜" aria-hidden="true">#</a> å…«ã€åå˜ &amp; ä¸å˜</h1><p>çœ‹ä»¥ä¸‹ä¾‹å­ã€‚Apple å’Œ Banana éƒ½æ˜¯ Fruit çš„å­ç±»ï¼Œå¯ä»¥å‘ç° Apple[] ç±»å‹çš„å¯¹è±¡æ˜¯å¯ä»¥èµ‹å€¼ç»™ Fruit[] çš„ï¼Œä¸” Fruit[] å¯ä»¥å®¹çº³ Apple å¯¹è±¡å’Œ Banana å¯¹è±¡ï¼Œè¿™ç§è®¾è®¡å°±è¢«ç§°ä¸º<strong>åå˜</strong>ï¼Œå³å¦‚æœ A æ˜¯ B çš„å­ç±»ï¼Œé‚£ä¹ˆ A[] å°±æ˜¯ B[] çš„å­ç±»å‹ã€‚ç›¸å¯¹çš„ï¼ŒObject[] å°±æ˜¯æ‰€æœ‰æ•°ç»„å¯¹è±¡çš„çˆ¶ç±»å‹</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Fruit</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Apple</span> <span class="token keyword">extends</span> <span class="token class-name">Fruit</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Banana</span> <span class="token keyword">extends</span> <span class="token class-name">Fruit</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Fruit</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fruitArray <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Apple</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">//æ­£å¸¸</span>
    fruitArray<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Apple</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//ç¼–è¯‘æ—¶æ­£å¸¸ï¼Œè¿è¡Œæ—¶æŠ›å‡º ArrayStoreException</span>
    fruitArray<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Banana</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è€Œ Java ä¸­çš„æ³›å‹æ˜¯<strong>ä¸å˜</strong>çš„ï¼Œè¿™æ„å‘³ç€ String è™½ç„¶æ˜¯ Object çš„å­ç±»ï¼Œä½†<code>List&lt;String&gt;</code>å¹¶ä¸æ˜¯<code>List&lt;Object&gt;</code>çš„å­ç±»å‹ï¼Œä¸¤è€…å¹¶ä¸å…·å¤‡ç»§æ‰¿å…³ç³»</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stringList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> objectList <span class="token operator">=</span> stringList<span class="token punctuation">;</span> <span class="token comment">//æŠ¥é”™</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>é‚£ä¸ºä»€ä¹ˆ Java ä¸­çš„æ³›å‹æ˜¯<strong>ä¸å˜</strong>çš„å‘¢ï¼Ÿ</p><p>è¿™å¯ä»¥é€šè¿‡çœ‹ä¸€ä¸ªä¾‹å­æ¥è§£é‡Šã€‚å‡è®¾ Java ä¸­çš„æ³›å‹æ˜¯<strong>åå˜</strong>çš„ï¼Œé‚£ä¹ˆä»¥ä¸‹ä»£ç å°±å¯ä»¥æˆåŠŸé€šè¿‡ç¼–è¯‘é˜¶æ®µçš„æ£€æŸ¥ï¼Œåœ¨è¿è¡Œæ—¶å°±ä¸å¯é¿å…åœ°å°†æŠ›å‡º ClassCastExceptionï¼Œè€Œå¼•å…¥æ³›å‹çš„åˆè¡·å°±æ˜¯ä¸ºäº†å®ç°ç±»å‹å®‰å…¨ï¼Œæ”¯æŒåå˜çš„è¯é‚£æ³›å‹ä¹Ÿå°±æ²¡æœ‰æ¯”æ•°ç»„å®‰å…¨å¤šå°‘äº†ï¼Œå› æ­¤å°±å°†æ³›å‹è¢«è®¾è®¡ä¸º<strong>ä¸å˜</strong>çš„</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> strList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> objs <span class="token operator">=</span> strList<span class="token punctuation">;</span> <span class="token comment">//å‡è®¾å¯ä»¥è¿è¡Œï¼Œå®é™…ä¸Šç¼–è¯‘å™¨ä¼šæŠ¥é”™</span>
objs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> str <span class="token operator">=</span> strList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å°†æŠ›å‡º ClassCastExceptionï¼Œæ— æ³•å°†æ•´æ•°è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†æ¥æƒ³ä¸ªé—®é¢˜ï¼Œæ—¢ç„¶<strong>åå˜</strong>æœ¬èº«å¹¶ä¸å®‰å…¨ï¼Œé‚£ä¹ˆæ•°ç»„ä¸ºä½•åˆè¦è¢«è®¾è®¡ä¸ºåå˜å‘¢ï¼Ÿ</p><p>Arrays ç±»åŒ…å«ä¸€ä¸ª <code>equals</code>æ–¹æ³•ç”¨äºæ¯”è¾ƒä¸¤ä¸ªæ•°ç»„å¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚å¦‚æœæ•°ç»„æ˜¯åå˜çš„ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸ºæ¯ä¸€ç§æ•°ç»„å¯¹è±¡éƒ½å®šä¹‰ä¸€ä¸ª <code>equals</code>æ–¹æ³•ï¼ŒåŒ…æ‹¬å¼€å‘è€…è‡ªå®šä¹‰çš„æ•°æ®ç±»å‹ã€‚æƒ³è¦é¿å…è¿™ç§æƒ…å†µï¼Œå°±éœ€è¦è®© Object[] å¯ä»¥æ¥æ”¶ä»»æ„æ•°ç»„ç±»å‹ï¼Œå³<strong>è®© Object[] æˆä¸ºæ‰€æœ‰æ•°ç»„å¯¹è±¡çš„çˆ¶ç±»å‹</strong>ï¼Œè¿™å°±ä½¿å¾—æ•°ç»„å¿…é¡»æ”¯æŒåå˜ï¼Œè¿™æ ·å¤šæ€æ‰èƒ½ç”Ÿæ•ˆ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Arrays</span> <span class="token punctuation">{</span>
    
     <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token operator">==</span>a2<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token operator">==</span><span class="token keyword">null</span> <span class="token operator">||</span> a2<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

        <span class="token keyword">int</span> length <span class="token operator">=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>a2<span class="token punctuation">.</span>length <span class="token operator">!=</span> length<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Object</span> o1 <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token class-name">Object</span> o2 <span class="token operator">=</span> a2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>o1<span class="token operator">==</span><span class="token keyword">null</span> <span class="token operator">?</span> o2<span class="token operator">==</span><span class="token keyword">null</span> <span class="token operator">:</span> o1<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>o2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒKotlin ä¸­çš„æ•°ç»„å’Œ Java ä¸­çš„æ•°ç»„å¹¶ä¸ä¸€æ ·ï¼ŒKotlin æ•°ç»„å¹¶ä¸æ”¯æŒåå˜ï¼ŒKotlin æ•°ç»„ç±»ä¼¼äºé›†åˆæ¡†æ¶ï¼Œå…·æœ‰å¯¹åº”çš„å®ç°ç±» Arrayï¼ŒArray å±äºæ³›å‹ç±»ï¼Œæ”¯æŒäº†æ³›å‹å› æ­¤ä¹Ÿä¸å†åå˜</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">val</span> stringArray <span class="token operator">=</span> arrayOfNulls<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> anyArray<span class="token operator">:</span> Array<span class="token operator">&lt;</span>Any<span class="token operator">?</span><span class="token operator">&gt;</span> <span class="token operator">=</span> stringArray <span class="token comment">//æŠ¥é”™</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>Java çš„æ³›å‹ä¹Ÿå¹¶éå®Œå…¨<strong>ä¸å˜</strong>çš„ï¼Œåªæ˜¯å®ç°<strong>åå˜</strong>éœ€è¦æ»¡è¶³ä¸€äº›æ¡ä»¶ï¼Œç”šè‡³ä¹Ÿå¯ä»¥å®ç°<strong>é€†å˜</strong>ï¼Œä¸‹é¢å°±æ¥ä»‹ç»ä¸‹æ³›å‹å¦‚ä½•å®ç°<strong>åå˜</strong>å’Œ<strong>é€†å˜</strong></p></blockquote><h1 id="ä¹ã€æ³›å‹åå˜" tabindex="-1"><a class="header-anchor" href="#ä¹ã€æ³›å‹åå˜" aria-hidden="true">#</a> ä¹ã€æ³›å‹åå˜</h1><p>å‡è®¾æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª<code>copyAll</code>å¸Œæœ›ç”¨äº List æ•°æ®è¿ç§»ã€‚é‚£ä»¥ä¸‹æ“ä½œåœ¨æˆ‘ä»¬çœ‹æ¥å°±æ˜¯å®Œå…¨å®‰å…¨çš„ï¼Œå› ä¸º Integer æ˜¯ Number çš„å­ç±»ï¼ŒæŒ‰é“ç†æ¥è¯´æ˜¯èƒ½å¤Ÿå°† Integer ä¿å­˜ä¸º Number çš„ï¼Œä½†ç”±äºæ³›å‹ä¸å˜æ€§ï¼Œ<code>List&lt;Integer&gt;</code>å¹¶ä¸æ˜¯<code>List&lt;Number&gt;</code>çš„å­ç±»å‹ï¼Œæ‰€ä»¥å®é™…ä¸Šè¯¥æ“ä½œå°†æŠ¥é”™</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Number</span><span class="token punctuation">&gt;</span></span> numberList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> integerList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    integerList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    integerList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    integerList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">copyAll</span><span class="token punctuation">(</span>numberList<span class="token punctuation">,</span> integerList<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//æŠ¥é”™</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">copyAll</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> from<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">to</span><span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>from<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ€è€ƒä¸‹è¯¥æ“ä½œä¸ºä»€ä¹ˆä¼šæŠ¥é”™ï¼Ÿ</p><p>ç¼–è¯‘å™¨çš„ä½œç”¨ä¹‹ä¸€å°±æ˜¯<strong>è¿›è¡Œå®‰å…¨æ£€æŸ¥å¹¶é˜»æ­¢å¯èƒ½å‘ç”Ÿä¸å®‰å…¨è¡Œä¸ºçš„æ“ä½œ</strong>ï¼Œ<code>copyAll</code> æ–¹æ³•ä¼šæŠ¥é”™ï¼Œé‚£ä¹ˆè‚¯å®šå°±æ˜¯ç¼–è¯‘å™¨è§‰å¾—è¯¥æ–¹æ³•æœ‰å¯èƒ½ä¼šè§¦å‘ä¸å®‰å…¨çš„æ“ä½œã€‚å¼€å‘è€…çš„æœ¬æ„æ˜¯å¸Œæœ›å°† Integer ç±»å‹çš„æ•°æ®è½¬ç§»åˆ° NumberList ä¸­ï¼Œåªæœ‰è¿™ç§æ“ä½œä¸”è¿™ç§æ“ä½œåœ¨æˆ‘ä»¬çœ‹æ¥è‚¯å®šæ˜¯å®‰å…¨çš„ï¼Œä½†æ˜¯ç¼–è¯‘å™¨ä¸çŸ¥é“å¼€å‘è€…æœ€ç»ˆæ‰€è¦åšçš„å…·ä½“æ“ä½œå•Š</p><p>å‡è®¾ <code>copyAll</code>æ–¹æ³•å¯ä»¥æ­£å¸¸è°ƒç”¨ï¼Œé‚£ä¹ˆ<code>copyAll</code>æ–¹æ³•è‡ªç„¶åªä¼šæŠŠ <code>from</code> å½“åš <code>List&lt;Number&gt;</code>æ¥çœ‹å¾…ã€‚å› ä¸º Integer æ˜¯ Number çš„å­ç±»ï¼Œä» <code>integerList</code> è·å–åˆ°çš„æ•°æ®å¯¹äº <code>numberList</code> æ¥è¯´è‡ªç„¶æ˜¯å®‰å…¨çš„ã€‚è€Œå¦‚æœæˆ‘ä»¬åœ¨<code>copyAll</code>æ–¹æ³•ä¸­å·å·å‘ <code>integerList</code> ä¼ å…¥äº†ä¸€ä¸ª Number ç±»å‹çš„å€¼çš„è¯ï¼Œé‚£ä¹ˆè‡ªç„¶å°±å°†æŠ›å‡ºå¼‚å¸¸ï¼Œå› ä¸º from å®é™…ä¸Šæ˜¯ <code>List&lt;Integer&gt;</code>ç±»å‹</p><p>ä¸ºäº†é˜»æ­¢è¿™ç§ä¸å®‰å…¨çš„è¡Œä¸ºï¼Œç¼–è¯‘å™¨é€‰æ‹©é€šè¿‡ç›´æ¥æŠ¥é”™æ¥è¿›è¡Œæç¤ºã€‚ä¸ºäº†è§£å†³æŠ¥é”™ï¼Œæˆ‘ä»¬å°±éœ€è¦å‘ç¼–è¯‘å™¨åšå‡ºå®‰å…¨ä¿è¯ï¼š<strong>ä» from å–å‡ºæ¥çš„å€¼åªä¼šå½“åš Number ç±»å‹ï¼Œä¸”ä¸ä¼šå‘ from ä¼ å…¥ä»»ä½•å€¼</strong></p><p>ä¸ºäº†è¾¾æˆä»¥ä¸Šä¿è¯ï¼Œéœ€è¦ä¿®æ”¹ä¸‹ <code>copyAll</code> æ–¹æ³•</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">copyAll</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> from<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">to</span><span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>from<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>? extends T</code> è¡¨ç¤º <code>from</code> æ¥å— T æˆ–è€… T çš„å­ç±»å‹ï¼Œè€Œä¸å•å•æ˜¯ T è‡ªèº«ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å®‰å…¨åœ°ä» <code>from</code> ä¸­å–å€¼å¹¶å£°æ˜ä¸º T ç±»å‹ï¼Œä½†ç”±äºæˆ‘ä»¬å¹¶ä¸çŸ¥é“ T ä»£è¡¨çš„å…·ä½“ç±»å‹ï¼Œå†™å…¥æ“ä½œå¹¶ä¸å®‰å…¨ï¼Œå› æ­¤ç¼–è¯‘å™¨ä¼šé˜»æ­¢æˆ‘ä»¬å‘ <code>from</code> æ‰§è¡Œä¼ å€¼æ“ä½œã€‚æœ‰äº†è¯¥é™åˆ¶åï¼Œä»<code>integerList</code>ä¸­å–å‡ºæ¥çš„å€¼åªèƒ½æ˜¯å½“åš Number ç±»å‹ï¼Œä¸”é¿å…äº†å‘<code>integerList</code>æ’å…¥éæ³•å€¼çš„å¯èƒ½ï¼Œæ­¤æ—¶<code>List&lt;Integer&gt;</code>å°±ç›¸å½“äº<code>List&lt;? extends Number&gt;</code>çš„å­ç±»å‹äº†ï¼Œä»è€Œä½¿å¾— <code>copyAll</code> æ–¹æ³•å¯ä»¥æ­£å¸¸ä½¿ç”¨</p><p>ç®€è€Œè¨€ä¹‹ï¼Œå¸¦ <strong>extends</strong> é™å®šäº†ä¸Šç•Œçš„é€šé…ç¬¦ç±»å‹ä½¿å¾—<strong>æ³›å‹å‚æ•°ç±»å‹æ˜¯åå˜çš„</strong>ï¼Œå³å¦‚æœ A æ˜¯ B çš„å­ç±»ï¼Œé‚£ä¹ˆ <code>Generic&lt;A&gt;</code> å°±æ˜¯<code>Generic&lt;? extends B&gt;</code>çš„å­ç±»å‹</p><h1 id="åã€æ³›å‹é€†å˜" tabindex="-1"><a class="header-anchor" href="#åã€æ³›å‹é€†å˜" aria-hidden="true">#</a> åã€æ³›å‹é€†å˜</h1><p><strong>åå˜</strong>æ‰€èƒ½åšåˆ°çš„æ˜¯ï¼šå¦‚æœ A æ˜¯ B çš„å­ç±»ï¼Œé‚£ä¹ˆ <code>Generic&lt;A&gt;</code> å°±æ˜¯<code>Generic&lt;? extends B&gt;</code>çš„å­ç±»å‹ã€‚<strong>é€†å˜</strong>ç›¸åï¼Œå…¶ä»£è¡¨çš„æ˜¯ï¼šå¦‚æœ A æ˜¯ B çš„å­ç±»ï¼Œé‚£ä¹ˆ <code>Generic&lt;B&gt;</code> å°±æ˜¯ <code>Generic&lt;? super A&gt;</code> çš„å­ç±»å‹</p><p>åå˜è¿˜æ¯”è¾ƒå¥½ç†è§£ï¼Œæ¯•ç«Ÿå…¶ç»§æ‰¿å…³ç³»æ˜¯ç›¸åŒçš„ï¼Œä½†é€†å˜å°±æ¯”è¾ƒåç›´è§‰äº†ï¼Œæ•´ä¸ªç»§æ‰¿å…³ç³»éƒ½å€’è¿‡æ¥äº†</p><p>é€†å˜çš„ä½œç”¨å¯ä»¥é€šè¿‡ç›¸åŒçš„ä¾‹å­æ¥ç†è§£ï¼Œ<code>copyAll</code> æ–¹æ³•å¦‚ä¸‹ä¿®æ”¹ä¹Ÿå¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œæ­¤æ—¶å°±æ˜¯å‘ç¼–è¯‘å™¨åšå‡ºäº†å¦ä¸€ç§å®‰å…¨ä¿è¯ï¼š<strong>å‘ numberList ä¼ é€’çš„å€¼åªä¼šæ˜¯ Integer ç±»å‹ï¼Œä¸”ä» numberList å–å‡ºçš„å€¼ä¹Ÿåªä¼šå½“åš Object ç±»å‹</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">copyAll</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> from<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">to</span><span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>from<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>? super T</code>è¡¨ç¤º <code>to</code> æ¥æ”¶ T æˆ–è€… T çš„çˆ¶ç±»å‹ï¼Œè€Œä¸å•å•æ˜¯ T è‡ªèº«ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å®‰å…¨åœ°å‘ <code>to</code> ä¼ ç±»å‹ä¸º T çš„å€¼ï¼Œä½†ç”±äºæˆ‘ä»¬å¹¶ä¸çŸ¥é“ T ä»£è¡¨çš„å…·ä½“ç±»å‹ï¼Œæ‰€ä»¥ä» <code>to</code> å–å‡ºæ¥çš„å€¼åªèƒ½æ˜¯ Object ç±»å‹ã€‚æœ‰äº†è¯¥é™åˆ¶åï¼Œ<code>integerList</code>åªèƒ½å‘ <code>numberList</code>ä¼ é€’ç±»å‹ä¸º Integer çš„å€¼ï¼Œä¸”é¿å…äº†ä» <code>numberList</code> ä¸­è·å–åˆ°éæ³•ç±»å‹å€¼çš„å¯èƒ½ï¼Œæ­¤æ—¶<code>List&lt;Number&gt;</code>å°±ç›¸å½“äº<code>List&lt;? super Integer&gt;</code>çš„å­ç±»å‹äº†ï¼Œä»è€Œä½¿å¾— <code>copyAll</code> æ–¹æ³•å¯ä»¥æ­£å¸¸ä½¿ç”¨</p><p>ç®€è€Œè¨€ä¹‹ï¼Œå¸¦ <strong>super</strong> é™å®šäº†ä¸‹ç•Œçš„é€šé…ç¬¦ç±»å‹ä½¿å¾—<strong>æ³›å‹å‚æ•°ç±»å‹æ˜¯é€†å˜çš„</strong>ï¼Œå³å¦‚æœ A æ˜¯ B çš„å­ç±»ï¼Œé‚£ä¹ˆ <code>Generic&lt;B&gt;</code> å°±æ˜¯ <code>Generic&lt;? super A&gt;</code> çš„å­ç±»å‹</p><h1 id="åä¸€ã€out-in" tabindex="-1"><a class="header-anchor" href="#åä¸€ã€out-in" aria-hidden="true">#</a> åä¸€ã€out &amp; in</h1><p>Java ä¸­å…³äºæ³›å‹çš„å›°å¢ƒåœ¨ Kotlin ä¸­ä¸€æ ·å­˜åœ¨ï¼Œout å’Œ in éƒ½æ˜¯ Kotlin çš„å…³é”®å­—ï¼Œå…¶ä½œç”¨éƒ½æ˜¯ä¸ºäº†æ¥åº”å¯¹æ³›å‹é—®é¢˜ã€‚<code>in</code> å’Œ <code>out</code> æ˜¯ä¸€ä¸ªå¯¹ç«‹é¢ï¼ŒåŒæ—¶å®ƒä»¬åˆä¸æ³›å‹<strong>ä¸å˜</strong>ç›¸å¯¹ç«‹ï¼Œç»Ÿç§°ä¸º<strong>å‹å˜</strong></p><ul><li>out æœ¬èº«å¸¦æœ‰<strong>å‡ºå»</strong>çš„æ„æ€ï¼Œæœ¬èº«å¸¦æœ‰å€¾å‘äº<strong>å–å€¼æ“ä½œ</strong>çš„æ„æ€ï¼Œç”¨äº<strong>æ³›å‹åå˜</strong></li><li>in æœ¬èº«å¸¦æœ‰<strong>è¿›æ¥</strong>çš„æ„æ€ï¼Œæœ¬èº«å¸¦æœ‰å€¾å‘äº<strong>ä¼ å€¼æ“ä½œ</strong>çš„æ„æ€ï¼Œç”¨äº<strong>æ³›å‹é€†å˜</strong></li></ul><p>å†æ¥çœ‹ä¸‹ç›¸åŒä¾‹å­ï¼Œè¯¥ä¾‹å­åœ¨ Java ä¸­å­˜åœ¨çš„é—®é¢˜åœ¨ Kotlin ä¸­ä¸€æ ·æœ‰</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> numberList <span class="token operator">=</span> mutableListOf<span class="token operator">&lt;</span>Number<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">val</span> intList <span class="token operator">=</span> <span class="token function">mutableListOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>

    <span class="token function">copyAll</span><span class="token punctuation">(</span>numberList<span class="token punctuation">,</span> intList<span class="token punctuation">)</span> <span class="token comment">//æŠ¥é”™</span>

    numberList<span class="token punctuation">.</span><span class="token function">forEach</span> <span class="token punctuation">{</span>
        <span class="token function">println</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token function">copyAll</span><span class="token punctuation">(</span><span class="token keyword">to</span><span class="token operator">:</span> MutableList<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">,</span> from<span class="token operator">:</span> MutableList<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">to</span><span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>from<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŠ¥é”™åŸå› å’Œ Java å®Œå…¨ä¸€æ ·ï¼Œå› ä¸ºæ­¤æ—¶ç¼–è¯‘å™¨æ— æ³•åˆ¤æ–­å‡ºæˆ‘ä»¬åˆ°åº•æ˜¯å¦ä¼šåšå‡ºä¸å®‰å…¨çš„æ“ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬ä¾ç„¶è¦æ¥å‘ç¼–è¯‘å™¨åšå‡ºå®‰å…¨ä¿è¯</p><p>æ­¤æ—¶å°±éœ€è¦åœ¨ Kotlin ä¸­æ¥å®ç°<strong>æ³›å‹åå˜</strong>å’Œ<strong>æ³›å‹é€†å˜</strong>äº†ï¼Œä»¥ä¸‹ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥å®ç°ï¼š</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token function">copyAll</span><span class="token punctuation">(</span><span class="token keyword">to</span><span class="token operator">:</span> MutableList<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">,</span> from<span class="token operator">:</span> MutableList<span class="token operator">&lt;</span><span class="token keyword">out</span> T<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">to</span><span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>from<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token function">copyAll</span><span class="token punctuation">(</span><span class="token keyword">to</span><span class="token operator">:</span> MutableList<span class="token operator">&lt;</span><span class="token keyword">in</span> T<span class="token operator">&gt;</span><span class="token punctuation">,</span> from<span class="token operator">:</span> MutableList<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">to</span><span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>from<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>out</code> å…³é”®å­—å°±ç›¸å½“äº Java ä¸­çš„<code>&lt;? extends T&gt;</code>ï¼Œå…¶ä½œç”¨å°±æ˜¯é™åˆ¶äº† <code>from</code> ä¸èƒ½ç”¨äºæ¥æ”¶å€¼è€Œåªèƒ½å‘å…¶å–å€¼ï¼Œè¿™æ ·å°±é¿å…äº†ä» <code>to</code> å–å‡ºå€¼ç„¶åå‘ <code>from</code> èµ‹å€¼è¿™ç§ä¸å®‰å…¨çš„è¡Œä¸ºäº†ï¼Œå³å®ç°äº†æ³›å‹åå˜</p><p><code>in</code> å…³é”®å­—å°±ç›¸å½“äº Java ä¸­çš„<code>&lt;? super T&gt;</code>ï¼Œå…¶ä½œç”¨å°±æ˜¯é™åˆ¶äº† <code>to</code> åªèƒ½ç”¨äºæ¥æ”¶å€¼è€Œä¸èƒ½å‘å…¶å–å€¼ï¼Œè¿™æ ·å°±é¿å…äº†ä» <code>to</code> å–å‡ºå€¼ç„¶åå‘ <code>from</code> èµ‹å€¼è¿™ç§ä¸å®‰å…¨çš„è¡Œä¸ºäº†ï¼Œå³å®ç°äº†æ³›å‹é€†å˜</p><blockquote><p>ä»è¿™ä¹Ÿå¯ä»¥è”æƒ³åˆ°ï¼Œ<code>MutableList&lt;*&gt;</code> å°±ç›¸å½“äº <code>MutableList&lt;out Any?&gt;</code>äº†ï¼Œä¸¤è€…éƒ½å¸¦æœ‰ç›¸åŒçš„é™åˆ¶æ¡ä»¶ï¼šä¸å…è®¸å†™å€¼æ“ä½œï¼Œå…è®¸è¯»å€¼æ“ä½œï¼Œä¸”è¯»å–å‡ºæ¥çš„å€¼åªèƒ½å½“åš <code>Any?</code>è¿›è¡Œå¤„ç†</p></blockquote><h1 id="åäºŒã€æ”¯æŒåå˜çš„-list" tabindex="-1"><a class="header-anchor" href="#åäºŒã€æ”¯æŒåå˜çš„-list" aria-hidden="true">#</a> åäºŒã€æ”¯æŒåå˜çš„ List</h1><p>åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œæƒ³è¦å®ç°åå˜è¿˜æœ‰å¦å¤–ä¸€ç§æ–¹å¼ï¼Œé‚£å°±æ˜¯ä½¿ç”¨ List</p><p>å°† from çš„ç±»å‹å£°æ˜ä» <code>MutableList&lt;T&gt;</code>ä¿®æ”¹ä¸º <code>List&lt;T&gt;</code> åï¼Œå¯ä»¥å‘ç° <code>copyAll</code> æ–¹æ³•ä¹Ÿå¯ä»¥æ­£å¸¸è°ƒç”¨äº†</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token function">copyAll</span><span class="token punctuation">(</span><span class="token keyword">to</span><span class="token operator">:</span> MutableList<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">,</span> from<span class="token operator">:</span> List<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">to</span><span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>from<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹ Kotlin æœ‰ä¸€å®šäº†è§£çš„åŒå­¦åº”è¯¥çŸ¥é“ï¼ŒKotlin ä¸­çš„é›†åˆæ¡†æ¶åˆ†ä¸ºä¸¤ç§å¤§ç±»ï¼š<strong>å¯è¯»å¯å†™</strong>å’Œ<strong>åªèƒ½è¯»ä¸èƒ½å†™</strong></p><p>ä»¥ Java ä¸­çš„ ArrayList ä¸ºä¾‹ï¼ŒKotlin å°†ä¹‹åˆ†ä¸ºäº† MutableList å’Œ List ä¸¤ç§ç±»å‹çš„æ¥å£ã€‚è€Œ List æ¥å£ä¸­çš„æ³›å‹å·²ç»ä½¿ç”¨ out å…³é”®å­—è¿›è¡Œä¿®é¥°äº†ï¼Œä¸”ä¸åŒ…å«ä»»ä½•<strong>ä¼ å…¥å€¼å¹¶ä¿å­˜</strong>çš„æ–¹æ³•ï¼Œå³ List æ¥å£<strong>åªæ”¯æŒè¯»å€¼è€Œä¸æ”¯æŒå†™å€¼</strong>ï¼Œå…¶æœ¬èº«å°±å·²ç»æ»¡è¶³äº†åå˜æ‰€éœ€è¦çš„æ¡ä»¶ï¼Œå› æ­¤<code>copyAll</code> æ–¹æ³•å¯ä»¥æ­£å¸¸ä½¿ç”¨</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> List<span class="token operator">&lt;</span><span class="token keyword">out</span> E<span class="token operator">&gt;</span> <span class="token operator">:</span> Collection<span class="token operator">&lt;</span>E<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">val</span> size<span class="token operator">:</span> Int
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Boolean
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">contains</span><span class="token punctuation">(</span>element<span class="token operator">:</span> <span class="token annotation builtin">@UnsafeVariance</span> E<span class="token punctuation">)</span><span class="token operator">:</span> Boolean
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Iterator<span class="token operator">&lt;</span>E<span class="token operator">&gt;</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">containsAll</span><span class="token punctuation">(</span>elements<span class="token operator">:</span> Collection<span class="token operator">&lt;</span><span class="token annotation builtin">@UnsafeVariance</span> E<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> Boolean
    <span class="token keyword">public</span> <span class="token keyword">operator</span> <span class="token keyword">fun</span> <span class="token keyword">get</span><span class="token punctuation">(</span>index<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> E
    <span class="token keyword">public</span> <span class="token keyword">fun</span> <span class="token function">indexOf</span><span class="token punctuation">(</span>element<span class="token operator">:</span> <span class="token annotation builtin">@UnsafeVariance</span> E<span class="token punctuation">)</span><span class="token operator">:</span> Int
    <span class="token keyword">public</span> <span class="token keyword">fun</span> <span class="token function">lastIndexOf</span><span class="token punctuation">(</span>element<span class="token operator">:</span> <span class="token annotation builtin">@UnsafeVariance</span> E<span class="token punctuation">)</span><span class="token operator">:</span> Int
    <span class="token keyword">public</span> <span class="token keyword">fun</span> <span class="token function">listIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> ListIterator<span class="token operator">&lt;</span>E<span class="token operator">&gt;</span>
    <span class="token keyword">public</span> <span class="token keyword">fun</span> <span class="token function">listIterator</span><span class="token punctuation">(</span>index<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> ListIterator<span class="token operator">&lt;</span>E<span class="token operator">&gt;</span>
    <span class="token keyword">public</span> <span class="token keyword">fun</span> <span class="token function">subList</span><span class="token punctuation">(</span>fromIndex<span class="token operator">:</span> Int<span class="token punctuation">,</span> toIndex<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>E<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>è™½ç„¶ List æ¥å£ä¸­æœ‰å‡ ä¸ªæ–¹æ³•ä¹Ÿæ¥æ”¶äº† E ç±»å‹çš„å…¥å‚å‚æ•°ï¼Œä½†è¯¥æ–¹æ³•æœ¬èº«ä¸ä¼šè¿›è¡Œå†™å€¼æ“ä½œï¼Œæ‰€ä»¥å®é™…ä¸Šå¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼ŒKotlin ä¹Ÿä½¿ç”¨ <code>@UnsafeVariance</code>æŠ‘åˆ¶äº†ç¼–è¯‘å™¨è­¦å‘Š</p></blockquote><h1 id="åä¸‰ã€reified-inline" tabindex="-1"><a class="header-anchor" href="#åä¸‰ã€reified-inline" aria-hidden="true">#</a> åä¸‰ã€reified &amp; inline</h1><p>ä¸Šæ–‡è®²äº†ï¼Œç”±äºç±»å‹æ“¦é™¤ï¼ŒJava å’Œ Kotlin çš„æ³›å‹ç±»å‹å®å‚éƒ½ä¼šåœ¨ç¼–è¯‘é˜¶æ®µè¢«æ“¦é™¤ï¼Œåœ¨ Kotlin ä¸­å­˜åœ¨ä¸€ä¸ªé¢å¤–æ‰‹æ®µå¯ä»¥æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå³<strong>å†…è”å‡½æ•°</strong></p><p>ç”¨å…³é”®å­— inline æ ‡è®°çš„å‡½æ•°å°±ç§°ä¸ºå†…è”å‡½æ•°ï¼Œå†ç”¨ reified å…³é”®å­—ä¿®é¥°å†…è”å‡½æ•°ä¸­çš„æ³›å‹å½¢å‚ï¼Œç¼–è¯‘å™¨åœ¨è¿›è¡Œç¼–è¯‘çš„æ—¶å€™ä¾¿ä¼šå°†å†…è”å‡½æ•°çš„å­—èŠ‚ç æ’å…¥åˆ°æ¯ä¸€ä¸ªè°ƒç”¨çš„åœ°æ–¹ï¼Œå½“ä¸­å°±åŒ…æ‹¬æ³›å‹çš„ç±»å‹å®å‚ã€‚è€Œå†…è”å‡½æ•°çš„ç±»å‹å½¢å‚èƒ½å¤Ÿè¢«å®åŒ–ï¼Œå°±æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨è¿è¡Œæ—¶å¼•ç”¨å®é™…çš„ç±»å‹å®å‚äº†</p><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡ºä»¥ä¸‹è¿™æ ·çš„ä¸€ä¸ªå†…è”å‡½æ•°ï¼Œç”¨äºåˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯æŒ‡å®šç±»å‹</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">.</span>isInstanceOf<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;string&quot;</span></span><span class="token punctuation">.</span>isInstanceOf<span class="token operator">&lt;</span>Int<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span><span class="token keyword">reified</span> T<span class="token operator">&gt;</span> Any<span class="token punctuation">.</span><span class="token function">isInstanceOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Boolean <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span> <span class="token keyword">is</span> T
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†ä»¥ä¸Šçš„ Kotlin ä»£ç åç¼–è¯‘ä¸º Java ä»£ç ï¼Œå¯ä»¥çœ‹å‡ºæ¥ <code>main()</code>æ–¹æ³•æœ€ç»ˆæ˜¯æ²¡æœ‰è°ƒç”¨ <code>isInstanceOf</code> æ–¹æ³•çš„ï¼Œå…·ä½“çš„åˆ¤æ–­é€»è¾‘éƒ½è¢«æ’å…¥åˆ°äº†<code>main()</code>æ–¹æ³•å†…éƒ¨ï¼Œæœ€ç»ˆæ˜¯æ‰§è¡Œäº† <code>instanceof</code> æ“ä½œï¼Œä¸”æŒ‡å®šäº†å…·ä½“çš„æ³›å‹ç±»å‹å‚æ•° String å’Œ Integer</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">GenericTest6Kt</span> <span class="token punctuation">{</span>
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">Object</span> $<span class="token keyword">this</span>$isInstanceOf$iv <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">int</span> $i$f$isInstanceOf <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token keyword">boolean</span> var2 <span class="token operator">=</span> $<span class="token keyword">this</span>$isInstanceOf$iv <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">;</span>
      $i$f$isInstanceOf <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>var2<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">Object</span> $<span class="token keyword">this</span>$isInstanceOf$iv <span class="token operator">=</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">;</span>
      $i$f$isInstanceOf <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      var2 <span class="token operator">=</span> $<span class="token keyword">this</span>$isInstanceOf$iv <span class="token keyword">instanceof</span> <span class="token class-name">Integer</span><span class="token punctuation">;</span>
      $i$f$isInstanceOf <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>var2<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token comment">// $FF: synthetic method</span>
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> var0<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token comment">// $FF: synthetic method</span>
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> <span class="token function">isInstanceOf</span><span class="token punctuation">(</span><span class="token class-name">Object</span> $<span class="token keyword">this</span>$isInstanceOf<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">int</span> $i$f$isInstanceOf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token class-name">Intrinsics</span><span class="token punctuation">.</span><span class="token function">checkNotNullParameter</span><span class="token punctuation">(</span>$<span class="token keyword">this</span>$isInstanceOf<span class="token punctuation">,</span> <span class="token string">&quot;$this$isInstanceOf&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">Intrinsics</span><span class="token punctuation">.</span><span class="token function">reifiedOperationMarker</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;T&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> $<span class="token keyword">this</span>$isInstanceOf <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>inline å’Œ reified æ¯”è¾ƒæœ‰ç”¨çš„ä¸€ä¸ªåœºæ™¯æ˜¯ç”¨åœ¨ Gson ååºåˆ—çš„æ—¶å€™ã€‚ç”±äºæ³›å‹è¿è¡Œæ—¶<strong>ç±»å‹æ“¦é™¤</strong>çš„é—®é¢˜ï¼Œç›®å‰ç”¨ Gson ååºåˆ—åŒ–æ³›å‹ç±»æ—¶æ­¥éª¤æ˜¯æ¯”è¾ƒç¹ççš„ï¼Œåˆ©ç”¨ inline å’Œ reified æˆ‘ä»¬å°±å¯ä»¥ç®€åŒ–å¾ˆå¤šæ“ä½œ</p><div class="language-kotlin line-numbers-mode" data-ext="kt"><pre class="language-kotlin"><code><span class="token keyword">val</span> gson <span class="token operator">=</span> <span class="token function">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span><span class="token keyword">reified</span> T<span class="token operator">&gt;</span> <span class="token function">toBean</span><span class="token punctuation">(</span>json<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> T <span class="token punctuation">{</span>
    <span class="token keyword">return</span> gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> T<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">data</span> <span class="token keyword">class</span> <span class="token function">BlogBean</span><span class="token punctuation">(</span><span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">val</span> url<span class="token operator">:</span> String<span class="token punctuation">)</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> json <span class="token operator">=</span> <span class="token string-literal multiline"><span class="token string">&quot;&quot;&quot;{&quot;name&quot;:&quot;ä¸šå¿—é™ˆ&quot;,&quot;url&quot;:&quot;https://juejin.cn/user/923245496518439&quot;}&quot;&quot;&quot;</span></span>
    <span class="token keyword">val</span> listJson <span class="token operator">=</span> <span class="token string-literal multiline"><span class="token string">&quot;&quot;&quot;[{&quot;name&quot;:&quot;ä¸šå¿—é™ˆ&quot;,&quot;url&quot;:&quot;https://juejin.cn/user/923245496518439&quot;},{&quot;name&quot;:&quot;ä¸šå¿—é™ˆ&quot;,&quot;url&quot;:&quot;https://juejin.cn/user/923245496518439&quot;}]&quot;&quot;&quot;</span></span>

    <span class="token keyword">val</span> blogBean <span class="token operator">=</span> toBean<span class="token operator">&lt;</span>BlogBean<span class="token operator">&gt;</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span>
    <span class="token keyword">val</span> blogMap <span class="token operator">=</span> toBean<span class="token operator">&lt;</span>Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> String<span class="token operator">&gt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span>
    <span class="token keyword">val</span> blogBeanList <span class="token operator">=</span> toBean<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>BlogBean<span class="token operator">&gt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>listJson<span class="token punctuation">)</span>
    
    <span class="token comment">//BlogBean(name=ä¸šå¿—é™ˆ, url=https://juejin.cn/user/923245496518439)</span>
    <span class="token function">println</span><span class="token punctuation">(</span>blogBean<span class="token punctuation">)</span>
    <span class="token comment">//{name=ä¸šå¿—é™ˆ, url=https://juejin.cn/user/923245496518439}</span>
    <span class="token function">println</span><span class="token punctuation">(</span>blogMap<span class="token punctuation">)</span>
    <span class="token comment">//[{name=ä¸šå¿—é™ˆ, url=https://juejin.cn/user/923245496518439}, {name=ä¸šå¿—é™ˆ, url=https://juejin.cn/user/923245496518439}]</span>
    <span class="token function">println</span><span class="token punctuation">(</span>blogBeanList<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,142),d={href:"https://github.com/leavesCZY/JsonHolder",target:"_blank",rel:"noopener noreferrer"},v=p('<h1 id="åå››ã€æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#åå››ã€æ€»ç»“" aria-hidden="true">#</a> åå››ã€æ€»ç»“</h1><p>æœ€åæ¥åšä¸ªç®€å•çš„æ€»ç»“</p><table><thead><tr><th></th><th>åå˜</th><th>é€†å˜</th><th>ä¸å˜</th></tr></thead><tbody><tr><td>Kotlin</td><td><code>&lt;out T&gt;</code>ï¼Œåªèƒ½ä½œä¸ºæ¶ˆè´¹è€…ï¼Œåªèƒ½è¯»å–ä¸èƒ½æ·»åŠ </td><td><code>&lt;in T&gt;</code>ï¼Œåªèƒ½ä½œä¸ºç”Ÿäº§è€…ï¼Œåªèƒ½æ·»åŠ ï¼Œè¯»å–å‡ºçš„å€¼åªèƒ½å½“åš Any ç±»å‹</td><td><code>&lt;T&gt;</code>ï¼Œæ—¢å¯ä»¥æ·»åŠ ä¹Ÿå¯ä»¥è¯»å–</td></tr><tr><td>Java</td><td><code>&lt;? extends T&gt;</code>ï¼Œåªèƒ½ä½œä¸ºæ¶ˆè´¹è€…ï¼Œåªèƒ½è¯»å–ä¸èƒ½æ·»åŠ </td><td><code>&lt;? super T&gt;</code>ï¼Œåªèƒ½ä½œä¸ºç”Ÿäº§è€…ï¼Œåªèƒ½æ·»åŠ ï¼Œè¯»å–å‡ºçš„å€¼åªèƒ½å½“åš Object ç±»å‹</td><td><code>&lt;T&gt;</code>ï¼Œæ—¢å¯ä»¥æ·»åŠ ä¹Ÿå¯ä»¥è¯»å–</td></tr></tbody></table>',3);function m(b,g){const a=o("ExternalLinkIcon");return c(),l("div",null,[n("blockquote",null,[n("p",null,[s("å…¬ä¼—å·ï¼š"),n("a",u,[s("å­—èŠ‚æ•°ç»„"),t(a)])]),k]),r,n("p",null,[s("æˆ‘ä¹Ÿåˆ©ç”¨ Kotlin çš„è¿™ä¸ªå¼ºå¤§ç‰¹æ€§å†™äº†ä¸€ä¸ªç”¨äºç®€åŒ– Java / Kotlin å¹³å°çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ“ä½œçš„åº“ï¼š"),n("a",d,[s("JsonHolder"),t(a)])]),v])}const f=e(i,[["render",m],["__file","ä¸€æ–‡è¯»æ‡‚ Java å’Œ Kotlin çš„æ³›å‹éš¾ç‚¹.html.vue"]]);export{f as default};
