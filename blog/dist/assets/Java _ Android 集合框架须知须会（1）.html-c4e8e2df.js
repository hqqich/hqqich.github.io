import{_ as p}from"./plugin-vue_export-helper-c27b6911.js";import{r as t,o as e,c as o,a as n,d as s,e as c,f as l}from"./app-6847d3e4.js";const i={},u={href:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/adbc507fc3704fd8955aae739a433db2~tplv-k3u1fbpfcp-zoom-1.image",target:"_blank",rel:"noopener noreferrer"},k=n("p",null,"å¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ© ğŸ¤£ğŸ¤£",-1),r=l(`<blockquote><p>æœ¬ç³»åˆ—æ–‡ç« ä¼šé™†ç»­å¯¹ Java å’Œ Android çš„é›†åˆæ¡†æ¶ï¼ˆJDK 1.8ï¼ŒAndroid SDK 30ï¼‰ä¸­çš„å‡ ä¸ªå¸¸è§å®¹å™¨ç»“åˆæºç è¿›è¡Œä»‹ç»ï¼Œäº†è§£ä¸åŒå®¹å™¨åœ¨<strong>æ•°æ®ç»“æ„ã€é€‚ç”¨åœºæ™¯ã€ä¼˜åŠ¿ç‚¹</strong>ä¸Šçš„ä¸åŒï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ© ğŸ¤£ğŸ¤£</p></blockquote><h1 id="ä¸€ã€æ•°ç»„å’Œé“¾è¡¨" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€æ•°ç»„å’Œé“¾è¡¨" aria-hidden="true">#</a> ä¸€ã€æ•°ç»„å’Œé“¾è¡¨</h1><p>å¾ˆå¤šé›†åˆæ¡†æ¶åœ¨åº•å±‚ç»“æ„éƒ½ä½¿ç”¨åˆ°äº†<strong>æ•°ç»„</strong>å’Œ<strong>é“¾è¡¨</strong>è¿™ä¸¤ç§æ•°æ®ç»“æ„ï¼Œå®ƒä»¬åœ¨<strong>æ•°æ®å­˜å‚¨æ–¹å¼</strong>å’Œ<strong>ä¼˜åŠ£ç‚¹</strong>è¿™ä¸¤æ–¹é¢æœ‰ç€å¾ˆå¤§åŒºåˆ«ï¼Œè¿™é‡Œå…ˆæ¥ä»‹ç»ä¸‹è¿™ä¸¤è€…çš„ç»“æ„å’ŒåŒºåˆ«</p><h2 id="_1ã€æ•°ç»„" tabindex="-1"><a class="header-anchor" href="#_1ã€æ•°ç»„" aria-hidden="true">#</a> 1ã€æ•°ç»„</h2><p>å‡è®¾ç°åœ¨æœ‰å…­ä¸ªå…ƒç´ å­˜æ”¾åœ¨æ•°ç»„ä¸­ï¼Œåˆ™æ•°ç»„åœ¨å†…å­˜ä¸­çš„å­˜å‚¨ç»“æ„å°±å¦‚ä¸‹æ‰€ç¤º</p><figure><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d35e498da26c4619acab1229db882021~tplv-k3u1fbpfcp-zoom-1.image" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ol><li>æ•°ç»„æ˜¯ä¸€å—è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œå…ƒç´ æŒ‰ç…§åæ ‡ç´¢å¼•ä¾æ¬¡æ’åˆ—ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡åæ ‡å®šä½åˆ°æ¯ä¸€ä¸ªæ•°æ®çš„å†…å­˜åœ°å€ï¼Œä¾‹å¦‚å¯ä»¥ç›´æ¥é€šè¿‡åæ ‡ 3 è·å–åˆ° element4ï¼Œçœå»äº†ä»å¤´åˆ°å°¾çš„éå†æ“ä½œï¼Œå› æ­¤éšæœºè¯»å–æ•°æ®çš„æ•ˆç‡è¾ƒé«˜</li><li>ç›¸å¯¹åº”çš„ï¼Œç”±äºæ•°ç»„è¦æ±‚å…ƒç´ æ˜¯è¿ç»­å­˜å‚¨çš„ï¼Œå› æ­¤åœ¨æ·»åŠ å’Œç§»é™¤æ•°æ®æ—¶æœ‰å¯èƒ½éœ€è¦ç§»åŠ¨å¤§é‡æ•°æ®ï¼Œæ‰€ä»¥åœ¨æ·»åŠ å’Œç§»é™¤æ•°æ®æ—¶æ•ˆç‡è¾ƒä½</li><li>æ•°ç»„åœ¨ä½¿ç”¨å‰éœ€è¦å…ˆæŒ‡å®šå…¶ç©ºé—´å¤§å°ï¼Œåœ¨å£°æ˜ç©ºé—´å¤§å°åæ— æ³•å†æ¬¡ä¿®æ”¹ã€‚å¦‚æœæˆ‘ä»¬åœ¨ä½¿ç”¨å‰å·²çŸ¥å¾…å­˜å…¥çš„æ•°æ®é‡çš„è¯ï¼Œè‡ªç„¶å¯ä»¥å°†æ•°ç»„åˆå§‹åŒ–ä¸ºç›®æ ‡å®¹é‡ï¼Œè¿™æ ·å°±ä¸ä¼šæµªè´¹å†…å­˜ç©ºé—´äº†ã€‚ä½†å®é™…ä¸Šæ•°æ®é‡å¾€å¾€æ˜¯æœªçŸ¥çš„ï¼Œç»å¸¸ä¼šå› ä¸ºç”³è¯·äº†è¾ƒå¤§çš„å†…å­˜ç©ºé—´å¯¼è‡´æµªè´¹ï¼Œæˆ–è€…æ˜¯ç”³è¯·å°‘äº†å¯¼è‡´éœ€è¦åç»­æ‰©å®¹ï¼Œè€Œæ•°ç»„åœ¨æ‰©å®¹æ—¶åªèƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„å¹¶å°†æ•°æ®æ•´ä½“è¿ç§»ï¼Œè¿™å°±å½±å“åˆ°äº†æ•°ç»„çš„è¿è¡Œæ€§èƒ½</li></ol><p>ArrayList åº•å±‚å°±æ˜¯ç”¨æ•°ç»„æ¥å­˜å‚¨æ•°æ®</p><h2 id="_2ã€é“¾è¡¨" tabindex="-1"><a class="header-anchor" href="#_2ã€é“¾è¡¨" aria-hidden="true">#</a> 2ã€é“¾è¡¨</h2><p>å‡è®¾ç°åœ¨æœ‰å››ä¸ªå…ƒç´ ä¾é é“¾è¡¨æ¥å­˜æ”¾ï¼Œé“¾è¡¨åœ¨å†…å­˜ä¸­çš„å­˜å‚¨ç»“æ„å°±å¦‚ä¸‹æ‰€ç¤º</p><figure><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/073ecd6842734463804b9fc6dcbd151d~tplv-k3u1fbpfcp-zoom-1.image" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ol><li>å›¾ä¸­æ‰€å±•ç¤ºçš„æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œå³æ¯ä¸ªç»“ç‚¹é™¤äº†åŒ…å«å®é™…çš„æ•°æ®å¤–ï¼Œè¿˜å­˜åœ¨ä¸¤ä¸ªå¼•ç”¨åˆ†åˆ«æŒ‡å‘ä¸Šä¸€ä¸ªç»“ç‚¹ï¼ˆprevï¼‰å’Œä¸‹ä¸€ä¸ªç»“ç‚¹ï¼ˆnextï¼‰ï¼Œå„ä¸ªç»“ç‚¹é€šè¿‡è¿™ç§åŒå‘é“¾æ¥ä»è€Œä¸²è”åœ¨ä¸€èµ·ã€‚æ­¤å¤–è¿˜å­˜åœ¨ä¸¤ä¸ªå¼•ç”¨åˆ†åˆ«æŒ‡å‘å¤´ç»“ç‚¹ï¼ˆfirstï¼‰å’Œå°¾ç»“ç‚¹ï¼ˆlastï¼‰ï¼Œæ–¹ä¾¿è¿›è¡Œæ­£å‘éå†å’Œåå‘éå†</li><li>é“¾è¡¨ä¸è¦æ±‚æœ‰è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œæ–°æ·»åŠ çš„ç»“ç‚¹å¯ä»¥åœ¨å†…å­˜ä¸­çš„ä»»ä½•ä½ç½®ï¼Œåªè¦ä¸Šä¸€ä¸ªç»“ç‚¹å’Œä¸‹ä¸€ä¸ªç»“ç‚¹äº’ç›¸ä¿å­˜æœ‰å¯¹æ–¹çš„å¼•ç”¨å³å¯ï¼Œè¿™ä¹Ÿå¯¼è‡´åœ¨éšæœºè®¿é—®æ•°æ®æ—¶åªèƒ½éå†æ•´ä¸ªé“¾è¡¨ï¼Œåœ¨æœ€åçš„æƒ…å†µä¸‹ç”šè‡³éœ€è¦å…¨é‡éå†ã€‚å½“ç„¶ï¼Œå¯ä»¥æ ¹æ®å®é™…æƒ…å†µæ¥é€‰æ‹©æ˜¯æ­£å‘éå†è¿˜æ˜¯åå‘éå†ï¼Œä»¥æ­¤æé«˜è®¿é—®æ•ˆç‡ï¼Œä½†æ€»çš„æ¥è¯´é“¾è¡¨åœ¨éšæœºè®¿é—®æ•°æ®æ—¶æ•ˆç‡è¦æ¯”æ•°ç»„ä½</li><li>åœ¨æ·»åŠ æˆ–ç§»é™¤å…ƒç´ æ—¶ï¼Œåªéœ€è¦ä¿®æ”¹ç›¸é‚»ç»“ç‚¹å¯¹æŒ‡å®šç»“ç‚¹çš„å¼•ç”¨å³å¯ï¼Œè€Œä¸éœ€åƒæ•°ç»„é‚£æ ·éœ€è¦ç§»åŠ¨å…ƒç´ ï¼Œå› æ­¤é“¾è¡¨åœ¨æ·»åŠ å’Œç§»é™¤å…ƒç´ æ—¶æ•ˆç‡è¾ƒé«˜</li><li>é“¾è¡¨ä¸éœ€äº‹å…ˆç”³è¯·å†…å­˜ç©ºé—´ï¼Œæ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µè¿›è¡ŒåŠ¨æ€ç”³è¯·å³å¯</li><li>æ­¤å¤–è¿˜å­˜åœ¨ä¸€ç§å•å‘é“¾è¡¨çš„ç»“æ„ï¼Œå³æ¯ä¸ªç»“ç‚¹åŒ…å«å¯¹ä¸‹ä¸€ä¸ªç»“ç‚¹çš„å¼•ç”¨ nextï¼Œä½†ä¸åŒ…å« prevï¼Œæ‰€ä»¥å•å‘é“¾è¡¨åªèƒ½ä»å¤´åˆ°å°¾è¿›è¡Œéå†</li></ol><p>LinkedList åº•å±‚å°±æ˜¯ç”¨é“¾è¡¨æ¥å­˜å‚¨æ•°æ®</p><h1 id="äºŒã€arraylist" tabindex="-1"><a class="header-anchor" href="#äºŒã€arraylist" aria-hidden="true">#</a> äºŒã€ArrayList</h1><p>ArrayList åº”è¯¥æ˜¯å¤§å¤šæ•°å¼€å‘è€…ä½¿ç”¨å¾—æœ€ä¸ºé¢‘ç¹çš„é›†åˆå®¹å™¨äº†ï¼ŒArrayList å®ç°äº† List æ¥å£ï¼Œæ˜¯ä¸€ä¸ªæœ‰åºå®¹å™¨ï¼Œå³å…ƒç´ çš„å­˜æ”¾é¡ºåºä¸æ·»åŠ é¡ºåºä¿æŒä¸€è‡´ï¼Œå…è®¸æ·»åŠ ç›¸åŒå…ƒç´ ï¼ŒåŒ…æ‹¬ null ã€‚ArrayList åº•å±‚é€šè¿‡æ•°ç»„æ¥è¿›è¡Œæ•°æ®å­˜å‚¨ï¼Œå½“å‘ ArrayList ä¸­æ·»åŠ å…ƒç´ æ—¶å¦‚æœå‘ç°æ•°ç»„ç©ºé—´ä¸è¶³ï¼ŒArrayList ä¼šè‡ªåŠ¨å¯¹åº•å±‚æ•°ç»„è¿›è¡Œæ‰©å®¹å¹¶è¿ç§»ç°æœ‰æ•°æ®</p><h2 id="_1ã€ç±»å£°æ˜" tabindex="-1"><a class="header-anchor" href="#_1ã€ç±»å£°æ˜" aria-hidden="true">#</a> 1ã€ç±»å£°æ˜</h2><p>ä» ArrayList å®ç°çš„æ¥å£å¯ä»¥çœ‹å‡ºæ¥å®ƒæ˜¯æ”¯æŒå¿«é€Ÿè®¿é—®ï¼Œå¯å…‹éš†ï¼Œå¯åºåˆ—åŒ–çš„</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">AbstractList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> 
    <span class="token keyword">implements</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">RandomAccess</span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2ã€æˆå‘˜å˜é‡" tabindex="-1"><a class="header-anchor" href="#_2ã€æˆå‘˜å˜é‡" aria-hidden="true">#</a> 2ã€æˆå‘˜å˜é‡</h2><p>ArrayList ä¸€å…±åŒ…å«ä»¥ä¸‹å‡ ä¸ªæˆå‘˜å˜é‡ï¼Œä¸»è¦çœ‹ elementDataã€‚elementData æ˜¯ç”¨äºå­˜æ”¾æ•°æ®çš„åº•å±‚æ•°ç»„ï¼Œç”±äºå…¶æ•°æ®ç±»å‹å£°æ˜ä¸º Objectï¼Œæ‰€ä»¥å¯ä»¥ç”¨æ¥å­˜æ”¾ä»»ä½•ç±»å‹çš„æ•°æ®ã€‚è€Œ ArrayList å±äºæ³›å‹ç±»ï¼Œå¦‚æœæˆ‘ä»¬åœ¨åˆå§‹åŒ–æ—¶å°±æŒ‡å®šäº†æ•°æ®ç±»å‹çš„è¯ï¼Œä¾é  Java æ³›å‹ä¸ºæˆ‘ä»¬æä¾›çš„è¯­æ³•ç³–ï¼Œæˆ‘ä»¬åœ¨å‘ elementData å­˜å–æ•°æ®æ—¶ç¼–è¯‘å™¨å°±ä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹æ ¡éªŒå’Œç±»å‹è½¬æ¢ï¼Œç¡®ä¿å­˜å…¥å’Œå–å‡ºçš„æ•°æ®ç±»å‹æ˜¯å®‰å…¨çš„</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//åºåˆ—åŒ–ID</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">8683452581122892189L</span><span class="token punctuation">;</span>

<span class="token comment">//è¿›è¡Œæ‰©å®¹æ“ä½œåçš„æœ€å°å®¹é‡</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">DEFAULT_CAPACITY</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

<span class="token comment">//å¦‚æœå¤–éƒ¨ä¸ºé›†åˆè®¾ç½®çš„åˆå§‹åŒ–å¤§å°ä¸º 0ï¼Œåˆ™å°† elementData æŒ‡å‘æ­¤ç©ºæ•°ç»„</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token constant">EMPTY_ELEMENTDATA</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//å¦‚æœåœ¨åˆå§‹åŒ–é›†åˆæ—¶ä½¿ç”¨çš„æ˜¯æ— å‚æ„é€ å‡½æ•°ï¼Œåˆ™å°† elementData æŒ‡å‘æ­¤ç©ºæ•°ç»„</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token constant">DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//ç”¨æ¥å­˜æ”¾å…ƒç´ çš„æ•°ç»„</span>
<span class="token keyword">transient</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData<span class="token punctuation">;</span>

<span class="token comment">//é›†åˆå¤§å°</span>
<span class="token keyword">private</span> <span class="token keyword">int</span> size<span class="token punctuation">;</span>

<span class="token comment">//ArrayList çš„å¿«ç…§ç‰ˆæœ¬å·</span>
<span class="token keyword">protected</span> <span class="token keyword">transient</span> <span class="token keyword">int</span> modCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3ã€æ„é€ å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#_3ã€æ„é€ å‡½æ•°" aria-hidden="true">#</a> 3ã€æ„é€ å‡½æ•°</h2><p>å¦‚æœå·²ç»çŸ¥é“ç›®æ ‡æ•°æ®é‡å¤§å°çš„è¯ï¼Œåœ¨åˆå§‹åŒ– ArrayList çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥ç›´æ¥ä¼ å…¥æœ€ç»ˆçš„å®¹é‡å€¼ï¼Œè¿™æ ·æ•ˆç‡ä¼šæ›´é«˜ä¸€äº›ã€‚å› ä¸ºå¦‚æœ initialCapacity è¿‡å¤§ï¼Œåˆ™ä¼šé€ æˆå†…å­˜æµªè´¹ï¼›å¦‚æœ initialCapacity è¿‡å°ï¼Œå¯èƒ½ä¼šå¯¼è‡´åç»­éœ€è¦å¤šæ¬¡æ‰©å®¹ï¼Œæ¯æ¬¡æ‰©å®¹éƒ½éœ€è¦å¤åˆ¶åŸæœ‰æ•°æ®åˆ°æ–°æ•°ç»„ï¼Œè¿™ä¼šé™ä½è¿è¡Œæ•ˆç‡</p><p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯æ— å‚æ„é€ å‡½æ•°æˆ–è€…æ˜¯æŒ‡å®šçš„ initialCapacity ä¸º 0ï¼Œæ­¤æ—¶ä¹Ÿåªä¼šå°† elementData æŒ‡å‘ç©ºæ•°ç»„ï¼Œå¹¶ä¸ä¼šæ–°å»ºä¸€ä¸ªæ•°ç»„å˜é‡</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//æŒ‡å®šé›†åˆçš„åˆå§‹å®¹é‡ï¼Œä»¥æ­¤æ¥è¿›è¡Œæ•°ç»„çš„åˆå§‹åŒ–æ“ä½œ</span>
<span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token keyword">int</span> initialCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>initialCapacity <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>elementData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>initialCapacity<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>initialCapacity <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>elementData <span class="token operator">=</span> <span class="token constant">EMPTY_ELEMENTDATA</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;Illegal Capacity: &quot;</span><span class="token operator">+</span>initialCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//å¤–éƒ¨æ²¡æœ‰æŒ‡å®šåˆå§‹å®¹é‡ï¼Œæš‚ä¸”ä½¿ç”¨ç©ºæ•°ç»„</span>
<span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>elementData <span class="token operator">=</span> <span class="token constant">DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//ä¼ å…¥ä¸€ä»½åˆå§‹æ•°æ®æ¥è¿›è¡Œåˆå§‹åŒ–</span>
<span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    elementData <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>size <span class="token operator">=</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// c.toArray might (incorrectly) not return Object[] (see 6260652)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>elementData<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
            elementData <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> size<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>elementData <span class="token operator">=</span> <span class="token constant">EMPTY_ELEMENTDATA</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4ã€è·å–å…ƒç´ " tabindex="-1"><a class="header-anchor" href="#_4ã€è·å–å…ƒç´ " aria-hidden="true">#</a> 4ã€è·å–å…ƒç´ </h2><p>åœ¨è·å–æŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´ æ—¶ï¼ŒArrayList éƒ½æ˜¯ç›´æ¥é€šè¿‡åæ ‡å€¼æ¥è·å–å…ƒç´ ï¼Œæ— éœ€ä»å¤´éå†ï¼Œæ‰€ä»¥è¯´ ArrayList éå†å’Œéšæœºè®¿é—®çš„æ•ˆç‡è¾ƒé«˜</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">E</span> <span class="token function">elementData</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//åˆ¤æ–­å–å€¼èŒƒå›´æ˜¯å¦åˆæ³•</span>
    <span class="token function">rangeCheck</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">elementData</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5ã€æ·»åŠ å…ƒç´ " tabindex="-1"><a class="header-anchor" href="#_5ã€æ·»åŠ å…ƒç´ " aria-hidden="true">#</a> 5ã€æ·»åŠ å…ƒç´ </h2><p>ArrayList æ·»åŠ å…ƒç´ çš„æ“ä½œå°±ä¸æ˜¯é‚£ä¹ˆç†æƒ³äº†ã€‚å¦‚æœæ˜¯ç›´æ¥å‘é›†åˆå°¾ç«¯æ·»åŠ æ•°æ®ï¼Œé‚£ä¹ˆç›´æ¥å®šä½åˆ°è¯¥ä½ç½®è¿›è¡Œèµ‹å€¼å³å¯ï¼›å¦‚æœæ˜¯å‘é›†åˆçš„ä¸­é—´ä½ç½® index æ’å…¥æ•°æ®ï¼Œåˆ™éœ€è¦å°†æ•°ç»„ä¸­ç´¢å¼• index åçš„æ‰€æœ‰æ•°æ®å‘åæ¨ç§»ä¸€ä½ï¼Œç„¶åå°†æ•°æ®æ’å…¥åˆ°ç©ºå‡ºçš„ä½ç½®ä¸Šã€‚æ­¤å¤–ï¼Œåœ¨æ’å…¥æ•°æ®å‰ elementData å¯èƒ½å·²ç»ç©ºé—´ä¸è¶³äº†ï¼Œé‚£ä¹ˆè¿˜éœ€è¦å…ˆè¿›è¡Œæ‰©å®¹æ“ä½œã€‚æ‰©å®¹æ“ä½œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç¬¦åˆå¤§å°çš„æ•°ç»„ï¼Œå¹¶å°†åŸæ•°ç»„ä¸­çš„æ•°æ®è¿ç§»åˆ°æ–°æ•°ç»„ä¸­ï¼Œç„¶åè®© elementData æŒ‡å‘æ–°æ•°ç»„</p><p>ç”±æ­¤å¯ä»¥çœ‹å‡ºæ¥ï¼Œå‘é›†åˆæ·»åŠ æ•°æ®å’Œè¿›è¡Œæ‰©å®¹éƒ½å¯èƒ½ä¼šå¯¼è‡´æ•°ç»„å…ƒç´ å¤§é‡ç§»åŠ¨ï¼Œæ‰€ä»¥è¯´ ArrayList å­˜å…¥æ•°æ®çš„æ•ˆç‡å¹¶ä¸é«˜</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//åœ¨éœ€è¦çš„æ—¶å€™è¿›è¡Œæ‰©å®¹</span>
    <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span>size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    elementData<span class="token punctuation">[</span>size<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">rangeCheckForAdd</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//åœ¨éœ€è¦çš„æ—¶å€™è¿›è¡Œæ‰©å®¹</span>
    <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span>size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//å°†ç´¢å¼• index åçš„æ‰€æœ‰æ•°å€¼å‘åæ¨ç§»ä¸€ä½ </span>
    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> index<span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>size <span class="token operator">-</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> element<span class="token punctuation">;</span>
    size<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥ä¸Šè¯´çš„æ˜¯å­˜å…¥å•ä¸ªæ•°æ®çš„æƒ…å†µï¼Œæ­¤å¤–è¿˜æœ‰å­˜å…¥æ•´ä¸ªé›†åˆçš„æƒ…å†µ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//å¦‚æœå¾…æ·»åŠ çš„æ•°æ®ä¸ä¸ºç©ºåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› false</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">addAll</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> numNew <span class="token operator">=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span>size <span class="token operator">+</span> numNew<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//å°†æ•°ç»„ a å¤åˆ¶åˆ° elementData çš„å°¾ç«¯</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> size<span class="token punctuation">,</span> numNew<span class="token punctuation">)</span><span class="token punctuation">;</span>
    size <span class="token operator">+=</span> numNew<span class="token punctuation">;</span>
    <span class="token keyword">return</span> numNew <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//ä»æŒ‡å®šç´¢å¼•å¤„æ·»åŠ æ•°æ®ï¼Œå¦‚æœå¾…æ·»åŠ çš„æ•°æ®ä¸ä¸ºç©ºåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› false</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">addAll</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">rangeCheckForAdd</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> numNew <span class="token operator">=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span>size <span class="token operator">+</span> numNew<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//éœ€è¦ç§»åŠ¨çš„æ•°ç»„å…ƒç´ æ•°é‡</span>
    <span class="token keyword">int</span> numMoved <span class="token operator">=</span> size <span class="token operator">-</span> index<span class="token punctuation">;</span>
    <span class="token comment">//å› ä¸ºè¦æ·»åŠ çš„æ•°æ®å¯èƒ½åˆšå¥½æ˜¯ä»æ•°ç»„æœ€å°¾ç«¯å¼€å§‹æ·»åŠ ï¼Œæ‰€ä»¥ numMoved å¯èƒ½ä¸º 0</span>
    <span class="token comment">//æ‰€ä»¥åªåœ¨ numMoved &gt; 0 çš„æ—¶å€™æ‰éœ€è¦å¯¹æ•°ç»„çš„å…ƒç´ å€¼è¿›è¡Œç§»åŠ¨ï¼Œä»¥æ­¤ç©ºå‡ºä½ç½®ç»™æ•°ç»„ a</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>numMoved <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> index<span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> index <span class="token operator">+</span> numNew<span class="token punctuation">,</span> numMoved<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//å°†æ•°ç»„ a åŒ…å«çš„æ•°æ®æ·»åŠ åˆ° elementData ä¸­</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> index<span class="token punctuation">,</span> numNew<span class="token punctuation">)</span><span class="token punctuation">;</span>
    size <span class="token operator">+=</span> numNew<span class="token punctuation">;</span>
    <span class="token keyword">return</span> numNew <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6ã€ç§»é™¤å…ƒç´ " tabindex="-1"><a class="header-anchor" href="#_6ã€ç§»é™¤å…ƒç´ " aria-hidden="true">#</a> 6ã€ç§»é™¤å…ƒç´ </h2><p>å› ä¸ºæ•°ç»„æ˜¯ä¸€ç§å†…å­˜åœ°å€è¿ç»­çš„æ•°æ®ç»“æ„ï¼Œæ‰€ä»¥ç§»é™¤æŸä¸ªå…ƒç´ åŒæ ·å¯èƒ½å¯¼è‡´å¤§é‡å…ƒç´ ç§»åŠ¨</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//ç§»é™¤æŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´ å€¼ï¼Œå¹¶è¿”å›è¯¥å€¼</span>
<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">rangeCheck</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    modCount<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token comment">//å¾…ç§»é™¤çš„å…ƒç´ å€¼</span>
    <span class="token class-name">E</span> oldValue <span class="token operator">=</span> <span class="token function">elementData</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//å› ä¸ºè¦ç§»é™¤å…ƒç´ å¯¼è‡´éœ€è¦ç§»åŠ¨çš„å…ƒç´ æ•°é‡</span>
    <span class="token keyword">int</span> numMoved <span class="token operator">=</span> size <span class="token operator">-</span> index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">//å› ä¸ºè¦ç§»é™¤çš„å…ƒç´ å¯èƒ½åˆšå¥½æ˜¯æ•°ç»„æœ€åä¸€ä½ï¼Œæ‰€ä»¥ numMoved å¯èƒ½ä¸º 0</span>
    <span class="token comment">//æ‰€ä»¥åªåœ¨ numMoved &gt; 0 çš„æ—¶å€™æ‰éœ€è¦å¯¹æ•°ç»„çš„å…ƒç´ å€¼è¿›è¡Œç§»åŠ¨</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>numMoved <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> index<span class="token punctuation">,</span> numMoved<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//ä¸ç®¡æ•°ç»„æ˜¯å¦éœ€è¦å¯¹å…ƒç´ å€¼è¿›è¡Œç§»åŠ¨ï¼Œæ•°ç»„çš„æœ€åä¸€ä½éƒ½æ˜¯æ— æ•ˆæ•°æ®äº†</span>
    <span class="token comment">//æ­¤å¤„å°†ä¹‹ç½®ä¸º null ä»¥å¸®åŠ©GCå›æ”¶                </span>
    elementData<span class="token punctuation">[</span><span class="token operator">--</span>size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> oldValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//ç§»é™¤é›†åˆä¸­åŒ…å«çš„ç¬¬ä¸€ä½å…ƒç´ å€¼ä¸º o çš„å¯¹è±¡</span>
<span class="token comment">//å¦‚æœåŒ…å«è¯¥å¯¹è±¡ï¼Œåˆ™è¿”å› true ï¼Œå¦åˆ™è¿”å› false</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">fastRemove</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">fastRemove</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7ã€æ‰©å®¹æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#_7ã€æ‰©å®¹æœºåˆ¶" aria-hidden="true">#</a> 7ã€æ‰©å®¹æœºåˆ¶</h2><p>å†æ¥çœ‹ä¸‹æ•°ç»„çš„æ‰©å®¹æœºåˆ¶çš„å…·ä½“å®ç°é€»è¾‘</p><p><code>ensureCapacity</code> æ–¹æ³•çš„å…¥å‚å‚æ•° minCapacity å°±ç”¨äºæŒ‡å®šå¸Œæœ›æ‰©å®¹åçš„æœ€å°ç©ºé—´ï¼Œä½† minCapacity æœ€ç»ˆä¸ä¼šå°äº DEFAULT_CAPACITYï¼Œå³æ‰©å®¹åçš„æ•°ç»„å®¹é‡ä¸ä¼šå°äº 10ã€‚ä¹‹æ‰€ä»¥è¦è¿›è¡Œæœ€å°å®¹é‡çš„é™åˆ¶ï¼Œæ˜¯ä¸ºäº†å‡å°‘å¤šæ¬¡æ‰©å®¹çš„å¯èƒ½æ€§ï¼Œ10 ä»¥å†…çš„æ•°ç»„å¾ˆå®¹æ˜“å°±å‘ç”Ÿæ‰©å®¹</p><p>å¦‚æœåœ¨åˆå§‹åŒ– ArrayList å‰å·²çŸ¥ç›®æ ‡æ•°æ®çš„æ•°æ®é‡ï¼Œæœ€å¥½å°±ä½¿ç”¨<code>ArrayList(int initialCapacity)</code>æ¥è¿›è¡Œåˆå§‹åŒ–ï¼Œç›´æ¥è®©åº•å±‚æ•°ç»„æ‰©å……åˆ°ç›®æ ‡å¤§å°ï¼Œæˆ–è€…æ˜¯åœ¨æ·»åŠ æ•°æ®å‰å°±è°ƒç”¨ <code>ensureCapacity</code> æ–¹æ³•ç›´æ¥è®©æ•°ç»„æ‰©å®¹åˆ°ç›®æ ‡å¤§å°ï¼Œé¿å…ä¹‹åèµ‹å€¼è¿‡ç¨‹ä¸­å¤šæ¬¡æ‰©å®¹</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ensureCapacity</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> minExpand <span class="token operator">=</span> <span class="token punctuation">(</span>elementData <span class="token operator">!=</span> <span class="token constant">DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span><span class="token punctuation">)</span>
        <span class="token operator">?</span> <span class="token number">0</span>
        <span class="token operator">:</span> <span class="token constant">DEFAULT_CAPACITY</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>minCapacity <span class="token operator">&gt;</span> minExpand<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">ensureExplicitCapacity</span><span class="token punctuation">(</span>minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>elementData <span class="token operator">==</span> <span class="token constant">DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        minCapacity <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token constant">DEFAULT_CAPACITY</span><span class="token punctuation">,</span> minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">ensureExplicitCapacity</span><span class="token punctuation">(</span>minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">ensureExplicitCapacity</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    modCount<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token comment">//å¦‚æœå½“å‰æ•°ç»„å¤§å°çš„ç¡®æ˜¯æ¯”éœ€è¦çš„æœ€å°ç©ºé—´ minCapacity å°ï¼Œåˆ™è¿›è¡Œæ‰©å®¹</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>minCapacity <span class="token operator">-</span> elementData<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token function">grow</span><span class="token punctuation">(</span>minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®é™…ä¸Šå®Œæˆæ‰©å®¹æ“ä½œçš„æ˜¯ <code>grow(int minCapacity)</code> æ–¹æ³•ã€‚åœ¨æ‰©å®¹å‰ï¼Œä¼šå…ˆåˆ¤æ–­å¦‚æœå°†å®¹é‡æå‡åˆ°å½“å‰çš„ 1.5 å€æ˜¯å¦èƒ½è¾¾åˆ° minCapacity çš„è¦æ±‚ ï¼Œå¦‚æœç¬¦åˆè¦æ±‚åˆ™ç›´æ¥å°†å®¹é‡æ‰©å……åˆ°å½“å‰çš„ 1.5 å€ï¼Œå¦åˆ™æ‰©å……åˆ° minCapacityï¼Œä½†æœ€ç»ˆå®¹é‡ä¸èƒ½å¤§äº Integer.MAX_VALUE</p><p>æ„å»ºå‡ºä¸€ä¸ªæ–°çš„ç¬¦åˆå¤§å°çš„æ•°ç»„åï¼Œå°±å°†åŸæ•°ç»„ä¸­çš„å…ƒç´ å¤åˆ¶åˆ°æ–°æ•°ç»„ä¸­ï¼Œè‡³æ­¤å°±å®Œæˆäº†æ‰©å®¹</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//æ•°ç»„å¯æ‰©å®¹åˆ°çš„æœ€å¤§å®¹é‡</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">MAX_ARRAY_SIZE</span> <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span> <span class="token operator">-</span> <span class="token number">8</span><span class="token punctuation">;</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">grow</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> oldCapacity <span class="token operator">=</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token comment">//å‡è®¾æ‰©å®¹åçš„ç©ºé—´å¤§å°æ˜¯åŸå…ˆçš„1.5å€</span>
    <span class="token keyword">int</span> newCapacity <span class="token operator">=</span> oldCapacity <span class="token operator">+</span> <span class="token punctuation">(</span>oldCapacity <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>newCapacity <span class="token operator">-</span> minCapacity <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
        newCapacity <span class="token operator">=</span> minCapacity<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>newCapacity <span class="token operator">-</span> <span class="token constant">MAX_ARRAY_SIZE</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
        newCapacity <span class="token operator">=</span> <span class="token function">hugeCapacity</span><span class="token punctuation">(</span>minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    elementData <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> newCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8ã€ä¿®æ”¹å…ƒç´ " tabindex="-1"><a class="header-anchor" href="#_8ã€ä¿®æ”¹å…ƒç´ " aria-hidden="true">#</a> 8ã€ä¿®æ”¹å…ƒç´ </h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//å°†ç´¢å¼• index å‡ºçš„å…ƒç´ å€¼ç½®ä¸º elementï¼Œå¹¶è¿”å›åŸå§‹æ•°å€¼</span>
<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">rangeCheck</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">E</span> oldValue <span class="token operator">=</span> <span class="token function">elementData</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> element<span class="token punctuation">;</span>
    <span class="token keyword">return</span> oldValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9ã€éå†æ•°ç»„" tabindex="-1"><a class="header-anchor" href="#_9ã€éå†æ•°ç»„" aria-hidden="true">#</a> 9ã€éå†æ•°ç»„</h2><p>éå†æ•°ç»„çš„æ–¹æ³•åŒ…å«ä»¥ä¸‹å‡ ä¸ªï¼Œé€»è¾‘éƒ½æ¯”è¾ƒç®€å•ï¼Œç›´æ¥çœ‹æ³¨é‡Šå³å¯ã€‚ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„çŸ¥è¯†ç‚¹æ˜¯çœ‹æ–¹æ³•å†…éƒ¨å¯¹ modCount çš„æ ¡éªŒ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> expectedModCount <span class="token operator">=</span> modCount<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">final</span> <span class="token class-name">E</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elementData<span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>size<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> modCount <span class="token operator">==</span> expectedModCount <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//å°†é›†åˆå…ƒç´ ä¾æ¬¡ä¼ é€’ç»™ accept æ–¹æ³•</span>
        action<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>elementData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//å¦‚æœ modCount å€¼è¢«æ”¹åŠ¨äº†ï¼Œè¯´æ˜éå†è¿‡ç¨‹ä¸­æ•°ç»„æœ‰è¢«æ”¹åŠ¨åˆ°</span>
    <span class="token comment">//é‚£ä¹ˆå°±åœæ­¢éå†å¹¶æŠ›å‡ºå¼‚å¸¸</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>modCount <span class="token operator">!=</span> expectedModCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentModificationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//æŒ‰ç…§ç»™å®šè§„åˆ™å¯¹é›†åˆå…ƒç´ è¿›è¡Œè¿‡æ»¤ï¼Œå¦‚æœå…ƒç´ ç¬¦åˆè¿‡æ»¤è§„åˆ™é‚£å°±å°†ä¹‹ç§»é™¤</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">removeIf</span><span class="token punctuation">(</span><span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> filter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>filter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//è¦ç§»é™¤çš„å…ƒç´ ä¸ªæ•°</span>
    <span class="token keyword">int</span> removeCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">//ç”¨äºæ ‡è®°é›†åˆæ˜¯å“ªä¸ªç´¢å¼•ä½ç½®éœ€è¦è¢«ç§»é™¤</span>
    <span class="token keyword">final</span> <span class="token class-name">BitSet</span> removeSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BitSet</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> expectedModCount <span class="token operator">=</span> modCount<span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>size<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> modCount <span class="token operator">==</span> expectedModCount <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">final</span> <span class="token class-name">E</span> element <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> elementData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">//ä¾æ¬¡åˆ¤æ–­é›†åˆå…ƒç´ æ˜¯å¦ç¬¦åˆè¿‡æ»¤è§„åˆ™</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>filter<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//set æ–¹æ³•å°†å¯¼è‡´ç´¢å¼•ä½ç½® i çš„å…ƒç´ å˜ä¸º true</span>
            removeSet<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            removeCount<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//ä¸å…è®¸åœ¨æ’åºçš„è¿‡ç¨‹ä¸­é›†åˆè¢«å…¶å®ƒæ–¹æ³•ä¿®æ”¹äº†æ•°ç»„ï¼ˆä¾‹å¦‚ï¼šç§»é™¤å…ƒç´ ï¼‰</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>modCount <span class="token operator">!=</span> expectedModCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentModificationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//åªæœ‰ removeCount &gt; 0 æ‰è¯´æ˜éœ€è¦ç§»é™¤å…ƒç´ </span>
    <span class="token keyword">final</span> <span class="token keyword">boolean</span> anyToRemove <span class="token operator">=</span> removeCount <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>anyToRemove<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//é›†åˆç§»é™¤æŒ‡å®šå…ƒç´ åçš„å¤§å°</span>
        <span class="token keyword">final</span> <span class="token keyword">int</span> newSize <span class="token operator">=</span> size <span class="token operator">-</span> removeCount<span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> size<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>j <span class="token operator">&lt;</span> newSize<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">,</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//ç•¥è¿‡è¢«æ ‡è®°ä¸º true çš„ä½ç½®ï¼Œç›´æ¥è·³åˆ°ä¸éœ€è¦ç§»é™¤å…ƒç´ çš„æ•°ç»„ç´¢å¼•ä½</span>
            i <span class="token operator">=</span> removeSet<span class="token punctuation">.</span><span class="token function">nextClearBit</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//æœ‰æ•ˆæ•°æ®é€æ¸ä»å°¾éƒ¨å‘å¤´éƒ¨èšé›†</span>
            elementData<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> elementData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//ç§»é™¤å°¾éƒ¨çš„æ— æ•ˆæ•°æ®ï¼Œæœ‰åˆ©äºGCå›æ”¶</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token operator">=</span>newSize<span class="token punctuation">;</span> k <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            elementData<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> newSize<span class="token punctuation">;</span>
        <span class="token comment">//ä¸å…è®¸åœ¨æ’åºçš„è¿‡ç¨‹ä¸­é›†åˆè¢«å…¶å®ƒæ–¹æ³•ä¿®æ”¹äº†æ•°ç»„ï¼ˆä¾‹å¦‚ï¼šç§»é™¤å…ƒç´ ï¼‰</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>modCount <span class="token operator">!=</span> expectedModCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentModificationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        modCount<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> anyToRemove<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//å°†é›†åˆå…ƒç´ éå†ä¼ é€’ç»™ operatorï¼Œå¹¶å°†åŸå§‹æ•°æ®æ›¿æ¢ä¸º operator çš„è¿”å›å€¼</span>
<span class="token annotation punctuation">@Override</span>
<span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token class-name">UnaryOperator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> operator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>operator<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> expectedModCount <span class="token operator">=</span> modCount<span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>size<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> modCount <span class="token operator">==</span> expectedModCount <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//ä¾æ¬¡ä¼ é€’æ•°ç»„å…ƒç´ ç»™ apply æ–¹æ³•ï¼Œå¹¶å°†å…¶è¿”å›å€¼æ›¿æ¢åŸå§‹æ•°æ®</span>
        elementData<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> operator<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> elementData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//ä¸å…è®¸åœ¨æ’åºçš„è¿‡ç¨‹ä¸­é›†åˆè¢«å…¶å®ƒæ–¹æ³•ä¿®æ”¹äº†æ•°ç»„ï¼ˆä¾‹å¦‚ï¼šç§»é™¤å…ƒç´ ï¼‰</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>modCount <span class="token operator">!=</span> expectedModCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentModificationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    modCount<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_10ã€è¿­ä»£å™¨" tabindex="-1"><a class="header-anchor" href="#_10ã€è¿­ä»£å™¨" aria-hidden="true">#</a> 10ã€è¿­ä»£å™¨</h2><p>ArrayList å†…éƒ¨åŒ…å«ä¸€ä¸ªç”¨äºè¿­ä»£å…ƒç´ çš„ Iterator å®ç°ç±»ï¼Œå…¶ç”¨æ³•å¦‚ä¸‹æ‰€ç¤º</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stringList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    stringList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;https://github.com/leavesCZY&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> iterator <span class="token operator">=</span> stringList<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> next <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™é‡Œæœ‰ä¸ªå°ç»†èŠ‚ï¼ŒArrayList é‡Œå¤šå¤„ä½¿ç”¨åˆ°äº† modCount è¿™ä¸ªæˆå‘˜å˜é‡ï¼ŒmodCount ç›¸å½“äºå¯¹ ArrayList çš„ä¸€ä¸ªç®€å•â€œå¿«ç…§â€ï¼Œå³ç±»ä¼¼äº ArrayList çš„ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œæ¯å½“æ·»åŠ ã€ç§»é™¤å’Œä¿®æ”¹å…ƒç´ æ—¶ï¼ŒmodCount éƒ½ä¼šé€’å¢</p><p>åœ¨æˆ‘ä»¬éå† ArrayList çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœåŒæ—¶è¿›è¡Œå¢å‡å…ƒç´ çš„æ“ä½œï¼Œæˆ–è€…æ˜¯å­˜åœ¨å¤šçº¿ç¨‹åŒæ—¶å¢å‡å…ƒç´ ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´éå†ç»“æœå˜å¾—ä¸å¯é ï¼Œæˆ–è€…æ˜¯ç›´æ¥å°±å¯¼è‡´æ•°ç»„è¶Šç•Œå¼‚å¸¸ï¼Œæ‰€ä»¥ ArrayList å°±é€šè¿‡ modCount æ¥æ ‡è®°å½“å‰çš„è¿­ä»£è¡Œä¸ºæ˜¯å¦å¤„äºå¯é çŠ¶æ€ã€‚å¦‚æœåœ¨éå†æ•°ç»„å…ƒç´ çš„è¿‡ç¨‹ä¸­åˆ¤æ–­åˆ° modCount çš„å€¼å‰åå‘ç”Ÿäº†å˜åŒ–ï¼Œå°±è¯´æ˜åœ¨éå†è¿‡ç¨‹ä¸­ ArrayList è¢«æ”¹åŠ¨äº†ï¼Œæ­¤æ—¶å°±è®¤å®šéå†ç»“æœä¸å¯é ï¼Œç›´æ¥æŠ›å‡ºå¼‚å¸¸ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒmodCount åšçš„åªæ˜¯ä¸€ä¸ªç®€å•æ ¡éªŒï¼Œæ— æ³•å‡†ç¡®åˆ¤æ–­å‡ºå½“å‰çš„éå†æ“ä½œå°±çœŸçš„æ˜¯å®‰å…¨çš„</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">transient</span> <span class="token keyword">int</span> modCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Itr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">Itr</span> <span class="token keyword">implements</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token comment">//lastRet æŒ‡å‘çš„å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•</span>
    <span class="token keyword">int</span> cursor<span class="token punctuation">;</span>

    <span class="token comment">//æœ€åä¸€ä¸ªè¿”å›çš„å…ƒç´ çš„ç´¢å¼•</span>
    <span class="token comment">//å¦‚æœå€¼ä¸º -1ï¼Œè¯´æ˜è¿˜æœªè¿”å›è¿‡å…ƒç´ æˆ–è€…æ”¹å…ƒç´ è¢«ç§»é™¤äº†</span>
    <span class="token keyword">int</span> lastRet <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token comment">//ç”¨äºéªŒè¯é›†åˆçš„æ•°æ®ç»“æ„åœ¨è¿­ä»£çš„è¿‡ç¨‹ä¸­æ˜¯å¦è¢«ä¿®æ”¹äº†</span>
    <span class="token keyword">int</span> expectedModCount <span class="token operator">=</span> modCount<span class="token punctuation">;</span>

    <span class="token comment">//æ˜¯å¦è¿˜æœ‰å…ƒç´ æœªè¢«éå†</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> cursor <span class="token operator">!=</span> size<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//è·å–ä¸‹ä¸€ä¸ªå…ƒç´ </span>
    <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">checkForComodification</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> i <span class="token operator">=</span> cursor<span class="token punctuation">;</span>
        <span class="token comment">//å¦‚æœç´¢å¼•å€¼è¶…å‡ºå–å€¼èŒƒå›´åˆ™æŠ›å‡ºå¼‚å¸¸</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> size<span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData <span class="token operator">=</span> <span class="token class-name">ArrayList</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>elementData<span class="token punctuation">;</span>
        <span class="token comment">//å¦‚æœç´¢å¼•å€¼è¶…å‡ºæ•°ç»„çš„å¯ç´¢å¼•èŒƒå›´åˆ™æŠ›å‡ºå¼‚å¸¸</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentModificationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cursor <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> elementData<span class="token punctuation">[</span>lastRet <span class="token operator">=</span> i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//ç§»é™¤ lastRet æŒ‡å‘çš„å…ƒç´ </span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>lastRet <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">checkForComodification</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">ArrayList</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>lastRet<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//å› ä¸º lastRet ä½ç½®åŸå§‹çš„å…ƒç´ è¢«ç§»é™¤äº†ï¼Œæ‰€ä»¥æ­¤æ—¶ lastRet æŒ‡å‘çš„å…ƒç´ æ˜¯åŸå…ˆ lastRet+1 ä½ç½®çš„å…ƒç´ </span>
            cursor <span class="token operator">=</span> lastRet<span class="token punctuation">;</span>
            lastRet <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token comment">//å› ä¸ºæ˜¯ Itr ä¸»åŠ¨å¯¹é›†åˆè¿›è¡Œä¿®æ”¹ï¼Œæ‰€ä»¥æ­¤å¤„éœ€è¦ä¸»åŠ¨æ›´æ–° expectedModCount å€¼ï¼Œé¿å…ä¹‹åæŠ›å‡ºå¼‚å¸¸</span>
            expectedModCount <span class="token operator">=</span> modCount<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IndexOutOfBoundsException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentModificationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//éå†ä»ç´¢å¼• cursor å¼€å§‹ä¹‹åå‰©ä¸‹çš„å…ƒç´ </span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">forEachRemaining</span><span class="token punctuation">(</span><span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> consumer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>consumer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token class-name">ArrayList</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>size<span class="token punctuation">;</span>
        <span class="token keyword">int</span> i <span class="token operator">=</span> cursor<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">final</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData <span class="token operator">=</span> <span class="token class-name">ArrayList</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>elementData<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentModificationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//éå†è°ƒç”¨ accept æ–¹æ³•</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">!=</span> size <span class="token operator">&amp;&amp;</span> modCount <span class="token operator">==</span> expectedModCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            consumer<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> elementData<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        cursor <span class="token operator">=</span> i<span class="token punctuation">;</span>
        lastRet <span class="token operator">=</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token function">checkForComodification</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//åˆ¤æ–­è¿­ä»£å™¨åœ¨éå†é›†åˆçš„è¿‡ç¨‹ä¸­ï¼Œé›†åˆæ˜¯å¦è¢«å¤–éƒ¨æ”¹åŠ¨äº†ï¼ˆä¾‹å¦‚è¢«å…¶å®ƒè¿­ä»£å™¨ç§»é™¤äº†å…ƒç´ ï¼‰</span>
    <span class="token comment">//å¦‚æœæ˜¯çš„è¯åˆ™æŠ›å‡ºå¼‚å¸¸</span>
    <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">checkForComodification</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>modCount <span class="token operator">!=</span> expectedModCount<span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentModificationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_11ã€æ•ˆç‡æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_11ã€æ•ˆç‡æµ‹è¯•" aria-hidden="true">#</a> 11ã€æ•ˆç‡æµ‹è¯•</h2><p>æœ€åå†æ¥æµ‹è¯•ä¸‹ ArrayList æ‰©å®¹æ¬¡æ•°çš„é«˜ä½å¯¹å…¶è¿è¡Œæ•ˆç‡çš„å½±å“</p><p>å¯¹ä¸‰ä¸ª ArrayList å­˜å…¥ç›¸åŒæ•°æ®é‡çš„æ•°æ®ï¼Œä½†åˆ†åˆ«ä¸º ArrayList æŒ‡å®šä¸åŒçš„åˆå§‹åŒ–å¤§å°</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">long</span> startTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stringList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">300000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        stringList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;leavesC &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">long</span> endTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;åˆå§‹å®¹é‡ä¸º0ï¼Œæ‰€ç”¨æ—¶é—´ï¼š&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>endTime <span class="token operator">-</span> startTime<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;æ¯«ç§’&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    startTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stringList2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">100000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">300000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        stringList2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;leavesC &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    endTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;åˆå§‹å®¹é‡ä¸º100000ï¼Œæ‰€ç”¨æ—¶é—´ï¼š&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>endTime <span class="token operator">-</span> startTime<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;æ¯«ç§’&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    startTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stringList3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">300000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">300000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        stringList3<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;leavesC &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    endTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;åˆå§‹å®¹é‡ä¸º300000ï¼Œæ‰€ç”¨æ—¶é—´ï¼š&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>endTime <span class="token operator">-</span> startTime<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;æ¯«ç§’&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸‰ç§æ–¹å¼ä¸‹ ArrayList ä¹‹é—´çš„è¿è¡Œæ•ˆç‡å·®è·è¿˜æ˜¯å¾ˆå¤§çš„ï¼Œè™½ç„¶è¿™ç§æµ‹è¯•æ–¹æ³•å¹¶ä¸ä¸¥è°¨ï¼Œä½†ä¹Ÿå¯ä»¥çœ‹åˆ°åœ¨çœå»æ‰©å®¹æ“ä½œå ArrayList çš„è¿è¡Œæ•ˆç‡è¿˜æ˜¯æå‡äº†å¾ˆå¤šçš„</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>åˆå§‹å®¹é‡ä¸º<span class="token number">0</span>ï¼Œæ‰€ç”¨æ—¶é—´ï¼š<span class="token number">39</span>æ¯«ç§’
åˆå§‹å®¹é‡ä¸º<span class="token number">100000</span>ï¼Œæ‰€ç”¨æ—¶é—´ï¼š<span class="token number">32</span>æ¯«ç§’
åˆå§‹å®¹é‡ä¸º<span class="token number">300000</span>ï¼Œæ‰€ç”¨æ—¶é—´ï¼š<span class="token number">13</span>æ¯«ç§’
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="ä¸‰ã€linkedlist" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€linkedlist" aria-hidden="true">#</a> ä¸‰ã€LinkedList</h1><p>LinkedList åŒæ—¶å®ç°äº† List æ¥å£å’Œ Deque æ¥å£ï¼Œæ‰€ä»¥æ—¢å¯ä»¥å°† LinkedList å½“åšä¸€ä¸ªæœ‰åºå®¹å™¨ï¼Œä¹Ÿå¯ä»¥å°†ä¹‹çœ‹ä½œä¸€ä¸ªé˜Ÿåˆ—ï¼ˆQueueï¼‰ï¼ŒåŒæ—¶åˆå¯ä»¥çœ‹ä½œä¸€ä¸ªæ ˆï¼ˆStackï¼‰ã€‚è™½ç„¶ LinkedList å’Œ ArrayList ä¸€æ ·éƒ½å®ç°äº† List æ¥å£ï¼Œä½†å…¶åº•å±‚æ˜¯é€šè¿‡<strong>åŒå‘é“¾è¡¨</strong>æ¥å®ç°çš„ï¼Œæ‰€ä»¥æ’å…¥å’Œåˆ é™¤å…ƒç´ çš„æ•ˆç‡éƒ½è¦æ¯” ArrayList é«˜ï¼Œä½†ä¹Ÿå› æ­¤éšæœºè®¿é—®çš„æ•ˆç‡è¦æ¯” ArrayList ä½</p><h2 id="_1ã€ç±»å£°æ˜-1" tabindex="-1"><a class="header-anchor" href="#_1ã€ç±»å£°æ˜-1" aria-hidden="true">#</a> 1ã€ç±»å£°æ˜</h2><p>ä» LinkedList å®ç°çš„å‡ ä¸ªæ¥å£å¯ä»¥çœ‹å‡ºæ¥ï¼ŒLinkedList æ˜¯æ”¯æŒå¿«é€Ÿè®¿é—®ï¼Œå¯å…‹éš†ï¼Œå¯åºåˆ—åŒ–çš„ï¼Œè€Œä¸”å¯ä»¥å°†ä¹‹çœ‹æˆä¸€ä¸ª<strong>æ”¯æŒæœ‰åºè®¿é—®çš„é˜Ÿåˆ—æˆ–è€…æ ˆ</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">AbstractSequentialList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> 
    <span class="token keyword">implements</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">Deque</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>LinkedList å†…éƒ¨é€šè¿‡åŒå‘é“¾è¡¨çš„æ•°æ®ç»“æ„æ¥å®ç°çš„ï¼Œæ¯ä¸ªé“¾è¡¨ç»“ç‚¹é™¤äº†å­˜å‚¨æœ¬ç»“ç‚¹çš„æ•°æ®å…ƒç´ å¤–ï¼Œè¿˜æœ‰ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«ç”¨äºæŒ‡å‘å…¶ä¸Šä¸‹ä¸¤ä¸ªç›¸é‚»ç»“ç‚¹ï¼Œè¿™ä¸ªç»“ç‚¹å°±æ˜¯ LinkedList ä¸­çš„é™æ€ç±» Node</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token comment">//å½“å‰ç»“ç‚¹åŒ…å«çš„å®é™…å…ƒç´ </span>
    <span class="token class-name">E</span> item<span class="token punctuation">;</span>

    <span class="token comment">//æŒ‡å‘ä¸‹ä¸€ä¸ªç»“ç‚¹</span>
    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">;</span>

    <span class="token comment">//æŒ‡å‘ä¸Šä¸€ä¸ªç»“ç‚¹</span>
    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> prev<span class="token punctuation">;</span>

    <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> prev<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>item <span class="token operator">=</span> element<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>prev <span class="token operator">=</span> prev<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2ã€æˆå‘˜å˜é‡-1" tabindex="-1"><a class="header-anchor" href="#_2ã€æˆå‘˜å˜é‡-1" aria-hidden="true">#</a> 2ã€æˆå‘˜å˜é‡</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//åŒå‘é“¾è¡¨åŒ…å«çš„ç»“ç‚¹æ€»æ•°ï¼Œå³æ•°æ®æ€»é‡</span>
<span class="token keyword">transient</span> <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token comment">//åŒå‘é“¾è¡¨çš„å¤´ç»“ç‚¹</span>
<span class="token keyword">transient</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> first<span class="token punctuation">;</span>

<span class="token comment">//åŒå‘é“¾è¡¨çš„å°¾ç»“ç‚¹</span>
<span class="token keyword">transient</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> last<span class="token punctuation">;</span>

<span class="token comment">//åºåˆ—åŒ–ID</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">876323262645176354L</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“ä¸­çš„æˆå‘˜å˜é‡ first å’Œ last åˆ†åˆ«ç”¨äºæŒ‡å‘é“¾è¡¨çš„å¤´éƒ¨å’Œå°¾éƒ¨ç»“ç‚¹ï¼Œå› æ­¤ LinkedList çš„æ•°æ®ç»“æ„å›¾æ˜¯ç±»ä¼¼äºè¿™æ ·çš„</p><figure><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5ea71d0950c04d8a947867ad892ff6c6~tplv-k3u1fbpfcp-zoom-1.image" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="_3ã€æ„é€ å‡½æ•°-1" tabindex="-1"><a class="header-anchor" href="#_3ã€æ„é€ å‡½æ•°-1" aria-hidden="true">#</a> 3ã€æ„é€ å‡½æ•°</h2><p>LinkedList ä¸éœ€è¦å»è¯·æ±‚ä¸€ç‰‡è¿ç»­çš„å†…å­˜ç©ºé—´æ¥å­˜å‚¨æ•°æ®ï¼Œè€Œæ˜¯åœ¨æ¯æ¬¡æœ‰æ–°çš„å…ƒç´ éœ€è¦æ·»åŠ æ—¶å†æ¥åŠ¨æ€è¯·æ±‚å†…å­˜ç©ºé—´ï¼Œå› æ­¤ LinkedList çš„ä¸¤ä¸ªæ„é€ å‡½æ•°éƒ½å¾ˆç®€å•</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">LinkedList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token comment">//ä¼ å…¥åˆå§‹æ•°æ®</span>
<span class="token keyword">public</span> <span class="token class-name">LinkedList</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">addAll</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4ã€æ·»åŠ å…ƒç´ " tabindex="-1"><a class="header-anchor" href="#_4ã€æ·»åŠ å…ƒç´ " aria-hidden="true">#</a> 4ã€æ·»åŠ å…ƒç´ </h2><p><code>add(E e)</code> æ–¹æ³•ç”¨äºå‘é“¾è¡¨çš„å°¾éƒ¨æ·»åŠ ç»“ç‚¹ï¼Œå› ä¸ºæœ‰ <code>last</code> æŒ‡å‘é“¾è¡¨çš„å°¾ç»“ç‚¹ï¼Œå› æ­¤å‘å°¾éƒ¨æ·»åŠ æ–°å…ƒç´ åªéœ€è¦ä¿®æ”¹å‡ ä¸ªå¼•ç”¨å³å¯ï¼Œæ•ˆç‡è¾ƒé«˜</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//å°†å…ƒç´  e ä½œä¸ºå°¾ç»“ç‚¹æ·»åŠ </span>
<span class="token comment">//å› ä¸º LinkedList å…è®¸æ·»åŠ ç›¸åŒå…ƒç´ ï¼Œæ‰€ä»¥æ­¤æ–¹æ³•å›ºå®šè¿”å› true</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">linkLast</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//å°†å…ƒç´  e ç½®ä¸ºå°¾ç»“ç‚¹</span>
<span class="token keyword">void</span> <span class="token function">linkLast</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//å…ˆä¿å­˜åŸå°¾ç»“ç‚¹</span>
    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> l <span class="token operator">=</span> last<span class="token punctuation">;</span>
    <span class="token comment">//æ„å»ºæ–°çš„å°¾ç»“ç‚¹ï¼Œå¹¶æŒ‡å‘åŸå°¾ç»“ç‚¹</span>
    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> newNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> e<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    last <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
    <span class="token comment">//å¦‚æœåŸå°¾ç»“ç‚¹ä¸º nullï¼Œè¯´æ˜åŸé“¾è¡¨åŒ…å«çš„å…ƒç´ ä¸ªæ•°ä¸º 0ï¼Œåˆ™æ­¤æ—¶æ’å…¥çš„å°¾ç»“ç‚¹åŒæ—¶å³ä¸ºå¤´ç»“ç‚¹</span>
    <span class="token comment">//å¦‚æœåŸå°¾ç»“ç‚¹ä¸ä¸º nullï¼Œåˆ™å°† next æŒ‡å‘æ–°çš„å°¾ç»“ç‚¹</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>l <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        first <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
    <span class="token keyword">else</span>
        l<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
    <span class="token comment">//å…ƒç´ ä¸ªæ•°åŠ 1</span>
    size<span class="token operator">++</span><span class="token punctuation">;</span>
    modCount<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/83bed0a5917a494c88aa6edc2be08ab6~tplv-k3u1fbpfcp-zoom-1.image" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p><code>add(int index, E element)</code> æ–¹æ³•ç”¨äºå‘æŒ‡å®šç´¢å¼•å¤„æ·»åŠ å…ƒç´ ï¼Œéœ€è¦å…ˆé€šè¿‡ç´¢å¼• index è·å–ç›¸åº”ä½ç½®çš„ç»“ç‚¹ï¼Œå¹¶åœ¨è¯¥ä½ç½®å¼€è¾Ÿä¸€ä¸ªæ–°çš„ç»“ç‚¹æ¥å­˜å‚¨å…ƒç´  elementï¼Œæœ€åè¿˜éœ€è¦ä¿®æ”¹ç›¸é‚»ç»“ç‚¹é—´çš„å¼•ç”¨</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//åœ¨ç´¢å¼• index å¤„æ’å…¥å…ƒç´  element</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//åˆ¤æ–­ç´¢å¼•å¤§å°æ˜¯å¦åˆæ³•ï¼Œä¸åˆæ³•åˆ™æŠ›å‡º IndexOutOfBoundsException</span>
    <span class="token function">checkPositionIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//å¦‚æœ index == sizeï¼Œåˆ™å°† element ä½œä¸ºå°¾ç»“ç‚¹æ¥æ·»åŠ </span>
    <span class="token comment">//å¦åˆ™åˆ™åœ¨ç´¢å¼• index å‰å¼€è¾Ÿä¸€ä¸ªæ–°ç»“ç‚¹</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> size<span class="token punctuation">)</span>
        <span class="token function">linkLast</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span>
        <span class="token function">linkBefore</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> <span class="token function">node</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//å°†å…ƒç´  e ç½®ä¸º succ ç»“ç‚¹çš„ä¸Šä¸€ä¸ªç»“ç‚¹</span>
<span class="token keyword">void</span> <span class="token function">linkBefore</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> succ<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//ä¿å­˜ succ çš„ä¸Šä¸€ä¸ªç»“ç‚¹ä¿¡æ¯</span>
    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> pred <span class="token operator">=</span> succ<span class="token punctuation">.</span>prev<span class="token punctuation">;</span>
    <span class="token comment">//æ„å»ºå…ƒç´  e å¯¹åº”çš„ç»“ç‚¹</span>
    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> newNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>pred<span class="token punctuation">,</span> e<span class="token punctuation">,</span> succ<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//å°†ç»“ç‚¹ succ çš„ä¸Šä¸€ä¸ªç»“ç‚¹æŒ‡å‘ newNode</span>
    succ<span class="token punctuation">.</span>prev <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
    <span class="token comment">//å¦‚æœ pred ä¸º nullï¼Œè¯´æ˜ succ æ˜¯å¤´ç»“ç‚¹ï¼Œåˆ™å°† newNode ç½®ä¸ºæ–°çš„å¤´ç»“ç‚¹</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pred <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        first <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
    <span class="token keyword">else</span>
        pred<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
    <span class="token comment">//å…ƒç´ ä¸ªæ•°åŠ 1</span>
    size<span class="token operator">++</span><span class="token punctuation">;</span>
    modCount<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6853b99e131840ccb6c4efaa2584e399~tplv-k3u1fbpfcp-zoom-1.image" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="_5ã€ç§»é™¤å…ƒç´ " tabindex="-1"><a class="header-anchor" href="#_5ã€ç§»é™¤å…ƒç´ " aria-hidden="true">#</a> 5ã€ç§»é™¤å…ƒç´ </h2><p><code>remove()</code> æ–¹æ³•æœ‰ä¸¤ç§é‡è½½å½¢å¼ï¼Œå…¶å†…éƒ¨éƒ½æ˜¯é€šè¿‡è°ƒç”¨ <code>unlink(Node&lt;E&gt; x)</code> æ–¹æ³•æ¥ç§»é™¤æŒ‡å®šç»“ç‚¹åœ¨é“¾è¡¨ä¸­çš„å¼•ç”¨ï¼Œä¸åŒäº ArrayList åœ¨ç§»é™¤å…ƒç´ æ—¶å¯èƒ½å¯¼è‡´çš„å¤§é‡æ•°æ®ç§»åŠ¨ï¼ŒLinkedList åªéœ€è¦é€šè¿‡ç§»é™¤å¼•ç”¨å³å¯å°†æŒ‡å®šå…ƒç´ ä»é“¾è¡¨ä¸­ç§»é™¤</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//ç§»é™¤ç´¢å¼• index å¤„çš„ç»“ç‚¹</span>
<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//åˆ¤æ–­ç´¢å¼•å¤§å°æ˜¯å¦åˆæ³•ï¼Œä¸åˆæ³•åˆ™æŠ›å‡º IndexOutOfBoundsException</span>
    <span class="token function">checkElementIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">unlink</span><span class="token punctuation">(</span><span class="token function">node</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//å¯¹é“¾è¡¨è¿›è¡Œæ­£å‘éå†ï¼Œç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ å€¼ä¸º o çš„ç»“ç‚¹</span>
<span class="token comment">//å¦‚æœç§»é™¤æˆåŠŸåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› false</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> first<span class="token punctuation">;</span> x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> x <span class="token operator">=</span> x<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>item <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//ç§»é™¤ç»“ç‚¹ x</span>
                <span class="token function">unlink</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> first<span class="token punctuation">;</span> x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> x <span class="token operator">=</span> x<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//ç§»é™¤ç»“ç‚¹ x</span>
                <span class="token function">unlink</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//ç§»é™¤ç»“ç‚¹ x å¹¶è¿”å›å…¶åŒ…å«çš„å…ƒç´ å€¼</span>
<span class="token class-name">E</span> <span class="token function">unlink</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token class-name">E</span> element <span class="token operator">=</span> x<span class="token punctuation">.</span>item<span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> next <span class="token operator">=</span> x<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> prev <span class="token operator">=</span> x<span class="token punctuation">.</span>prev<span class="token punctuation">;</span>
    <span class="token comment">//å¦‚æœ prev == nullï¼Œè¯´æ˜ç»“ç‚¹ x ä¸ºå¤´ç»“ç‚¹ï¼Œåˆ™å°†å¤´ç»“ç‚¹ç½®ä¸ºåŸå…ˆçš„ç¬¬äºŒä¸ªç»“ç‚¹</span>
    <span class="token comment">//å¦‚æœ prev != nullï¼Œåˆ™ç§»é™¤å¯¹ç»“ç‚¹ x çš„å¼•ç”¨</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>prev <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        first <span class="token operator">=</span> next<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        prev<span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>
        x<span class="token punctuation">.</span>prev <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//å¦‚æœ next == nullï¼Œåˆ™è¯´æ˜ç»“ç‚¹ x ä¸ºå°¾ç»“ç‚¹ï¼Œåˆ™å°†å°¾ç»“ç‚¹ç½®ä¸ºåŸå…ˆçš„å€’æ•°ç¬¬äºŒä¸ªç»“ç‚¹</span>
    <span class="token comment">//å¦‚æœ next != nullï¼Œåˆ™ç§»é™¤å¯¹ç»“ç‚¹ x çš„å¼•ç”¨</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>next <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        last <span class="token operator">=</span> prev<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        next<span class="token punctuation">.</span>prev <span class="token operator">=</span> prev<span class="token punctuation">;</span>
        x<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//å¸®åŠ©GCå›æ”¶</span>
    x<span class="token punctuation">.</span>item <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token comment">//å…ƒç´ ä¸ªæ•°å‡1</span>
    size<span class="token operator">--</span><span class="token punctuation">;</span>
    modCount<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> element<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6ã€éšæœºè®¿é—®å…ƒç´ " tabindex="-1"><a class="header-anchor" href="#_6ã€éšæœºè®¿é—®å…ƒç´ " aria-hidden="true">#</a> 6ã€éšæœºè®¿é—®å…ƒç´ </h2><p>å¯¹äºå•å‘é“¾è¡¨æ¥è¯´ï¼Œå¦‚æœæƒ³éšæœºå®šä½åˆ°æŸä¸ªç»“ç‚¹ï¼Œé‚£ä¹ˆåªèƒ½é€šè¿‡ä»å¤´ç»“ç‚¹å¼€å§‹éå†çš„æ–¹å¼æ¥å®šä½ï¼Œæœ€æç«¯çš„æƒ…å†µä¸‹éœ€è¦éå†æ•´ä¸ªé“¾è¡¨æ‰èƒ½å®šä½åˆ°ç›®æ ‡ç»“ç‚¹ã€‚å¦‚æœæ˜¯åŒå‘é“¾è¡¨ï¼Œåˆ™å¯ä»¥é€‰æ‹©æ­£å‘éå†æˆ–è€…åå‘éå†ï¼Œæœ€æç«¯çš„æƒ…å†µä¸‹éœ€è¦éå†ä¸€åŠé“¾è¡¨æ‰èƒ½å®šä½åˆ°ç›®æ ‡ç»“ç‚¹ã€‚æ‰€ä»¥ï¼Œç›¸æ¯”æ•°ç»„æ¥è¯´ LinkedList çš„éšæœºè®¿é—®æ•ˆç‡å¹¶ä¸é«˜</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//è·å–ç´¢å¼• index å¤„çš„ç»“ç‚¹å…ƒç´ </span>
<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//åˆ¤æ–­ç´¢å¼•å¤§å°æ˜¯å¦åˆæ³•ï¼Œä¸åˆæ³•åˆ™æŠ›å‡º IndexOutOfBoundsException</span>
    <span class="token function">checkElementIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">node</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">.</span>item<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//å°†ç´¢å¼• index å¤„çš„ç»“ç‚¹åŒ…å«çš„å…ƒç´ ä¿®æ”¹ä¸º elementï¼Œå¹¶è¿”å›æ—§å…ƒç´ </span>
<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//åˆ¤æ–­ç´¢å¼•å¤§å°æ˜¯å¦åˆæ³•ï¼Œä¸åˆæ³•åˆ™æŠ›å‡º IndexOutOfBoundsException</span>
    <span class="token function">checkElementIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> <span class="token function">node</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">E</span> oldVal <span class="token operator">=</span> x<span class="token punctuation">.</span>item<span class="token punctuation">;</span>
    x<span class="token punctuation">.</span>item <span class="token operator">=</span> element<span class="token punctuation">;</span>
    <span class="token keyword">return</span> oldVal<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//è·å–ç´¢å¼• index å¤„çš„ç»“ç‚¹</span>
<span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">node</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//size &gt;&gt; 1 çš„å«ä¹‰å³ä¸ºï¼šå°† size å€¼é™¤ä»¥ 2</span>
    <span class="token comment">//å¦‚æœ index é è¿‘é“¾è¡¨çš„å¤´éƒ¨ï¼Œåˆ™ä»å¤´éƒ¨å‘å°¾éƒ¨æ­£å‘éå†æŸ¥æ‰¾ç»“ç‚¹</span>
    <span class="token comment">//å¦‚æœ index é è¿‘é“¾è¡¨çš„å°¾éƒ¨ï¼Œåˆ™ä»å°¾éƒ¨å‘å¤´éƒ¨åå‘éå†æŸ¥æ‰¾ç»“ç‚¹</span>
    <span class="token comment">//æœ€æç«¯çš„æƒ…å†µä¸‹éå†ä¸€åŠå…ƒç´ æ‰èƒ½å®šä½åˆ°ç›®æ ‡èŠ‚ç‚¹</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> <span class="token punctuation">(</span>size <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> first<span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> index<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            x <span class="token operator">=</span> x<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        <span class="token keyword">return</span> x<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> last<span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;</span> index<span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>
            x <span class="token operator">=</span> x<span class="token punctuation">.</span>prev<span class="token punctuation">;</span>
        <span class="token keyword">return</span> x<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7ã€å‡ ä¸ªå¸¸ç”¨çš„æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#_7ã€å‡ ä¸ªå¸¸ç”¨çš„æ–¹æ³•" aria-hidden="true">#</a> 7ã€å‡ ä¸ªå¸¸ç”¨çš„æ–¹æ³•</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//åˆ¤æ–­æ˜¯å¦åŒ…å«å…ƒç´  o</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">contains</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">indexOf</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//è·å–å…ƒç´ ä¸ªæ•°</span>
<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> size<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//æ¸…ç©ºé“¾è¡¨å…ƒç´ ï¼Œå°†å„ä¸ªç»“ç‚¹ä¹‹é—´çš„å¼•ç”¨éƒ½åˆ‡æ–­</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> first<span class="token punctuation">;</span> x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> next <span class="token operator">=</span> x<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        x<span class="token punctuation">.</span>item <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        x<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        x<span class="token punctuation">.</span>prev <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        x <span class="token operator">=</span> next<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    first <span class="token operator">=</span> last <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    modCount<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ å€¼ä¸º o çš„ç»“ç‚¹æ‰€åœ¨çš„ç´¢å¼•å€¼</span>
<span class="token comment">//å¦‚æœæŸ¥æ‰¾ä¸åˆ°ï¼Œåˆ™è¿”å› -1</span>
<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> first<span class="token punctuation">;</span> x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> x <span class="token operator">=</span> x<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>item <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> index<span class="token punctuation">;</span>
            index<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> first<span class="token punctuation">;</span> x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> x <span class="token operator">=</span> x<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> index<span class="token punctuation">;</span>
            index<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//è¿”å›æœ€åä¸€ä¸ªå…ƒç´ å€¼ä¸º o çš„ç»“ç‚¹æ‰€åœ¨çš„ç´¢å¼•å€¼</span>
<span class="token comment">//å¦‚æœæŸ¥æ‰¾ä¸åˆ°ï¼Œåˆ™è¿”å› -1</span>
<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> index <span class="token operator">=</span> size<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> last<span class="token punctuation">;</span> x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> x <span class="token operator">=</span> x<span class="token punctuation">.</span>prev<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            index<span class="token operator">--</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>item <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> index<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> last<span class="token punctuation">;</span> x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> x <span class="token operator">=</span> x<span class="token punctuation">.</span>prev<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            index<span class="token operator">--</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> index<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8ã€deque-æ¥å£" tabindex="-1"><a class="header-anchor" href="#_8ã€deque-æ¥å£" aria-hidden="true">#</a> 8ã€Deque æ¥å£</h2><p>ä»¥ä¸Šä»‹ç»çš„å‡ ä¸ªæ–¹æ³•éƒ½æ˜¯ List æ¥å£ä¸­æ‰€å£°æ˜çš„ï¼Œæ¥ä¸‹æ¥çœ‹ä¸‹ Deque æ¥å£ä¸­çš„æ–¹æ³•</p><p>å…¶å® Deque æ¥å£ä¸­å¾ˆå¤šæ–¹æ³•çš„å«ä¹‰éƒ½æ˜¯ç±»ä¼¼çš„ï¼Œä¸”ä¸€äº›æ–¹æ³•éƒ½æ˜¯ç›¸äº’è°ƒç”¨çš„ï¼Œå¹¶ä¸ç®—å¤æ‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//å°†å…ƒç´  e ç½®ä¸ºå¤´ç»“ç‚¹</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addFirst</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">linkFirst</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//å°†å…ƒç´  e ç½®ä¸ºå°¾ç»“ç‚¹</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addLast</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">linkLast</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//å°†å…ƒç´  e ä½œä¸ºå°¾ç»“ç‚¹æ·»åŠ </span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">offer</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">add</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//å°†å…ƒç´  e ä½œä¸ºå¤´ç»“ç‚¹æ·»åŠ </span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">offerFirst</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">addFirst</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//å°†å…ƒç´  e ä½œä¸ºå°¾ç»“ç‚¹æ·»åŠ </span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">offerLast</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">addLast</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//è·å–å¤´éƒ¨ç»“ç‚¹çš„å…ƒç´ å€¼</span>
<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">peekFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> f <span class="token operator">=</span> first<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>f <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> f<span class="token punctuation">.</span>item<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//è·å–å°¾éƒ¨ç»“ç‚¹çš„å…ƒç´ å€¼</span>
<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">peekLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> l <span class="token operator">=</span> last<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>l <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> l<span class="token punctuation">.</span>item<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//è·å–å¤´éƒ¨ç»“ç‚¹çš„å…ƒç´ å€¼ï¼Œå¹¶å°†ä¹‹ä»é“¾è¡¨ä¸­ç§»é™¤</span>
<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">pollFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> f <span class="token operator">=</span> first<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>f <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> <span class="token function">unlinkFirst</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//è·å–å°¾éƒ¨ç»“ç‚¹çš„å…ƒç´ å€¼ï¼Œå¹¶å°†ä¹‹ä»é“¾è¡¨ä¸­ç§»é™¤</span>
<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">pollLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> l <span class="token operator">=</span> last<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>l <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> <span class="token function">unlinkLast</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//å°†å…ƒç´  e ä½œä¸ºå¤´ç»“ç‚¹æ·»åŠ </span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">addFirst</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//è·å–å¤´éƒ¨ç»“ç‚¹çš„å…ƒç´ å€¼ï¼Œå¹¶å°†ä¹‹ä»é“¾è¡¨ä¸­ç§»é™¤</span>
<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">removeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//ä»é“¾è¡¨å¤´éƒ¨å‘å°¾éƒ¨æ­£å‘éå†ï¼Œç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ å€¼ä¸º o çš„ç»“ç‚¹</span>
<span class="token comment">//å¦‚æœç§»é™¤æˆåŠŸåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› false</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">removeFirstOccurrence</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">remove</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//ä»é“¾è¡¨å°¾éƒ¨å‘å¤´éƒ¨åå‘éå†ï¼Œç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ å€¼ä¸º o çš„ç»“ç‚¹</span>
<span class="token comment">//å¦‚æœç§»é™¤æˆåŠŸåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› false</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">removeLastOccurrence</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> last<span class="token punctuation">;</span> x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> x <span class="token operator">=</span> x<span class="token punctuation">.</span>prev<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>item <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">unlink</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> last<span class="token punctuation">;</span> x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> x <span class="token operator">=</span> x<span class="token punctuation">.</span>prev<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">unlink</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9ã€æ•ˆç‡æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_9ã€æ•ˆç‡æµ‹è¯•" aria-hidden="true">#</a> 9ã€æ•ˆç‡æµ‹è¯•</h2><p>ä¸Šé¢è¯´è¿‡ï¼ŒLinkedList ç›¸æ¯” ArrayList åœ¨æ·»åŠ å’Œç§»é™¤å…ƒç´ æ—¶æ•ˆç‡ä¸Šä¼šé«˜å¾ˆå¤šï¼Œä½†éšæœºè®¿é—®å…ƒç´ çš„æ•ˆç‡è¦æ¯” ArrayList ä½ï¼Œè¿™é‡Œä¹Ÿæ¥åšä¸ªæµ‹è¯•ï¼ŒéªŒè¯ä¸¤è€…ä¹‹é—´çš„å·®åˆ«</p><p>åˆ†åˆ«å‘ ArrayList å’Œ LinkedList å­˜å…¥åŒç­‰æ•°æ®é‡çš„æ•°æ®ï¼Œç„¶åå„è‡ªç§»é™¤ 100 ä¸ªå…ƒç´ ä»¥åŠéå† 10000 ä¸ªå…ƒç´ ï¼Œè§‚å¯Ÿä¸¤è€…æ‰€ç”¨çš„æ—¶é—´</p><p>ArrayListï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stringArrayList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">300000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        stringArrayList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;leavesC &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">long</span> startTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        stringArrayList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token number">100</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">long</span> endTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ç§»é™¤ ArrayList ä¸­çš„100ä¸ªå…ƒç´ ,ç”¨æ—¶ï¼š&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>endTime <span class="token operator">-</span> startTime<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;æ¯«ç§’&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    startTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        stringArrayList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    endTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;éå† ArrayList ä¸­çš„10000ä¸ªå…ƒç´ ,ç”¨æ—¶ï¼š&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>endTime <span class="token operator">-</span> startTime<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;æ¯«ç§’&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>LinkedListï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stringLinkedList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">300000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        stringLinkedList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;leavesC &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">long</span> startTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        stringLinkedList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token number">100</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">long</span> endTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ç§»é™¤ LinkedList ä¸­çš„100ä¸ªå…ƒç´ ,ç”¨æ—¶ï¼š&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>endTime <span class="token operator">-</span> startTime<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;æ¯«ç§’&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    startTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        stringLinkedList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    endTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;éå† LinkedList ä¸­çš„10000ä¸ªå…ƒç´ ,ç”¨æ—¶ï¼š&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>endTime <span class="token operator">-</span> startTime<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;æ¯«ç§’&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹å‡ºæ¥ä¸¤è€…ä¹‹é—´çš„å·®è·è¿˜æ˜¯éå¸¸å¤§çš„ï¼Œåœ¨ä½¿ç”¨é›†åˆæ¡†æ¶å‰éœ€è¦æ ¹æ®å®é™…åº”ç”¨åœºæ™¯æ¥å†³å®šä½¿ç”¨å“ªä¸€ä¸ª</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>ç§»é™¤ <span class="token class-name">ArrayList</span> ä¸­çš„<span class="token number">100</span>ä¸ªå…ƒç´ <span class="token punctuation">,</span>ç”¨æ—¶ï¼š<span class="token number">18</span>æ¯«ç§’
éå† <span class="token class-name">ArrayList</span> ä¸­çš„<span class="token number">10000</span>ä¸ªå…ƒç´ <span class="token punctuation">,</span>ç”¨æ—¶ï¼š<span class="token number">1</span>æ¯«ç§’
    
ç§»é™¤ <span class="token class-name">LinkedList</span> ä¸­çš„<span class="token number">100</span>ä¸ªå…ƒç´ <span class="token punctuation">,</span>ç”¨æ—¶ï¼š<span class="token number">0</span>æ¯«ç§’
éå† <span class="token class-name">LinkedList</span> ä¸­çš„<span class="token number">10000</span>ä¸ªå…ƒç´ <span class="token punctuation">,</span>ç”¨æ—¶ï¼š<span class="token number">237</span>æ¯«ç§’
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,104);function d(v,m){const a=t("ExternalLinkIcon");return e(),o("div",null,[n("blockquote",null,[n("p",null,[s("å…¬ä¼—å·ï¼š"),n("a",u,[s("å­—èŠ‚æ•°ç»„"),c(a)])]),k]),r])}const w=p(i,[["render",d],["__file","Java _ Android é›†åˆæ¡†æ¶é¡»çŸ¥é¡»ä¼šï¼ˆ1ï¼‰.html.vue"]]);export{w as default};
