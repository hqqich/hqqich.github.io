<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EHXM4GYP5W"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-EHXM4GYP5W');
</script>
<!-- End Google Analytics -->



<!-- Baidu Analytics -->
<script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?0a6515fb9c839d6a56d4cfd8b7d243d4";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>
<!-- End Baidu Analytics -->


<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

  <meta name="author" content="hqqich">


  <meta name="subtitle" content="å¿™ç¢ŒæŠŠæ—¶å…‰ç¼©çŸ­, è‹¦éš¾æŠŠå²æœˆæ‹‰é•¿">




<title>ä¸€æ–‡è¯»æ‡‚ Java å’Œ Kotlin çš„æ³›å‹éš¾ç‚¹ | Hexo-blog</title>



<link rel="icon" href="/hexo-blog/public/favicon.ico">



<link rel="stylesheet" href="/hexo-blog/public/css/main.css">


<link rel="stylesheet" href="/hexo-blog/public/lib/nprogress/nprogress.css">



<script src="/hexo-blog/public/lib/jquery.min.js"></script>


<script src="/hexo-blog/public/lib/iconify-icon.min.js"></script>


<script src="https://cdn.tailwindcss.com?plugins=typography"></script>
<script>
  tailwind.config = {
    darkMode: "class",
  };
</script>


<script src="/hexo-blog/public/lib/nprogress/nprogress.js"></script>

<script>
  $(document).ready(() => {
    NProgress.configure({
      showSpinner: false,
    });
    NProgress.start();
    $("#nprogress .bar").css({
      background: "#de7441",
    });
    $("#nprogress .peg").css({
      "box-shadow": "0 0 2px #de7441, 0 0 4px #de7441",
    });
    $("#nprogress .spinner-icon").css({
      "border-top-color": "#de7441",
      "border-left-color": "#de7441",
    });
    setTimeout(function () {
      NProgress.done();
      $(".fade").removeClass("out");
    }, 800);
  });
</script>

<script>
  (function () {
    const prefersDark =
      window.matchMedia &&
      window.matchMedia("(prefers-color-scheme: dark)").matches;
    const setting = localStorage.getItem("hexo-color-scheme") || "auto";
    if (setting === "dark" || (prefersDark && setting !== "light"))
      document.documentElement.classList.toggle("dark", true);
    let isDark = document.documentElement.classList.contains("dark");
  })();

  $(document).ready(function () {
    // init icon
    const prefersDark =
      window.matchMedia &&
      window.matchMedia("(prefers-color-scheme: dark)").matches;
    const isDark = document.documentElement.classList.contains("dark");
    $("#theme-icon").attr("icon", isDark ? "ri:moon-line" : "ri:sun-line");

    function toggleGiscusTheme() {
      const isDark = document.documentElement.classList.contains("dark");
      const giscusFrame = document.querySelector("iframe.giscus-frame");
      if (giscusFrame) {
        giscusFrame.contentWindow.postMessage(
          {
            giscus: {
              setConfig: {
                theme: isDark ? "dark" : "light",
              },
            },
          },
          "https://giscus.app"
        );
      }
    }

    // toggle dark mode
    function toggleDark() {
      let isDark = document.documentElement.classList.contains("dark");
      const setting = localStorage.getItem("hexo-color-scheme") || "auto";
      isDark = !isDark;
      document.documentElement.classList.toggle("dark", isDark);
      $("#theme-icon").attr("icon", isDark ? "ri:moon-line" : "ri:sun-line");
      if (prefersDark === isDark) {
        localStorage.setItem("hexo-color-scheme", "auto");
      } else {
        localStorage.setItem("hexo-color-scheme", isDark ? "dark" : "light");
      }
      toggleGiscusTheme();
    }

    // listen dark mode change
    window
      .matchMedia("(prefers-color-scheme: dark)")
      .addEventListener("change", (e) => {
        const setting = localStorage.getItem("hexo-color-scheme") || "auto";
        if (setting === "auto") {
          document.documentElement.classList.toggle("dark", e.matches);
          $("#theme-icon").attr(
            "icon",
            e.matches ? "ri:moon-line" : "ri:sun-line"
          );
          toggleGiscusTheme();
        }
      });

    $("#toggle-dark").click((event) => {
      const isAppearanceTransition = document.startViewTransition && !window.matchMedia('(prefers-reduced-motion: reduce)').matches
      if (!isAppearanceTransition) {
        toggleDark()
        return
      }
      const x = event.clientX
      const y = event.clientY
      const endRadius = Math.hypot(
        Math.max(x, innerWidth - x),
        Math.max(y, innerHeight - y),
      )
      const transition = document.startViewTransition(async () => {
        toggleDark()
      })

      transition.ready
        .then(() => {
          const isDark = document.documentElement.classList.contains("dark")
          const clipPath = [
            `circle(0px at ${x}px ${y}px)`,
            `circle(${endRadius}px at ${x}px ${y}px)`,
          ]
          document.documentElement.animate(
            {
              clipPath: isDark
                ? [...clipPath].reverse()
                : clipPath,
            },
            {
              duration: 400,
              easing: 'ease-out',
              pseudoElement: isDark
                ? '::view-transition-old(root)'
                : '::view-transition-new(root)',
            },
          )
        })
    });
  });
</script>




<meta name="generator" content="Hexo 7.3.0"></head>
<body class="font-sans bg-white dark:bg-zinc-900 text-gray-700 dark:text-gray-200 relative">
  <header class="fixed w-full px-5 py-1 z-10 backdrop-blur-xl backdrop-saturate-150 border-b border-black/5">
  <div class="max-auto">
    <nav class="flex items-center text-base">
      <a href="/hexo-blog/public/" class="group">
        <h2 class="font-medium tracking-tighterp text-l p-2">
          <img class="w-5 mr-2 inline-block transition-transform group-hover:rotate-[30deg]" id="logo" src="https://moe-counter-vercel-gamma.vercel.app/a?theme=rule34" alt="Hexo-blog" />
          Hexo-blog
        </h2>
      </a>
      <div id="header-title" class="opacity-0 md:ml-2 md:mt-[0.1rem] text-xs font-medium whitespace-nowrap overflow-hidden overflow-ellipsis">
        ä¸€æ–‡è¯»æ‡‚ Java å’Œ Kotlin çš„æ³›å‹éš¾ç‚¹
      </div>
      <div class="flex-1"></div>
      <div class="flex items-center gap-3">
        
          <a class="hidden sm:flex" href="/hexo-blog/public/archives">Posts</a>
        
          <a class="hidden sm:flex" href="/hexo-blog/public/category">Categories</a>
        
          <a class="hidden sm:flex" href="/hexo-blog/public/tag">Tags</a>
        
        
          
            <a class="w-5 h-5 hidden sm:flex" title="Github" target="_blank" rel="noopener" href="https://github.com/hqqich">
              <iconify-icon width="20" icon="ri:github-line"></iconify-icon>
            </a>
          
        
        <a class="w-5 h-5 hidden sm:flex" title="Github" href="rss2.xml">
          <iconify-icon width="20" icon="ri:rss-line"></iconify-icon>
        </a>
        <a class="w-5 h-5" title="toggle theme" id="toggle-dark">
          <iconify-icon width="20" icon="" id="theme-icon"></iconify-icon>
        </a>
      </div>
      <div class="flex items-center justify-center gap-3 ml-3 sm:hidden">
        <span class="w-5 h-5" aria-hidden="true" role="img" id="open-menu">
          <iconify-icon width="20" icon="carbon:menu" ></iconify-icon>
        </span>
        <span class="w-5 h-5 hidden" aria-hidden="true" role="img" id="close-menu">
          <iconify-icon  width="20" icon="carbon:close" ></iconify-icon>
        </span>
      </div>
    </nav>
  </div>
</header>
<div id="menu-panel" class="h-0 overflow-hidden sm:hidden fixed left-0 right-0 top-12 bottom-0 z-10">
  <div id="menu-content" class="relative z-20 bg-white/80 px-6 sm:px-8 py-2 backdrop-blur-xl -translate-y-full transition-transform duration-300">
    <ul class="nav flex flex-col sm:flex-row text-sm font-medium">
      
        <li class="nav-portfolio sm:mx-2 border-b sm:border-0 border-black/5 last:border-0 hover:text-main">
          <a href="/hexo-blog/public/archives" class="flex h-12 sm:h-auto items-center">Posts</a>
        </li>
      
        <li class="nav-portfolio sm:mx-2 border-b sm:border-0 border-black/5 last:border-0 hover:text-main">
          <a href="/hexo-blog/public/category" class="flex h-12 sm:h-auto items-center">Categories</a>
        </li>
      
        <li class="nav-portfolio sm:mx-2 border-b sm:border-0 border-black/5 last:border-0 hover:text-main">
          <a href="/hexo-blog/public/tag" class="flex h-12 sm:h-auto items-center">Tags</a>
        </li>
      
    </ul>
  </div>
  <div class="mask bg-black/20 absolute inset-0"></div>
</div>

  <main class="pt-14">
    <!-- css -->

<link rel="stylesheet" href="/hexo-blog/public/lib/fancybox/fancybox.min.css">


<link rel="stylesheet" href="/hexo-blog/public/lib/tocbot/tocbot.min.css">

<!-- toc -->

  <!-- tocbot -->
<nav class="post-toc toc text-sm w-48 relative top-32 right-0 opacity-70 hidden lg:block" style="position: fixed !important;"></nav>


<section class="px-6 max-w-prose mx-auto md:px-0">
  <!-- header -->
  <header class="overflow-hidden pt-6 pb-6 md:pt-12">
    <div class="pt-4 md:pt-6">
      <h1 id="article-title" class="text-[2rem] font-bold leading-snug mb-4 md:mb-6 md:text-[2.6rem]">
        ä¸€æ–‡è¯»æ‡‚ Java å’Œ Kotlin çš„æ³›å‹éš¾ç‚¹
      </h1>
      <div>
        <section class="flex items-center gap-3 text-sm">
          <span class="flex items-center gap-1">
            <iconify-icon width="18" icon="carbon-calendar" ></iconify-icon>
            <time>2025-03-02</time>
          </span>
          <span class="text-gray-400">Â·</span>
          <span class="flex items-center gap-1">
            <iconify-icon width="18" icon="ic:round-access-alarm" ></iconify-icon>
            <span>33 min</span>
          </span>
          <span class="text-gray-400">Â·</span>
          <span class="flex items-center gap-1">
            <iconify-icon width="18" icon="icon-park-outline:font-search" ></iconify-icon>
            <span>7.9k words</span>
          </span>
          
            <span class="text-gray-400">Â·</span>
            <span class="flex items-center gap-1">
              <iconify-icon width="16" icon="icon-park-outline:box" class="mr-2"></iconify-icon>
              <a class="article-category-link" href="/hexo-blog/public/categories/kotlin/">kotlin</a>
            </span>
          
        </section>
      </div>
    </div>
  </header>
  <!-- content -->
  <article class="post-content prose m-auto slide-enter-content dark:prose-invert">
    <blockquote>
<p>å…¬ä¼—å·ï¼š<a target="_blank" rel="noopener" href="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/adbc507fc3704fd8955aae739a433db2~tplv-k3u1fbpfcp-zoom-1.image">å­—èŠ‚æ•°ç»„</a></p>
<p>å¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ© ğŸ¤£ğŸ¤£</p>
</blockquote>
<p>Java å’Œ Kotlin çš„æ³›å‹ç®—ä½œæ˜¯ä¸€å—æŒºå¤§çš„çŸ¥è¯†éš¾ç‚¹äº†ï¼Œæ¶‰åŠåˆ°å¾ˆå¤šå¾ˆéš¾ç†è§£çš„æ¦‚å¿µï¼š<strong>æ³›å‹å‹å‚ã€æ³›å‹å®å‚ã€ç±»å‹å‚æ•°ã€ä¸å˜ã€å‹å˜ã€åå˜ã€é€†å˜ã€å†…è”</strong>ç­‰ç­‰ã€‚æœ¬ç¯‡æ–‡ç« å°±å°† Java å’Œ Kotlin ç»“åˆç€ä¸€èµ·è®²ï¼ŒæŒ‰ç…§æˆ‘çš„ä¸ªäººç†è§£æ¥é˜è¿°æ³›å‹çš„å„ä¸ªçŸ¥è¯†éš¾ç‚¹ï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ© ğŸ¤£ğŸ¤£</p>
<h1 id="ä¸€ã€æ³›å‹ç±»å‹"><a href="#ä¸€ã€æ³›å‹ç±»å‹" class="headerlink" title="ä¸€ã€æ³›å‹ç±»å‹"></a>ä¸€ã€æ³›å‹ç±»å‹</h1><p>æ³›å‹å…è®¸ä½ å®šä¹‰å¸¦<strong>ç±»å‹å½¢å‚</strong>çš„æ•°æ®ç±»å‹ï¼Œå½“è¿™ç§ç±»å‹çš„å®ä¾‹è¢«åˆ›å»ºå‡ºæ¥åï¼Œ<strong>ç±»å‹å½¢å‚</strong>ä¾¿è¢«æ›¿æ¢ä¸ºç§°ä¸º<strong>ç±»å‹å®å‚</strong>çš„å…·ä½“ç±»å‹ã€‚ä¾‹å¦‚ï¼Œå¯¹äº <code>List&lt;T&gt;</code>ï¼ŒList ç§°ä¸º<strong>åŸºç¡€ç±»å‹</strong>ï¼ŒT ä¾¿æ˜¯<strong>ç±»å‹å‹å‚</strong>ï¼ŒT å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œå½“æ²¡æœ‰æŒ‡å®š T çš„å…·ä½“ç±»å‹æ—¶ï¼Œæˆ‘ä»¬åªèƒ½çŸ¥é“<code>List&lt;T&gt;</code>æ˜¯ä¸€ä¸ªé›†åˆåˆ—è¡¨ï¼Œä½†ä¸çŸ¥é“æ‰¿è½½çš„å…·ä½“æ•°æ®ç±»å‹ã€‚è€Œå¯¹äº <code>List&lt;String&gt;</code>ï¼Œå½“ä¸­çš„ String ä¾¿æ˜¯<strong>ç±»å‹å®å‚</strong>ï¼Œæˆ‘ä»¬å¯ä»¥æ˜ç™½åœ°çŸ¥é“è¯¥åˆ—è¡¨æ‰¿è½½çš„éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œåœ¨è¿™é‡Œ String å°±ç›¸å½“äºä¸€ä¸ªå‚æ•°ä¼ é€’ç»™äº† Listï¼Œåœ¨è¿™è¯­ä¹‰ä¸‹ String ä¹Ÿç§°ä¸º<strong>ç±»å‹å‚æ•°</strong></p>
<p>æ­¤å¤–ï¼Œåœ¨ Kotlin ä¸­æˆ‘ä»¬å¯ä»¥å®ç°<strong>å®åŒ–ç±»å‹å‚æ•°</strong>ï¼Œåœ¨è¿è¡Œæ—¶çš„<strong>å†…è”å‡½æ•°</strong>ä¸­æ‹¿åˆ°ä½œä¸º<strong>ç±»å‹å®å‚</strong>çš„å…·ä½“ç±»å‹ï¼Œå³å¯ä»¥å®ç° <code>T::class.java</code>ï¼Œä½†åœ¨ Java ä¸­å´æ— æ³•å®ç°ï¼Œå› ä¸º<strong>å†…è”å‡½æ•°</strong>æ˜¯ Kotlin ä¸­çš„æ¦‚å¿µï¼ŒJava ä¸­å¹¶ä¸å­˜åœ¨</p>
<h1 id="äºŒã€ä¸ºä»€ä¹ˆéœ€è¦æ³›å‹"><a href="#äºŒã€ä¸ºä»€ä¹ˆéœ€è¦æ³›å‹" class="headerlink" title="äºŒã€ä¸ºä»€ä¹ˆéœ€è¦æ³›å‹"></a>äºŒã€ä¸ºä»€ä¹ˆéœ€è¦æ³›å‹</h1><p>æ³›å‹æ˜¯åœ¨ Java 5 ç‰ˆæœ¬å¼€å§‹å¼•å…¥çš„ï¼Œå…ˆé€šè¿‡å‡ ä¸ªå°ä¾‹å­æ¥æ˜ç™½æ³›å‹çš„é‡è¦æ€§</p>
<p>ä»¥ä¸‹ä»£ç å¯ä»¥æˆåŠŸç¼–è¯‘ï¼Œä½†æ˜¯åœ¨è¿è¡Œæ—¶å´æŠ›å‡ºäº† ClassCastExceptionã€‚äº†è§£ ArrayList æºç çš„åŒå­¦å°±çŸ¥é“å…¶å†…éƒ¨æ˜¯ç”¨ä¸€ä¸ª<code>Object[]</code>æ•°ç»„æ¥å­˜å‚¨æ•°æ®çš„ï¼Œè¿™ä½¿å¾— ArrayList èƒ½å¤Ÿå­˜å‚¨ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼Œæ‰€ä»¥åœ¨æ²¡æœ‰æ³›å‹çš„å¹´ä»£å¼€å‘è€…ä¸€ä¸å°å¿ƒå°±æœ‰å¯èƒ½å‘ ArrayList å­˜å…¥äº†éæœŸæœ›å€¼ï¼Œç¼–è¯‘æœŸå®Œå…¨æ­£å¸¸ï¼Œç­‰åˆ°åœ¨è¿è¡Œæ—¶å°±ä¼šæŠ›å‡ºç±»å‹è½¬æ¢å¼‚å¸¸äº†</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GenericTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">List</span> <span class="variable">stringList</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">        addData(stringList);</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> (String) stringList.get(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">addData</span><span class="params">(List dataList)</span> &#123;</span><br><span class="line">        dataList.add(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread <span class="string">&quot;main&quot;</span> java.lang.ClassCastException: </span><br><span class="line">java.lang.Integer cannot be cast to java.lang.String</span><br></pre></td></tr></table></figure>

<p>è€Œæœ‰äº†æ³›å‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å†™å‡ºæ›´åŠ å¥å£®å®‰å…¨çš„ä»£ç ï¼Œä»¥ä¸‹é”™è¯¯å°±å®Œå…¨å¯ä»¥åœ¨ç¼–è¯‘é˜¶æ®µè¢«å‘ç°ï¼Œä¸”å–å€¼çš„æ—¶å€™ä¹Ÿä¸éœ€è¦è¿›è¡Œç±»å‹å¼ºè½¬</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    List&lt;String&gt; stringList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">    addData(stringList); <span class="comment">//æŠ¥é”™</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> stringList.get(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">addData</span><span class="params">(List&lt;Integer&gt; dataList)</span> &#123;</span><br><span class="line">    dataList.add(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤å¤–ï¼Œåˆ©ç”¨æ³›å‹æˆ‘ä»¬å¯ä»¥å†™å‡ºæ›´åŠ å…·å¤‡é€šç”¨æ€§çš„ä»£ç ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦ä»ä¸€ä¸ª List ä¸­ç­›é€‰å‡ºå¤§äº 0 çš„å…¨éƒ¨æ•°å­—ï¼Œé‚£æˆ‘ä»¬è‡ªç„¶ä¸æƒ³ä¸º Integerã€Floatã€Double ç­‰å¤šç§ç±»å‹å„å†™ä¸€ä¸ªç­›é€‰æ–¹æ³•ï¼Œæ­¤æ—¶å°±å¯ä»¥åˆ©ç”¨æ³›å‹æ¥æŠ½è±¡ç­›é€‰é€»è¾‘</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    List&lt;Integer&gt; integerList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    integerList.add(-<span class="number">1</span>);</span><br><span class="line">    integerList.add(<span class="number">1</span>);</span><br><span class="line">    integerList.add(<span class="number">2</span>);</span><br><span class="line">    List&lt;Integer&gt; result1 = filter(integerList);</span><br><span class="line"></span><br><span class="line">    List&lt;Float&gt; floatList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    floatList.add(-<span class="number">1f</span>);</span><br><span class="line">    floatList.add(<span class="number">1f</span>);</span><br><span class="line">    floatList.add(<span class="number">2f</span>);</span><br><span class="line">    List&lt;Float&gt; result2 = filter(floatList);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T <span class="keyword">extends</span> <span class="title class_">Number</span>&gt; List&lt;T&gt; <span class="title function_">filter</span><span class="params">(List&lt;T&gt; data)</span> &#123;</span><br><span class="line">    List&lt;T&gt; filterList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (T datum : data) &#123;</span><br><span class="line">        <span class="keyword">if</span> (datum.doubleValue() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            filterList.add(datum);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> filterList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ€»çš„æ¥è¯´ï¼Œæ³›å‹æœ‰ä»¥ä¸‹å‡ ç‚¹ä¼˜åŠ¿ï¼š</p>
<ul>
<li>ç±»å‹æ£€æŸ¥ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µå°±èƒ½å‘ç°é”™è¯¯</li>
<li>æ›´åŠ è¯­ä¹‰åŒ–ï¼Œçœ‹åˆ° <code>List&lt;String&gt;</code>æˆ‘ä»¬å°±çŸ¥é“å­˜å‚¨çš„æ•°æ®ç±»å‹æ˜¯ String</li>
<li>è‡ªåŠ¨ç±»å‹è½¬æ¢ï¼Œåœ¨å–å€¼æ—¶æ— éœ€è¿›è¡Œæ‰‹åŠ¨ç±»å‹è½¬æ¢</li>
<li>èƒ½å¤Ÿå°†é€»è¾‘æŠ½è±¡å‡ºæ¥ï¼Œä½¿å¾—ä»£ç æ›´åŠ å…·æœ‰é€šç”¨æ€§</li>
</ul>
<h1 id="ä¸‰ã€ç±»å‹æ“¦é™¤"><a href="#ä¸‰ã€ç±»å‹æ“¦é™¤" class="headerlink" title="ä¸‰ã€ç±»å‹æ“¦é™¤"></a>ä¸‰ã€ç±»å‹æ“¦é™¤</h1><p>æ³›å‹æ˜¯åœ¨ Java 5 ç‰ˆæœ¬å¼€å§‹å¼•å…¥çš„ï¼Œæ‰€ä»¥åœ¨ Java 4 ä¸­ ArrayList è¿˜ä¸å±äºæ³›å‹ç±»ï¼Œå…¶å†…éƒ¨é€šè¿‡ <strong>Object å‘ä¸Šè½¬å‹</strong>å’Œ<strong>å¤–éƒ¨å¼ºåˆ¶ç±»å‹è½¬æ¢</strong>æ¥å®ç°æ•°æ®å­˜å‚¨å’Œé€»è¾‘å¤ç”¨ï¼Œæ­¤æ—¶å¼€å‘è€…çš„é¡¹ç›®ä¸­å·²ç»å……æ–¥äº†å¤§é‡ä»¥ä¸‹ç±»å‹çš„ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">List</span> <span class="variable">stringList</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">stringList.add(<span class="string">&quot;ä¸šå¿—é™ˆ&quot;</span>);</span><br><span class="line">stringList.add(<span class="string">&quot;https://juejin.cn/user/923245496518439&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> (String) stringList.get(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>

<p>è€Œåœ¨æ¨å‡ºæ³›å‹çš„åŒæ—¶ï¼ŒJava å®˜æ–¹ä¹Ÿå¿…é¡»ä¿è¯äºŒè¿›åˆ¶çš„å‘åå…¼å®¹æ€§ï¼Œç”¨ Java 4 ç¼–è¯‘å‡ºçš„ Class æ–‡ä»¶ä¹Ÿå¿…é¡»èƒ½å¤Ÿåœ¨ Java 5 ä¸Šæ­£å¸¸è¿è¡Œï¼Œå³ Java 5 å¿…é¡»ä¿è¯ä»¥ä¸‹ä¸¤ç§ç±»å‹çš„ä»£ç èƒ½å¤Ÿåœ¨ Java 5 ä¸Šå…±å­˜ä¸”æ­£å¸¸è¿è¡Œ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">List</span> <span class="variable">stringList</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">List&lt;String&gt; stringList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br></pre></td></tr></table></figure>

<p>ä¸ºäº†å®ç°è¿™ä¸€ç›®çš„ï¼ŒJava å°±é€šè¿‡<strong>ç±»å‹æ“¦é™¤</strong>è¿™ç§æ¯”è¾ƒåˆ«æ‰­çš„æ–¹å¼æ¥å®ç°æ³›å‹ã€‚ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶ä¼šæ“¦é™¤ç±»å‹å®å‚ï¼Œåœ¨è¿è¡Œæ—¶ä¸å­˜åœ¨ä»»ä½•ç±»å‹ç›¸å…³çš„ä¿¡æ¯ï¼Œæ³›å‹å¯¹äº JVM æ¥è¯´æ˜¯é€æ˜çš„ï¼Œæœ‰æ³›å‹å’Œæ²¡æœ‰æ³›å‹çš„ä»£ç é€šè¿‡ç¼–è¯‘å™¨ç¼–è¯‘åæ‰€ç”Ÿæˆçš„äºŒè¿›åˆ¶ä»£ç æ˜¯å®Œå…¨ç›¸åŒçš„</p>
<p>ä¾‹å¦‚ï¼Œåˆ†åˆ«å£°æ˜ä¸¤ä¸ªæ³›å‹ç±»å’Œéæ³›å‹ç±»ï¼Œæ‹¿åˆ°å…¶ class æ–‡ä»¶</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GenericTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">NodeA</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> Object obj;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">NodeA</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.obj = obj;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">NodeB</span>&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> T obj;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">NodeB</span><span class="params">(T obj)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.obj = obj;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">NodeA</span> <span class="variable">nodeA</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NodeA</span>(<span class="string">&quot;ä¸šå¿—é™ˆ&quot;</span>);</span><br><span class="line">        NodeB&lt;String&gt; nodeB = <span class="keyword">new</span> <span class="title class_">NodeB</span>&lt;&gt;(<span class="string">&quot;ä¸šå¿—é™ˆ&quot;</span>);</span><br><span class="line">        System.out.println(nodeB.obj);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ° NodeA å’Œ NodeB ä¸¤ä¸ªå¯¹è±¡å¯¹åº”çš„å­—èŠ‚ç å…¶å®æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œæœ€ç»ˆéƒ½æ˜¯ä½¿ç”¨ Object æ¥æ‰¿è½½æ•°æ®ï¼Œå°±å¥½åƒä¼ é€’ç»™ NodeB çš„ç±»å‹å‚æ•° String ä¸è§äº†ä¸€æ ·ï¼Œè¿™ä¾¿æ˜¯ç±»å‹æ“¦é™¤</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">generic</span>.GenericTest &#123;</span><br><span class="line">  <span class="keyword">public</span> generic.GenericTest();</span><br><span class="line">    Code:</span><br><span class="line">       <span class="number">0</span>: aload_0</span><br><span class="line">       <span class="number">1</span>: invokespecial #<span class="number">1</span>                  <span class="comment">// Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">       <span class="number">4</span>: <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(java.lang.String[])</span>;</span><br><span class="line">    Code:</span><br><span class="line">       <span class="number">0</span>: <span class="keyword">new</span>           #<span class="number">2</span>                  <span class="comment">// class generic/GenericTest$NodeA</span></span><br><span class="line">       <span class="number">3</span>: dup</span><br><span class="line">       <span class="number">4</span>: ldc           #<span class="number">3</span>                  <span class="comment">// String ä¸šå¿—é™ˆ</span></span><br><span class="line">       <span class="number">6</span>: invokespecial #<span class="number">4</span>                  <span class="comment">// Method generic/GenericTest$NodeA.&quot;&lt;init&gt;&quot;:(Ljava/lang/Object;)V</span></span><br><span class="line">       <span class="number">9</span>: astore_1</span><br><span class="line">      <span class="number">10</span>: <span class="keyword">new</span>           #<span class="number">5</span>                  <span class="comment">// class generic/GenericTest$NodeB</span></span><br><span class="line">      <span class="number">13</span>: dup</span><br><span class="line">      <span class="number">14</span>: ldc           #<span class="number">3</span>                  <span class="comment">// String ä¸šå¿—é™ˆ</span></span><br><span class="line">      <span class="number">16</span>: invokespecial #<span class="number">6</span>                  <span class="comment">// Method generic/GenericTest$NodeB.&quot;&lt;init&gt;&quot;:(Ljava/lang/Object;)V</span></span><br><span class="line">      <span class="number">19</span>: astore_2</span><br><span class="line">      <span class="number">20</span>: getstatic     #<span class="number">7</span>                  <span class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">      <span class="number">23</span>: aload_2</span><br><span class="line">      <span class="number">24</span>: invokestatic  #<span class="number">8</span>                  <span class="comment">// Method generic/GenericTest$NodeB.access$000:(Lgeneric/GenericTest$NodeB;)Ljava/lang/Object;</span></span><br><span class="line">      <span class="number">27</span>: checkcast     #<span class="number">9</span>                  <span class="comment">// class java/lang/String</span></span><br><span class="line">      <span class="number">30</span>: invokevirtual #<span class="number">10</span>                 <span class="comment">// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span></span><br><span class="line">      <span class="number">33</span>: <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è€Œå¦‚æœè®© NodeA ç›´æ¥ä½¿ç”¨ String ç±»å‹ï¼Œå¹¶ä¸”ä¸ºæ³›å‹ç±» NodeB è®¾å®šä¸Šç•Œçº¦æŸ Stringï¼Œä¸¤è€…çš„å­—èŠ‚ç ä¹Ÿä¼šå®Œå…¨ä¸€æ ·</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GenericTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">NodeA</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> String obj;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">NodeA</span><span class="params">(String obj)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.obj = obj;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">NodeB</span>&lt;T <span class="keyword">extends</span> <span class="title class_">String</span>&gt; &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> T obj;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">NodeB</span><span class="params">(T obj)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.obj = obj;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">NodeA</span> <span class="variable">nodeA</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NodeA</span>(<span class="string">&quot;ä¸šå¿—é™ˆ&quot;</span>);</span><br><span class="line">        NodeB&lt;String&gt; nodeB = <span class="keyword">new</span> <span class="title class_">NodeB</span>&lt;&gt;(<span class="string">&quot;ä¸šå¿—é™ˆ&quot;</span>);</span><br><span class="line">        System.out.println(nodeB.obj);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ° NodeA å’Œ NodeB çš„å­—èŠ‚ç æ˜¯å®Œå…¨ç›¸åŒçš„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">generic</span>.GenericTest &#123;</span><br><span class="line">  <span class="keyword">public</span> generic.GenericTest();</span><br><span class="line">    Code:</span><br><span class="line">       <span class="number">0</span>: aload_0</span><br><span class="line">       <span class="number">1</span>: invokespecial #<span class="number">1</span>                  <span class="comment">// Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">       <span class="number">4</span>: <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(java.lang.String[])</span>;</span><br><span class="line">    Code:</span><br><span class="line">       <span class="number">0</span>: <span class="keyword">new</span>           #<span class="number">2</span>                  <span class="comment">// class generic/GenericTest$NodeA</span></span><br><span class="line">       <span class="number">3</span>: dup</span><br><span class="line">       <span class="number">4</span>: ldc           #<span class="number">3</span>                  <span class="comment">// String ä¸šå¿—é™ˆ</span></span><br><span class="line">       <span class="number">6</span>: invokespecial #<span class="number">4</span>                  <span class="comment">// Method generic/GenericTest$NodeA.&quot;&lt;init&gt;&quot;:(Ljava/lang/String;)V</span></span><br><span class="line">       <span class="number">9</span>: astore_1</span><br><span class="line">      <span class="number">10</span>: <span class="keyword">new</span>           #<span class="number">5</span>                  <span class="comment">// class generic/GenericTest$NodeB</span></span><br><span class="line">      <span class="number">13</span>: dup</span><br><span class="line">      <span class="number">14</span>: ldc           #<span class="number">3</span>                  <span class="comment">// String ä¸šå¿—é™ˆ</span></span><br><span class="line">      <span class="number">16</span>: invokespecial #<span class="number">6</span>                  <span class="comment">// Method generic/GenericTest$NodeB.&quot;&lt;init&gt;&quot;:(Ljava/lang/String;)V</span></span><br><span class="line">      <span class="number">19</span>: astore_2</span><br><span class="line">      <span class="number">20</span>: getstatic     #<span class="number">7</span>                  <span class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">      <span class="number">23</span>: aload_2</span><br><span class="line">      <span class="number">24</span>: invokestatic  #<span class="number">8</span>                  <span class="comment">// Method generic/GenericTest$NodeB.access$000:(Lgeneric/GenericTest$NodeB;)Ljava/lang/String;</span></span><br><span class="line">      <span class="number">27</span>: invokevirtual #<span class="number">9</span>                  <span class="comment">// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span></span><br><span class="line">      <span class="number">30</span>: <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥è¯´ï¼Œå½“æ³›å‹ç±»å‹è¢«æ“¦é™¤åæœ‰ä¸¤ç§è½¬æ¢æ–¹å¼</p>
<ul>
<li>å¦‚æœæ³›å‹æ²¡æœ‰è®¾ç½®ä¸Šç•Œçº¦æŸï¼Œé‚£ä¹ˆå°†æ³›å‹è½¬åŒ–æˆ Object ç±»å‹</li>
<li>å¦‚æœæ³›å‹è®¾ç½®äº†ä¸Šç•Œçº¦æŸï¼Œé‚£ä¹ˆå°†æ³›å‹è½¬åŒ–æˆè¯¥ä¸Šç•Œçº¦æŸ</li>
</ul>
<p>è¯¥ç»“è®ºä¹Ÿå¯ä»¥é€šè¿‡åå°„æ³›å‹ç±»çš„ Class å¯¹è±¡æ¥éªŒè¯</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GenericTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">NodeA</span>&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> T obj;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">NodeA</span><span class="params">(T obj)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.obj = obj;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">NodeB</span>&lt;T <span class="keyword">extends</span> <span class="title class_">String</span>&gt; &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> T obj;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">NodeB</span><span class="params">(T obj)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.obj = obj;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        NodeA&lt;String&gt; nodeA = <span class="keyword">new</span> <span class="title class_">NodeA</span>&lt;&gt;(<span class="string">&quot;ä¸šå¿—é™ˆ&quot;</span>);</span><br><span class="line">        getField(nodeA.getClass());</span><br><span class="line">        NodeB&lt;String&gt; nodeB = <span class="keyword">new</span> <span class="title class_">NodeB</span>&lt;&gt;(<span class="string">&quot;https://juejin.cn/user/923245496518439&quot;</span>);</span><br><span class="line">        getField(nodeB.getClass());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">getField</span><span class="params">(Class clazz)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (Field field : clazz.getDeclaredFields()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;fieldName: &quot;</span> + field.getName());</span><br><span class="line">            System.out.println(<span class="string">&quot;fieldTypeName: &quot;</span> + field.getType().getName());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>NodeA å¯¹åº”çš„æ˜¯ Objectï¼ŒNodeB å¯¹åº”çš„æ˜¯ String</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fieldName: obj</span><br><span class="line">fieldTypeName: java.lang.Object</span><br><span class="line">fieldName: obj</span><br><span class="line">fieldTypeName: java.lang.String</span><br></pre></td></tr></table></figure>

<p>é‚£æ—¢ç„¶åœ¨è¿è¡Œæ—¶ä¸å­˜åœ¨ä»»ä½•ç±»å‹ç›¸å…³çš„ä¿¡æ¯ï¼Œæ³›å‹åˆä¸ºä»€ä¹ˆèƒ½å¤Ÿå®ç°<strong>ç±»å‹æ£€æŸ¥</strong>å’Œ<strong>ç±»å‹è‡ªåŠ¨è½¬æ¢</strong>ç­‰åŠŸèƒ½å‘¢ï¼Ÿ</p>
<p>å…¶å®ï¼Œç±»å‹æ£€æŸ¥æ˜¯ç¼–è¯‘å™¨åœ¨<strong>ç¼–è¯‘å‰</strong>å¸®æˆ‘ä»¬å®Œæˆçš„ï¼Œç¼–è¯‘å™¨çŸ¥é“æˆ‘ä»¬å£°æ˜çš„å…·ä½“çš„ç±»å‹å®å‚ï¼Œæ‰€ä»¥ç±»å‹æ“¦é™¤å¹¶ä¸å½±å“ç±»å‹æ£€æŸ¥åŠŸèƒ½ã€‚è€Œç±»å‹è‡ªåŠ¨è½¬æ¢å…¶å®æ˜¯é€šè¿‡å†…éƒ¨å¼ºåˆ¶ç±»å‹è½¬æ¢æ¥å®ç°çš„ï¼Œä¸Šé¢ç»™å‡ºçš„å­—èŠ‚ç ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°æœ‰ä¸€æ¡ç±»å‹å¼ºè½¬ checkcast çš„è¯­å¥</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">27</span>: checkcast     #<span class="number">9</span>                  <span class="comment">// class java/lang/String</span></span><br></pre></td></tr></table></figure>

<p>ä¾‹å¦‚ï¼ŒArrayList å†…éƒ¨è™½ç„¶ç”¨äºå­˜å‚¨æ•°æ®çš„æ˜¯ Object æ•°ç»„ï¼Œä½† get æ–¹æ³•å†…éƒ¨ä¼šè‡ªåŠ¨å®Œæˆç±»å‹å¼ºè½¬</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">transient</span> Object[] elementData;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span> E <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">	rangeCheck(index);</span><br><span class="line">	<span class="keyword">return</span> elementData(index);</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">E <span class="title function_">elementData</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">	<span class="comment">//å¼ºåˆ¶ç±»å‹è½¬æ¢</span></span><br><span class="line">	<span class="keyword">return</span> (E) elementData[index];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥ Java çš„æ³›å‹å¯ä»¥çœ‹åšæ˜¯ä¸€ç§ç‰¹æ®Šçš„è¯­æ³•ç³–ï¼Œå› æ­¤ä¹Ÿè¢«äººç§°ä¸º<strong>ä¼ªæ³›å‹</strong></p>
<h1 id="å››ã€ç±»å‹æ“¦é™¤çš„åé—ç—‡"><a href="#å››ã€ç±»å‹æ“¦é™¤çš„åé—ç—‡" class="headerlink" title="å››ã€ç±»å‹æ“¦é™¤çš„åé—ç—‡"></a>å››ã€ç±»å‹æ“¦é™¤çš„åé—ç—‡</h1><p>Java æ³›å‹å¯¹äºç±»å‹çš„çº¦æŸåªåœ¨ç¼–è¯‘æœŸå­˜åœ¨ï¼Œè¿è¡Œæ—¶ä»ç„¶ä¼šæŒ‰ç…§ Java 5 ä¹‹å‰çš„æœºåˆ¶æ¥è¿è¡Œï¼Œæ³›å‹çš„å…·ä½“ç±»å‹åœ¨è¿è¡Œæ—¶å·²ç»è¢«åˆ é™¤äº†ï¼Œæ‰€ä»¥ JVM æ˜¯è¯†åˆ«ä¸åˆ°æˆ‘ä»¬åœ¨ä»£ç ä¸­æŒ‡å®šçš„å…·ä½“çš„æ³›å‹ç±»å‹çš„</p>
<p>ä¾‹å¦‚ï¼Œè™½ç„¶<code>List&lt;String&gt;</code>åªèƒ½ç”¨äºæ·»åŠ å­—ç¬¦ä¸²ï¼Œä½†æˆ‘ä»¬åªèƒ½<strong>æ³›åŒ–åœ°</strong>è¯†åˆ«åˆ°å®ƒå±äº<code>List&lt;?&gt;</code>ç±»å‹ï¼Œè€Œæ— æ³•å…·ä½“åˆ¤æ–­å‡ºè¯¥ List å†…éƒ¨åŒ…å«çš„å…·ä½“ç±»å‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; stringList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="comment">//æ­£å¸¸</span></span><br><span class="line"><span class="keyword">if</span> (stringList <span class="keyword">instanceof</span> ArrayList&lt;?&gt;) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŠ¥é”™</span></span><br><span class="line"><span class="keyword">if</span> (stringList <span class="keyword">instanceof</span> ArrayList&lt;String&gt;) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬åªèƒ½å¯¹å…·ä½“çš„å¯¹è±¡å®ä¾‹è¿›è¡Œç±»å‹æ ¡éªŒï¼Œä½†æ— æ³•åˆ¤æ–­å‡ºæ³›å‹å½¢å‚çš„å…·ä½“ç±»å‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> &lt;T&gt; <span class="keyword">void</span> <span class="title function_">filter</span><span class="params">(T data)</span> &#123;</span><br><span class="line">	<span class="comment">//æ­£å¸¸</span></span><br><span class="line">	<span class="keyword">if</span> (data <span class="keyword">instanceof</span> String) &#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//æŠ¥é”™</span></span><br><span class="line">	<span class="keyword">if</span> (T <span class="keyword">instanceof</span> String) &#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//æŠ¥é”™</span></span><br><span class="line">	Class&lt;T&gt; tClass = T::getClass;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤å¤–ï¼Œç±»å‹æ“¦é™¤ä¹Ÿä¼šå¯¼è‡´ Java ä¸­å‡ºç°å¤šæ€é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•çš„æ–¹æ³•ç­¾åå¹¶ä¸å®Œå…¨ç›¸åŒï¼Œä½†ç”±äºç±»å‹æ“¦é™¤çš„åŸå› ï¼Œå…¥å‚å‚æ•°çš„æ•°æ®ç±»å‹éƒ½ä¼šè¢«çœ‹æˆ <code>List&lt;Object&gt;</code>ï¼Œä»è€Œå¯¼è‡´ä¸¤è€…æ— æ³•å…±å­˜åœ¨åŒä¸€ä¸ªåŒºåŸŸå†…</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">filter</span><span class="params">(List&lt;String&gt; stringList)</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">filter</span><span class="params">(List&lt;Integer&gt; stringList)</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="äº”ã€Kotlin-æ³›å‹"><a href="#äº”ã€Kotlin-æ³›å‹" class="headerlink" title="äº”ã€Kotlin æ³›å‹"></a>äº”ã€Kotlin æ³›å‹</h1><p>Kotlin æ³›å‹åœ¨å¤§ä½“ä¸Šå’Œ Java ä¸€è‡´ï¼Œæ¯•ç«Ÿä¸¤è€…éœ€è¦ä¿è¯å…¼å®¹æ€§</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Plate</span>&lt;<span class="type">T</span>&gt;(<span class="keyword">val</span> t: T) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">cut</span><span class="params">()</span></span> &#123;</span><br><span class="line">        println(t.toString())</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Apple</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Banana</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> plateApple = Plate&lt;Apple&gt;(Apple())</span><br><span class="line">    <span class="comment">//æ³›å‹ç±»å‹è‡ªåŠ¨æ¨å¯¼</span></span><br><span class="line">    <span class="keyword">val</span> plateBanana = Plate(Banana())</span><br><span class="line">    plateApple.cut()</span><br><span class="line">    plateBanana.cut()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Kotlin ä¹Ÿæ”¯æŒåœ¨æ‰©å±•å‡½æ•°ä¸­ä½¿ç”¨æ³›å‹</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="type">&lt;T&gt;</span> List<span class="type">&lt;T&gt;</span>.<span class="title">find</span><span class="params">(t: <span class="type">T</span>)</span></span>: T? &#123;</span><br><span class="line">    <span class="keyword">val</span> index = indexOf(t)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">if</span> (index &gt; -<span class="number">1</span>) <span class="keyword">get</span>(index) <span class="keyword">else</span> <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ºäº†å®ç°å‘åå…¼å®¹ï¼Œç›®å‰é«˜ç‰ˆæœ¬ Java ä¾ç„¶å…è®¸å®ä¾‹åŒ–æ²¡æœ‰å…·ä½“ç±»å‹å‚æ•°çš„æ³›å‹ç±»ï¼Œè¿™å¯ä»¥è¯´æ˜¯ä¸€ä¸ªå¯¹æ–°ç‰ˆæœ¬ JDK å±é™©ä½†å¯¹æ—§ç‰ˆæœ¬å‹å¥½çš„å…¼å®¹æªæ–½ã€‚ä½† Kotlin è¦æ±‚åœ¨ä½¿ç”¨æ³›å‹æ—¶éœ€è¦<strong>æ˜¾å¼å£°æ˜æ³›å‹ç±»å‹</strong>æˆ–è€…æ˜¯<strong>ç¼–è¯‘å™¨èƒ½å¤Ÿç±»å‹æ¨å¯¼å‡ºå…·ä½“ç±»å‹</strong>ï¼Œä»»ä½•ä¸å…·å¤‡å…·ä½“æ³›å‹ç±»å‹çš„æ³›å‹ç±»éƒ½æ— æ³•è¢«å®ä¾‹åŒ–ã€‚å› ä¸º Kotlin ä¸€å¼€å§‹å°±æ˜¯åŸºäº Java 6 ç‰ˆæœ¬çš„ï¼Œä¸€å¼€å§‹å°±å­˜åœ¨äº†æ³›å‹ï¼Œè‡ªç„¶å°±ä¸å­˜åœ¨éœ€è¦å…¼å®¹è€ä»£ç çš„é—®é¢˜ï¼Œå› æ­¤ä»¥ä¸‹ä¾‹å­å’Œ Java ä¼šæœ‰ä¸åŒçš„è¡¨ç°</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> arrayList1 = ArrayList() <span class="comment">//é”™è¯¯ï¼Œç¼–è¯‘å™¨æŠ¥é”™</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> arrayList2 = arrayListOf&lt;<span class="built_in">Int</span>&gt;() <span class="comment">//æ­£å¸¸</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> arrayList3 = arrayListOf(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>) <span class="comment">//æ­£å¸¸</span></span><br></pre></td></tr></table></figure>

<p>è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒå®¹æ˜“è®©äººè¯¯è§£çš„ç‚¹ã€‚æˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨ <code>as</code> å’Œ <code>as?</code> æ¥è¿›è¡Œç±»å‹è½¬æ¢ï¼Œä½†å¦‚æœè½¬æ¢å¯¹è±¡æ˜¯æ³›å‹ç±»å‹çš„è¯ï¼Œé‚£å°±ä¼šç”±äºç±»å‹æ“¦é™¤è€Œå‡ºç°è¯¯åˆ¤ã€‚å¦‚æœè½¬æ¢å¯¹è±¡æœ‰æ­£ç¡®çš„<strong>åŸºç¡€ç±»å‹</strong>ï¼Œé‚£ä¹ˆè½¬æ¢å°±ä¼šæˆåŠŸï¼Œè€Œä¸ç®¡ç±»å‹å®å‚æ˜¯å¦ç›¸ç¬¦ã€‚å› ä¸ºåœ¨è¿è¡Œæ—¶è½¬æ¢å‘ç”Ÿçš„æ—¶å€™ç±»å‹å®å‚æ˜¯æœªçŸ¥çš„ï¼Œæ­¤æ—¶ç¼–è¯‘å™¨åªä¼šå‘å‡º â€œunchecked castâ€ è­¦å‘Šï¼Œä»£ç è¿˜æ˜¯å¯ä»¥æ­£å¸¸ç¼–è¯‘çš„</p>
<p>ä¾‹å¦‚ï¼Œåœ¨ä»¥ä¸‹ä¾‹å­ä¸­ä»£ç çš„è¿è¡Œç»“æœè¿˜ç¬¦åˆæˆ‘ä»¬çš„é¢„çŸ¥ã€‚ç¬¬ä¸€ä¸ªè½¬æ¢æ“ä½œç”±äºç±»å‹ç›¸ç¬¦ï¼Œæ‰€ä»¥æ‰“å°å‡ºäº†ç›¸åŠ å€¼ã€‚ç¬¬äºŒä¸ªè½¬æ¢æ“ä½œç”±äºåŸºç¡€ç±»å‹æ˜¯ Set è€Œé Listï¼Œæ‰€ä»¥æŠ›å‡ºäº† IllegalAccessException</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    printSum(listOf(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)) <span class="comment">//6</span></span><br><span class="line">    printSum(setOf(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)) <span class="comment">//IllegalAccessException</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">printSum</span><span class="params">(c: <span class="type">Collection</span>&lt;*&gt;)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> intList = c <span class="keyword">as</span>? List&lt;<span class="built_in">Int</span>&gt; ?: <span class="keyword">throw</span> IllegalAccessException(<span class="string">&quot;List is expected&quot;</span>)</span><br><span class="line">    println(intList.sum())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è€Œåœ¨ä»¥ä¸‹ä¾‹å­ä¸­æŠ›å‡ºçš„å´æ˜¯ ClassCastExceptionï¼Œè¿™æ˜¯å› ä¸ºåœ¨è¿è¡Œæ—¶ä¸ä¼šåˆ¤æ–­ä¸”æ— æ³•åˆ¤æ–­å‡ºç±»å‹å®å‚åˆ°åº•æ˜¯å¦æ˜¯ Intï¼Œè€Œåªä¼šåˆ¤æ–­åŸºç¡€ç±»å‹ List æ˜¯å¦ç›¸ç¬¦ï¼Œæ‰€ä»¥ <code>as?</code> æ“ä½œä¼šæˆåŠŸï¼Œç­‰åˆ°è¦æ‰§è¡Œç›¸åŠ æ“ä½œæ—¶æ‰ä¼šå‘ç°æ‹¿åˆ°çš„æ˜¯ String è€Œé Number</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">printSum(listOf(<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>))</span><br><span class="line"></span><br><span class="line">Exception <span class="keyword">in</span> thread <span class="string">&quot;main&quot;</span> java.lang.ClassCastException: </span><br><span class="line">java.lang.String cannot be cast to java.lang.Number</span><br></pre></td></tr></table></figure>

<h1 id="å…­ã€ä¸Šç•Œçº¦æŸ"><a href="#å…­ã€ä¸Šç•Œçº¦æŸ" class="headerlink" title="å…­ã€ä¸Šç•Œçº¦æŸ"></a>å…­ã€ä¸Šç•Œçº¦æŸ</h1><p>æ³›å‹æœ¬èº«å·²ç»å¸¦æœ‰ç±»å‹çº¦æŸçš„ä½œç”¨ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è¿›ä¸€æ­¥ç»†åŒ–å…¶æ”¯æŒçš„å…·ä½“ç±»å‹</p>
<p>ä¾‹å¦‚ï¼Œå‡è®¾å­˜åœ¨ä¸€ä¸ªç›˜å­ Plateï¼Œæˆ‘ä»¬è¦æ±‚è¯¥ Plate åªèƒ½ç”¨äºè£…æ°´æœ Fruitï¼Œé‚£ä¹ˆå°±å¯ä»¥å¯¹å…¶æ³›å‹å£°æ˜åšè¿›ä¸€æ­¥çº¦æŸï¼ŒJava ä¸­ä½¿ç”¨ extend å…³é”®å­—æ¥å£°æ˜çº¦æŸè§„åˆ™ï¼Œè€Œ Kotlin ä½¿ç”¨çš„æ˜¯ <strong>:</strong>  ã€‚è¿™æ · Plate å°±åªèƒ½ç”¨äº Fruit å’Œå…¶å­ç±»ï¼Œè€Œæ— æ³•ç”¨äº Noodles ç­‰ä¸ç›¸å…³çš„ç±»å‹ï¼Œè¿™ç§ç±»å‹çº¦æŸå°±è¢«ç§°ä¸º<strong>ä¸Šç•Œçº¦æŸ</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> <span class="keyword">class</span> <span class="title class_">Fruit</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Apple</span> : <span class="type">Fruit</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Noodles</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Plate</span>&lt;<span class="type">T : Fruit</span>&gt;(<span class="keyword">val</span> t: T)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> applePlate = Plate(Apple()) <span class="comment">//æ­£å¸¸</span></span><br><span class="line">    <span class="keyword">val</span> noodlesPlate = Plate(Noodles()) <span class="comment">//æŠ¥é”™</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä¸Šç•Œçº¦æŸæ‹¥æœ‰å¤šå±‚ç±»å‹å…ƒç´ ï¼ŒJava æ˜¯ä½¿ç”¨ &amp; ç¬¦å·è¿›è¡Œé“¾å¼å£°æ˜ï¼ŒKotlin åˆ™æ˜¯ç”¨ where å…³é”®å­—æ¥ä¾æ¬¡è¿›è¡Œå£°æ˜</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Soft</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Plate</span>&lt;<span class="type">T</span>&gt;(<span class="keyword">val</span> t: T) <span class="keyword">where</span> T : Fruit, T : Soft</span><br><span class="line"></span><br><span class="line"><span class="keyword">open</span> <span class="keyword">class</span> <span class="title class_">Fruit</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Apple</span> : <span class="type">Fruit</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Banana</span> : <span class="type">Fruit</span>(), Soft</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> applePlate = Plate(Apple()) <span class="comment">//æŠ¥é”™</span></span><br><span class="line">    <span class="keyword">val</span> bananaPlate = Plate(Banana()) <span class="comment">//æ­£å¸¸</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤å¤–ï¼Œæ²¡æœ‰æŒ‡å®šä¸Šç•Œçº¦æŸçš„ç±»å‹å½¢å‚ä¼šé»˜è®¤ä½¿ç”¨ Any? ä½œä¸ºä¸Šç•Œï¼Œå³æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ String æˆ– String? ä½œä¸ºå…·ä½“çš„ç±»å‹å®å‚ã€‚å¦‚æœæƒ³ç¡®ä¿æœ€ç»ˆçš„ç±»å‹å®å‚ä¸€å®šæ˜¯éç©ºç±»å‹ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸»åŠ¨å£°æ˜ä¸Šç•Œçº¦æŸä¸º Any</p>
<h1 id="ä¸ƒã€ç±»å‹é€šé…ç¬¦-æ˜Ÿå·æŠ•å½±"><a href="#ä¸ƒã€ç±»å‹é€šé…ç¬¦-æ˜Ÿå·æŠ•å½±" class="headerlink" title="ä¸ƒã€ç±»å‹é€šé…ç¬¦ &amp; æ˜Ÿå·æŠ•å½±"></a>ä¸ƒã€ç±»å‹é€šé…ç¬¦ &amp; æ˜Ÿå·æŠ•å½±</h1><p>å‡è®¾ç°åœ¨æœ‰ä¸ªéœ€æ±‚ï¼Œéœ€è¦æˆ‘ä»¬æä¾›ä¸€ä¸ªæ–¹æ³•ç”¨äºéå†æ‰€æœ‰ç±»å‹çš„ List é›†åˆå¹¶æ‰“å°å…ƒç´ </p>
<p>ç¬¬ä¸€ç§åšæ³•å°±æ˜¯ç›´æ¥å°†æ–¹æ³•å‚æ•°ç±»å‹å£°æ˜ä¸º Listï¼Œä¸åŒ…å«ä»»ä½•æ³›å‹ç±»å‹å£°æ˜ã€‚è¿™ç§åšæ³•å¯è¡Œï¼Œä½†ç¼–è¯‘å™¨ä¼šè­¦å‘Šæ— æ³•ç¡®å®š <code>list</code>å…ƒç´ çš„å…·ä½“ç±»å‹ï¼Œæ‰€ä»¥è¿™ä¸æ˜¯æœ€ä¼˜è§£æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printList1</span><span class="params">(List list)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (Object o : list) &#123;</span><br><span class="line">        System.out.println(o);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯èƒ½ä¼šæƒ³åˆ°çš„ç¬¬äºŒç§åšæ³•æ˜¯ï¼šå°†æ³›å‹ç±»å‹ç›´æ¥å£°æ˜ä¸º Objectï¼Œå¸Œæœ›è®©å…¶é€‚ç”¨äºä»»ä½•ç±»å‹çš„ Listã€‚è¿™ç§åšæ³•å®Œå…¨ä¸å¯è¡Œï¼Œå› ä¸ºå³ä½¿ <code>String</code> æ˜¯ <code>Object</code> çš„å­ç±»ï¼Œä½† <code>List&lt;String&gt;</code> å’Œ <code>List&lt;Object&gt;</code>å¹¶ä¸å…·å¤‡ä»å±å…³ç³»ï¼Œè¿™å¯¼è‡´ <code>printList2</code> æ–¹æ³•å®é™…ä¸Šåªèƒ½ç”¨äº<code>List&lt;Object&gt;</code>è¿™ä¸€ç§å…·ä½“ç±»å‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printList2</span><span class="params">(List&lt;Object&gt; list)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (Object o : list) &#123;</span><br><span class="line">        System.out.println(o);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æœ€ä¼˜è§£æ³•å°±æ˜¯è¦ç”¨åˆ° Java çš„ç±»å‹é€šé…ç¬¦ <strong>?</strong> äº†ï¼Œ<code>printList3</code>æ–¹æ³•å®Œå…¨å¯è¡Œä¸”ç¼–è¯‘å™¨ä¹Ÿä¸ä¼šè­¦å‘ŠæŠ¥é”™</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printList3</span><span class="params">(List&lt;?&gt; list)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (Object o : list) &#123;</span><br><span class="line">        System.out.println(o);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ï¼Ÿ è¡¨ç¤ºæˆ‘ä»¬å¹¶ä¸å…³å¿ƒå…·ä½“çš„æ³›å‹ç±»å‹ï¼Œè€Œåªæ˜¯æƒ³é…åˆå…¶å®ƒç±»å‹è¿›è¡Œä¸€äº›æ¡ä»¶é™åˆ¶ã€‚ä¾‹å¦‚ï¼Œ<code>printList3</code>æ–¹æ³•å¸Œæœ›ä¼ å…¥çš„æ˜¯ä¸€ä¸ª Listï¼Œä½†ä¸é™åˆ¶æ³›å‹çš„å…·ä½“ç±»å‹ï¼Œæ­¤æ—¶<code>List&lt;?&gt;</code>å°±è¾¾åˆ°äº†è¿™ä¸€å±‚é™åˆ¶æ¡ä»¶</p>
<p>ç±»å‹é€šé…ç¬¦ä¹Ÿå­˜åœ¨ç€ä¸€äº›é™åˆ¶ã€‚å› ä¸º <code>printList3</code> æ–¹æ³•å¹¶ä¸åŒ…å«å…·ä½“çš„æ³›å‹ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»ä¸­å–å‡ºçš„å€¼åªèƒ½æ˜¯ Object ç±»å‹ï¼Œä¸”æ— æ³•å‘å…¶æ’å…¥å€¼ï¼Œè¿™éƒ½æ˜¯ä¸ºäº†é¿å…å‘ç”Ÿ ClassCastException</p>
<p>Java çš„<strong>ç±»å‹é€šé…ç¬¦</strong>å¯¹åº” Kotlin ä¸­çš„æ¦‚å¿µå°±æ˜¯**æ˜Ÿå·æŠ•å½± * **ï¼ŒJava å­˜åœ¨çš„é™åˆ¶åœ¨ Kotlin ä¸­ä¸€æ ·æœ‰</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">printList</span><span class="params">(list: <span class="type">List</span>&lt;*&gt;)</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (any <span class="keyword">in</span> list) &#123;</span><br><span class="line">        println(any)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤å¤–ï¼Œæ˜Ÿå·æŠ•å½±åªèƒ½å‡ºç°åœ¨<strong>ç±»å‹å½¢å‚</strong>çš„ä½ç½®ï¼Œä¸èƒ½ä½œä¸º<strong>ç±»å‹å®å‚</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> list: MutableList&lt;*&gt; = ArrayList&lt;Number&gt;() <span class="comment">//æ­£å¸¸</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> list2: MutableList&lt;*&gt; = ArrayList&lt;*&gt;() <span class="comment">//æŠ¥é”™</span></span><br></pre></td></tr></table></figure>

<h1 id="å…«ã€åå˜-ä¸å˜"><a href="#å…«ã€åå˜-ä¸å˜" class="headerlink" title="å…«ã€åå˜ &amp; ä¸å˜"></a>å…«ã€åå˜ &amp; ä¸å˜</h1><p>çœ‹ä»¥ä¸‹ä¾‹å­ã€‚Apple å’Œ Banana éƒ½æ˜¯ Fruit çš„å­ç±»ï¼Œå¯ä»¥å‘ç° Apple[] ç±»å‹çš„å¯¹è±¡æ˜¯å¯ä»¥èµ‹å€¼ç»™ Fruit[] çš„ï¼Œä¸” Fruit[] å¯ä»¥å®¹çº³ Apple å¯¹è±¡å’Œ Banana å¯¹è±¡ï¼Œè¿™ç§è®¾è®¡å°±è¢«ç§°ä¸º<strong>åå˜</strong>ï¼Œå³å¦‚æœ A æ˜¯ B çš„å­ç±»ï¼Œé‚£ä¹ˆ A[] å°±æ˜¯ B[] çš„å­ç±»å‹ã€‚ç›¸å¯¹çš„ï¼ŒObject[] å°±æ˜¯æ‰€æœ‰æ•°ç»„å¯¹è±¡çš„çˆ¶ç±»å‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Fruit</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Apple</span> <span class="keyword">extends</span> <span class="title class_">Fruit</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Banana</span> <span class="keyword">extends</span> <span class="title class_">Fruit</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    Fruit[] fruitArray = <span class="keyword">new</span> <span class="title class_">Apple</span>[<span class="number">10</span>];</span><br><span class="line">    <span class="comment">//æ­£å¸¸</span></span><br><span class="line">    fruitArray[<span class="number">0</span>] = <span class="keyword">new</span> <span class="title class_">Apple</span>();</span><br><span class="line">    <span class="comment">//ç¼–è¯‘æ—¶æ­£å¸¸ï¼Œè¿è¡Œæ—¶æŠ›å‡º ArrayStoreException</span></span><br><span class="line">    fruitArray[<span class="number">1</span>] = <span class="keyword">new</span> <span class="title class_">Banana</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è€Œ Java ä¸­çš„æ³›å‹æ˜¯<strong>ä¸å˜</strong>çš„ï¼Œè¿™æ„å‘³ç€ String è™½ç„¶æ˜¯ Object çš„å­ç±»ï¼Œä½†<code>List&lt;String&gt;</code>å¹¶ä¸æ˜¯<code>List&lt;Object&gt;</code>çš„å­ç±»å‹ï¼Œä¸¤è€…å¹¶ä¸å…·å¤‡ç»§æ‰¿å…³ç³»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; stringList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">List&lt;Object&gt; objectList = stringList; <span class="comment">//æŠ¥é”™</span></span><br></pre></td></tr></table></figure>

<p>é‚£ä¸ºä»€ä¹ˆ Java ä¸­çš„æ³›å‹æ˜¯<strong>ä¸å˜</strong>çš„å‘¢ï¼Ÿ</p>
<p>è¿™å¯ä»¥é€šè¿‡çœ‹ä¸€ä¸ªä¾‹å­æ¥è§£é‡Šã€‚å‡è®¾ Java ä¸­çš„æ³›å‹æ˜¯<strong>åå˜</strong>çš„ï¼Œé‚£ä¹ˆä»¥ä¸‹ä»£ç å°±å¯ä»¥æˆåŠŸé€šè¿‡ç¼–è¯‘é˜¶æ®µçš„æ£€æŸ¥ï¼Œåœ¨è¿è¡Œæ—¶å°±ä¸å¯é¿å…åœ°å°†æŠ›å‡º ClassCastExceptionï¼Œè€Œå¼•å…¥æ³›å‹çš„åˆè¡·å°±æ˜¯ä¸ºäº†å®ç°ç±»å‹å®‰å…¨ï¼Œæ”¯æŒåå˜çš„è¯é‚£æ³›å‹ä¹Ÿå°±æ²¡æœ‰æ¯”æ•°ç»„å®‰å…¨å¤šå°‘äº†ï¼Œå› æ­¤å°±å°†æ³›å‹è¢«è®¾è®¡ä¸º<strong>ä¸å˜</strong>çš„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; strList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">List&lt;Object&gt; objs = strList; <span class="comment">//å‡è®¾å¯ä»¥è¿è¡Œï¼Œå®é™…ä¸Šç¼–è¯‘å™¨ä¼šæŠ¥é”™</span></span><br><span class="line">objs.add(<span class="number">1</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> strList.get(<span class="number">0</span>); <span class="comment">//å°†æŠ›å‡º ClassCastExceptionï¼Œæ— æ³•å°†æ•´æ•°è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span></span><br></pre></td></tr></table></figure>

<p>å†æ¥æƒ³ä¸ªé—®é¢˜ï¼Œæ—¢ç„¶<strong>åå˜</strong>æœ¬èº«å¹¶ä¸å®‰å…¨ï¼Œé‚£ä¹ˆæ•°ç»„ä¸ºä½•åˆè¦è¢«è®¾è®¡ä¸ºåå˜å‘¢ï¼Ÿ</p>
<p>Arrays ç±»åŒ…å«ä¸€ä¸ª <code>equals</code>æ–¹æ³•ç”¨äºæ¯”è¾ƒä¸¤ä¸ªæ•°ç»„å¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚å¦‚æœæ•°ç»„æ˜¯åå˜çš„ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸ºæ¯ä¸€ç§æ•°ç»„å¯¹è±¡éƒ½å®šä¹‰ä¸€ä¸ª <code>equals</code>æ–¹æ³•ï¼ŒåŒ…æ‹¬å¼€å‘è€…è‡ªå®šä¹‰çš„æ•°æ®ç±»å‹ã€‚æƒ³è¦é¿å…è¿™ç§æƒ…å†µï¼Œå°±éœ€è¦è®© Object[] å¯ä»¥æ¥æ”¶ä»»æ„æ•°ç»„ç±»å‹ï¼Œå³<strong>è®© Object[] æˆä¸ºæ‰€æœ‰æ•°ç»„å¯¹è±¡çš„çˆ¶ç±»å‹</strong>ï¼Œè¿™å°±ä½¿å¾—æ•°ç»„å¿…é¡»æ”¯æŒåå˜ï¼Œè¿™æ ·å¤šæ€æ‰èƒ½ç”Ÿæ•ˆ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Arrays</span> &#123;</span><br><span class="line">    </span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object[] a, Object[] a2)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (a==a2)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (a==<span class="literal">null</span> || a2==<span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> a.length;</span><br><span class="line">        <span class="keyword">if</span> (a2.length != length)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;length; i++) &#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">o1</span> <span class="operator">=</span> a[i];</span><br><span class="line">            <span class="type">Object</span> <span class="variable">o2</span> <span class="operator">=</span> a2[i];</span><br><span class="line">            <span class="keyword">if</span> (!(o1==<span class="literal">null</span> ? o2==<span class="literal">null</span> : o1.equals(o2)))</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒKotlin ä¸­çš„æ•°ç»„å’Œ Java ä¸­çš„æ•°ç»„å¹¶ä¸ä¸€æ ·ï¼ŒKotlin æ•°ç»„å¹¶ä¸æ”¯æŒåå˜ï¼ŒKotlin æ•°ç»„ç±»ä¼¼äºé›†åˆæ¡†æ¶ï¼Œå…·æœ‰å¯¹åº”çš„å®ç°ç±» Arrayï¼ŒArray å±äºæ³›å‹ç±»ï¼Œæ”¯æŒäº†æ³›å‹å› æ­¤ä¹Ÿä¸å†åå˜</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> stringArray = arrayOfNulls&lt;String&gt;(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">val</span> anyArray: Array&lt;Any?&gt; = stringArray <span class="comment">//æŠ¥é”™</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Java çš„æ³›å‹ä¹Ÿå¹¶éå®Œå…¨<strong>ä¸å˜</strong>çš„ï¼Œåªæ˜¯å®ç°<strong>åå˜</strong>éœ€è¦æ»¡è¶³ä¸€äº›æ¡ä»¶ï¼Œç”šè‡³ä¹Ÿå¯ä»¥å®ç°<strong>é€†å˜</strong>ï¼Œä¸‹é¢å°±æ¥ä»‹ç»ä¸‹æ³›å‹å¦‚ä½•å®ç°<strong>åå˜</strong>å’Œ<strong>é€†å˜</strong></p>
</blockquote>
<h1 id="ä¹ã€æ³›å‹åå˜"><a href="#ä¹ã€æ³›å‹åå˜" class="headerlink" title="ä¹ã€æ³›å‹åå˜"></a>ä¹ã€æ³›å‹åå˜</h1><p>å‡è®¾æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª<code>copyAll</code>å¸Œæœ›ç”¨äº List æ•°æ®è¿ç§»ã€‚é‚£ä»¥ä¸‹æ“ä½œåœ¨æˆ‘ä»¬çœ‹æ¥å°±æ˜¯å®Œå…¨å®‰å…¨çš„ï¼Œå› ä¸º Integer æ˜¯ Number çš„å­ç±»ï¼ŒæŒ‰é“ç†æ¥è¯´æ˜¯èƒ½å¤Ÿå°† Integer ä¿å­˜ä¸º Number çš„ï¼Œä½†ç”±äºæ³›å‹ä¸å˜æ€§ï¼Œ<code>List&lt;Integer&gt;</code>å¹¶ä¸æ˜¯<code>List&lt;Number&gt;</code>çš„å­ç±»å‹ï¼Œæ‰€ä»¥å®é™…ä¸Šè¯¥æ“ä½œå°†æŠ¥é”™</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    List&lt;Number&gt; numberList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    List&lt;Integer&gt; integerList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    integerList.add(<span class="number">1</span>);</span><br><span class="line">    integerList.add(<span class="number">2</span>);</span><br><span class="line">    integerList.add(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">    copyAll(numberList, integerList); <span class="comment">//æŠ¥é”™</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> &lt;T&gt; <span class="keyword">void</span> <span class="title function_">copyAll</span><span class="params">(List&lt;T&gt; to, List&lt;T&gt; from)</span> &#123;</span><br><span class="line">    to.addAll(from);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ€è€ƒä¸‹è¯¥æ“ä½œä¸ºä»€ä¹ˆä¼šæŠ¥é”™ï¼Ÿ</p>
<p>ç¼–è¯‘å™¨çš„ä½œç”¨ä¹‹ä¸€å°±æ˜¯<strong>è¿›è¡Œå®‰å…¨æ£€æŸ¥å¹¶é˜»æ­¢å¯èƒ½å‘ç”Ÿä¸å®‰å…¨è¡Œä¸ºçš„æ“ä½œ</strong>ï¼Œ<code>copyAll</code> æ–¹æ³•ä¼šæŠ¥é”™ï¼Œé‚£ä¹ˆè‚¯å®šå°±æ˜¯ç¼–è¯‘å™¨è§‰å¾—è¯¥æ–¹æ³•æœ‰å¯èƒ½ä¼šè§¦å‘ä¸å®‰å…¨çš„æ“ä½œã€‚å¼€å‘è€…çš„æœ¬æ„æ˜¯å¸Œæœ›å°† Integer ç±»å‹çš„æ•°æ®è½¬ç§»åˆ° NumberList ä¸­ï¼Œåªæœ‰è¿™ç§æ“ä½œä¸”è¿™ç§æ“ä½œåœ¨æˆ‘ä»¬çœ‹æ¥è‚¯å®šæ˜¯å®‰å…¨çš„ï¼Œä½†æ˜¯ç¼–è¯‘å™¨ä¸çŸ¥é“å¼€å‘è€…æœ€ç»ˆæ‰€è¦åšçš„å…·ä½“æ“ä½œå•Š</p>
<p>å‡è®¾ <code>copyAll</code>æ–¹æ³•å¯ä»¥æ­£å¸¸è°ƒç”¨ï¼Œé‚£ä¹ˆ<code>copyAll</code>æ–¹æ³•è‡ªç„¶åªä¼šæŠŠ <code>from</code> å½“åš <code>List&lt;Number&gt;</code>æ¥çœ‹å¾…ã€‚å› ä¸º Integer æ˜¯ Number çš„å­ç±»ï¼Œä» <code>integerList</code> è·å–åˆ°çš„æ•°æ®å¯¹äº <code>numberList</code> æ¥è¯´è‡ªç„¶æ˜¯å®‰å…¨çš„ã€‚è€Œå¦‚æœæˆ‘ä»¬åœ¨<code>copyAll</code>æ–¹æ³•ä¸­å·å·å‘ <code>integerList</code> ä¼ å…¥äº†ä¸€ä¸ª Number ç±»å‹çš„å€¼çš„è¯ï¼Œé‚£ä¹ˆè‡ªç„¶å°±å°†æŠ›å‡ºå¼‚å¸¸ï¼Œå› ä¸º from å®é™…ä¸Šæ˜¯ <code>List&lt;Integer&gt;</code>ç±»å‹</p>
<p>ä¸ºäº†é˜»æ­¢è¿™ç§ä¸å®‰å…¨çš„è¡Œä¸ºï¼Œç¼–è¯‘å™¨é€‰æ‹©é€šè¿‡ç›´æ¥æŠ¥é”™æ¥è¿›è¡Œæç¤ºã€‚ä¸ºäº†è§£å†³æŠ¥é”™ï¼Œæˆ‘ä»¬å°±éœ€è¦å‘ç¼–è¯‘å™¨åšå‡ºå®‰å…¨ä¿è¯ï¼š<strong>ä» from å–å‡ºæ¥çš„å€¼åªä¼šå½“åš Number ç±»å‹ï¼Œä¸”ä¸ä¼šå‘ from ä¼ å…¥ä»»ä½•å€¼</strong></p>
<p>ä¸ºäº†è¾¾æˆä»¥ä¸Šä¿è¯ï¼Œéœ€è¦ä¿®æ”¹ä¸‹ <code>copyAll</code> æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> &lt;T&gt; <span class="keyword">void</span> <span class="title function_">copyAll</span><span class="params">(List&lt;T&gt; to, List&lt;? extends T&gt; from)</span> &#123;</span><br><span class="line">    to.addAll(from);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>? extends T</code> è¡¨ç¤º <code>from</code> æ¥å— T æˆ–è€… T çš„å­ç±»å‹ï¼Œè€Œä¸å•å•æ˜¯ T è‡ªèº«ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å®‰å…¨åœ°ä» <code>from</code> ä¸­å–å€¼å¹¶å£°æ˜ä¸º T ç±»å‹ï¼Œä½†ç”±äºæˆ‘ä»¬å¹¶ä¸çŸ¥é“ T ä»£è¡¨çš„å…·ä½“ç±»å‹ï¼Œå†™å…¥æ“ä½œå¹¶ä¸å®‰å…¨ï¼Œå› æ­¤ç¼–è¯‘å™¨ä¼šé˜»æ­¢æˆ‘ä»¬å‘ <code>from</code> æ‰§è¡Œä¼ å€¼æ“ä½œã€‚æœ‰äº†è¯¥é™åˆ¶åï¼Œä»<code>integerList</code>ä¸­å–å‡ºæ¥çš„å€¼åªèƒ½æ˜¯å½“åš Number ç±»å‹ï¼Œä¸”é¿å…äº†å‘<code>integerList</code>æ’å…¥éæ³•å€¼çš„å¯èƒ½ï¼Œæ­¤æ—¶<code>List&lt;Integer&gt;</code>å°±ç›¸å½“äº<code>List&lt;? extends Number&gt;</code>çš„å­ç±»å‹äº†ï¼Œä»è€Œä½¿å¾— <code>copyAll</code> æ–¹æ³•å¯ä»¥æ­£å¸¸ä½¿ç”¨</p>
<p>ç®€è€Œè¨€ä¹‹ï¼Œå¸¦ <strong>extends</strong> é™å®šäº†ä¸Šç•Œçš„é€šé…ç¬¦ç±»å‹ä½¿å¾—<strong>æ³›å‹å‚æ•°ç±»å‹æ˜¯åå˜çš„</strong>ï¼Œå³å¦‚æœ A æ˜¯ B çš„å­ç±»ï¼Œé‚£ä¹ˆ <code>Generic&lt;A&gt;</code> å°±æ˜¯<code>Generic&lt;? extends B&gt;</code>çš„å­ç±»å‹</p>
<h1 id="åã€æ³›å‹é€†å˜"><a href="#åã€æ³›å‹é€†å˜" class="headerlink" title="åã€æ³›å‹é€†å˜"></a>åã€æ³›å‹é€†å˜</h1><p><strong>åå˜</strong>æ‰€èƒ½åšåˆ°çš„æ˜¯ï¼šå¦‚æœ A æ˜¯ B çš„å­ç±»ï¼Œé‚£ä¹ˆ <code>Generic&lt;A&gt;</code> å°±æ˜¯<code>Generic&lt;? extends B&gt;</code>çš„å­ç±»å‹ã€‚<strong>é€†å˜</strong>ç›¸åï¼Œå…¶ä»£è¡¨çš„æ˜¯ï¼šå¦‚æœ A æ˜¯ B çš„å­ç±»ï¼Œé‚£ä¹ˆ <code>Generic&lt;B&gt;</code> å°±æ˜¯ <code>Generic&lt;? super A&gt;</code> çš„å­ç±»å‹</p>
<p>åå˜è¿˜æ¯”è¾ƒå¥½ç†è§£ï¼Œæ¯•ç«Ÿå…¶ç»§æ‰¿å…³ç³»æ˜¯ç›¸åŒçš„ï¼Œä½†é€†å˜å°±æ¯”è¾ƒåç›´è§‰äº†ï¼Œæ•´ä¸ªç»§æ‰¿å…³ç³»éƒ½å€’è¿‡æ¥äº†</p>
<p>é€†å˜çš„ä½œç”¨å¯ä»¥é€šè¿‡ç›¸åŒçš„ä¾‹å­æ¥ç†è§£ï¼Œ<code>copyAll</code> æ–¹æ³•å¦‚ä¸‹ä¿®æ”¹ä¹Ÿå¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œæ­¤æ—¶å°±æ˜¯å‘ç¼–è¯‘å™¨åšå‡ºäº†å¦ä¸€ç§å®‰å…¨ä¿è¯ï¼š<strong>å‘ numberList ä¼ é€’çš„å€¼åªä¼šæ˜¯ Integer ç±»å‹ï¼Œä¸”ä» numberList å–å‡ºçš„å€¼ä¹Ÿåªä¼šå½“åš Object ç±»å‹</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> &lt;T&gt; <span class="keyword">void</span> <span class="title function_">copyAll</span><span class="params">(List&lt;? <span class="built_in">super</span> T&gt; to, List&lt;T&gt; from)</span> &#123;</span><br><span class="line">    to.addAll(from);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>? super T</code>è¡¨ç¤º <code>to</code> æ¥æ”¶ T æˆ–è€… T çš„çˆ¶ç±»å‹ï¼Œè€Œä¸å•å•æ˜¯ T è‡ªèº«ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å®‰å…¨åœ°å‘ <code>to</code> ä¼ ç±»å‹ä¸º T çš„å€¼ï¼Œä½†ç”±äºæˆ‘ä»¬å¹¶ä¸çŸ¥é“ T ä»£è¡¨çš„å…·ä½“ç±»å‹ï¼Œæ‰€ä»¥ä» <code>to</code> å–å‡ºæ¥çš„å€¼åªèƒ½æ˜¯ Object ç±»å‹ã€‚æœ‰äº†è¯¥é™åˆ¶åï¼Œ<code>integerList</code>åªèƒ½å‘ <code>numberList</code>ä¼ é€’ç±»å‹ä¸º Integer çš„å€¼ï¼Œä¸”é¿å…äº†ä» <code>numberList</code> ä¸­è·å–åˆ°éæ³•ç±»å‹å€¼çš„å¯èƒ½ï¼Œæ­¤æ—¶<code>List&lt;Number&gt;</code>å°±ç›¸å½“äº<code>List&lt;? super Integer&gt;</code>çš„å­ç±»å‹äº†ï¼Œä»è€Œä½¿å¾— <code>copyAll</code> æ–¹æ³•å¯ä»¥æ­£å¸¸ä½¿ç”¨</p>
<p>ç®€è€Œè¨€ä¹‹ï¼Œå¸¦ <strong>super</strong> é™å®šäº†ä¸‹ç•Œçš„é€šé…ç¬¦ç±»å‹ä½¿å¾—<strong>æ³›å‹å‚æ•°ç±»å‹æ˜¯é€†å˜çš„</strong>ï¼Œå³å¦‚æœ A æ˜¯ B çš„å­ç±»ï¼Œé‚£ä¹ˆ <code>Generic&lt;B&gt;</code> å°±æ˜¯ <code>Generic&lt;? super A&gt;</code> çš„å­ç±»å‹</p>
<h1 id="åä¸€ã€out-in"><a href="#åä¸€ã€out-in" class="headerlink" title="åä¸€ã€out  &amp;  in"></a>åä¸€ã€out  &amp;  in</h1><p>Java ä¸­å…³äºæ³›å‹çš„å›°å¢ƒåœ¨ Kotlin ä¸­ä¸€æ ·å­˜åœ¨ï¼Œout å’Œ in éƒ½æ˜¯ Kotlin çš„å…³é”®å­—ï¼Œå…¶ä½œç”¨éƒ½æ˜¯ä¸ºäº†æ¥åº”å¯¹æ³›å‹é—®é¢˜ã€‚<code>in</code> å’Œ <code>out</code> æ˜¯ä¸€ä¸ªå¯¹ç«‹é¢ï¼ŒåŒæ—¶å®ƒä»¬åˆä¸æ³›å‹<strong>ä¸å˜</strong>ç›¸å¯¹ç«‹ï¼Œç»Ÿç§°ä¸º<strong>å‹å˜</strong></p>
<ul>
<li>out æœ¬èº«å¸¦æœ‰<strong>å‡ºå»</strong>çš„æ„æ€ï¼Œæœ¬èº«å¸¦æœ‰å€¾å‘äº<strong>å–å€¼æ“ä½œ</strong>çš„æ„æ€ï¼Œç”¨äº<strong>æ³›å‹åå˜</strong></li>
<li>in æœ¬èº«å¸¦æœ‰<strong>è¿›æ¥</strong>çš„æ„æ€ï¼Œæœ¬èº«å¸¦æœ‰å€¾å‘äº<strong>ä¼ å€¼æ“ä½œ</strong>çš„æ„æ€ï¼Œç”¨äº<strong>æ³›å‹é€†å˜</strong></li>
</ul>
<p>å†æ¥çœ‹ä¸‹ç›¸åŒä¾‹å­ï¼Œè¯¥ä¾‹å­åœ¨ Java ä¸­å­˜åœ¨çš„é—®é¢˜åœ¨ Kotlin ä¸­ä¸€æ ·æœ‰</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> numberList = mutableListOf&lt;Number&gt;()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> intList = mutableListOf(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">    copyAll(numberList, intList) <span class="comment">//æŠ¥é”™</span></span><br><span class="line"></span><br><span class="line">    numberList.forEach &#123;</span><br><span class="line">        println(it)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="type">&lt;T&gt;</span> <span class="title">copyAll</span><span class="params">(to: <span class="type">MutableList</span>&lt;<span class="type">T</span>&gt;, from: <span class="type">MutableList</span>&lt;<span class="type">T</span>&gt;)</span></span> &#123;</span><br><span class="line">    to.addAll(from)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æŠ¥é”™åŸå› å’Œ Java å®Œå…¨ä¸€æ ·ï¼Œå› ä¸ºæ­¤æ—¶ç¼–è¯‘å™¨æ— æ³•åˆ¤æ–­å‡ºæˆ‘ä»¬åˆ°åº•æ˜¯å¦ä¼šåšå‡ºä¸å®‰å…¨çš„æ“ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬ä¾ç„¶è¦æ¥å‘ç¼–è¯‘å™¨åšå‡ºå®‰å…¨ä¿è¯</p>
<p>æ­¤æ—¶å°±éœ€è¦åœ¨ Kotlin ä¸­æ¥å®ç°<strong>æ³›å‹åå˜</strong>å’Œ<strong>æ³›å‹é€†å˜</strong>äº†ï¼Œä»¥ä¸‹ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥å®ç°ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="type">&lt;T&gt;</span> <span class="title">copyAll</span><span class="params">(to: <span class="type">MutableList</span>&lt;<span class="type">T</span>&gt;, from: <span class="type">MutableList</span>&lt;<span class="type">out</span> <span class="type">T</span>&gt;)</span></span> &#123;</span><br><span class="line">    to.addAll(from)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="type">&lt;T&gt;</span> <span class="title">copyAll</span><span class="params">(to: <span class="type">MutableList</span>&lt;<span class="type">in</span> <span class="type">T</span>&gt;, from: <span class="type">MutableList</span>&lt;<span class="type">T</span>&gt;)</span></span> &#123;</span><br><span class="line">    to.addAll(from)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>out</code> å…³é”®å­—å°±ç›¸å½“äº Java ä¸­çš„<code>&lt;?  extends T&gt;</code>ï¼Œå…¶ä½œç”¨å°±æ˜¯é™åˆ¶äº† <code>from</code> ä¸èƒ½ç”¨äºæ¥æ”¶å€¼è€Œåªèƒ½å‘å…¶å–å€¼ï¼Œè¿™æ ·å°±é¿å…äº†ä» <code>to</code> å–å‡ºå€¼ç„¶åå‘ <code>from</code> èµ‹å€¼è¿™ç§ä¸å®‰å…¨çš„è¡Œä¸ºäº†ï¼Œå³å®ç°äº†æ³›å‹åå˜</p>
<p><code>in</code> å…³é”®å­—å°±ç›¸å½“äº Java ä¸­çš„<code>&lt;? super T&gt;</code>ï¼Œå…¶ä½œç”¨å°±æ˜¯é™åˆ¶äº† <code>to</code> åªèƒ½ç”¨äºæ¥æ”¶å€¼è€Œä¸èƒ½å‘å…¶å–å€¼ï¼Œè¿™æ ·å°±é¿å…äº†ä» <code>to</code> å–å‡ºå€¼ç„¶åå‘ <code>from</code> èµ‹å€¼è¿™ç§ä¸å®‰å…¨çš„è¡Œä¸ºäº†ï¼Œå³å®ç°äº†æ³›å‹é€†å˜</p>
<blockquote>
<p>ä»è¿™ä¹Ÿå¯ä»¥è”æƒ³åˆ°ï¼Œ<code>MutableList&lt;*&gt;</code> å°±ç›¸å½“äº <code>MutableList&lt;out Any?&gt;</code>äº†ï¼Œä¸¤è€…éƒ½å¸¦æœ‰ç›¸åŒçš„é™åˆ¶æ¡ä»¶ï¼šä¸å…è®¸å†™å€¼æ“ä½œï¼Œå…è®¸è¯»å€¼æ“ä½œï¼Œä¸”è¯»å–å‡ºæ¥çš„å€¼åªèƒ½å½“åš <code>Any?</code>è¿›è¡Œå¤„ç†</p>
</blockquote>
<h1 id="åäºŒã€æ”¯æŒåå˜çš„-List"><a href="#åäºŒã€æ”¯æŒåå˜çš„-List" class="headerlink" title="åäºŒã€æ”¯æŒåå˜çš„ List"></a>åäºŒã€æ”¯æŒåå˜çš„ List</h1><p>åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œæƒ³è¦å®ç°åå˜è¿˜æœ‰å¦å¤–ä¸€ç§æ–¹å¼ï¼Œé‚£å°±æ˜¯ä½¿ç”¨ List</p>
<p>å°† from çš„ç±»å‹å£°æ˜ä» <code>MutableList&lt;T&gt;</code>ä¿®æ”¹ä¸º <code>List&lt;T&gt;</code> åï¼Œå¯ä»¥å‘ç° <code>copyAll</code> æ–¹æ³•ä¹Ÿå¯ä»¥æ­£å¸¸è°ƒç”¨äº†</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="type">&lt;T&gt;</span> <span class="title">copyAll</span><span class="params">(to: <span class="type">MutableList</span>&lt;<span class="type">T</span>&gt;, from: <span class="type">List</span>&lt;<span class="type">T</span>&gt;)</span></span> &#123;</span><br><span class="line">    to.addAll(from)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯¹ Kotlin æœ‰ä¸€å®šäº†è§£çš„åŒå­¦åº”è¯¥çŸ¥é“ï¼ŒKotlin ä¸­çš„é›†åˆæ¡†æ¶åˆ†ä¸ºä¸¤ç§å¤§ç±»ï¼š<strong>å¯è¯»å¯å†™</strong>å’Œ<strong>åªèƒ½è¯»ä¸èƒ½å†™</strong></p>
<p>ä»¥ Java ä¸­çš„ ArrayList ä¸ºä¾‹ï¼ŒKotlin å°†ä¹‹åˆ†ä¸ºäº† MutableList å’Œ List ä¸¤ç§ç±»å‹çš„æ¥å£ã€‚è€Œ List æ¥å£ä¸­çš„æ³›å‹å·²ç»ä½¿ç”¨ out å…³é”®å­—è¿›è¡Œä¿®é¥°äº†ï¼Œä¸”ä¸åŒ…å«ä»»ä½•<strong>ä¼ å…¥å€¼å¹¶ä¿å­˜</strong>çš„æ–¹æ³•ï¼Œå³ List æ¥å£<strong>åªæ”¯æŒè¯»å€¼è€Œä¸æ”¯æŒå†™å€¼</strong>ï¼Œå…¶æœ¬èº«å°±å·²ç»æ»¡è¶³äº†åå˜æ‰€éœ€è¦çš„æ¡ä»¶ï¼Œå› æ­¤<code>copyAll</code> æ–¹æ³•å¯ä»¥æ­£å¸¸ä½¿ç”¨</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">List</span>&lt;<span class="type">out E</span>&gt; : <span class="type">Collection</span>&lt;<span class="type">E</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">val</span> size: <span class="built_in">Int</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">isEmpty</span><span class="params">()</span></span>: <span class="built_in">Boolean</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">contains</span><span class="params">(element: @<span class="type">UnsafeVariance</span> <span class="type">E</span>)</span></span>: <span class="built_in">Boolean</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">iterator</span><span class="params">()</span></span>: Iterator&lt;E&gt;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">containsAll</span><span class="params">(elements: <span class="type">Collection</span>&lt;@<span class="type">UnsafeVariance</span> <span class="type">E</span>&gt;)</span></span>: <span class="built_in">Boolean</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">operator</span> <span class="function"><span class="keyword">fun</span> <span class="title">get</span><span class="params">(index: <span class="type">Int</span>)</span></span>: E</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">fun</span> <span class="title">indexOf</span><span class="params">(element: @<span class="type">UnsafeVariance</span> <span class="type">E</span>)</span></span>: <span class="built_in">Int</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">fun</span> <span class="title">lastIndexOf</span><span class="params">(element: @<span class="type">UnsafeVariance</span> <span class="type">E</span>)</span></span>: <span class="built_in">Int</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">fun</span> <span class="title">listIterator</span><span class="params">()</span></span>: ListIterator&lt;E&gt;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">fun</span> <span class="title">listIterator</span><span class="params">(index: <span class="type">Int</span>)</span></span>: ListIterator&lt;E&gt;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">fun</span> <span class="title">subList</span><span class="params">(fromIndex: <span class="type">Int</span>, toIndex: <span class="type">Int</span>)</span></span>: List&lt;E&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è™½ç„¶ List æ¥å£ä¸­æœ‰å‡ ä¸ªæ–¹æ³•ä¹Ÿæ¥æ”¶äº† E ç±»å‹çš„å…¥å‚å‚æ•°ï¼Œä½†è¯¥æ–¹æ³•æœ¬èº«ä¸ä¼šè¿›è¡Œå†™å€¼æ“ä½œï¼Œæ‰€ä»¥å®é™…ä¸Šå¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼ŒKotlin ä¹Ÿä½¿ç”¨ <code>@UnsafeVariance</code>æŠ‘åˆ¶äº†ç¼–è¯‘å™¨è­¦å‘Š</p>
</blockquote>
<h1 id="åä¸‰ã€reified-inline"><a href="#åä¸‰ã€reified-inline" class="headerlink" title="åä¸‰ã€reified  &amp;  inline"></a>åä¸‰ã€reified  &amp;  inline</h1><p>ä¸Šæ–‡è®²äº†ï¼Œç”±äºç±»å‹æ“¦é™¤ï¼ŒJava å’Œ Kotlin çš„æ³›å‹ç±»å‹å®å‚éƒ½ä¼šåœ¨ç¼–è¯‘é˜¶æ®µè¢«æ“¦é™¤ï¼Œåœ¨ Kotlin ä¸­å­˜åœ¨ä¸€ä¸ªé¢å¤–æ‰‹æ®µå¯ä»¥æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå³<strong>å†…è”å‡½æ•°</strong></p>
<p>ç”¨å…³é”®å­— inline æ ‡è®°çš„å‡½æ•°å°±ç§°ä¸ºå†…è”å‡½æ•°ï¼Œå†ç”¨ reified å…³é”®å­—ä¿®é¥°å†…è”å‡½æ•°ä¸­çš„æ³›å‹å½¢å‚ï¼Œç¼–è¯‘å™¨åœ¨è¿›è¡Œç¼–è¯‘çš„æ—¶å€™ä¾¿ä¼šå°†å†…è”å‡½æ•°çš„å­—èŠ‚ç æ’å…¥åˆ°æ¯ä¸€ä¸ªè°ƒç”¨çš„åœ°æ–¹ï¼Œå½“ä¸­å°±åŒ…æ‹¬æ³›å‹çš„ç±»å‹å®å‚ã€‚è€Œå†…è”å‡½æ•°çš„ç±»å‹å½¢å‚èƒ½å¤Ÿè¢«å®åŒ–ï¼Œå°±æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨è¿è¡Œæ—¶å¼•ç”¨å®é™…çš„ç±»å‹å®å‚äº†</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡ºä»¥ä¸‹è¿™æ ·çš„ä¸€ä¸ªå†…è”å‡½æ•°ï¼Œç”¨äºåˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯æŒ‡å®šç±»å‹</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    println(<span class="number">1.</span>isInstanceOf&lt;String&gt;())</span><br><span class="line">    println(<span class="string">&quot;string&quot;</span>.isInstanceOf&lt;<span class="built_in">Int</span>&gt;())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">inline</span> <span class="function"><span class="keyword">fun</span> <span class="type">&lt;<span class="keyword">reified</span> T&gt;</span> Any.<span class="title">isInstanceOf</span><span class="params">()</span></span>: <span class="built_in">Boolean</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span> <span class="keyword">is</span> T</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å°†ä»¥ä¸Šçš„ Kotlin ä»£ç åç¼–è¯‘ä¸º Java ä»£ç ï¼Œå¯ä»¥çœ‹å‡ºæ¥ <code>main()</code>æ–¹æ³•æœ€ç»ˆæ˜¯æ²¡æœ‰è°ƒç”¨ <code>isInstanceOf</code> æ–¹æ³•çš„ï¼Œå…·ä½“çš„åˆ¤æ–­é€»è¾‘éƒ½è¢«æ’å…¥åˆ°äº†<code>main()</code>æ–¹æ³•å†…éƒ¨ï¼Œæœ€ç»ˆæ˜¯æ‰§è¡Œäº† <code>instanceof</code> æ“ä½œï¼Œä¸”æŒ‡å®šäº†å…·ä½“çš„æ³›å‹ç±»å‹å‚æ•° String å’Œ Integer</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">GenericTest6Kt</span> &#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="type">Object</span> <span class="variable">$this$isInstanceOf$iv</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">      <span class="type">int</span> <span class="variable">$i$f$isInstanceOf</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">      <span class="type">boolean</span> <span class="variable">var2</span> <span class="operator">=</span> $<span class="built_in">this</span>$isInstanceOf$iv <span class="keyword">instanceof</span> String;</span><br><span class="line">      $i$f$isInstanceOf = <span class="literal">false</span>;</span><br><span class="line">      System.out.println(var2);</span><br><span class="line">      <span class="type">Object</span> <span class="variable">$this$isInstanceOf$iv</span> <span class="operator">=</span> <span class="string">&quot;string&quot;</span>;</span><br><span class="line">      $i$f$isInstanceOf = <span class="literal">false</span>;</span><br><span class="line">      var2 = $<span class="built_in">this</span>$isInstanceOf$iv <span class="keyword">instanceof</span> Integer;</span><br><span class="line">      $i$f$isInstanceOf = <span class="literal">false</span>;</span><br><span class="line">      System.out.println(var2);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// $FF: synthetic method</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] var0)</span> &#123;</span><br><span class="line">      main();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// $FF: synthetic method</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="title function_">isInstanceOf</span><span class="params">(Object $<span class="built_in">this</span>$isInstanceOf)</span> &#123;</span><br><span class="line">      <span class="type">int</span> <span class="variable">$i$f$isInstanceOf</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">      Intrinsics.checkNotNullParameter($<span class="built_in">this</span>$isInstanceOf, <span class="string">&quot;$this$isInstanceOf&quot;</span>);</span><br><span class="line">      Intrinsics.reifiedOperationMarker(<span class="number">3</span>, <span class="string">&quot;T&quot;</span>);</span><br><span class="line">      <span class="keyword">return</span> $<span class="built_in">this</span>$isInstanceOf <span class="keyword">instanceof</span> Object;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>inline å’Œ reified æ¯”è¾ƒæœ‰ç”¨çš„ä¸€ä¸ªåœºæ™¯æ˜¯ç”¨åœ¨ Gson ååºåˆ—çš„æ—¶å€™ã€‚ç”±äºæ³›å‹è¿è¡Œæ—¶<strong>ç±»å‹æ“¦é™¤</strong>çš„é—®é¢˜ï¼Œç›®å‰ç”¨ Gson ååºåˆ—åŒ–æ³›å‹ç±»æ—¶æ­¥éª¤æ˜¯æ¯”è¾ƒç¹ççš„ï¼Œåˆ©ç”¨ inline å’Œ reified æˆ‘ä»¬å°±å¯ä»¥ç®€åŒ–å¾ˆå¤šæ“ä½œ</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> gson = Gson()</span><br><span class="line"></span><br><span class="line"><span class="keyword">inline</span> <span class="function"><span class="keyword">fun</span> <span class="type">&lt;<span class="keyword">reified</span> T&gt;</span> <span class="title">toBean</span><span class="params">(json: <span class="type">String</span>)</span></span>: T &#123;</span><br><span class="line">    <span class="keyword">return</span> gson.fromJson(json, T::<span class="keyword">class</span>.java)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">data</span> <span class="keyword">class</span> <span class="title class_">BlogBean</span>(<span class="keyword">val</span> name: String, <span class="keyword">val</span> url: String)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> json = <span class="string">&quot;&quot;&quot;&#123;&quot;name&quot;:&quot;ä¸šå¿—é™ˆ&quot;,&quot;url&quot;:&quot;https://juejin.cn/user/923245496518439&quot;&#125;&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">val</span> listJson = <span class="string">&quot;&quot;&quot;[&#123;&quot;name&quot;:&quot;ä¸šå¿—é™ˆ&quot;,&quot;url&quot;:&quot;https://juejin.cn/user/923245496518439&quot;&#125;,&#123;&quot;name&quot;:&quot;ä¸šå¿—é™ˆ&quot;,&quot;url&quot;:&quot;https://juejin.cn/user/923245496518439&quot;&#125;]&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> blogBean = toBean&lt;BlogBean&gt;(json)</span><br><span class="line">    <span class="keyword">val</span> blogMap = toBean&lt;Map&lt;String, String&gt;&gt;(json)</span><br><span class="line">    <span class="keyword">val</span> blogBeanList = toBean&lt;List&lt;BlogBean&gt;&gt;(listJson)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//BlogBean(name=ä¸šå¿—é™ˆ, url=https://juejin.cn/user/923245496518439)</span></span><br><span class="line">    println(blogBean)</span><br><span class="line">    <span class="comment">//&#123;name=ä¸šå¿—é™ˆ, url=https://juejin.cn/user/923245496518439&#125;</span></span><br><span class="line">    println(blogMap)</span><br><span class="line">    <span class="comment">//[&#123;name=ä¸šå¿—é™ˆ, url=https://juejin.cn/user/923245496518439&#125;, &#123;name=ä¸šå¿—é™ˆ, url=https://juejin.cn/user/923245496518439&#125;]</span></span><br><span class="line">    println(blogBeanList)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä¹Ÿåˆ©ç”¨ Kotlin çš„è¿™ä¸ªå¼ºå¤§ç‰¹æ€§å†™äº†ä¸€ä¸ªç”¨äºç®€åŒ– Java &#x2F; Kotlin å¹³å°çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ“ä½œçš„åº“ï¼š<a target="_blank" rel="noopener" href="https://github.com/leavesCZY/JsonHolder">JsonHolder</a></p>
<h1 id="åå››ã€æ€»ç»“"><a href="#åå››ã€æ€»ç»“" class="headerlink" title="åå››ã€æ€»ç»“"></a>åå››ã€æ€»ç»“</h1><p>æœ€åæ¥åšä¸ªç®€å•çš„æ€»ç»“</p>
<table>
<thead>
<tr>
<th></th>
<th>åå˜</th>
<th>é€†å˜</th>
<th>ä¸å˜</th>
</tr>
</thead>
<tbody><tr>
<td>Kotlin</td>
<td><code>&lt;out T&gt;</code>ï¼Œåªèƒ½ä½œä¸ºæ¶ˆè´¹è€…ï¼Œåªèƒ½è¯»å–ä¸èƒ½æ·»åŠ </td>
<td><code>&lt;in T&gt;</code>ï¼Œåªèƒ½ä½œä¸ºç”Ÿäº§è€…ï¼Œåªèƒ½æ·»åŠ ï¼Œè¯»å–å‡ºçš„å€¼åªèƒ½å½“åš Any ç±»å‹</td>
<td><code>&lt;T&gt;</code>ï¼Œæ—¢å¯ä»¥æ·»åŠ ä¹Ÿå¯ä»¥è¯»å–</td>
</tr>
<tr>
<td>Java</td>
<td><code>&lt;?  extends T&gt;</code>ï¼Œåªèƒ½ä½œä¸ºæ¶ˆè´¹è€…ï¼Œåªèƒ½è¯»å–ä¸èƒ½æ·»åŠ </td>
<td><code>&lt;? super T&gt;</code>ï¼Œåªèƒ½ä½œä¸ºç”Ÿäº§è€…ï¼Œåªèƒ½æ·»åŠ ï¼Œè¯»å–å‡ºçš„å€¼åªèƒ½å½“åš Object ç±»å‹</td>
<td><code>&lt;T&gt;</code>ï¼Œæ—¢å¯ä»¥æ·»åŠ ä¹Ÿå¯ä»¥è¯»å–</td>
</tr>
</tbody></table>

  </article>
  <!-- tag -->
  <div class="mt-12 pt-6 border-t border-gray-200">
    
  </div>
  <!-- prev and next -->
  <div class="flex justify-between mt-12 pt-6 border-t border-gray-200">
    <div>
      
        <a href="/hexo-blog/public/2025/03/02/md/kotlin/%E4%B8%80%E6%96%87%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%20ConstraintLayout/" class="text-sm text-gray-400 hover:text-gray-500 flex justify-center">
          <iconify-icon width="20" icon="ri:arrow-left-s-line" data-inline="false"></iconify-icon>
          ä¸€æ–‡å¿«é€Ÿå…¥é—¨ ConstraintLayout
        </a>
      
    </div>
    <div>
      
        <a href="/hexo-blog/public/2025/03/02/md/kotlin/Kotlin%20%E5%8D%8F%E7%A8%8B%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%EF%BC%881%EF%BC%89%E5%8D%8F%E7%A8%8B%E5%9F%BA%E7%A1%80/" class="text-sm text-gray-400 hover:text-gray-500 flex justify-center">
          Kotlin åç¨‹å®˜æ–¹æ–‡æ¡£ï¼ˆ1ï¼‰åç¨‹åŸºç¡€
          <iconify-icon width="20" icon="ri:arrow-right-s-line" data-inline="false"></iconify-icon>
        </a>
      
    </div>
  </div>
  <!-- comment -->
  <div class="article-comments mt-12">
    
<script
  src="https://giscus.app/client.js"
  data-repo="hqqich/giscus"
  data-repo-id="R_kgDOOCZUBA"
  data-category="General"
  data-category-id="DIC_kwDOOCZUBM4Cng1l"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="bottom"
  data-theme="preferred_color_scheme"
  data-lang="zh-CN"
  crossorigin="anonymous"
  async
></script>
<script>
  window.onload = function () {
    console.log("giscus loaded");
    const isDark = document.documentElement.classList.contains("dark");
    const giscusFrame = document.querySelector("iframe.giscus-frame");
    giscusFrame.contentWindow.postMessage(
      {
        giscus: {
          setConfig: {
            theme: isDark ? "dark" : "light",
          },
        },
      },
      "https://giscus.app"
    );
  };
</script>


  </div>
</section>
<!-- js inspect -->

<script src="/hexo-blog/public/lib/clipboard.min.js"></script>


<script async src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "HTML-CSS": {
        preferredFont: "TeX",
        availableFonts: ["STIX","TeX"],
        linebreaks: { automatic:true },
        EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
        inlineMath: [ ["$", "$"], ["\\(","\\)"] ],
        processEscapes: true,
        ignoreClass: "tex2jax_ignore|dno",
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
        equationNumbers: { autoNumber: "AMS" },
        noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
        Macros: { href: "{}" }
    },
    messageStyle: "none"
  });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>



<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>
  $(document).ready(() => {
    const maraidConfig = {
      theme: "default",
      logLevel: 3,
      flowchart: { curve: "linear" },
      gantt: { axisFormat: "%m/%d/%Y" },
      sequence: { actorMargin: 50 },
    };
    mermaid.initialize(maraidConfig);
  });
</script>



<script src="/hexo-blog/public/lib/fancybox/fancybox.umd.min.js"></script>

<script>
  $(document).ready(() => {
    $('.post-content').each(function(i){
      $(this).find('img').each(function(){
        if ($(this).parent().hasClass('fancybox') || $(this).parent().is('a')) return;
        var alt = this.alt;
        if (alt) $(this).after('<span class="fancybox-alt">' + alt + '</span>');
        $(this).wrap('<a class="fancybox-img" href="' + this.src + '" data-fancybox=\"gallery\" data-caption="' + alt + '"></a>')
      });
      $(this).find('.fancybox').each(function(){
        $(this).attr('rel', 'article' + i);
      });
    });

    Fancybox.bind('[data-fancybox="gallery"]', {
        // options
    })
  })
</script>

<!-- tocbot begin -->

<script src="/hexo-blog/public/lib/tocbot/tocbot.min.js"></script>

<script>
  $(document).ready(() => {
      tocbot.init({
        // Where to render the table of contents.
        tocSelector: '.post-toc',
        // Where to grab the headings to build the table of contents.
        contentSelector: '.post-content',
        // Which headings to grab inside of the contentSelector element.
        headingSelector: 'h1, h2, h3',
        // For headings inside relative or absolute positioned containers within content.
        hasInnerContainers: true,
    });
  })
</script>
<!-- tocbot end -->


  </main>
  <footer class="flex flex-col h-40 items-center justify-center text-gray-400 text-sm">
  <!-- busuanzi -->
  
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!-- Busuanzi Analytics -->
<div class="flex items-center gap-2">
  <span>Visitors</span>
  <span id="busuanzi_value_site_uv"></span>
  <span>Page Views</span>
  <span id="busuanzi_value_site_pv"></span>
</div>
<!-- End Busuanzi Analytics -->


  <!-- copyright -->
  <div class="flex items-center gap-2">
    <a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" style="color: inherit;">CC BY-NC-SA 4.0</a>
    <span>Â© 2022</span>
    <iconify-icon width="18" icon="emojione-monotone:maple-leaf" ></iconify-icon>
    <a href="https://github.com/xbmlz" target="_blank" rel="noopener noreferrer">xbmlz</a>
  </div>
  <!-- powered by -->
  <div class="flex items-center gap-2">
    <span>Powered by</span>
    <a href="https://hexo.io/" target="_blank" rel="noopener noreferrer">Hexo</a>
    <span>&</span>
    <a href="https://github.com/xbmlz/hexo-theme-maple" target="_blank" rel="noopener noreferrer">Maple</a>
  </div>

</footer>

  <div class="back-to-top box-border fixed right-6 z-1024 -bottom-20 rounded py-1 px-1 bg-slate-900 opacity-60 text-white cursor-pointer text-center dark:bg-slate-600">
    <span class="flex justify-center items-center text-sm">
      <iconify-icon width="18" icon="ion:arrow-up-c" id="go-top"></iconify-icon>
      <span id="scrollpercent"><span>0</span> %</span>
    </span>
  </div>
  
<script src="/hexo-blog/public/js/main.js"></script>


  <script>
    $(document).ready(function () {
      const mapleCount = "10";
      const speed = "0.5";
      const mapleEl = document.getElementById("maple");
      const maples = Array.from({ length: mapleCount }).map(() => {
        const maple = document.createElement("div");
        const scale = Math.random() * 0.5 + 0.5;
        const offset = Math.random() * 2 - 1;
        const x = Math.random() * mapleEl.clientWidth;
        const y = -Math.random() * mapleEl.clientHeight;
        const duration = 10 / speed;
        const delay = -duration;
        maple.className = "maple";
        maple.style.width = `${24 * scale}px`;
        maple.style.height = `${24 * scale}px`;
        maple.style.left = `${x}px`;
        maple.style.top = `${y}px`;
        maple.style.setProperty("--maple-fall-offset", offset);
        maple.style.setProperty("--maple-fall-height", `${Math.abs(y) + mapleEl.clientHeight}px`);
        maple.style.animation = `fall ${duration}s linear infinite`;
        maple.style.animationDelay = `${delay}s`;
        mapleEl.appendChild(maple)
        return maple
      })
    });
  </script>
  


  <div class="fixed top-0 bottom-0 left-0 right-0 pointer-events-none print:hidden" id="maple"></div>
</body>

</html>
