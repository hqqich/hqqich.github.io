<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EHXM4GYP5W"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-EHXM4GYP5W');
</script>
<!-- End Google Analytics -->



<!-- Baidu Analytics -->
<script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?0a6515fb9c839d6a56d4cfd8b7d243d4";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>
<!-- End Baidu Analytics -->


<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

  <meta name="author" content="hqqich">


  <meta name="subtitle" content="å¿™ç¢ŒæŠŠæ—¶å…‰ç¼©çŸ­, è‹¦éš¾æŠŠå²æœˆæ‹‰é•¿">




<title>æ¢ç©¶ Kotlin çš„éšè—æ€§èƒ½å¼€é”€ä¸é¿å‘æŒ‡å— | Hexo-blog</title>



<link rel="icon" href="/hexo-blog/public/favicon.ico">



<link rel="stylesheet" href="/hexo-blog/public/css/main.css">


<link rel="stylesheet" href="/hexo-blog/public/lib/nprogress/nprogress.css">



<script src="/hexo-blog/public/lib/jquery.min.js"></script>


<script src="/hexo-blog/public/lib/iconify-icon.min.js"></script>


<script src="https://cdn.tailwindcss.com?plugins=typography"></script>
<script>
  tailwind.config = {
    darkMode: "class",
  };
</script>


<script src="/hexo-blog/public/lib/nprogress/nprogress.js"></script>

<script>
  $(document).ready(() => {
    NProgress.configure({
      showSpinner: false,
    });
    NProgress.start();
    $("#nprogress .bar").css({
      background: "#de7441",
    });
    $("#nprogress .peg").css({
      "box-shadow": "0 0 2px #de7441, 0 0 4px #de7441",
    });
    $("#nprogress .spinner-icon").css({
      "border-top-color": "#de7441",
      "border-left-color": "#de7441",
    });
    setTimeout(function () {
      NProgress.done();
      $(".fade").removeClass("out");
    }, 800);
  });
</script>

<script>
  (function () {
    const prefersDark =
      window.matchMedia &&
      window.matchMedia("(prefers-color-scheme: dark)").matches;
    const setting = localStorage.getItem("hexo-color-scheme") || "auto";
    if (setting === "dark" || (prefersDark && setting !== "light"))
      document.documentElement.classList.toggle("dark", true);
    let isDark = document.documentElement.classList.contains("dark");
  })();

  $(document).ready(function () {
    // init icon
    const prefersDark =
      window.matchMedia &&
      window.matchMedia("(prefers-color-scheme: dark)").matches;
    const isDark = document.documentElement.classList.contains("dark");
    $("#theme-icon").attr("icon", isDark ? "ri:moon-line" : "ri:sun-line");

    function toggleGiscusTheme() {
      const isDark = document.documentElement.classList.contains("dark");
      const giscusFrame = document.querySelector("iframe.giscus-frame");
      if (giscusFrame) {
        giscusFrame.contentWindow.postMessage(
          {
            giscus: {
              setConfig: {
                theme: isDark ? "dark" : "light",
              },
            },
          },
          "https://giscus.app"
        );
      }
    }

    // toggle dark mode
    function toggleDark() {
      let isDark = document.documentElement.classList.contains("dark");
      const setting = localStorage.getItem("hexo-color-scheme") || "auto";
      isDark = !isDark;
      document.documentElement.classList.toggle("dark", isDark);
      $("#theme-icon").attr("icon", isDark ? "ri:moon-line" : "ri:sun-line");
      if (prefersDark === isDark) {
        localStorage.setItem("hexo-color-scheme", "auto");
      } else {
        localStorage.setItem("hexo-color-scheme", isDark ? "dark" : "light");
      }
      toggleGiscusTheme();
    }

    // listen dark mode change
    window
      .matchMedia("(prefers-color-scheme: dark)")
      .addEventListener("change", (e) => {
        const setting = localStorage.getItem("hexo-color-scheme") || "auto";
        if (setting === "auto") {
          document.documentElement.classList.toggle("dark", e.matches);
          $("#theme-icon").attr(
            "icon",
            e.matches ? "ri:moon-line" : "ri:sun-line"
          );
          toggleGiscusTheme();
        }
      });

    $("#toggle-dark").click((event) => {
      const isAppearanceTransition = document.startViewTransition && !window.matchMedia('(prefers-reduced-motion: reduce)').matches
      if (!isAppearanceTransition) {
        toggleDark()
        return
      }
      const x = event.clientX
      const y = event.clientY
      const endRadius = Math.hypot(
        Math.max(x, innerWidth - x),
        Math.max(y, innerHeight - y),
      )
      const transition = document.startViewTransition(async () => {
        toggleDark()
      })

      transition.ready
        .then(() => {
          const isDark = document.documentElement.classList.contains("dark")
          const clipPath = [
            `circle(0px at ${x}px ${y}px)`,
            `circle(${endRadius}px at ${x}px ${y}px)`,
          ]
          document.documentElement.animate(
            {
              clipPath: isDark
                ? [...clipPath].reverse()
                : clipPath,
            },
            {
              duration: 400,
              easing: 'ease-out',
              pseudoElement: isDark
                ? '::view-transition-old(root)'
                : '::view-transition-new(root)',
            },
          )
        })
    });
  });
</script>




<meta name="generator" content="Hexo 7.3.0"></head>
<body class="font-sans bg-white dark:bg-zinc-900 text-gray-700 dark:text-gray-200 relative">
  <header class="fixed w-full px-5 py-1 z-10 backdrop-blur-xl backdrop-saturate-150 border-b border-black/5">
  <div class="max-auto">
    <nav class="flex items-center text-base">
      <a href="/hexo-blog/public/" class="group">
        <h2 class="font-medium tracking-tighterp text-l p-2">
          <img class="w-5 mr-2 inline-block transition-transform group-hover:rotate-[30deg]" id="logo" src="https://moe-counter-vercel-gamma.vercel.app/a?theme=rule34" alt="Hexo-blog" />
          Hexo-blog
        </h2>
      </a>
      <div id="header-title" class="opacity-0 md:ml-2 md:mt-[0.1rem] text-xs font-medium whitespace-nowrap overflow-hidden overflow-ellipsis">
        æ¢ç©¶ Kotlin çš„éšè—æ€§èƒ½å¼€é”€ä¸é¿å‘æŒ‡å—
      </div>
      <div class="flex-1"></div>
      <div class="flex items-center gap-3">
        
          <a class="hidden sm:flex" href="/hexo-blog/public/archives">Posts</a>
        
          <a class="hidden sm:flex" href="/hexo-blog/public/category">Categories</a>
        
          <a class="hidden sm:flex" href="/hexo-blog/public/tag">Tags</a>
        
        
          
            <a class="w-5 h-5 hidden sm:flex" title="Github" target="_blank" rel="noopener" href="https://github.com/hqqich">
              <iconify-icon width="20" icon="ri:github-line"></iconify-icon>
            </a>
          
        
        <a class="w-5 h-5 hidden sm:flex" title="Github" href="rss2.xml">
          <iconify-icon width="20" icon="ri:rss-line"></iconify-icon>
        </a>
        <a class="w-5 h-5" title="toggle theme" id="toggle-dark">
          <iconify-icon width="20" icon="" id="theme-icon"></iconify-icon>
        </a>
      </div>
      <div class="flex items-center justify-center gap-3 ml-3 sm:hidden">
        <span class="w-5 h-5" aria-hidden="true" role="img" id="open-menu">
          <iconify-icon width="20" icon="carbon:menu" ></iconify-icon>
        </span>
        <span class="w-5 h-5 hidden" aria-hidden="true" role="img" id="close-menu">
          <iconify-icon  width="20" icon="carbon:close" ></iconify-icon>
        </span>
      </div>
    </nav>
  </div>
</header>
<div id="menu-panel" class="h-0 overflow-hidden sm:hidden fixed left-0 right-0 top-12 bottom-0 z-10">
  <div id="menu-content" class="relative z-20 bg-white/80 px-6 sm:px-8 py-2 backdrop-blur-xl -translate-y-full transition-transform duration-300">
    <ul class="nav flex flex-col sm:flex-row text-sm font-medium">
      
        <li class="nav-portfolio sm:mx-2 border-b sm:border-0 border-black/5 last:border-0 hover:text-main">
          <a href="/hexo-blog/public/archives" class="flex h-12 sm:h-auto items-center">Posts</a>
        </li>
      
        <li class="nav-portfolio sm:mx-2 border-b sm:border-0 border-black/5 last:border-0 hover:text-main">
          <a href="/hexo-blog/public/category" class="flex h-12 sm:h-auto items-center">Categories</a>
        </li>
      
        <li class="nav-portfolio sm:mx-2 border-b sm:border-0 border-black/5 last:border-0 hover:text-main">
          <a href="/hexo-blog/public/tag" class="flex h-12 sm:h-auto items-center">Tags</a>
        </li>
      
    </ul>
  </div>
  <div class="mask bg-black/20 absolute inset-0"></div>
</div>

  <main class="pt-14">
    <!-- css -->

<link rel="stylesheet" href="/hexo-blog/public/lib/fancybox/fancybox.min.css">


<link rel="stylesheet" href="/hexo-blog/public/lib/tocbot/tocbot.min.css">

<!-- toc -->

  <!-- tocbot -->
<nav class="post-toc toc text-sm w-48 relative top-32 right-0 opacity-70 hidden lg:block" style="position: fixed !important;"></nav>


<section class="px-6 max-w-prose mx-auto md:px-0">
  <!-- header -->
  <header class="overflow-hidden pt-6 pb-6 md:pt-12">
    <div class="pt-4 md:pt-6">
      <h1 id="article-title" class="text-[2rem] font-bold leading-snug mb-4 md:mb-6 md:text-[2.6rem]">
        æ¢ç©¶ Kotlin çš„éšè—æ€§èƒ½å¼€é”€ä¸é¿å‘æŒ‡å—
      </h1>
      <div>
        <section class="flex items-center gap-3 text-sm">
          <span class="flex items-center gap-1">
            <iconify-icon width="18" icon="carbon-calendar" ></iconify-icon>
            <time>2025-03-02</time>
          </span>
          <span class="text-gray-400">Â·</span>
          <span class="flex items-center gap-1">
            <iconify-icon width="18" icon="ic:round-access-alarm" ></iconify-icon>
            <span>27 min</span>
          </span>
          <span class="text-gray-400">Â·</span>
          <span class="flex items-center gap-1">
            <iconify-icon width="18" icon="icon-park-outline:font-search" ></iconify-icon>
            <span>6.8k words</span>
          </span>
          
            <span class="text-gray-400">Â·</span>
            <span class="flex items-center gap-1">
              <iconify-icon width="16" icon="icon-park-outline:box" class="mr-2"></iconify-icon>
              <a class="article-category-link" href="/hexo-blog/public/categories/kotlin/">kotlin</a>
            </span>
          
        </section>
      </div>
    </div>
  </header>
  <!-- content -->
  <article class="post-content prose m-auto slide-enter-content dark:prose-invert">
    <blockquote>
<p>å…¬ä¼—å·ï¼š<a target="_blank" rel="noopener" href="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/adbc507fc3704fd8955aae739a433db2~tplv-k3u1fbpfcp-zoom-1.image">å­—èŠ‚æ•°ç»„</a></p>
<p>å¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ© ğŸ¤£ğŸ¤£</p>
</blockquote>
<p>åœ¨ 2019 å¹´ Google I&#x2F;O å¤§ä¼šä¸Šï¼ŒGoogle å®£å¸ƒäº†ä»Šå Android å¼€å‘å°†ä¼˜å…ˆä½¿ç”¨ Kotlin ï¼Œå³ Kotlin-firstï¼Œéšä¹‹åœ¨ Android å¼€å‘ç•Œå…´èµ·äº†ä¸€é˜µå…¨æ°‘å­¦ä¹  Kotlin çš„çƒ­æ½®ã€‚ä¹‹å Google ä¹Ÿæ¨å‡ºäº†ä¸€ç³»åˆ—ç”¨ Kotlin å®ç°çš„ ktx æ‰©å±•åº“ï¼Œä¾‹å¦‚ <code>activity-ktx</code>ã€<code>fragment-ktx</code>ã€<code>core-ktx</code>ç­‰ï¼Œæä¾›äº†å„ç§æ–¹ä¾¿çš„æ‰©å±•æ–¹æ³•ç”¨äºç®€åŒ–å¼€å‘è€…çš„å·¥ä½œï¼ŒKotlin åç¨‹ç›®å‰ä¹Ÿæ˜¯å®˜æ–¹åœ¨ Android ä¸Šè¿›è¡Œå¼‚æ­¥ç¼–ç¨‹çš„æ¨èè§£å†³æ–¹æ¡ˆ</p>
<p>Google æ¨èä¼˜å…ˆä½¿ç”¨ Kotlinï¼Œä¹Ÿå®£ç§°ä¸ä¼šæ”¾å¼ƒ Javaï¼Œä½†ç›®å‰å„ç§ ktx æ‰©å±•åº“è¿˜æ˜¯éœ€è¦ç”± Kotlin ä»£ç è¿›è¡Œä½¿ç”¨æ‰èƒ½æœ€å¤§åŒ–åœ°äº«å—åˆ°å…¶ä¾¿åˆ©æ€§ï¼ŒJava ä»£ç æ¥è°ƒç”¨æ˜¾å¾—æœ‰ç‚¹ä¸ä¼¦ä¸ç±»ã€‚ä½œä¸º Jetpack ä¸»è¦ç»„ä»¶ä¹‹ä¸€çš„ Paging 3.x ç‰ˆæœ¬ç›®å‰ä¹Ÿå·²ç»å®Œå…¨ç”¨ Kotlin å®ç°ï¼Œä¸º Kotlin åç¨‹æä¾›äº†ä¸€æµçš„æ”¯æŒã€‚åˆšå‡ºæ­£å¼ç‰ˆæœ¬ä¸ä¹…çš„ Jetpack Compose ä¹Ÿåªæ”¯æŒ Kotlinï¼ŒJava æ— ç¼˜å£°æ˜å¼ UI</p>
<p>å¼€å‘è€…å¯ä»¥æ„Ÿå—åˆ° Kotlin åœ¨ Android å¼€å‘ä¸­çš„é‡è¦æ€§åœ¨ä¸æ–­æé«˜ï¼Œè™½ç„¶ Google è¯´ä¸ä¼šæ”¾å¼ƒ Javaï¼Œä½†ä»¥åçš„äº‹è°è¯´å¾—å‡†å‘¢ï¼Ÿå¼€å‘è€…è¿˜æ˜¯éœ€è¦å°½æ—©è¿ç§»åˆ° Kotlinï¼Œè¿™ä¹Ÿæ˜¯å¿…ä¸å¯æŒ¡çš„æŠ€æœ¯è¶‹åŠ¿</p>
<p>Kotlin åœ¨è®¾è®¡ç†å¿µä¸Šæœ‰å¾ˆå¤šå’Œ Java ä¸åŒçš„åœ°æ–¹ï¼Œå¼€å‘è€…èƒ½å¤Ÿç›´è§‚æ„Ÿå—åˆ°çš„æ˜¯è¯­æ³•å±‚é¢ä¸Šçš„å·®å¼‚æ€§ï¼ŒèƒŒåä¹ŸåŒ…å«æœ‰<strong>ä¸€ç³»åˆ—éšè—çš„æ€§èƒ½å¼€é”€ä»¥åŠä¸€äº›éšè—å¾—å¾ˆæ·±çš„â€œå‘â€</strong>ï¼Œæœ¬ç¯‡æ–‡ç« å°±æ¥ä»‹ç»åœ¨ä½¿ç”¨ Kotlin è¿‡ç¨‹ä¸­å­˜åœ¨çš„éšè—æ€§èƒ½å¼€é”€ï¼Œå¸®åŠ©è¯»è€…é¿å‘ï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ© ğŸ¤£ğŸ¤£</p>
<h1 id="æ…ç”¨-JvmOverloads"><a href="#æ…ç”¨-JvmOverloads" class="headerlink" title="æ…ç”¨ @JvmOverloads"></a>æ…ç”¨ @JvmOverloads</h1><p><code>@JvmOverloads</code> æ³¨è§£å¤§å®¶åº”è¯¥ä¸é™Œç”Ÿï¼Œå…¶ä½œç”¨åœ¨å…·æœ‰é»˜è®¤å‚æ•°çš„æ–¹æ³•ä¸Šï¼Œç”¨äºå‘ Java ä»£ç ç”Ÿæˆå¤šä¸ªé‡è½½æ–¹æ³•</p>
<p>ä¾‹å¦‚ï¼Œä»¥ä¸‹çš„ <code>println</code> æ–¹æ³•å¯¹äº Java ä»£ç æ¥è¯´å°±ç›¸å½“äºä¸¤ä¸ªé‡è½½æ–¹æ³•ï¼Œé»˜è®¤ä½¿ç”¨ç©ºå­—ç¬¦ä¸²ä½œä¸ºå…¥å‚å‚æ•°</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Kotlin</span></span><br><span class="line"><span class="meta">@JvmOverloads</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">println</span><span class="params">(log: <span class="type">String</span> = <span class="string">&quot;&quot;</span>)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">println</span><span class="params">(String log)</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">println</span><span class="params">()</span> &#123;</span><br><span class="line">	println(<span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>@JvmOverloads</code> å¾ˆæ–¹ä¾¿ï¼Œå‡å°‘äº† Java ä»£ç è°ƒç”¨ Kotlin ä»£ç æ—¶çš„è°ƒç”¨æˆæœ¬ï¼Œä½¿å¾— Java ä»£ç ä¹Ÿå¯ä»¥äº«å—åˆ°é»˜è®¤å‚æ•°çš„ä¾¿åˆ©ï¼Œä½†åœ¨æŸäº›ç‰¹æ®Šåœºæ™¯ä¸‹ä¹Ÿä¼šå¼•å‘ä¸€ä¸ªéšè—å¾—å¾ˆæ·±çš„ bug</p>
<p>ä¸¾ä¸ªä¾‹å­</p>
<p>æˆ‘ä»¬çŸ¥é“ Android ç³»ç»Ÿçš„ View ç±»åŒ…å«æœ‰å¤šä¸ªæ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬åœ¨å®ç°è‡ªå®šä¹‰ View æ—¶è‡³å°‘å°±è¦å£°æ˜ä¸€ä¸ª<strong>åŒ…å«æœ‰ä¸¤ä¸ªå‚æ•°çš„æ„é€ å‡½æ•°</strong>ï¼Œå‚æ•°ç±»å‹å¿…é¡»ä¾æ¬¡æ˜¯ Context å’Œ AttributeSetï¼Œè¿™æ ·è¯¥è‡ªå®šä¹‰ View æ‰èƒ½åœ¨å¸ƒå±€æ–‡ä»¶ä¸­ä½¿ç”¨ã€‚è€Œ View ç±»çš„æ„é€ å‡½æ•°æœ€å¤šåŒ…å«æœ‰å››ä¸ªå…¥å‚å‚æ•°ï¼Œæœ€å°‘åªæœ‰ä¸€ä¸ªï¼Œä¸ºäº†çœäº‹ï¼Œæˆ‘ä»¬åœ¨ç”¨ Kotlin ä»£ç å®ç°è‡ªå®šä¹‰ View æ—¶ï¼Œå°±å¯ä»¥ç”¨ <code>@JvmOverloads</code> æ¥å¾ˆæ–¹ä¾¿åœ°ç»§æ‰¿ View ç±»ï¼Œå°±åƒä»¥ä¸‹ä»£ç </p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> <span class="keyword">class</span> <span class="title class_">BaseView</span> <span class="meta">@JvmOverloads</span> <span class="keyword">constructor</span>(</span><br><span class="line">    context: Context, attrs: AttributeSet? = <span class="literal">null</span>,</span><br><span class="line">    defStyleAttr: <span class="built_in">Int</span> = <span class="number">0</span>, defStyleRes: <span class="built_in">Int</span> = <span class="number">0</span></span><br><span class="line">) : View(context, attrs, defStyleAttr, defStyleRes)</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæˆ‘ä»¬æ˜¯åƒ BaseView ä¸€æ ·ç›´æ¥ç»§æ‰¿äº View çš„è¯ï¼Œæ­¤æ—¶ä½¿ç”¨<code>@JvmOverloads</code>å°±ä¸ä¼šäº§ç”Ÿä»»ä½•é—®é¢˜ï¼Œå¯å¦‚æœæˆ‘ä»¬ç»§æ‰¿çš„æ˜¯ TextView çš„è¯ï¼Œé‚£ä¹ˆé—®é¢˜å°±æ¥äº†</p>
<p>ç›´æ¥ç»§æ‰¿äº TextView ä¸åšä»»ä½•ä¿®æ”¹ï¼Œåœ¨å¸ƒå±€æ–‡ä»¶ä¸­åˆ†åˆ«ä½¿ç”¨ MyTextView å’Œ TextViewï¼Œç»™å®ƒä»¬å®Œå…¨ä¸€æ ·çš„å‚æ•°ï¼Œçœ‹çœ‹è¿è¡Œæ•ˆæœ</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> <span class="keyword">class</span> <span class="title class_">MyTextView</span> <span class="meta">@JvmOverloads</span> <span class="keyword">constructor</span>(</span><br><span class="line">    context: Context, attrs: AttributeSet? = <span class="literal">null</span>,</span><br><span class="line">    defStyleAttr: <span class="built_in">Int</span> = <span class="number">0</span>, defStyleRes: <span class="built_in">Int</span> = <span class="number">0</span></span><br><span class="line">) : TextView(context, attrs, defStyleAttr, defStyleRes)</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">github.leavesc.demo.MyTextView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;ä¸šå¿—é™ˆ&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:textSize</span>=<span class="string">&quot;42sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;ä¸šå¿—é™ˆ&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:textSize</span>=<span class="string">&quot;42sp&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶ä¸¤ä¸ª TextView å°±ä¼šå‘ˆç°å‡ºä¸ä¸€æ ·çš„æ–‡æœ¬é¢œè‰²äº†ï¼Œååˆ†ç¥å¥‡</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a8db31ff83054797a9a0048919df668a~tplv-k3u1fbpfcp-watermark.image"></p>
<p>è¿™å°±æ˜¯ <code>@JvmOverloads</code> å¸¦æ¥çš„ä¸€ä¸ªéšè—é—®é¢˜ã€‚å› ä¸º TextView çš„ <code>defStyleAttr</code> å®é™…ä¸Šæ˜¯æœ‰ä¸€ä¸ªé»˜è®¤å€¼çš„ï¼Œå³ <code>R.attr.textViewStyle</code>ï¼Œå½“ä¸­å°±åŒ…å«äº† TextView çš„é»˜è®¤æ–‡æœ¬é¢œè‰²ï¼Œè€Œç”±äº MyTextView ä¸º <code>defStyleAttr</code> æŒ‡å®šäº†ä¸€ä¸ªé»˜è®¤å€¼ 0ï¼Œè¿™å°±å¯¼è‡´ MyTextView ä¸¢å¤±äº†ä¸€äº›é»˜è®¤é£æ ¼å±æ€§</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">TextView</span><span class="params">(Context context, <span class="meta">@Nullable</span> AttributeSet attrs)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>(context, attrs, com.android.internal.R.attr.textViewStyle);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬è¦ç›´æ¥ç»§æ‰¿çš„æ˜¯ View ç±»çš„è¯å¯ä»¥ç›´æ¥ä½¿ç”¨<code>@JvmOverloads</code>ï¼Œæ­¤æ—¶ä¸ä¼šæœ‰ä»»ä½•é—®é¢˜ï¼Œè€Œå¦‚æœæˆ‘ä»¬è¦ç»§æ‰¿çš„æ˜¯ç°æœ‰æ§ä»¶çš„è¯ï¼Œå°±éœ€è¦è€ƒè™‘åº”è¯¥å¦‚ä½•è®¾ç½®é»˜è®¤å€¼äº†</p>
<h1 id="æ…ç”¨-è§£æ„å£°æ˜"><a href="#æ…ç”¨-è§£æ„å£°æ˜" class="headerlink" title="æ…ç”¨ è§£æ„å£°æ˜"></a>æ…ç”¨ è§£æ„å£°æ˜</h1><p>æœ‰æ—¶æˆ‘ä»¬ä¼šæœ‰æŠŠä¸€ä¸ªå¯¹è±¡æ‹†è§£æˆå¤šä¸ªå˜é‡çš„éœ€æ±‚ï¼ŒKotlin ä¹Ÿæä¾›äº†è¿™ç±»è¯­æ³•ç³–æ”¯æŒï¼Œç§°ä¸ºè§£æ„å£°æ˜</p>
<p>ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç å°±å°† People å˜é‡è§£æ„ä¸ºäº†ä¸¤ä¸ªå˜é‡ï¼šname å’Œ nicknameï¼Œå˜é‡åå¯ä»¥éšæ„å–ï¼Œæ¯ä¸ªå˜é‡å°±æŒ‰é¡ºåºå¯¹åº”ç€ People ä¸­çš„å­—æ®µ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">data <span class="keyword">class</span> <span class="title class_">People</span>(val name: String, val nickname: String)</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> fun <span class="title function_">printInfo</span><span class="params">(people: People)</span> &#123;</span><br><span class="line">    val (name, nickname) = people</span><br><span class="line">    <span class="title function_">println</span><span class="params">(name)</span></span><br><span class="line">    println(nickname)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¯ä¸ªè§£æ„å£°æ˜å…¶å®éƒ½ä¼šè¢«ç¼–è¯‘æˆä»¥ä¸‹ä»£ç ï¼Œè§£æ„æ“ä½œå…¶å®å°±æ˜¯åœ¨æŒ‰ç…§é¡ºåºè·å–ç‰¹å®šæ–¹æ³•çš„è¿”å›å€¼</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> people.component1();</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">nickname</span> <span class="operator">=</span> people.component2();</span><br></pre></td></tr></table></figure>

<p><code>component1()</code> å’Œ <code>component2()</code> å‡½æ•°æ˜¯ Kotlin ä¸ºæ•°æ®ç±»è‡ªåŠ¨ç”Ÿæˆçš„æ–¹æ³•ï¼ŒPeople åç¼–è¯‘ä¸º Java ä»£ç åå°±å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸ªæ–¹æ³•è¿”å›çš„å…¶å®éƒ½æ˜¯æˆå‘˜å˜é‡ï¼Œæ–¹æ³•ååŒ…å«çš„æ•°å­—å¯¹åº”çš„å°±æ˜¯æˆå‘˜å˜é‡åœ¨æ•°æ®ç±»ä¸­çš„å£°æ˜é¡ºåº</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">People</span> &#123;</span><br><span class="line">   <span class="meta">@NotNull</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">final</span> String name;</span><br><span class="line">   <span class="meta">@NotNull</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">final</span> String nickname;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@NotNull</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">final</span> String <span class="title function_">component1</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@NotNull</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">final</span> String <span class="title function_">component2</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.nickname;</span><br><span class="line">   &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è§£æ„å£°æ˜å’Œæ•°æ®ç±»é…å¥—ä½¿ç”¨æ—¶å°±æœ‰ä¸€ä¸ªéšè—çš„çŸ¥è¯†ç‚¹ï¼Œçœ‹ä»¥ä¸‹ä¾‹å­</p>
<p>å‡è®¾åç»­æˆ‘ä»¬ä¸º People æ·»åŠ äº†ä¸€ä¸ªæ–°å­—æ®µ cityï¼Œæ­¤æ—¶ <code>printInfo</code> æ–¹æ³•ä¸€æ ·å¯ä»¥æ­£å¸¸è°ƒç”¨ï¼Œä½† nickname æŒ‡å‘çš„å…¶å®å°±å˜æˆäº† people å˜é‡å†…çš„ city å­—æ®µäº†ï¼Œå«ä¹‰æ‚„æ‚„å‘ç”Ÿäº†å˜åŒ–ï¼Œæ­¤æ—¶å°±ä¼šå¯¼è‡´é€»è¾‘é”™è¯¯äº†</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">data</span> <span class="keyword">class</span> <span class="title class_">People</span>(<span class="keyword">val</span> name: String, <span class="keyword">val</span> city: String, <span class="keyword">val</span> nickname: String)</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">printInfo</span><span class="params">(people: <span class="type">People</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> (name, nickname) = people</span><br><span class="line">    println(name)</span><br><span class="line">    println(nickname)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ•°æ®ç±»ä¸­çš„å­—æ®µæ˜¯å¯ä»¥éšæ—¶å¢å‡æˆ–è€…å˜æ¢ä½ç½®çš„ï¼Œä»è€Œä½¿å¾—è§£æ„ç»“æœå’Œæˆ‘ä»¬ä¸€å¼€å§‹é¢„æƒ³çš„ä¸ä¸€è‡´ï¼Œå› æ­¤æˆ‘è§‰å¾—è§£æ„å£°æ˜å’Œæ•°æ®ç±»ä¸å¤ªé€‚åˆæ”¾åœ¨ä¸€èµ·ä½¿ç”¨</p>
<h1 id="æ…ç”¨-toLowerCase-å’Œ-toUpperCase"><a href="#æ…ç”¨-toLowerCase-å’Œ-toUpperCase" class="headerlink" title="æ…ç”¨ toLowerCase å’Œ toUpperCase"></a>æ…ç”¨ toLowerCase å’Œ toUpperCase</h1><p>å½“æˆ‘ä»¬è¦ä»¥å¿½ç•¥å¤§å°å†™çš„æ–¹å¼æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰æ—¶ï¼Œé€šå¸¸æƒ³åˆ°çš„æ˜¯é€šè¿‡ <code>toUpperCase</code> æˆ– <code>toLowerCase</code> æ–¹æ³•å°†ä¸¤ä¸ªå­—ç¬¦ä¸²è½¬æ¢ä¸ºå…¨å¤§å†™æˆ–è€…å…¨å°å†™ï¼Œç„¶åå†è¿›è¡Œæ¯”è¾ƒï¼Œè¿™ç§æ–¹å¼å®Œå…¨å¯ä»¥æ»¡è¶³éœ€æ±‚ï¼Œä½†å½“ä¸­ä¹ŸåŒ…å«ç€ä¸€ä¸ªéšè—å¼€é”€</p>
<p>ä¾‹å¦‚ï¼Œä»¥ä¸‹çš„ Kotlin ä»£ç åç¼–è¯‘ä¸º Java ä»£ç åï¼Œå¯ä»¥çœ‹åˆ°æ¯æ¬¡è°ƒç”¨<code>toUpperCase</code>æ–¹æ³•éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ä¸´æ—¶å˜é‡ï¼Œç„¶åå†å»è°ƒç”¨ä¸´æ—¶å˜é‡çš„ <code>equals</code> æ–¹æ³•è¿›è¡Œæ¯”è¾ƒ</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> name = <span class="string">&quot;leavesC&quot;</span></span><br><span class="line">    <span class="keyword">val</span> nickname = <span class="string">&quot;leavesc&quot;</span></span><br><span class="line">    println(name.toUpperCase() == nickname.toUpperCase())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> static <span class="keyword">final</span> void main() &#123;</span><br><span class="line">    String name = <span class="string">&quot;leavesC&quot;</span>;</span><br><span class="line">    String nickname = <span class="string">&quot;leavesc&quot;</span>;</span><br><span class="line">    String var10000 = name.toUpperCase();</span><br><span class="line">    String var10001 = nickname.toUpperCase();</span><br><span class="line">    boolean var2 = Intrinsics.areEqual(var10000, var10001);</span><br><span class="line">    System.<span class="keyword">out</span>.println(var2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šä»£ç å°±å¤šåˆ›å»ºäº†ä¸¤ä¸ªä¸´æ—¶å˜é‡ï¼Œè¿™æ ·çš„ä»£ç æ— ç–‘ä¼šæ¯”è¾ƒä½æ•ˆ</p>
<p>æœ‰ä¸€ä¸ªæ›´å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œå°±æ˜¯é€šè¿‡ Kotlin æä¾›çš„æ”¯æŒå¿½ç•¥å¤§å°å†™çš„ <code>equals</code> æ‰©å±•æ–¹æ³•æ¥è¿›è¡Œæ¯”è¾ƒï¼Œæ­¤æ–¹æ³•å†…éƒ¨ä¼šè°ƒç”¨ String ç±»åŸç”Ÿçš„ <code>equalsIgnoreCase</code>æ¥è¿›è¡Œæ¯”è¾ƒï¼Œä»è€Œé¿å…äº†åˆ›å»ºä¸´æ—¶å˜é‡ï¼Œç›¸å¯¹æ¥è¯´ä¼šæ¯”è¾ƒé«˜æ•ˆä¸€äº›</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> name = <span class="string">&quot;leavesC&quot;</span></span><br><span class="line">    <span class="keyword">val</span> nickname = <span class="string">&quot;leavesc&quot;</span></span><br><span class="line">    println(name.equals(other = nickname, ignoreCase = <span class="literal">true</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> static <span class="keyword">final</span> void main() &#123;</span><br><span class="line">    String name = <span class="string">&quot;leavesC&quot;</span>;</span><br><span class="line">    String nickname = <span class="string">&quot;leavesc&quot;</span>;</span><br><span class="line">    boolean var2 = StringsKt.equals(name, nickname, <span class="literal">true</span>);</span><br><span class="line">    boolean var3 = <span class="literal">false</span>;</span><br><span class="line">    System.<span class="keyword">out</span>.println(var2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="æ…ç”¨-arrayOf"><a href="#æ…ç”¨-arrayOf" class="headerlink" title="æ…ç”¨ arrayOf"></a>æ…ç”¨ arrayOf</h1><p>Kotlin ä¸­çš„æ•°ç»„ç±»å‹å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š</p>
<ul>
<li><code>IntArrayã€LongArrayã€FloatArray</code> å½¢å¼çš„<strong>åŸºæœ¬æ•°æ®ç±»å‹æ•°ç»„</strong>ï¼Œé€šè¿‡ <code>intArrayOfã€longArrayOfã€floatArrayOf</code> ç­‰æ–¹æ³•æ¥å£°æ˜</li>
<li><code>Array&lt;T&gt;</code> å½¢å¼çš„<strong>å¯¹è±¡ç±»å‹æ•°ç»„</strong>ï¼Œé€šè¿‡ <code>arrayOfã€arrayOfNulls</code> ç­‰æ–¹æ³•æ¥å£°æ˜</li>
</ul>
<p>ä¾‹å¦‚ï¼Œä»¥ä¸‹çš„ Kotlin ä»£ç éƒ½æ˜¯ç”¨äºå£°æ˜æ•´æ•°æ•°ç»„ï¼Œä½†å®é™…ä¸Šå­˜å‚¨çš„æ•°æ®ç±»å‹å¹¶ä¸ä¸€æ ·</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> intArray: IntArray = intArrayOf(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> integerArray: Array&lt;<span class="built_in">Int</span>&gt; = arrayOf(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>å°†ä»¥ä¸Šä»£ç åç¼–è¯‘ä¸º Java ä»£ç åï¼Œå°±å¯ä»¥æ˜ç¡®åœ°çœ‹å‡ºä¸€ç§æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ intï¼Œä¸€ç§æ˜¯åŒ…è£…ç±»å‹ Integerï¼Œ<code>arrayOf</code> æ–¹æ³•ä¼šè‡ªåŠ¨å¯¹å…¥å‚å€¼è¿›è¡Œ<strong>è£…ç®±</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span>[] intArray = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Integer[] integerArray = <span class="keyword">new</span> <span class="title class_">Integer</span>[]&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br></pre></td></tr></table></figure>

<p>ä¸ºäº†è¡¨ç¤ºåŸºæœ¬æ•°æ®ç±»å‹çš„æ•°ç»„ï¼ŒKotlin ä¸ºæ¯ä¸€ç§åŸºæœ¬æ•°æ®ç±»å‹éƒ½æä¾›äº†è‹¥å¹²ç›¸åº”çš„ç±»å¹¶åšäº†ç‰¹æ®Šçš„ä¼˜åŒ–ã€‚ä¾‹å¦‚ï¼Œ<code>IntArrayã€ByteArrayã€BooleanArray</code> ç­‰ç±»å‹éƒ½ä¼šè¢«ç¼–è¯‘æˆæ™®é€šçš„ Java åŸºæœ¬æ•°æ®ç±»å‹æ•°ç»„ï¼š<code>int[]ã€byte[]ã€boolean[]</code>ï¼Œè¿™äº›æ•°ç»„ä¸­çš„å€¼åœ¨å­˜å‚¨æ—¶ä¸ä¼šè¿›è¡Œè£…ç®±æ“ä½œï¼Œè€Œæ˜¯ä½¿ç”¨äº†å¯èƒ½çš„æœ€é«˜æ•ˆçš„æ–¹å¼</p>
<p>å› æ­¤ï¼Œå¦‚æœæ²¡æœ‰å¿…è¦çš„è¯ï¼Œæˆ‘ä»¬åœ¨å¼€å‘ä¸­è¦æ…ç”¨ <code>arrayOf</code> æ–¹æ³•ï¼Œé¿å…ä¸å¿…è¦çš„è£…ç®±æ¶ˆè€—</p>
<h1 id="æ…ç”¨-vararg"><a href="#æ…ç”¨-vararg" class="headerlink" title="æ…ç”¨ vararg"></a>æ…ç”¨ vararg</h1><p>å’Œ Java ä¸€æ ·ï¼ŒKotlin ä¹Ÿæ”¯æŒå¯å˜å‚æ•°ï¼Œå…è®¸å°†ä»»æ„å¤šä¸ªå‚æ•°æ‰“åŒ…åˆ°ä¸€ä¸ªæ•°ç»„ä¸­å†ä¸€å¹¶ä¼ ç»™å‡½æ•°ï¼ŒKotlin é€šè¿‡ä½¿ç”¨ varage å…³é”®å­—æ¥å£°æ˜å¯å˜å‚æ•°</p>
<p>æˆ‘ä»¬å¯ä»¥å‘ <code>printValue</code> æ–¹æ³•ä¼ é€’ä»»æ„æ•°é‡çš„å…¥å‚å‚æ•°ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä¼ å…¥ä¸€ä¸ªæ•°ç»„å¯¹è±¡ï¼Œä½† Kotlin è¦æ±‚æ˜¾å¼åœ°è§£åŒ…æ•°ç»„ï¼Œä»¥ä¾¿æ¯ä¸ªæ•°ç»„å…ƒç´ åœ¨å‡½æ•°ä¸­èƒ½å¤Ÿä½œä¸ºå•ç‹¬çš„å‚æ•°æ¥è°ƒç”¨ï¼Œè¿™ä¸ªåŠŸèƒ½è¢«ç§°ä¸ºå±•å¼€è¿ç®—ç¬¦ï¼Œä½¿ç”¨æ–¹å¼å°±æ˜¯åœ¨æ•°ç»„å‰åŠ ä¸€ä¸ª *</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">printValue</span><span class="params">(<span class="keyword">vararg</span> values: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">    values.forEach &#123;</span><br><span class="line">        println(it)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    printValue()</span><br><span class="line">    printValue(<span class="number">1</span>)</span><br><span class="line">    printValue(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">    <span class="keyword">val</span> values = intArrayOf(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">    printValue(*values)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæˆ‘ä»¬æ˜¯ä»¥ç›´æ¥ä¼ é€’è‹¥å¹²ä¸ªå…¥å‚å‚æ•°çš„å½¢å¼æ¥è°ƒç”¨ <code>printValue</code> æ–¹æ³•çš„è¯ï¼ŒKotlin ä¼šè‡ªåŠ¨å°†è¿™äº›å‚æ•°æ‰“åŒ…ä¸ºä¸€ä¸ªæ•°ç»„è¿›è¡Œä¼ é€’ï¼Œè¿™é‡Œé¢å°±åŒ…å«ç€åˆ›å»ºæ•°ç»„çš„å¼€é”€ï¼Œè¿™æ–¹é¢å’Œ Java ä¿æŒä¸€è‡´ã€‚ å¦‚æœæˆ‘ä»¬ä¼ å…¥çš„å‚æ•°å°±å·²ç»æ˜¯æ•°ç»„çš„è¯ï¼ŒKotlin ç›¸æ¯” Java å°±å­˜åœ¨ç€ä¸€ä¸ªéšè—å¼€é”€ï¼ŒKotlin ä¼šå¤åˆ¶ç°æœ‰æ•°ç»„ä½œä¸ºå‚æ•°æ‹¿æ¥ä½¿ç”¨ï¼Œç›¸å½“äºå¤šåˆ†é…äº†é¢å¤–çš„æ•°ç»„ç©ºé—´ï¼Œè¿™å¯ä»¥ä»åç¼–è¯‘åçš„ Java ä»£ç çœ‹å‡ºæ¥</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">printValue</span><span class="params">(<span class="meta">@NotNull</span> <span class="type">int</span>... values)</span> &#123;</span><br><span class="line">  	Intrinsics.checkNotNullParameter(values, <span class="string">&quot;values&quot;</span>);</span><br><span class="line">  	<span class="type">int</span> <span class="variable">$i$f$forEach</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">  	<span class="type">int</span>[] var3 = values;</span><br><span class="line">  	<span class="type">int</span> <span class="variable">var4</span> <span class="operator">=</span> values.length;</span><br><span class="line"></span><br><span class="line">  	<span class="keyword">for</span>(<span class="type">int</span> <span class="variable">var5</span> <span class="operator">=</span> <span class="number">0</span>; var5 &lt; var4; ++var5) &#123;</span><br><span class="line">     	<span class="type">int</span> <span class="variable">element$iv</span> <span class="operator">=</span> var3[var5];</span><br><span class="line">     	<span class="type">int</span> <span class="variable">var8</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">     	<span class="type">boolean</span> <span class="variable">var9</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">     	System.out.println(element$iv);</span><br><span class="line">  	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">  	printValue();</span><br><span class="line">  	printValue(<span class="number">1</span>);</span><br><span class="line">  	printValue(<span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">  	<span class="type">int</span>[] values = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>&#125;;</span><br><span class="line">  	<span class="comment">//å¤åˆ¶åå†è¿›è¡Œè°ƒç”¨</span></span><br><span class="line">  	printValue(Arrays.copyOf(values, values.length));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// $FF: synthetic method</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] var0)</span> &#123;</span><br><span class="line">  	main();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ° Kotlin ä¼šé€šè¿‡ <code>Arrays.copyOf</code> å¤åˆ¶ç°æœ‰æ•°ç»„ï¼Œå°†å¤åˆ¶åçš„æ•°ç»„ä½œä¸ºå‚æ•°è¿›è¡Œè°ƒç”¨ï¼Œè¿™æ ·åšçš„å¥½å¤„å°±æ˜¯å¯ä»¥é¿å… <code>printValue</code> æ–¹æ³•å½±å“åˆ°åŸæœ‰æ•°ç»„ï¼Œåå¤„å°±æ˜¯ä¼šé¢å¤–æ¶ˆè€—å¤šä¸€ä»½çš„å†…å­˜ç©ºé—´</p>
<h1 id="æ…ç”¨-lazy"><a href="#æ…ç”¨-lazy" class="headerlink" title="æ…ç”¨ lazy"></a>æ…ç”¨ lazy</h1><p>æˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨<code>lazy()</code>å‡½æ•°æ¥æƒ°æ€§åŠ è½½åªè¯»å±æ€§ï¼Œå°†åŠ è½½æ“ä½œå»¶è¿Ÿåˆ°éœ€è¦ä½¿ç”¨çš„æ—¶å€™ï¼Œé€‚ç”¨äºæŸäº›ä¸é€‚åˆç«‹åˆ»åŠ è½½æˆ–è€…åŠ è½½æˆæœ¬è¾ƒé«˜çš„æƒ…å†µ</p>
<p>ä¾‹å¦‚ï¼Œä»¥ä¸‹çš„ <code>lazyValue</code> åªä¼šç­‰åˆ°æˆ‘ä»¬è°ƒç”¨åˆ°çš„æ—¶å€™æ‰ä¼šè¢«èµ‹å€¼</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> lazyValue <span class="keyword">by</span> lazy &#123;</span><br><span class="line">    <span class="string">&quot;it is lazy value&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è€Œåœ¨ä½¿ç”¨<code>lazy()</code>å‡½æ•°æ—¶å¾ˆå®¹æ˜“è¢«å¿½ç•¥çš„åœ°æ–¹å°±æ˜¯å…¶åŒ…å«æœ‰ä¸€ä¸ªå¯é€‰çš„ model å‚æ•°ï¼š</p>
<ul>
<li>LazyThreadSafetyMode.SYNCHRONIZEDã€‚åªå…è®¸ç”±å•ä¸ªçº¿ç¨‹æ¥å®Œæˆåˆå§‹åŒ–ï¼Œä¸”åˆå§‹åŒ–æ“ä½œåŒ…å«æœ‰åŒé‡é”æ£€æŸ¥ï¼Œä»è€Œä½¿å¾—æ‰€æœ‰çº¿ç¨‹éƒ½å¾—åˆ°ç›¸åŒçš„å€¼</li>
<li>LazyThreadSafetyMode.PUBLICATIONã€‚å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œåˆå§‹åŒ–æ“ä½œï¼Œä½†åªæœ‰ç¬¬ä¸€ä¸ªåˆå§‹åŒ–æˆåŠŸçš„å€¼ä¼šè¢«å½“åšæœ€ç»ˆå€¼ï¼Œæœ€ç»ˆæ‰€æœ‰çº¿ç¨‹ä¹Ÿéƒ½ä¼šå¾—åˆ°ç›¸åŒçš„å€¼</li>
<li>LazyThreadSafetyMode.NONEã€‚å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œåˆå§‹åŒ–æ“ä½œï¼Œä¸è¿›è¡Œä»»ä½•çº¿ç¨‹åŒæ­¥ï¼Œå¯¼è‡´ä¸åŒçº¿ç¨‹å¯èƒ½ä¼šå¾—åˆ°ä¸åŒçš„åˆå§‹åŒ–å€¼ï¼Œå› æ­¤ä¸åº”è¯¥ç”¨äºå¤šçº¿ç¨‹ç¯å¢ƒ</li>
</ul>
<p><code>lazy()</code>å‡½æ•°é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨çš„å°±æ˜¯<code>LazyThreadSafetyMode.SYNCHRONIZED</code>ï¼Œä» SynchronizedLazyImpl å¯ä»¥çœ‹åˆ°ï¼Œå…¶å†…éƒ¨å°±ä½¿ç”¨åˆ°äº†<code>synchronized</code>æ¥å®ç°å¤šçº¿ç¨‹åŒæ­¥ï¼Œä»¥æ­¤é¿å…å¤šçº¿ç¨‹ç«äº‰</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">actual</span> <span class="function"><span class="keyword">fun</span> <span class="type">&lt;T&gt;</span> <span class="title">lazy</span><span class="params">(initializer: () -&gt; <span class="type">T</span>)</span></span>: Lazy&lt;T&gt; = SynchronizedLazyImpl(initializer)</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">SynchronizedLazyImpl</span>&lt;<span class="type">out T</span>&gt;(initializer: () -&gt; T, lock: Any? = <span class="literal">null</span>) : Lazy&lt;T&gt;, Serializable &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> initializer: (() -&gt; T)? = initializer</span><br><span class="line">    <span class="meta">@Volatile</span> <span class="keyword">private</span> <span class="keyword">var</span> _value: Any? = UNINITIALIZED_VALUE</span><br><span class="line">    <span class="comment">// final field is required to enable safe publication of constructed instance</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> lock = lock ?: <span class="keyword">this</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">val</span> value: T</span><br><span class="line">        <span class="keyword">get</span>() &#123;</span><br><span class="line">            <span class="keyword">val</span> _v1 = _value</span><br><span class="line">            <span class="keyword">if</span> (_v1 !== UNINITIALIZED_VALUE) &#123;</span><br><span class="line">                <span class="meta">@Suppress(<span class="string">&quot;UNCHECKED_CAST&quot;</span>)</span></span><br><span class="line">                <span class="keyword">return</span> _v1 <span class="keyword">as</span> T</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> synchronized(lock) &#123;</span><br><span class="line">                <span class="keyword">val</span> _v2 = _value</span><br><span class="line">                <span class="keyword">if</span> (_v2 !== UNINITIALIZED_VALUE) &#123;</span><br><span class="line">                    <span class="meta">@Suppress(<span class="string">&quot;UNCHECKED_CAST&quot;</span>)</span> (_v2 <span class="keyword">as</span> T)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">val</span> typedValue = initializer!!()</span><br><span class="line">                    _value = typedValue</span><br><span class="line">                    initializer = <span class="literal">null</span></span><br><span class="line">                    typedValue</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">isInitialized</span><span class="params">()</span></span>: <span class="built_in">Boolean</span> = _value !== UNINITIALIZED_VALUE</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">toString</span><span class="params">()</span></span>: String = <span class="keyword">if</span> (isInitialized()) value.toString() <span class="keyword">else</span> <span class="string">&quot;Lazy value not initialized yet.&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">writeReplace</span><span class="params">()</span></span>: Any = InitializedLazyImpl(value)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯¹äº Android å¼€å‘è€…æ¥è¯´ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬éƒ½æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­è°ƒç”¨ <code>lazy()</code> å‡½æ•°ï¼Œæ­¤æ—¶ä½¿ç”¨ <code>LazyThreadSafetyMode.SYNCHRONIZED</code> å°±ä¼šå¸¦æ¥ä¸å¿…è¦çš„çº¿ç¨‹åŒæ­¥å¼€é”€ï¼Œå› æ­¤å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè€ƒè™‘æ›¿æ¢ä¸º<code>LazyThreadSafetyMode.NONE</code></p>
<h1 id="æ…ç”¨-lateinit-var"><a href="#æ…ç”¨-lateinit-var" class="headerlink" title="æ…ç”¨ lateinit var"></a>æ…ç”¨ lateinit var</h1><p>lateinit var é€‚ç”¨äºæŸäº›ä¸æ–¹ä¾¿é©¬ä¸Šå°±åˆå§‹åŒ–å˜é‡çš„åœºæ™¯ï¼Œç”¨äºå°†åˆå§‹åŒ–æ“ä½œå»¶åï¼ŒåŒæ—¶ä¹Ÿå­˜åœ¨ä¸€äº›ä½¿ç”¨ä¸Šçš„é™åˆ¶ï¼šå¦‚æœåœ¨æœªåˆå§‹åŒ–çš„æƒ…å†µä¸‹å°±ä½¿ç”¨è¯¥å˜é‡çš„è¯ä¼šå¯¼è‡´ NPE</p>
<p>ä¾‹å¦‚ï¼Œå¦‚æœåœ¨ name å˜é‡è¿˜æœªåˆå§‹åŒ–æ—¶å°±è°ƒç”¨äº† <code>print</code> æ–¹æ³•çš„è¯ï¼Œæ­¤æ—¶å°±ä¼šå¯¼è‡´ NPEã€‚ä¸”ç”±äº lateinit var å˜é‡ä¸å…è®¸ä¸º nullï¼Œå› æ­¤æ­¤æ—¶æˆ‘ä»¬ä¹Ÿæ— æ³•é€šè¿‡åˆ¤ç©ºæ¥å¾—çŸ¥ name æ˜¯å¦å·²ç»è¢«åˆå§‹åŒ–äº†ï¼Œè€Œä¸”åˆ¤ç©ºæ“ä½œæœ¬èº«ä¹Ÿç›¸å½“äºåœ¨è°ƒç”¨ name å˜é‡ï¼Œåœ¨æœªåˆå§‹åŒ–çš„æ—¶å€™ä¸€æ ·ä¼šå¯¼è‡´ NPE</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">lateinit</span> <span class="keyword">var</span> name: String</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">print</span><span class="params">()</span></span> &#123;</span><br><span class="line">    println(name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å¦ä¸€ç§æ–¹å¼æ¥åˆ¤æ–­ lateinit å˜é‡æ˜¯å¦å·²åˆå§‹åŒ–</p>
<p>lateinit å®é™…ä¸Šæ˜¯é€šè¿‡ä»£ç†æœºåˆ¶æ¥å®ç°çš„ï¼Œå…³è”çš„æ˜¯ KProperty0 æ¥å£ï¼ŒKProperty0 å°±æä¾›äº†ä¸€ä¸ªæ‰©å±•å±æ€§ç”¨äºåˆ¤æ–­å…¶ä»£ç†çš„å€¼æ˜¯å¦å·²ç»åˆå§‹åŒ–äº†</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SinceKotlin(<span class="string">&quot;1.2&quot;</span>)</span></span><br><span class="line"><span class="meta">@InlineOnly</span></span><br><span class="line"><span class="keyword">inline</span> <span class="keyword">val</span> <span class="meta">@receiver:AccessibleLateinitPropertyLiteral</span> KProperty0&lt;*&gt;.isInitialized: <span class="built_in">Boolean</span></span><br><span class="line">    <span class="keyword">get</span>() = <span class="keyword">throw</span> NotImplementedError(<span class="string">&quot;Implementation is intrinsic&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥è¿›è¡Œåˆ¤æ–­ï¼Œä»è€Œé¿å…ä¸å®‰å…¨çš„è®¿é—®æ“ä½œ</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">lateinit</span> <span class="keyword">var</span> name: String</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">print</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>::name.isInitialized) &#123;</span><br><span class="line">        println(<span class="string">&quot;isInitialized true&quot;</span>)</span><br><span class="line">        println(name)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        println(<span class="string">&quot;isInitialized false&quot;</span>)</span><br><span class="line">        println(name) <span class="comment">//ä¼šå¯¼è‡´ NPE</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="lambda-è¡¨è¾¾å¼"><a href="#lambda-è¡¨è¾¾å¼" class="headerlink" title="lambda è¡¨è¾¾å¼"></a>lambda è¡¨è¾¾å¼</h1><p>lambda è¡¨è¾¾å¼åœ¨è¯­ä¹‰ä¸Šå¾ˆç®€æ´ï¼Œæ—¢é¿å…äº†å†—é•¿çš„å‡½æ•°å£°æ˜ï¼Œä¹Ÿè§£å†³äº†ä»¥å‰éœ€è¦å¼ºç±»å‹å£°æ˜å‡½æ•°ç±»å‹çš„æƒ…å†µ</p>
<p>ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç å°±é€šè¿‡ lambda è¡¨è¾¾å¼å£°æ˜äº†ä¸€ä¸ªå›è°ƒå‡½æ•° callbackï¼Œæˆ‘ä»¬æ— éœ€åˆ›å»ºä¸€ä¸ªå…·ä½“çš„å‡½æ•°ç±»å‹ï¼Œè€Œåªéœ€å£°æ˜éœ€è¦çš„<strong>å…¥å‚å‚æ•°ã€å…¥å‚ç±»å‹ã€å‡½æ•°è¿”å›å€¼</strong>å°±å¯ä»¥</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">requestHttp</span><span class="params">(callback: (<span class="type">code</span>: <span class="type">Int</span>, <span class="type">data</span>: <span class="type">String</span>) -&gt; <span class="type">Unit</span>)</span></span> &#123;</span><br><span class="line">    callback(<span class="number">200</span>, <span class="string">&quot;success&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    requestHttp &#123; code, <span class="keyword">data</span> -&gt;</span><br><span class="line">        println(<span class="string">&quot;code: <span class="variable">$code</span>&quot;</span>)</span><br><span class="line">        println(<span class="string">&quot;data: <span class="variable">$data</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>lambda è¡¨è¾¾å¼è¯­æ³•è™½ç„¶æ–¹ä¾¿ï¼Œä½†ä¹Ÿéšè—ç€ä¸¤ä¸ªæ€§èƒ½é—®é¢˜ï¼š</p>
<ul>
<li>æ¯æ¬¡è°ƒç”¨ lambda è¡¨è¾¾å¼éƒ½ç›¸å½“äºåœ¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡</li>
<li>lambda è¡¨è¾¾å¼å†…éƒ¨éšè—äº†è‡ªåŠ¨è£…ç®±å’Œè‡ªåŠ¨æ‹†ç®±çš„æ“ä½œ</li>
</ul>
<p>å°†ä»¥ä¸Šä»£ç åç¼–è¯‘ä¸º Java ä»£ç åï¼Œå¯ä»¥çœ‹åˆ° callback æœ€ç»ˆçš„å®é™…ç±»å‹å°±æ˜¯ Function2ï¼Œæ¯æ¬¡è°ƒç”¨<code>requestHttp</code> æ–¹æ³•å°±ç›¸å½“äºæ˜¯åœ¨åˆ›å»ºä¸€ä¸ª Function2 å˜é‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">requestHttp</span><span class="params">(<span class="meta">@NotNull</span> Function2 callback)</span> &#123;</span><br><span class="line">	Intrinsics.checkNotNullParameter(callback, <span class="string">&quot;callback&quot;</span>);</span><br><span class="line">	callback.invoke(<span class="number">200</span>, <span class="string">&quot;success&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Function2 æ˜¯ Kotlin æä¾›çš„ä¸€ä¸ªçš„æ³›å‹æ¥å£ï¼Œæ•°å­— 2 å³ä»£è¡¨å…¶åŒ…å«ä¸¤ä¸ªå…¥å‚å€¼</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Function2</span>&lt;<span class="type">in P1, in P2, out R</span>&gt; : <span class="type">Function</span>&lt;<span class="type">R</span>&gt; &#123;</span><br><span class="line">    <span class="comment">/** Invokes the function with the specified arguments. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">operator</span> <span class="function"><span class="keyword">fun</span> <span class="title">invoke</span><span class="params">(p1: <span class="type">P1</span>, p2: <span class="type">P2</span>)</span></span>: R</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Kotlin ä¼šåœ¨ç¼–è¯‘é˜¶æ®µå°†å¼€å‘è€…å£°æ˜çš„ lambda è¡¨è¾¾å¼è½¬æ¢ä¸ºç›¸åº”çš„ FunctionX å¯¹è±¡ï¼Œè°ƒç”¨ lambda è¡¨è¾¾å¼å°±ç›¸å½“äºåœ¨è°ƒç”¨å…¶ <code>invoke</code> æ–¹æ³•ï¼Œä»¥æ­¤ä¸ºä½ç‰ˆæœ¬ JVM å¹³å°ï¼ˆä¾‹å¦‚ Java 6 &#x2F; 7ï¼‰ä¹Ÿèƒ½æä¾› lambda è¡¨è¾¾å¼åŠŸèƒ½ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬ä¹ŸçŸ¥é“æ³›å‹ç±»å‹ä¸å¯èƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå› æ­¤æˆ‘ä»¬åœ¨ Kotlin ä¸­å£°æ˜çš„ Int æœ€ç»ˆä¼šè¢«è‡ªåŠ¨è£…ç®±ä¸º Integerï¼Œlambda è¡¨è¾¾å¼å†…éƒ¨è‡ªåŠ¨å®Œæˆäº†è£…ç®±å’Œæ‹†ç®±çš„æ“ä½œ</p>
<p>æ‰€ä»¥è¯´ï¼Œç®€æ´çš„ lambda è¡¨è¾¾å¼èƒŒåå°±éšè—äº†<strong>è‡ªåŠ¨åˆ›å»º Function å¯¹è±¡è¿›è¡Œä¸­è½¬è°ƒç”¨ï¼Œè‡ªåŠ¨è£…ç®±å’Œè‡ªåŠ¨æ‹†ç®±çš„è¿‡ç¨‹ï¼Œä¸”æœ€ç»ˆåˆ›å»ºçš„æ–¹æ³•æ€»æ•°è¦å¤šäºè¡¨é¢ä¸Šçœ‹åˆ°çš„</strong></p>
<p>å¦‚æœæƒ³è¦é¿å… lambda è¡¨è¾¾å¼çš„ä»¥ä¸Šå¼€é”€ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨ inline å†…è”å‡½æ•°æ¥å®ç°</p>
<p>åœ¨ä½¿ç”¨ inline å…³é”®å­—ä¿®é¥° <code>requestHttp</code> æ–¹æ³•åï¼Œå¯ä»¥çœ‹åˆ°æ­¤æ—¶ <code>requestHttp</code> çš„é€»è¾‘å°±ç›¸å½“äºè¢«ç›´æ¥å¤åˆ¶åˆ°äº† <code>main</code> æ–¹æ³•å†…éƒ¨ï¼Œä¸ä¼šåˆ›å»ºä»»ä½•å¤šä½™çš„å¯¹è±¡ï¼Œä¸”æ­¤æ—¶ä½¿ç”¨çš„ä¹Ÿæ˜¯ int è€Œé Integer</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">inline</span> <span class="function"><span class="keyword">fun</span> <span class="title">requestHttp</span><span class="params">(callback: (<span class="type">code</span>: <span class="type">Int</span>, <span class="type">data</span>: <span class="type">String</span>) -&gt; <span class="type">Unit</span>)</span></span> &#123;</span><br><span class="line">    callback(<span class="number">200</span>, <span class="string">&quot;success&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    requestHttp &#123; code, <span class="keyword">data</span> -&gt;</span><br><span class="line">        println(<span class="string">&quot;code: <span class="variable">$code</span>&quot;</span>)</span><br><span class="line">        println(<span class="string">&quot;data: <span class="variable">$data</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="type">String</span> <span class="variable">data</span> <span class="operator">=</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">	<span class="type">int</span> <span class="variable">code</span> <span class="operator">=</span> <span class="number">200</span>;</span><br><span class="line">	<span class="type">String</span> <span class="variable">var4</span> <span class="operator">=</span> <span class="string">&quot;code: &quot;</span> + code;</span><br><span class="line">	System.out.println(var4);</span><br><span class="line">	var4 = <span class="string">&quot;data: &quot;</span> + data;</span><br><span class="line">	System.out.println(var4);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡å†…è”å‡½æ•°ï¼Œå¯ä»¥ä½¿å¾—ç¼–è¯‘å™¨ç›´æ¥åœ¨è°ƒç”¨æ–¹ä¸­ä½¿ç”¨å†…è”å‡½æ•°ä½“ä¸­çš„ä»£ç ï¼Œç›¸å½“äºç›´æ¥æŠŠå†…è”å‡½æ•°ä¸­çš„é€»è¾‘å¤åˆ¶åˆ°äº†è°ƒç”¨æ–¹ä¸­ï¼Œå®Œå…¨é¿å…äº†è°ƒç”¨å¸¦æ¥çš„å¼€é”€ã€‚å¯¹äºé«˜é˜¶å‡½æ•°ï¼Œä½œä¸ºå‚æ•°ä¼ é€’çš„ lambda è¡¨è¾¾å¼çš„ä¸»ä½“ä¹Ÿå°†è¢«å†…è”ï¼Œè¿™ä½¿å¾—ï¼š</p>
<ul>
<li>å£°æ˜å’Œè°ƒç”¨ lambda è¡¨è¾¾å¼æ—¶ï¼Œä¸ä¼šå®ä¾‹åŒ– Function å¯¹è±¡</li>
<li>æ²¡æœ‰è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±çš„æ“ä½œ</li>
<li>ä¸ä¼šå¯¼è‡´æ–¹æ³•æ•°å¢å¤šï¼Œä½†å¦‚æœå†…è”å‡½æ•°æ–¹æ³•ä½“è¾ƒå¤§ä¸”è¢«å¤šå¤„è°ƒç”¨çš„è¯ï¼Œå¯èƒ½å¯¼è‡´æœ€ç»ˆä»£ç é‡æ˜¾è‘—å¢åŠ </li>
</ul>
<h1 id="init-çš„å£°æ˜é¡ºåºå¾ˆé‡è¦"><a href="#init-çš„å£°æ˜é¡ºåºå¾ˆé‡è¦" class="headerlink" title="init çš„å£°æ˜é¡ºåºå¾ˆé‡è¦"></a>init çš„å£°æ˜é¡ºåºå¾ˆé‡è¦</h1><p>çœ‹ä»¥ä¸‹ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ init å—ä¸­è°ƒç”¨ parameter1ï¼Œå´æ— æ³•è°ƒç”¨ parameter2ï¼Œä» IDE çš„æç¤ºä¿¡æ¯ <code> Variable &#39;parameter2&#39; must be initialized</code>ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥ï¼Œå¯¹äº init å—æ¥è¯´ parameter2 æ­¤æ—¶è¿˜æœªèµ‹å€¼ï¼Œè‡ªç„¶å°±æ— æ³•ä½¿ç”¨äº†</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">KotlinMode</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> parameter1 = <span class="string">&quot;leavesC&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span> &#123;</span><br><span class="line">        println(parameter1)</span><br><span class="line">        <span class="comment">//error: Variable &#x27;parameter2&#x27; must be initialized</span></span><br><span class="line">        <span class="comment">//println(parameter2)</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> parameter2 = <span class="string">&quot;ä¸šå¿—é™ˆ&quot;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»åç¼–è¯‘å‡ºçš„ Java ä»£ç ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥ï¼Œç”±äº parameter2 æ˜¯å£°æ˜åœ¨ init å—ä¹‹åï¼Œæ‰€ä»¥ parameter2 çš„èµ‹å€¼æ“ä½œå…¶å®æ˜¯æ”¾åœ¨æ„é€ å‡½æ•°ä¸­çš„æœ€åé¢ï¼Œå› æ­¤ IDE çš„è¯­æ³•æ£€æŸ¥å™¨å°±ä¼šé˜»æ­¢æˆ‘ä»¬åœ¨ init å—ä¸­æ¥è°ƒç”¨ parameter2 äº†</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">KotlinMode</span> &#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">parameter1</span> <span class="operator">=</span> <span class="string">&quot;leavesC&quot;</span>;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">final</span> String parameter2;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="title function_">KotlinMode</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="type">String</span> <span class="variable">var1</span> <span class="operator">=</span> <span class="built_in">this</span>.parameter1;</span><br><span class="line">      System.out.println(var1);</span><br><span class="line">      <span class="built_in">this</span>.parameter2 = <span class="string">&quot;ä¸šå¿—é™ˆ&quot;</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>IDE ä¼šé˜»æ­¢å¼€å‘è€…å»è°ƒç”¨è¿˜æœªåˆå§‹åŒ–çš„å˜é‡ï¼Œé˜²æ­¢æˆ‘ä»¬å†™å‡ºä¸å®‰å…¨çš„ä»£ç ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ä»¥ä¸‹æ–¹å¼æ¥ç»•è¿‡è¯­æ³•æ£€æŸ¥ï¼Œä½†åŒæ—¶ä¹Ÿå†™å‡ºäº†ä¸å®‰å…¨çš„ä»£ç </p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ init å—ä¸­è°ƒç”¨ <code>print()</code> æ–¹æ³•çš„æ–¹å¼æ¥é—´æ¥è®¿é—® parameter2ï¼Œæ­¤æ—¶ä»£ç æ˜¯å¯ä»¥æ­£å¸¸ç¼–è¯‘çš„ï¼Œä½†æ­¤æ—¶ parameter2 ä¹Ÿåªä¼šä¸º null</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">KotlinMode</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> parameter1 = <span class="string">&quot;leavesC&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span> &#123;</span><br><span class="line">        println(parameter1)</span><br><span class="line">        print()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">print</span><span class="params">()</span></span> &#123;</span><br><span class="line">        println(parameter2)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> parameter2 = <span class="string">&quot;ä¸šå¿—é™ˆ&quot;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»åç¼–è¯‘å‡ºçš„ Java ä»£ç å¯ä»¥çœ‹å‡ºæ¥ï¼Œ<code>print()</code>æ–¹æ³•ä¾æ—§æ˜¯ä¼šåœ¨ parameter2 åˆå§‹åŒ–ä¹‹å‰è¢«è°ƒç”¨ï¼Œæ­¤æ—¶<code>print()</code>æ–¹æ³•è®¿é—®åˆ°çš„ parameter2 ä¹Ÿåªä¼šä¸º nullï¼Œä»è€Œå¼•å‘æ„æ–™ä¹‹å¤–çš„ NPE</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">KotlinMode</span> &#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">parameter1</span> <span class="operator">=</span> <span class="string">&quot;leavesC&quot;</span>;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">final</span> String parameter2;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="type">String</span> <span class="variable">var1</span> <span class="operator">=</span> <span class="built_in">this</span>.parameter2;</span><br><span class="line">      System.out.println(var1);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="title function_">KotlinMode</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="type">String</span> <span class="variable">var1</span> <span class="operator">=</span> <span class="built_in">this</span>.parameter1;</span><br><span class="line">      System.out.println(var1);</span><br><span class="line">      <span class="built_in">this</span>.print();</span><br><span class="line">      <span class="built_in">this</span>.parameter2 = <span class="string">&quot;ä¸šå¿—é™ˆ&quot;</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥è¯´ï¼Œinit å—å’Œæˆå‘˜å˜é‡ä¹‹é—´çš„å£°æ˜é¡ºåºå†³å®šäº†åœ¨æ„é€ å‡½æ•°ä¸­çš„åˆå§‹åŒ–é¡ºåºï¼Œæˆ‘ä»¬åº”è¯¥å…ˆå£°æ˜æˆå‘˜å˜é‡å†å£°æ˜ init å—ï¼Œå¦åˆ™å°±æœ‰å¯èƒ½å¯¼è‡´ NPE</p>
<h1 id="Gson-data-class"><a href="#Gson-data-class" class="headerlink" title="Gson &amp; data class"></a>Gson &amp; data class</h1><p>æ¥çœ‹ä¸ªå°ä¾‹å­ï¼ŒçŒœçŒœå…¶è¿è¡Œç»“æœä¼šæ˜¯æ€æ ·çš„</p>
<p>UserBean æ˜¯ä¸€ä¸ª dataClassï¼Œå…¶ userName å­—æ®µè¢«å£°æ˜ä¸ºé null ç±»å‹ï¼Œè€Œ json å­—ç¬¦ä¸²ä¸­ userName å¯¹åº”çš„å€¼æ˜ç¡®å°±æ˜¯ nullï¼Œé‚£ç”¨ Gson åˆ°åº•èƒ½ä¸èƒ½ååºåˆ—åŒ–æˆåŠŸå‘¢ï¼Ÿç¨‹åºèƒ½ä¸èƒ½æˆåŠŸè¿è¡Œå®Œä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼Ÿ</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">data</span> <span class="keyword">class</span> <span class="title class_">UserBean</span>(<span class="keyword">val</span> userName: String, <span class="keyword">val</span> userAge: <span class="built_in">Int</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> json = <span class="string">&quot;&quot;&quot;&#123;&quot;userName&quot;:null,&quot;userAge&quot;:26&#125;&quot;&quot;&quot;</span>  </span><br><span class="line">    <span class="keyword">val</span> userBean = Gson().fromJson(json, UserBean::<span class="keyword">class</span>.java) <span class="comment">//ç¬¬ä¸€æ­¥</span></span><br><span class="line">    println(userBean) <span class="comment">//ç¬¬äºŒæ­¥</span></span><br><span class="line">    printMsg(userBean.userName) <span class="comment">//ç¬¬ä¸‰æ­¥</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">printMsg</span><span class="params">(msg: <span class="type">String</span>)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®é™…ä¸Šç¨‹åºèƒ½å¤Ÿæ­£å¸¸è¿è¡Œåˆ°ç¬¬äºŒæ­¥ï¼Œä½†åœ¨æ‰§è¡Œç¬¬ä¸‰æ­¥çš„æ—¶å€™åè€Œç›´æ¥æŠ¥ NPE å¼‚å¸¸äº†</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">UserBean(userName=<span class="literal">null</span>, userAge=<span class="number">26</span>)</span><br><span class="line">Exception <span class="keyword">in</span> thread <span class="string">&quot;main&quot;</span> java.lang.NullPointerException: Parameter specified <span class="keyword">as</span> non-<span class="literal">null</span> <span class="keyword">is</span> <span class="literal">null</span>: method temp.TestKt.printMsg, parameter msg</span><br><span class="line">	at temp.TestKt.printMsg(Test.kt)</span><br><span class="line">	at temp.TestKt.main(Test.kt:<span class="number">16</span>)</span><br><span class="line">	at temp.TestKt.main(Test.kt)</span><br></pre></td></tr></table></figure>

<p><code>printMsg</code> æ–¹æ³•æ¥æ”¶äº†å‚æ•°åå®é™…ä¸Šä»€ä¹ˆä¹Ÿæ²¡åšï¼Œä¸ºå•¥ä¼šæŠ›å‡º NPE ï¼Ÿ</p>
<p>å°†<code>printMsg</code>åç¼–è¯‘ä¸º Java æ–¹æ³•ï¼Œå¯ä»¥å‘ç°æ–¹æ³•å†…éƒ¨ä¼šå¯¹å…¥å‚è¿›è¡Œç©ºæ ¡éªŒï¼Œå½“å‘ç°ä¸º null æ—¶å°±ä¼šç›´æ¥æŠ›å‡º NPEã€‚è¿™ä¸ªæ¯”è¾ƒå¥½ç†è§£ï¼Œæ¯•ç«Ÿ Kotlin çš„ç±»å‹ç³»ç»Ÿä¼šä¸¥æ ¼åŒºåˆ† <strong>å¯ null</strong> å’Œ <strong>ä¸å¯ä¸º null</strong> ä¸¤ç§ç±»å‹ï¼Œå…¶åŒºåˆ†æ‰‹æ®µä¹‹ä¸€å°±æ˜¯ä¼šè‡ªåŠ¨åœ¨æˆ‘ä»¬çš„ä»£ç é‡Œæ’å…¥ä¸€äº›ç±»å‹æ ¡éªŒé€»è¾‘ï¼Œå³è‡ªåŠ¨åŠ ä¸Šäº†éç©ºæ–­è¨€ï¼Œå½“å‘ç°ä¸å¯ä¸º null çš„å‚æ•°ä¼ å…¥äº† null çš„è¯å°±ä¼šé©¬ä¸ŠæŠ›å‡º NPEï¼Œå³ä½¿æˆ‘ä»¬å¹¶æ²¡æœ‰ä½¿ç”¨åˆ°è¯¥å‚æ•°</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">printMsg</span><span class="params">(<span class="meta">@NotNull</span> String msg)</span> &#123;</span><br><span class="line">	Intrinsics.checkNotNullParameter(msg, <span class="string">&quot;msg&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‚£æ—¢ç„¶ UserBean ä¸­çš„ userName å­—æ®µå·²ç»è¢«å£°æ˜ä¸ºé null ç±»å‹äº†ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜å¯ä»¥ååºåˆ—åŒ–æˆåŠŸå‘¢ï¼ŸæŒ‰ç…§æˆ‘è‡ªå·±çš„ç¬¬ä¸€ç›´è§‰ï¼Œåº”è¯¥åœ¨è¿›è¡Œååºåˆ—çš„æ—¶å€™å°±ç›´æ¥æŠ›å‡ºå¼‚å¸¸æ‰å¯¹</p>
<p>å°† UserBean åç¼–è¯‘ä¸º Java ä»£ç åï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°å…¶æ„é€ å‡½æ•°ä¸­æ˜¯æœ‰å¯¹ userName è¿›è¡Œ null æ£€æŸ¥çš„ï¼Œå½“å‘ç°ä¸º null çš„è¯ä¼šç›´æ¥æŠ›å‡º NPE</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">UserBean</span> &#123;</span><br><span class="line">   <span class="meta">@NotNull</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">final</span> String userName;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> userAge;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@NotNull</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">final</span> String <span class="title function_">getUserName</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.userName;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">getUserAge</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.userAge;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="title function_">UserBean</span><span class="params">(<span class="meta">@NotNull</span> String userName, <span class="type">int</span> userAge)</span> &#123;</span><br><span class="line">      <span class="comment">//è¿›è¡Œ null æ£€æŸ¥</span></span><br><span class="line">      Intrinsics.checkNotNullParameter(userName, <span class="string">&quot;userName&quot;</span>);</span><br><span class="line">      <span class="built_in">super</span>();</span><br><span class="line">      <span class="built_in">this</span>.userName = userName;</span><br><span class="line">      <span class="built_in">this</span>.userAge = userAge;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   Â·Â·Â·</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‚£ Gson æ˜¯æ€ä¹ˆç»•è¿‡ Kotlin çš„ null æ£€æŸ¥çš„å‘¢ï¼Ÿ</p>
<p>å…¶å®ï¼Œé€šè¿‡æŸ¥çœ‹ Gson å†…éƒ¨æºç ï¼Œå¯ä»¥çŸ¥é“ Gson æ˜¯é€šè¿‡ Unsafe åŒ…æ¥å®ä¾‹åŒ– UserBean å¯¹è±¡çš„ï¼ŒUnsafe æä¾›äº†ä¸€ä¸ªéå¸¸è§„å®ä¾‹åŒ–å¯¹è±¡çš„æ–¹æ³•ï¼š<code>allocateInstance</code>ï¼Œè¯¥æ–¹æ³•æä¾›äº†é€šè¿‡ Class å¯¹è±¡å°±å¯ä»¥åˆ›å»ºå‡ºç›¸åº”å®ä¾‹çš„åŠŸèƒ½ï¼Œè€Œä¸”ä¸éœ€è¦è°ƒç”¨å…¶æ„é€ å‡½æ•°ã€åˆå§‹åŒ–ä»£ç ã€JVM å®‰å…¨æ£€æŸ¥ç­‰ï¼Œå³ä½¿æ„é€ å‡½æ•°æ˜¯ private çš„ä¹Ÿèƒ½é€šè¿‡æ­¤æ–¹æ³•è¿›è¡Œå®ä¾‹åŒ–ã€‚å› æ­¤ Gson å®é™…ä¸Šå¹¶ä¸ä¼šè°ƒç”¨åˆ° UserBean çš„æ„é€ å‡½æ•°ï¼Œç›¸å½“äºç»•è¿‡äº† Kotlin çš„ null æ£€æŸ¥ï¼Œæ‰€ä»¥å³ä½¿ userName å€¼ä¸º null æœ€ç»ˆä¹Ÿèƒ½å¤Ÿååºåˆ—åŒ–æˆåŠŸ</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/af135d36b80341e68befd0c0bbe091ce~tplv-k3u1fbpfcp-watermark.image"></p>
<p>æ­¤é—®é¢˜çš„å‡ºç°åœºæ™¯å¤§å¤šæ˜¯åœ¨ç§»åŠ¨ç«¯è§£ææœåŠ¡ç«¯ä¼ æ¥çš„æ•°æ®çš„æ—¶å€™ï¼Œç§»åŠ¨ç«¯å°†æ•°æ®å£°æ˜ä¸ºéç©ºç±»å‹ï¼Œä½†æœåŠ¡ç«¯ç»™è¿‡æ¥çš„æ•°æ®å´ä¸º null å€¼ï¼Œæ­¤æ—¶ç”¨æˆ·çœ‹åˆ°çš„å¯èƒ½å°±æ˜¯åº”ç”¨å´©æºƒäº†â€¦â€¦</p>
<p>ä¸€æ–¹é¢ï¼Œæˆ‘è§‰å¾—ç§»åŠ¨ç«¯åº”è¯¥å¯¹æœåŠ¡ç«¯ä¼ æ¥çš„æ•°æ®ä¿æŒä¸ä¿¡ä»»çš„æ€åº¦ï¼Œä¸èƒ½è§‰å¾—å¯¹æ–¹ä¼ æ¥çš„æ•°æ®å°±ä¸€å®šæ˜¯ç¬¦åˆçº¦å®šçš„ï¼Œä¸ºäº†ä¿è¯å®‰å…¨éœ€è¦å°†æ•°æ®å‡å£°æ˜ä¸ºå¯ç©ºç±»å‹ã€‚å¦ä¸€æ–¹é¢ï¼Œè¿™ä¹Ÿæ— ç–‘å¯¼è‡´ç§»åŠ¨ç«¯éœ€è¦åŠ ä¸Šå¾ˆå¤šå¤šä½™çš„åˆ¤ç©ºæ“ä½œï¼Œç®€ç›´æœ‰ç‚¹æ— è§£ &#x3D;_&#x3D;</p>
<h1 id="ARouter-JvmField"><a href="#ARouter-JvmField" class="headerlink" title="ARouter &amp; JvmField"></a>ARouter &amp; JvmField</h1><p>åœ¨ Java ä¸­ï¼Œå­—æ®µå’Œå…¶è®¿é—®å™¨çš„ç»„åˆè¢«ç§°ä½œå±æ€§ã€‚åœ¨ Kotlin ä¸­ï¼Œå±æ€§æ˜¯å¤´ç­‰çš„è¯­è¨€ç‰¹æ€§ï¼Œå®Œå…¨æ›¿ä»£äº†å­—æ®µå’Œè®¿é—®å™¨æ–¹æ³•ã€‚åœ¨ç±»ä¸­å£°æ˜ä¸€ä¸ªå±æ€§å’Œå£°æ˜ä¸€ä¸ªå˜é‡ä¸€æ ·æ˜¯ä½¿ç”¨ val å’Œ var å…³é”®å­—ï¼Œä¸¤è€…åœ¨ä½¿ç”¨ä¸Šçš„å·®å¼‚å°±åœ¨äºèµ‹å€¼åæ˜¯å¦è¿˜å…è®¸ä¿®æ”¹ï¼Œåœ¨å­—èŠ‚ç ä¸Šçš„å·®å¼‚æ€§ä¹‹ä¸€å°±åœ¨äºæ˜¯å¦ä¼šè‡ªåŠ¨ç”Ÿæˆç›¸åº”çš„ <code>setValue</code> æ–¹æ³•</p>
<p>ä¾‹å¦‚ï¼Œä»¥ä¸‹çš„ Kotlin ä»£ç åœ¨åç¼–è¯‘ä¸º Java ä»£ç åï¼Œå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªå±æ€§çš„å¯è§æ€§éƒ½å˜ä¸ºäº† privateï¼Œ name å˜é‡ä¼šåŒæ—¶åŒ…å«æœ‰<code>getValue</code>å’Œ<code>setValue</code> æ–¹æ³•ï¼Œè€Œ nickname å˜é‡åªæœ‰ <code>getValue</code> æ–¹æ³•ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬åœ¨ Java ä»£ç ä¸­åªèƒ½ä»¥ <code>kotlinMode.getName()</code> çš„æ–¹å¼æ¥è®¿é—® name å˜é‡çš„åŸå› </p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">KotlinMode</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">&quot;ä¸šå¿—é™ˆ&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> nickname = <span class="string">&quot;leavesC&quot;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">KotlinMode</span> &#123;</span><br><span class="line">   <span class="meta">@NotNull</span></span><br><span class="line">   <span class="keyword">private</span> <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;ä¸šå¿—é™ˆ&quot;</span>;</span><br><span class="line">   <span class="meta">@NotNull</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">nickname</span> <span class="operator">=</span> <span class="string">&quot;leavesC&quot;</span>;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@NotNull</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">final</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(<span class="meta">@NotNull</span> String var1)</span> &#123;</span><br><span class="line">      Intrinsics.checkNotNullParameter(var1, <span class="string">&quot;&lt;set-?&gt;&quot;</span>);</span><br><span class="line">      <span class="built_in">this</span>.name = var1;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@NotNull</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">final</span> String <span class="title function_">getNickname</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.nickname;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸ºäº†ä¸è®© Kotlin çš„ var &#x2F; val å˜é‡è‡ªåŠ¨ç”Ÿæˆ <code>getValue</code> æˆ– <code>setValue</code> æ–¹æ³•ï¼Œè¾¾åˆ°å’Œåœ¨ Java ä»£ç ä¸­å£°æ˜å…¬å¼€å˜é‡ä¸€æ ·çš„æ•ˆæœï¼Œæ­¤æ—¶å°±éœ€è¦ä¸ºå±æ€§æ·»åŠ  <code>@JvmField</code> æ³¨è§£äº†ï¼Œæ·»åŠ åå°±ä¼šå˜ä¸º public ç±»å‹çš„æˆå‘˜å˜é‡ï¼Œä¸”ä¸åŒ…å«ä»»ä½• <code>getValue</code> å’Œ <code>setValue</code> æ–¹æ³•</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">KotlinMode</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@JvmField</span></span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">&quot;ä¸šå¿—é™ˆ&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@JvmField</span></span><br><span class="line">    <span class="keyword">val</span> nickname = <span class="string">&quot;leavesC&quot;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">KotlinMode</span> &#123;</span><br><span class="line">   <span class="meta">@JvmField</span></span><br><span class="line">   <span class="meta">@NotNull</span></span><br><span class="line">   <span class="keyword">public</span> String name = <span class="string">&quot;ä¸šå¿—é™ˆ&quot;</span>;</span><br><span class="line">   <span class="meta">@JvmField</span></span><br><span class="line">   <span class="meta">@NotNull</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">final</span> String nickname = <span class="string">&quot;leavesC&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p><code>@JvmField</code> çš„ä¸€ä¸ªä½¿ç”¨åœºæ™¯å°±æ˜¯åœ¨é…å¥—ä½¿ç”¨ ARouter çš„æ—¶å€™ã€‚æˆ‘ä»¬åœ¨ä½¿ç”¨ ARouter è¿›è¡Œå‚æ•°è‡ªåŠ¨æ³¨å…¥æ—¶ï¼Œå°±éœ€è¦ä¸ºå¾…æ³¨å…¥çš„å‚æ•°æ·»åŠ  <code>@JvmField</code>æ³¨è§£ï¼Œå°±åƒä»¥ä¸‹ä»£ç ä¸€æ ·ï¼Œä¸æ·»åŠ çš„è¯å°±ä¼šå¯¼è‡´ç¼–è¯‘å¤±è´¥</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Route(path = RoutePath.USER_HOME)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserHomeActivity</span> : <span class="type">AppCompatActivity</span>() &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired(name = RoutePath.USER_HOME_PARAMETER_ID)</span></span><br><span class="line">    <span class="meta">@JvmField</span></span><br><span class="line">    <span class="keyword">var</span> userId: <span class="built_in">Long</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">        setContentView(R.layout.activity_user_home)</span><br><span class="line">        ARouter.getInstance().inject(<span class="keyword">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‚£ä¸ºä»€ä¹ˆä¸æ·»åŠ è¯¥æ³¨è§£å°±ä¼šå¯¼è‡´ç¼–è¯‘å¤±è´¥å‘¢ï¼Ÿ</p>
<p>å…¶å®ï¼ŒARouter å®ç°å‚æ•°è‡ªåŠ¨æ³¨å…¥æ˜¯éœ€è¦ä¾é æ³¨è§£å¤„ç†å™¨ç”Ÿæˆçš„è¾…åŠ©æ–‡ä»¶æ¥å®ç°çš„ï¼Œå³ä¼šç”Ÿæˆä»¥ä¸‹çš„è¾…åŠ©ä»£ç ï¼Œå½“ä¸­ä¼šä»¥ <code>substitute.userId</code> ã€<code>substitute.userName</code>çš„å½¢å¼æ¥è°ƒç”¨ Activity ä¸­çš„ä¸¤ä¸ªå‚æ•°å€¼ï¼Œå¦‚æœä¸æ·»åŠ  <code>@JvmField</code>æ³¨è§£ï¼Œè¾…åŠ©æ–‡ä»¶å°±æ²¡æ³•ä»¥ç›´æ¥è°ƒç”¨å˜é‡åçš„æ–¹å¼æ¥å®Œæˆæ³¨å…¥ï¼Œè‡ªç„¶å°±ä¼šå¯¼è‡´ç¼–è¯‘å¤±è´¥äº†</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserHomeActivity</span>$$<span class="title">ARouter</span>$$<span class="title">Autowired</span> <span class="title">implements</span> <span class="title">ISyringe</span> &#123;</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">private</span> SerializationService serializationService;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> void inject(Object target) &#123;</span><br><span class="line">    serializationService = ARouter.getInstance().navigation(SerializationService.<span class="keyword">class</span>);</span><br><span class="line">    UserHomeActivity substitute = (UserHomeActivity)target;</span><br><span class="line">    substitute.userId = substitute.getIntent().getLongExtra(<span class="string">&quot;userHomeId&quot;</span>, substitute.userId);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Kotlin è¿™å¥—ä¸ºå±æ€§è‡ªåŠ¨ç”Ÿæˆ <code>getValue</code>å’Œ<code>setValue</code> æ–¹æ³•çš„æœºåˆ¶æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯å¯èƒ½ä¼šå¯¼è‡´æ–¹æ³•æ•°æé€Ÿè†¨èƒ€ï¼Œä½¿å¾— Android App çš„ dex æ–‡ä»¶å¾ˆå¿«å°±è¾¾åˆ°æœ€å¤§æ–¹æ³•æ•°é™åˆ¶ï¼Œä¸å¾—ä¸è¿›è¡Œåˆ†åŒ…å¤„ç†</p>
<h1 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h1><ul>
<li><p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6908391430977224718">Gson å’Œ Kotlin data class çš„é¿å‘æŒ‡å—</a></p>
<p>æ›´åŠ è¯¦ç»†åœ°ä»‹ç»äº† Gson å’Œ Kotlin data class åœ¨é…å¥—ä½¿ç”¨æ—¶å¯èƒ½å‡ºç°çš„å‘ï¼Œå€¼å¾—ä¸€çœ‹ ï¼ï¼ï¼</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6880602489297895438">ä¸¤ä¸‡å…­åƒå­—å¸¦ä½  Kotlin å…¥é—¨</a></p>
<p>è¯»è€…æ˜¯å¦è¿˜æœªå¼€å§‹å­¦ä¹  Kotlin å‘¢ï¼Ÿæˆ–è€…æ˜¯å¯¹ Kotlin è¿˜äº†è§£å¾—ä¸å¤Ÿæ¸…æ¥šå‘¢ï¼Ÿå¦‚æœæ˜¯çš„è¯ï¼Œæ¨èé˜…è¯»æˆ‘çš„ä¸€ç¯‡ Kotlin å…¥é—¨æ•™ç¨‹ï¼Œå…¨æ–‡ä¸¤ä¸‡å…­åƒå¤šå­—ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ å­¦ä¼š Kotlin ï¼ï¼ï¼</p>
</li>
</ul>

  </article>
  <!-- tag -->
  <div class="mt-12 pt-6 border-t border-gray-200">
    
  </div>
  <!-- prev and next -->
  <div class="flex justify-between mt-12 pt-6 border-t border-gray-200">
    <div>
      
        <a href="/hexo-blog/public/2025/03/02/md/kotlin/%E4%B8%BB%E6%B5%81%E5%BC%80%E6%BA%90%E5%BA%93%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%EF%BC%8812%EF%BC%89OkHttp%20&%20Retrofit%20%E5%BC%80%E5%8F%91%E8%B0%83%E8%AF%95%E5%88%A9%E5%99%A8/" class="text-sm text-gray-400 hover:text-gray-500 flex justify-center">
          <iconify-icon width="20" icon="ri:arrow-left-s-line" data-inline="false"></iconify-icon>
          ä¸»æµå¼€æºåº“æºç åˆ†æï¼ˆ12ï¼‰OkHttp & Retrofit å¼€å‘è°ƒè¯•åˆ©å™¨
        </a>
      
    </div>
    <div>
      
        <a href="/hexo-blog/public/2025/03/02/md/kotlin/%E4%B8%80%E6%96%87%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%20Gson/" class="text-sm text-gray-400 hover:text-gray-500 flex justify-center">
          ä¸€æ–‡å¿«é€Ÿå…¥é—¨ Gson
          <iconify-icon width="20" icon="ri:arrow-right-s-line" data-inline="false"></iconify-icon>
        </a>
      
    </div>
  </div>
  <!-- comment -->
  <div class="article-comments mt-12">
    
<script
  src="https://giscus.app/client.js"
  data-repo="hqqich/giscus"
  data-repo-id="R_kgDOOCZUBA"
  data-category="General"
  data-category-id="DIC_kwDOOCZUBM4Cng1l"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="bottom"
  data-theme="preferred_color_scheme"
  data-lang="zh-CN"
  crossorigin="anonymous"
  async
></script>
<script>
  window.onload = function () {
    console.log("giscus loaded");
    const isDark = document.documentElement.classList.contains("dark");
    const giscusFrame = document.querySelector("iframe.giscus-frame");
    giscusFrame.contentWindow.postMessage(
      {
        giscus: {
          setConfig: {
            theme: isDark ? "dark" : "light",
          },
        },
      },
      "https://giscus.app"
    );
  };
</script>


  </div>
</section>
<!-- js inspect -->

<script src="/hexo-blog/public/lib/clipboard.min.js"></script>


<script async src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "HTML-CSS": {
        preferredFont: "TeX",
        availableFonts: ["STIX","TeX"],
        linebreaks: { automatic:true },
        EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
        inlineMath: [ ["$", "$"], ["\\(","\\)"] ],
        processEscapes: true,
        ignoreClass: "tex2jax_ignore|dno",
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
        equationNumbers: { autoNumber: "AMS" },
        noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
        Macros: { href: "{}" }
    },
    messageStyle: "none"
  });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>



<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>
  $(document).ready(() => {
    const maraidConfig = {
      theme: "default",
      logLevel: 3,
      flowchart: { curve: "linear" },
      gantt: { axisFormat: "%m/%d/%Y" },
      sequence: { actorMargin: 50 },
    };
    mermaid.initialize(maraidConfig);
  });
</script>



<script src="/hexo-blog/public/lib/fancybox/fancybox.umd.min.js"></script>

<script>
  $(document).ready(() => {
    $('.post-content').each(function(i){
      $(this).find('img').each(function(){
        if ($(this).parent().hasClass('fancybox') || $(this).parent().is('a')) return;
        var alt = this.alt;
        if (alt) $(this).after('<span class="fancybox-alt">' + alt + '</span>');
        $(this).wrap('<a class="fancybox-img" href="' + this.src + '" data-fancybox=\"gallery\" data-caption="' + alt + '"></a>')
      });
      $(this).find('.fancybox').each(function(){
        $(this).attr('rel', 'article' + i);
      });
    });

    Fancybox.bind('[data-fancybox="gallery"]', {
        // options
    })
  })
</script>

<!-- tocbot begin -->

<script src="/hexo-blog/public/lib/tocbot/tocbot.min.js"></script>

<script>
  $(document).ready(() => {
      tocbot.init({
        // Where to render the table of contents.
        tocSelector: '.post-toc',
        // Where to grab the headings to build the table of contents.
        contentSelector: '.post-content',
        // Which headings to grab inside of the contentSelector element.
        headingSelector: 'h1, h2, h3',
        // For headings inside relative or absolute positioned containers within content.
        hasInnerContainers: true,
    });
  })
</script>
<!-- tocbot end -->


  </main>
  <footer class="flex flex-col h-40 items-center justify-center text-gray-400 text-sm">
  <!-- busuanzi -->
  
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!-- Busuanzi Analytics -->
<div class="flex items-center gap-2">
  <span>Visitors</span>
  <span id="busuanzi_value_site_uv"></span>
  <span>Page Views</span>
  <span id="busuanzi_value_site_pv"></span>
</div>
<!-- End Busuanzi Analytics -->


  <!-- copyright -->
  <div class="flex items-center gap-2">
    <a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" style="color: inherit;">CC BY-NC-SA 4.0</a>
    <span>Â© 2022</span>
    <iconify-icon width="18" icon="emojione-monotone:maple-leaf" ></iconify-icon>
    <a href="https://github.com/xbmlz" target="_blank" rel="noopener noreferrer">xbmlz</a>
  </div>
  <!-- powered by -->
  <div class="flex items-center gap-2">
    <span>Powered by</span>
    <a href="https://hexo.io/" target="_blank" rel="noopener noreferrer">Hexo</a>
    <span>&</span>
    <a href="https://github.com/xbmlz/hexo-theme-maple" target="_blank" rel="noopener noreferrer">Maple</a>
  </div>

</footer>

  <div class="back-to-top box-border fixed right-6 z-1024 -bottom-20 rounded py-1 px-1 bg-slate-900 opacity-60 text-white cursor-pointer text-center dark:bg-slate-600">
    <span class="flex justify-center items-center text-sm">
      <iconify-icon width="18" icon="ion:arrow-up-c" id="go-top"></iconify-icon>
      <span id="scrollpercent"><span>0</span> %</span>
    </span>
  </div>
  
<script src="/hexo-blog/public/js/main.js"></script>


  <script>
    $(document).ready(function () {
      const mapleCount = "10";
      const speed = "0.5";
      const mapleEl = document.getElementById("maple");
      const maples = Array.from({ length: mapleCount }).map(() => {
        const maple = document.createElement("div");
        const scale = Math.random() * 0.5 + 0.5;
        const offset = Math.random() * 2 - 1;
        const x = Math.random() * mapleEl.clientWidth;
        const y = -Math.random() * mapleEl.clientHeight;
        const duration = 10 / speed;
        const delay = -duration;
        maple.className = "maple";
        maple.style.width = `${24 * scale}px`;
        maple.style.height = `${24 * scale}px`;
        maple.style.left = `${x}px`;
        maple.style.top = `${y}px`;
        maple.style.setProperty("--maple-fall-offset", offset);
        maple.style.setProperty("--maple-fall-height", `${Math.abs(y) + mapleEl.clientHeight}px`);
        maple.style.animation = `fall ${duration}s linear infinite`;
        maple.style.animationDelay = `${delay}s`;
        mapleEl.appendChild(maple)
        return maple
      })
    });
  </script>
  


  <div class="fixed top-0 bottom-0 left-0 right-0 pointer-events-none print:hidden" id="maple"></div>
</body>

</html>
