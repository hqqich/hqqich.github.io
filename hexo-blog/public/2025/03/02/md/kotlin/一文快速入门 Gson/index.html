<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EHXM4GYP5W"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-EHXM4GYP5W');
</script>
<!-- End Google Analytics -->



<!-- Baidu Analytics -->
<script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?0a6515fb9c839d6a56d4cfd8b7d243d4";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>
<!-- End Baidu Analytics -->


<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

  <meta name="author" content="hqqich">


  <meta name="subtitle" content="å¿™ç¢ŒæŠŠæ—¶å…‰ç¼©çŸ­, è‹¦éš¾æŠŠå²æœˆæ‹‰é•¿">




<title>ä¸€æ–‡å¿«é€Ÿå…¥é—¨ Gson | Hexo-blog</title>



<link rel="icon" href="/hexo-blog/public/favicon.ico">



<link rel="stylesheet" href="/hexo-blog/public/css/main.css">


<link rel="stylesheet" href="/hexo-blog/public/lib/nprogress/nprogress.css">



<script src="/hexo-blog/public/lib/jquery.min.js"></script>


<script src="/hexo-blog/public/lib/iconify-icon.min.js"></script>


<script src="https://cdn.tailwindcss.com?plugins=typography"></script>
<script>
  tailwind.config = {
    darkMode: "class",
  };
</script>


<script src="/hexo-blog/public/lib/nprogress/nprogress.js"></script>

<script>
  $(document).ready(() => {
    NProgress.configure({
      showSpinner: false,
    });
    NProgress.start();
    $("#nprogress .bar").css({
      background: "#de7441",
    });
    $("#nprogress .peg").css({
      "box-shadow": "0 0 2px #de7441, 0 0 4px #de7441",
    });
    $("#nprogress .spinner-icon").css({
      "border-top-color": "#de7441",
      "border-left-color": "#de7441",
    });
    setTimeout(function () {
      NProgress.done();
      $(".fade").removeClass("out");
    }, 800);
  });
</script>

<script>
  (function () {
    const prefersDark =
      window.matchMedia &&
      window.matchMedia("(prefers-color-scheme: dark)").matches;
    const setting = localStorage.getItem("hexo-color-scheme") || "auto";
    if (setting === "dark" || (prefersDark && setting !== "light"))
      document.documentElement.classList.toggle("dark", true);
    let isDark = document.documentElement.classList.contains("dark");
  })();

  $(document).ready(function () {
    // init icon
    const prefersDark =
      window.matchMedia &&
      window.matchMedia("(prefers-color-scheme: dark)").matches;
    const isDark = document.documentElement.classList.contains("dark");
    $("#theme-icon").attr("icon", isDark ? "ri:moon-line" : "ri:sun-line");

    function toggleGiscusTheme() {
      const isDark = document.documentElement.classList.contains("dark");
      const giscusFrame = document.querySelector("iframe.giscus-frame");
      if (giscusFrame) {
        giscusFrame.contentWindow.postMessage(
          {
            giscus: {
              setConfig: {
                theme: isDark ? "dark" : "light",
              },
            },
          },
          "https://giscus.app"
        );
      }
    }

    // toggle dark mode
    function toggleDark() {
      let isDark = document.documentElement.classList.contains("dark");
      const setting = localStorage.getItem("hexo-color-scheme") || "auto";
      isDark = !isDark;
      document.documentElement.classList.toggle("dark", isDark);
      $("#theme-icon").attr("icon", isDark ? "ri:moon-line" : "ri:sun-line");
      if (prefersDark === isDark) {
        localStorage.setItem("hexo-color-scheme", "auto");
      } else {
        localStorage.setItem("hexo-color-scheme", isDark ? "dark" : "light");
      }
      toggleGiscusTheme();
    }

    // listen dark mode change
    window
      .matchMedia("(prefers-color-scheme: dark)")
      .addEventListener("change", (e) => {
        const setting = localStorage.getItem("hexo-color-scheme") || "auto";
        if (setting === "auto") {
          document.documentElement.classList.toggle("dark", e.matches);
          $("#theme-icon").attr(
            "icon",
            e.matches ? "ri:moon-line" : "ri:sun-line"
          );
          toggleGiscusTheme();
        }
      });

    $("#toggle-dark").click((event) => {
      const isAppearanceTransition = document.startViewTransition && !window.matchMedia('(prefers-reduced-motion: reduce)').matches
      if (!isAppearanceTransition) {
        toggleDark()
        return
      }
      const x = event.clientX
      const y = event.clientY
      const endRadius = Math.hypot(
        Math.max(x, innerWidth - x),
        Math.max(y, innerHeight - y),
      )
      const transition = document.startViewTransition(async () => {
        toggleDark()
      })

      transition.ready
        .then(() => {
          const isDark = document.documentElement.classList.contains("dark")
          const clipPath = [
            `circle(0px at ${x}px ${y}px)`,
            `circle(${endRadius}px at ${x}px ${y}px)`,
          ]
          document.documentElement.animate(
            {
              clipPath: isDark
                ? [...clipPath].reverse()
                : clipPath,
            },
            {
              duration: 400,
              easing: 'ease-out',
              pseudoElement: isDark
                ? '::view-transition-old(root)'
                : '::view-transition-new(root)',
            },
          )
        })
    });
  });
</script>




<meta name="generator" content="Hexo 7.3.0"></head>
<body class="font-sans bg-white dark:bg-zinc-900 text-gray-700 dark:text-gray-200 relative">
  <header class="fixed w-full px-5 py-1 z-10 backdrop-blur-xl backdrop-saturate-150 border-b border-black/5">
  <div class="max-auto">
    <nav class="flex items-center text-base">
      <a href="/hexo-blog/public/" class="group">
        <h2 class="font-medium tracking-tighterp text-l p-2">
          <img class="w-5 mr-2 inline-block transition-transform group-hover:rotate-[30deg]" id="logo" src="https://moe-counter-vercel-gamma.vercel.app/a?theme=rule34" alt="Hexo-blog" />
          Hexo-blog
        </h2>
      </a>
      <div id="header-title" class="opacity-0 md:ml-2 md:mt-[0.1rem] text-xs font-medium whitespace-nowrap overflow-hidden overflow-ellipsis">
        ä¸€æ–‡å¿«é€Ÿå…¥é—¨ Gson
      </div>
      <div class="flex-1"></div>
      <div class="flex items-center gap-3">
        
          <a class="hidden sm:flex" href="/hexo-blog/public/archives">Posts</a>
        
          <a class="hidden sm:flex" href="/hexo-blog/public/category">Categories</a>
        
          <a class="hidden sm:flex" href="/hexo-blog/public/tag">Tags</a>
        
        
          
            <a class="w-5 h-5 hidden sm:flex" title="Github" target="_blank" rel="noopener" href="https://github.com/hqqich">
              <iconify-icon width="20" icon="ri:github-line"></iconify-icon>
            </a>
          
        
        <a class="w-5 h-5 hidden sm:flex" title="Github" href="rss2.xml">
          <iconify-icon width="20" icon="ri:rss-line"></iconify-icon>
        </a>
        <a class="w-5 h-5" title="toggle theme" id="toggle-dark">
          <iconify-icon width="20" icon="" id="theme-icon"></iconify-icon>
        </a>
      </div>
      <div class="flex items-center justify-center gap-3 ml-3 sm:hidden">
        <span class="w-5 h-5" aria-hidden="true" role="img" id="open-menu">
          <iconify-icon width="20" icon="carbon:menu" ></iconify-icon>
        </span>
        <span class="w-5 h-5 hidden" aria-hidden="true" role="img" id="close-menu">
          <iconify-icon  width="20" icon="carbon:close" ></iconify-icon>
        </span>
      </div>
    </nav>
  </div>
</header>
<div id="menu-panel" class="h-0 overflow-hidden sm:hidden fixed left-0 right-0 top-12 bottom-0 z-10">
  <div id="menu-content" class="relative z-20 bg-white/80 px-6 sm:px-8 py-2 backdrop-blur-xl -translate-y-full transition-transform duration-300">
    <ul class="nav flex flex-col sm:flex-row text-sm font-medium">
      
        <li class="nav-portfolio sm:mx-2 border-b sm:border-0 border-black/5 last:border-0 hover:text-main">
          <a href="/hexo-blog/public/archives" class="flex h-12 sm:h-auto items-center">Posts</a>
        </li>
      
        <li class="nav-portfolio sm:mx-2 border-b sm:border-0 border-black/5 last:border-0 hover:text-main">
          <a href="/hexo-blog/public/category" class="flex h-12 sm:h-auto items-center">Categories</a>
        </li>
      
        <li class="nav-portfolio sm:mx-2 border-b sm:border-0 border-black/5 last:border-0 hover:text-main">
          <a href="/hexo-blog/public/tag" class="flex h-12 sm:h-auto items-center">Tags</a>
        </li>
      
    </ul>
  </div>
  <div class="mask bg-black/20 absolute inset-0"></div>
</div>

  <main class="pt-14">
    <!-- css -->

<link rel="stylesheet" href="/hexo-blog/public/lib/fancybox/fancybox.min.css">


<link rel="stylesheet" href="/hexo-blog/public/lib/tocbot/tocbot.min.css">

<!-- toc -->

  <!-- tocbot -->
<nav class="post-toc toc text-sm w-48 relative top-32 right-0 opacity-70 hidden lg:block" style="position: fixed !important;"></nav>


<section class="px-6 max-w-prose mx-auto md:px-0">
  <!-- header -->
  <header class="overflow-hidden pt-6 pb-6 md:pt-12">
    <div class="pt-4 md:pt-6">
      <h1 id="article-title" class="text-[2rem] font-bold leading-snug mb-4 md:mb-6 md:text-[2.6rem]">
        ä¸€æ–‡å¿«é€Ÿå…¥é—¨ Gson
      </h1>
      <div>
        <section class="flex items-center gap-3 text-sm">
          <span class="flex items-center gap-1">
            <iconify-icon width="18" icon="carbon-calendar" ></iconify-icon>
            <time>2025-03-02</time>
          </span>
          <span class="text-gray-400">Â·</span>
          <span class="flex items-center gap-1">
            <iconify-icon width="18" icon="ic:round-access-alarm" ></iconify-icon>
            <span>23 min</span>
          </span>
          <span class="text-gray-400">Â·</span>
          <span class="flex items-center gap-1">
            <iconify-icon width="18" icon="icon-park-outline:font-search" ></iconify-icon>
            <span>4.8k words</span>
          </span>
          
            <span class="text-gray-400">Â·</span>
            <span class="flex items-center gap-1">
              <iconify-icon width="16" icon="icon-park-outline:box" class="mr-2"></iconify-icon>
              <a class="article-category-link" href="/hexo-blog/public/categories/kotlin/">kotlin</a>
            </span>
          
        </section>
      </div>
    </div>
  </header>
  <!-- content -->
  <article class="post-content prose m-auto slide-enter-content dark:prose-invert">
    <blockquote>
<p>å…¬ä¼—å·ï¼š<a target="_blank" rel="noopener" href="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/adbc507fc3704fd8955aae739a433db2~tplv-k3u1fbpfcp-zoom-1.image">å­—èŠ‚æ•°ç»„</a></p>
<p>å¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ© ğŸ¤£ğŸ¤£</p>
</blockquote>
<p>Json æ˜¯ä¸€ç§æ–‡æœ¬å½¢å¼çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œæ¯” xml æ›´ä¸ºè½»é‡ã€‚Json çš„è§£æå’Œç”Ÿæˆçš„æ–¹å¼å¾ˆå¤šï¼Œåœ¨ Android å¹³å°ä¸Šæœ€å¸¸ç”¨çš„ç±»åº“æœ‰ Gson å’Œ FastJson ä¸¤ç§ï¼Œè¿™é‡Œè¦ä»‹ç»çš„æ˜¯ Gson</p>
<p>Gson çš„ GitHub ä¸»é¡µç‚¹å‡»è¿™é‡Œï¼š<a target="_blank" rel="noopener" href="https://github.com/google/gson">Gson</a></p>
<h1 id="ä¸€ã€åŸºæœ¬ç”¨æ³•"><a href="#ä¸€ã€åŸºæœ¬ç”¨æ³•" class="headerlink" title="ä¸€ã€åŸºæœ¬ç”¨æ³•"></a>ä¸€ã€åŸºæœ¬ç”¨æ³•</h1><h2 id="1ã€Gson-å¯¹è±¡"><a href="#1ã€Gson-å¯¹è±¡" class="headerlink" title="1ã€Gson å¯¹è±¡"></a>1ã€Gson å¯¹è±¡</h2><p>åœ¨è¿›è¡Œåºåˆ—åŒ–ä¸ååºåˆ—æ“ä½œå‰ï¼Œéœ€è¦å…ˆå®ä¾‹åŒ–ä¸€ä¸ª <code>com .google.gson.Gson</code> å¯¹è±¡ï¼Œè·å– Gson å¯¹è±¡çš„æ–¹æ³•æœ‰ä¸¤ç§</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é€šè¿‡æ„é€ å‡½æ•°æ¥è·å–</span></span><br><span class="line"><span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();</span><br><span class="line"><span class="comment">//é€šè¿‡ GsonBuilder æ¥è·å–ï¼Œå¯ä»¥è¿›è¡Œå¤šé¡¹ç‰¹æ®Šé…ç½®</span></span><br><span class="line"><span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GsonBuilder</span>().create();</span><br></pre></td></tr></table></figure>

<h2 id="2ã€ç”Ÿæˆ-Json"><a href="#2ã€ç”Ÿæˆ-Json" class="headerlink" title="2ã€ç”Ÿæˆ  Json"></a>2ã€ç”Ÿæˆ  Json</h2><p>åˆ©ç”¨ Gson å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ç”Ÿæˆ Json å­—ç¬¦ä¸²ï¼Œé€šè¿‡ä½¿ç”¨ <code>addProperty</code> çš„å››ä¸ªé‡è½½æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">JsonObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JsonObject</span>();</span><br><span class="line">    jsonObject.addProperty(<span class="string">&quot;String&quot;</span>, <span class="string">&quot;leavesC&quot;</span>);</span><br><span class="line">    jsonObject.addProperty(<span class="string">&quot;Number_Integer&quot;</span>, <span class="number">23</span>);</span><br><span class="line">    jsonObject.addProperty(<span class="string">&quot;Number_Double&quot;</span>, <span class="number">22.9</span>);</span><br><span class="line">    jsonObject.addProperty(<span class="string">&quot;Boolean&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">    jsonObject.addProperty(<span class="string">&quot;Char&quot;</span>, <span class="string">&#x27;c&#x27;</span>);</span><br><span class="line">    System.out.println();</span><br><span class="line">    System.out.println(jsonObject);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/86dce58efe1b406db415b9ed6cbbe40b~tplv-k3u1fbpfcp-zoom-1.image"></p>
<p><code>addProperty</code> æ–¹æ³•åº•å±‚è°ƒç”¨çš„æ˜¯ <code>add(String property, JsonElement value)</code> æ–¹æ³•ï¼Œå³å°†åŸºæœ¬æ•°æ®ç±»å‹è½¬åŒ–ä¸ºäº† <strong>JsonElement</strong> å¯¹è±¡ï¼ŒJsonElement æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œè€Œ <strong>JsonObject</strong> ç»§æ‰¿äº† JsonElement ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡ JsonObject è‡ªå·±æ¥æ„å»ºä¸€ä¸ª JsonElement </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">JsonObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JsonObject</span>();</span><br><span class="line">    jsonObject.addProperty(<span class="string">&quot;String&quot;</span>, <span class="string">&quot;leavesC&quot;</span>);</span><br><span class="line">    jsonObject.addProperty(<span class="string">&quot;Number&quot;</span>, <span class="number">23</span>);</span><br><span class="line">    jsonObject.addProperty(<span class="string">&quot;Number&quot;</span>, <span class="number">22.9</span>);</span><br><span class="line">    jsonObject.addProperty(<span class="string">&quot;Boolean&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">    jsonObject.addProperty(<span class="string">&quot;Char&quot;</span>, <span class="string">&#x27;c&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">JsonObject</span> <span class="variable">jsonElement</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JsonObject</span>();</span><br><span class="line">    jsonElement.addProperty(<span class="string">&quot;Boolean&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">    jsonElement.addProperty(<span class="string">&quot;Double&quot;</span>, <span class="number">25.9</span>);</span><br><span class="line">    jsonElement.addProperty(<span class="string">&quot;Char&quot;</span>, <span class="string">&#x27;c&#x27;</span>);</span><br><span class="line">    jsonObject.add(<span class="string">&quot;JsonElement&quot;</span>, jsonElement);</span><br><span class="line"></span><br><span class="line">    System.out.println();</span><br><span class="line">    System.out.println(jsonObject);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/41f93e3921b8496eaaf6860573be42c8~tplv-k3u1fbpfcp-zoom-1.image"></p>
<h2 id="3ã€Json-ä¸-Arrayã€List-çš„è½¬åŒ–"><a href="#3ã€Json-ä¸-Arrayã€List-çš„è½¬åŒ–" class="headerlink" title="3ã€Json ä¸ Arrayã€List çš„è½¬åŒ–"></a>3ã€Json ä¸ Arrayã€List çš„è½¬åŒ–</h2><p>Json æ•°ç»„ä¸å­—ç¬¦ä¸²æ•°ç»„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">//Jsonæ•°ç»„ è½¬ä¸º å­—ç¬¦ä¸²æ•°ç»„</span></span><br><span class="line">    <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();</span><br><span class="line">    <span class="type">String</span> <span class="variable">jsonArray</span> <span class="operator">=</span> <span class="string">&quot;[\&quot;https://github.com/leavesCZY\&quot;,\&quot;https://www.jianshu.com/u/9df45b87cfdf\&quot;,\&quot;Java\&quot;,\&quot;Kotlin\&quot;,\&quot;Git\&quot;,\&quot;GitHub\&quot;]&quot;</span>;</span><br><span class="line">    String[] strings = gson.fromJson(jsonArray, String[].class);</span><br><span class="line">    System.out.println(<span class="string">&quot;Jsonæ•°ç»„ è½¬ä¸º å­—ç¬¦ä¸²æ•°ç»„: &quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (String string : strings) &#123;</span><br><span class="line">        System.out.println(string);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å­—ç¬¦ä¸²æ•°ç»„ è½¬ä¸º Jsonæ•°ç»„</span></span><br><span class="line">    jsonArray = gson.toJson(jsonArray, <span class="keyword">new</span> <span class="title class_">TypeToken</span>&lt;String&gt;() &#123;</span><br><span class="line">    &#125;.getType());</span><br><span class="line">    System.out.println(<span class="string">&quot;\nå­—ç¬¦ä¸²æ•°ç»„ è½¬ä¸º Jsonæ•°ç»„: &quot;</span>);</span><br><span class="line">    System.out.println(jsonArray);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eff362e498f84aa09b3e61eaa77a11a6~tplv-k3u1fbpfcp-zoom-1.image"></p>
<p>Json æ•°ç»„ ä¸ List</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">//Jsonæ•°ç»„ è½¬ä¸º List</span></span><br><span class="line">    <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();</span><br><span class="line">    <span class="type">String</span> <span class="variable">jsonArray</span> <span class="operator">=</span> <span class="string">&quot;[\&quot;https://github.com/leavesCZY\&quot;,\&quot;https://www.jianshu.com/u/9df45b87cfdf\&quot;,\&quot;Java\&quot;,\&quot;Kotlin\&quot;,\&quot;Git\&quot;,\&quot;GitHub\&quot;]&quot;</span>;</span><br><span class="line">    List&lt;String&gt; stringList = gson.fromJson(jsonArray, <span class="keyword">new</span> <span class="title class_">TypeToken</span>&lt;List&lt;String&gt;&gt;() &#123;</span><br><span class="line">    &#125;.getType());</span><br><span class="line">    System.out.println(<span class="string">&quot;\nJsonæ•°ç»„ è½¬ä¸º List: &quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (String string : stringList) &#123;</span><br><span class="line">        System.out.println(string);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//List è½¬ä¸º Jsonæ•°ç»„</span></span><br><span class="line">    jsonArray = gson.toJson(stringList, <span class="keyword">new</span> <span class="title class_">TypeToken</span>&lt;List&lt;String&gt;&gt;() &#123;</span><br><span class="line">    &#125;.getType());</span><br><span class="line">    System.out.println(<span class="string">&quot;\nList è½¬ä¸º Jsonæ•°ç»„: &quot;</span>);</span><br><span class="line">    System.out.println(jsonArray);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0ad6694864e94a739be74332b979523e~tplv-k3u1fbpfcp-zoom-1.image"></p>
<h2 id="4ã€åºåˆ—åŒ–ä¸ååºåˆ—åŒ–"><a href="#4ã€åºåˆ—åŒ–ä¸ååºåˆ—åŒ–" class="headerlink" title="4ã€åºåˆ—åŒ–ä¸ååºåˆ—åŒ–"></a>4ã€åºåˆ—åŒ–ä¸ååºåˆ—åŒ–</h2><p>Gson ä¹Ÿæä¾›äº† <code>toJson()</code> å’Œ <code>fromJson()</code> ä¸¤ä¸ªæ–¹æ³•ç”¨äºè½¬åŒ– Model ä¸ Jsonï¼Œå‰è€…å®ç°äº†åºåˆ—åŒ–ï¼Œåè€…å®ç°äº†ååºåˆ—åŒ–</p>
<p>é¦–å…ˆï¼Œå£°æ˜ä¸€ä¸ª User ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: leavesCZY</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2018/3/17 18:32</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Github</span>ï¼šhttps://github.com/leavesCZY</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> sex;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String name, <span class="type">int</span> age, <span class="type">boolean</span> sex)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, sex=&quot;</span> + sex +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åºåˆ—åŒ–çš„æ–¹æ³•å¾ˆç®€å•ï¼Œè°ƒç”¨ gson å¯¹è±¡çš„ toJson æ–¹æ³•ï¼Œä¼ å…¥è¦åºåˆ—åŒ–çš„å¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">//åºåˆ—åŒ–</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;leavesC&quot;</span>, <span class="number">24</span>, <span class="literal">true</span>);</span><br><span class="line">    <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();</span><br><span class="line">    System.out.println();</span><br><span class="line">    System.out.println(gson.toJson(user));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e192083ec56b4b38ba7634f4bb9e9ac5~tplv-k3u1fbpfcp-zoom-1.image"></p>
<p>ååºåŒ–çš„æ–¹å¼ä¹Ÿç±»ä¼¼</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">//ååºåˆ—åŒ–</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">userJson</span> <span class="operator">=</span> <span class="string">&quot;&#123;\&quot;name\&quot;:\&quot;leavesC\&quot;,\&quot;age\&quot;:24,\&quot;sex\&quot;:true&#125;&quot;</span>;</span><br><span class="line">    <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> gson.fromJson(userJson, User.class);</span><br><span class="line">    System.out.println();</span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="äºŒã€å±æ€§é‡å‘½å"><a href="#äºŒã€å±æ€§é‡å‘½å" class="headerlink" title="äºŒã€å±æ€§é‡å‘½å"></a>äºŒã€å±æ€§é‡å‘½å</h1><p>ç»§ç»­ä½¿ç”¨ä¸Šä¸€èŠ‚å£°æ˜çš„ User ç±»ï¼Œæ ¹æ® User ç±»å£°æ˜çš„å„ä¸ªå±æ€§åï¼Œç§»åŠ¨ç«¯çš„å¼€å‘è€…å¸Œæœ›æ¥å£è¿”å›çš„æ•°æ®æ ¼å¼å³æ˜¯å¦‚ä¸‹è¿™æ ·çš„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;leavesC&quot;</span>,<span class="string">&quot;age&quot;</span>:<span class="number">24</span>,<span class="string">&quot;sex&quot;</span>:<span class="literal">true</span>&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ²¡æœ‰å’ŒæœåŠ¡å™¨ç«¯æ²Ÿé€šå¥½æˆ–è€…æ˜¯ API æ”¹ç‰ˆäº†ï¼Œæ¥å£è¿”å›çš„æ•°æ®æ ¼å¼å¯èƒ½æ˜¯è¿™æ ·çš„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&quot;Name&quot;</span>:<span class="string">&quot;leavesC&quot;</span>,<span class="string">&quot;age&quot;</span>:<span class="number">24</span>,<span class="string">&quot;sex&quot;</span>:<span class="literal">true</span>&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&quot;userName&quot;</span>:<span class="string">&quot;leavesC&quot;</span>,<span class="string">&quot;age&quot;</span>:<span class="number">24</span>,<span class="string">&quot;sex&quot;</span>:<span class="literal">true</span>&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœç»§ç»­ä½¿ç”¨ä¸Šä¸€èŠ‚ä»‹ç»çš„æ–¹æ³•ï¼Œé‚£æ— ç–‘ä¼šè§£æå‡ºé”™</p>
<p>ä¾‹å¦‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">//ååºåˆ—åŒ–</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">userJson</span> <span class="operator">=</span> <span class="string">&quot;&#123;\&quot;userName\&quot;:\&quot;leavesC\&quot;,\&quot;age\&quot;:24,\&quot;sex\&quot;:true&#125;&quot;</span>;</span><br><span class="line">    <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> gson.fromJson(userJson, User.class);</span><br><span class="line">    System.out.println();</span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>name å±æ€§å€¼è§£æä¸åˆ°ï¼Œæ‰€ä»¥ä¸º null</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/71d1516941744b9d82932b1cb681aa2a~tplv-k3u1fbpfcp-zoom-1.image"></p>
<p>æ­¤æ—¶ä¸ºäº†å…¼é¡¾å¤šç§æ ¼å¼çš„æ•°æ®ï¼Œå°±éœ€è¦ä½¿ç”¨ <strong>SerializedName</strong> æ³¨è§£</p>
<p>æ ¹æ® SerializedName çš„å£°æ˜æ¥çœ‹ï¼ŒSerializedName åŒ…å«ä¸¤ä¸ªå±æ€§å€¼ï¼Œä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²ï¼Œä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²æ•°ç»„ï¼Œè€Œå­—ç¬¦ä¸²æ•°ç»„å«æœ‰é»˜è®¤å€¼</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.FIELD, ElementType.METHOD&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> SerializedName &#123;</span><br><span class="line">    String <span class="title function_">value</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    String[] alternate() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>SerializedName çš„ä½œç”¨æ˜¯ä¸ºäº†åœ¨åºåˆ—åŒ–æˆ–ååºåˆ—åŒ–æ—¶ï¼ŒæŒ‡å¯¼ Gson å¦‚æœå°†åŸæœ‰çš„å±æ€§åå’Œå…¶å®ƒç‰¹æ®Šæƒ…å†µä¸‹çš„å±æ€§åè”ç³»èµ·æ¥</p>
<p>ä¾‹å¦‚ï¼Œä¿®æ”¹ User ç±»ï¼Œä¸º name å£°æ˜ SerializedName æ³¨è§£ï¼Œæ³¨è§£å€¼ä¸º userName</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: leavesCZY</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2018/3/17 18:32</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Github</span>ï¼šhttps://github.com/leavesCZY</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SerializedName(&quot;userName&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> sex;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨åºåˆ—æ—¶ï¼ŒJson æ ¼å¼å°±ä¼šç›¸åº”æ”¹å˜</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">//åºåˆ—åŒ–</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;leavesC&quot;</span>, <span class="number">24</span>, <span class="literal">true</span>);</span><br><span class="line">    <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();</span><br><span class="line">    System.out.println();</span><br><span class="line">    System.out.println(gson.toJson(user));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3cdb00c69827421a845406668a66d9c6~tplv-k3u1fbpfcp-zoom-1.image"></p>
<p>åœ¨ååºåˆ—åŒ–æ—¶ä¹Ÿä¸€æ ·ï¼Œèƒ½å¤Ÿè§£æåˆ°æ­£ç¡®çš„å±æ€§å€¼</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">//ååºåˆ—åŒ–</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">userJson</span> <span class="operator">=</span> <span class="string">&quot;&#123;\&quot;userName\&quot;:\&quot;leavesC\&quot;,\&quot;age\&quot;:24,\&quot;sex\&quot;:true&#125;&quot;</span>;</span><br><span class="line">    <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> gson.fromJson(userJson, User.class);</span><br><span class="line">    System.out.println();</span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a22237127f4d424485f7dc05d1fc6b63~tplv-k3u1fbpfcp-zoom-1.image"></p>
<p>è¿˜æœ‰ä¸ªé—®é¢˜æ²¡è§£å†³ï¼Œä¸ºäº†åº”å¯¹å¤šç§å±æ€§åä¸ä¸€è‡´çš„æƒ…å†µï¼Œéš¾é“æˆ‘ä»¬è¦å£°æ˜å¤šä¸ª User ç±»å—ï¼Ÿè¿™æ˜¾ç„¶æ˜¯ä¸ç°å®çš„ï¼Œæ‰€ä»¥è¿˜éœ€è¦ä¸º User ç±»è®¾ç½®å¤šä¸ªå¤‡é€‰å±æ€§åï¼Œè¿™å°±éœ€è¦ç”¨åˆ° SerializedName æ³¨è§£çš„å¦ä¸€ä¸ªå±æ€§å€¼ <strong>alternate</strong> äº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: leavesCZY</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2018/3/17 18:32</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Github</span>ï¼šhttps://github.com/leavesCZY</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SerializedName(value = &quot;userName&quot;, alternate = &#123;&quot;user_name&quot;, &quot;Name&quot;&#125;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> sex;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹å‡ ç§æƒ…å†µéƒ½èƒ½å¤Ÿè¢«æ­£ç¡®çš„ååºåˆ—åŒ–</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">//ååºåˆ—åŒ–</span></span><br><span class="line">    <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();</span><br><span class="line">    <span class="type">String</span> <span class="variable">userJson</span> <span class="operator">=</span> <span class="string">&quot;&#123;\&quot;userName\&quot;:\&quot;leavesC\&quot;,\&quot;age\&quot;:24,\&quot;sex\&quot;:true&#125;&quot;</span>;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> gson.fromJson(userJson, User.class);</span><br><span class="line">    System.out.println();</span><br><span class="line">    System.out.println(user);</span><br><span class="line"></span><br><span class="line">    userJson = <span class="string">&quot;&#123;\&quot;user_name\&quot;:\&quot;leavesC\&quot;,\&quot;age\&quot;:24,\&quot;sex\&quot;:true&#125;&quot;</span>;</span><br><span class="line">    user = gson.fromJson(userJson, User.class);</span><br><span class="line">    System.out.println();</span><br><span class="line">    System.out.println(user);</span><br><span class="line"></span><br><span class="line">    userJson = <span class="string">&quot;&#123;\&quot;Name\&quot;:\&quot;leavesC\&quot;,\&quot;age\&quot;:24,\&quot;sex\&quot;:true&#125;&quot;</span>;</span><br><span class="line">    user = gson.fromJson(userJson, User.class);</span><br><span class="line">    System.out.println();</span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7a265bd984754066abad2a908280fa5b~tplv-k3u1fbpfcp-zoom-1.image"></p>
<h1 id="ä¸‰ã€å­—æ®µè¿‡æ»¤"><a href="#ä¸‰ã€å­—æ®µè¿‡æ»¤" class="headerlink" title="ä¸‰ã€å­—æ®µè¿‡æ»¤"></a>ä¸‰ã€å­—æ®µè¿‡æ»¤</h1><p>æœ‰æ—¶å€™å¹¶ä¸æ˜¯æ‰€æœ‰çš„å­—æ®µéƒ½éœ€è¦è¿›è¡Œç³»åˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œå› æ­¤éœ€è¦å¯¹æŸäº›å­—æ®µè¿›è¡Œæ’é™¤ï¼Œæœ‰å››ç§æ–¹æ³•å¯ä»¥æ¥å®ç°è¿™ç§éœ€æ±‚ã€‚</p>
<h2 id="1ã€åŸºäº-Exposeæ³¨è§£"><a href="#1ã€åŸºäº-Exposeæ³¨è§£" class="headerlink" title="1ã€åŸºäº@Exposeæ³¨è§£"></a>1ã€åŸºäº@Exposeæ³¨è§£</h2><p>Expose æ³¨è§£åŒ…å«ä¸¤ä¸ªå±æ€§å€¼ï¼Œä¸”å‡å£°æ˜äº†é»˜è®¤å€¼ã€‚Expose çš„å«ä¹‰å³ä¸ºâ€œæš´éœ²â€ï¼Œå³ç”¨äºå¯¹å¤–æš´éœ²å­—æ®µï¼Œserialize ç”¨äºæŒ‡å®šæ˜¯å¦è¿›è¡Œåºåˆ—åŒ–ï¼Œdeserialize ç”¨äºæŒ‡å®šæ˜¯å¦è¿›è¡Œååºåˆ—åŒ–ã€‚å¦‚æœå­—æ®µä¸å£°æ˜ Expose æ³¨è§£ï¼Œåˆ™æ„å‘³ç€ä¸è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–æ“ä½œï¼Œç›¸å½“äºä¸¤ä¸ªå±æ€§å€¼å‡ä¸º false ã€‚æ­¤å¤–ï¼ŒExpose æ³¨è§£éœ€è¦å’Œ GsonBuilder æ„å»ºçš„ Gson å¯¹è±¡ä¸€èµ·ä½¿ç”¨æ‰èƒ½ç”Ÿæ•ˆ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.FIELD&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Expose &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">serialize</span><span class="params">()</span> <span class="keyword">default</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">deserialize</span><span class="params">()</span> <span class="keyword">default</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Expose æ³¨è§£çš„æ³¨è§£å€¼å£°æ˜æƒ…å†µæœ‰å››ç§</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Expose(serialize = true, deserialize = true)</span>   <span class="comment">//åºåˆ—åŒ–å’Œååºåˆ—åŒ–éƒ½ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="meta">@Expose(serialize = false, deserialize = true)</span>  <span class="comment">//åºåˆ—åŒ–æ—¶ä¸ç”Ÿæ•ˆï¼Œååºåˆ—åŒ–æ—¶ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="meta">@Expose(serialize = true, deserialize = false)</span>  <span class="comment">//åºåˆ—åŒ–æ—¶ç”Ÿæ•ˆï¼Œååºåˆ—åŒ–æ—¶ä¸ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="meta">@Expose(serialize = false, deserialize = false)</span> <span class="comment">//åºåˆ—åŒ–å’Œååºåˆ—åŒ–éƒ½ä¸ç”Ÿæ•ˆï¼Œå’Œä¸å†™æ³¨è§£ä¸€æ ·</span></span><br></pre></td></tr></table></figure>

<p>ç°åœ¨æ¥çœ‹ä¸ªä¾‹å­ï¼Œä¿®æ”¹ User ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: leavesCZY</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2018/3/17 18:32</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Github</span>ï¼šhttps://github.com/leavesCZY</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Expose(serialize = true, deserialize = true)</span>   <span class="comment">//åºåˆ—åŒ–å’Œååºåˆ—åŒ–éƒ½ç”Ÿæ•ˆ</span></span><br><span class="line">    <span class="keyword">private</span> String a;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Expose(serialize = false, deserialize = true)</span>  <span class="comment">//åºåˆ—åŒ–æ—¶ä¸ç”Ÿæ•ˆï¼Œååºåˆ—åŒ–æ—¶ç”Ÿæ•ˆ</span></span><br><span class="line">    <span class="keyword">private</span> String b;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Expose(serialize = true, deserialize = false)</span>  <span class="comment">//åºåˆ—åŒ–æ—¶ç”Ÿæ•ˆï¼Œååºåˆ—åŒ–æ—¶ä¸ç”Ÿæ•ˆ</span></span><br><span class="line">    <span class="keyword">private</span> String c;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Expose(serialize = false, deserialize = false)</span> <span class="comment">//åºåˆ—åŒ–å’Œååºåˆ—åŒ–éƒ½ä¸ç”Ÿæ•ˆï¼Œå’Œä¸å†™æ³¨è§£ä¸€æ ·</span></span><br><span class="line">    <span class="keyword">private</span> String d;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String e;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String a, String b, String c, String d, String e)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.a = a;</span><br><span class="line">        <span class="built_in">this</span>.b = b;</span><br><span class="line">        <span class="built_in">this</span>.c = c;</span><br><span class="line">        <span class="built_in">this</span>.d = d;</span><br><span class="line">        <span class="built_in">this</span>.e = e;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;a=&#x27;&quot;</span> + a + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, b=&#x27;&quot;</span> + b + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, c=&#x27;&quot;</span> + c + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, d=&#x27;&quot;</span> + d + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, e=&#x27;&quot;</span> + e + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æŒ‰ç…§å¦‚ä¸Šçš„æ³¨è§£å€¼ï¼Œåªæœ‰å£°æ˜äº† Expose æ³¨è§£ä¸” serialize å€¼ä¸º true çš„å­—æ®µæ‰èƒ½è¢«åºåˆ—åŒ–ï¼Œåªæœ‰å£°æ˜äº† Expose æ³¨è§£ä¸” deserialize å€¼ä¸º true çš„å­—æ®µæ‰èƒ½è¢«ååºåˆ—åŒ–</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GsonBuilder</span>().excludeFieldsWithoutExposeAnnotation().create();</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>, <span class="string">&quot;D&quot;</span>, <span class="string">&quot;E&quot;</span>);</span><br><span class="line">    System.out.println();</span><br><span class="line">    System.out.println(gson.toJson(user));</span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> <span class="string">&quot;&#123;\&quot;a\&quot;:\&quot;A\&quot;,\&quot;b\&quot;:\&quot;B\&quot;,\&quot;c\&quot;:\&quot;C\&quot;,\&quot;d\&quot;:\&quot;D\&quot;,\&quot;e\&quot;:\&quot;E\&quot;&#125;&quot;</span>;</span><br><span class="line">    user = gson.fromJson(json, User.class);</span><br><span class="line">    System.out.println();</span><br><span class="line">    System.out.println(user.toString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1db89d97907f42be91eab1637c1bcb22~tplv-k3u1fbpfcp-zoom-1.image"></p>
<h2 id="2ã€åŸºäºç‰ˆæœ¬"><a href="#2ã€åŸºäºç‰ˆæœ¬" class="headerlink" title="2ã€åŸºäºç‰ˆæœ¬"></a>2ã€åŸºäºç‰ˆæœ¬</h2><p>Gson æä¾›äº† @Since å’Œ @Until ä¸¤ä¸ªæ³¨è§£åŸºäºç‰ˆæœ¬å¯¹å­—æ®µè¿›è¡Œè¿‡æ»¤ï¼Œ@Since å’Œ @Until éƒ½åŒ…å«ä¸€ä¸ª Double å±æ€§å€¼ï¼Œç”¨äºè®¾ç½®ç‰ˆæœ¬å·ã€‚Since çš„æ„æ€æ˜¯â€œè‡ªâ€¦â€¦å¼€å§‹â€ï¼ŒUntil çš„æ„æ€æ˜¯â€œåˆ°â€¦â€¦ä¸ºæ­¢â€ï¼Œä¸€æ ·è¦å’Œ GsonBuilder é…åˆä½¿ç”¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.FIELD, ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Since &#123;</span><br><span class="line">    <span class="type">double</span> <span class="title function_">value</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.FIELD, ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Until &#123;</span><br><span class="line">    <span class="type">double</span> <span class="title function_">value</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“ç‰ˆæœ¬( GsonBuilder è®¾ç½®çš„ç‰ˆæœ¬) å¤§äºæˆ–ç­‰äº Since å±æ€§å€¼æˆ–å°äº Until å±æ€§å€¼æ—¶å­—æ®µä¼šè¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–æ“ä½œï¼Œè€Œæ²¡æœ‰å£°æ˜æ³¨è§£çš„å­—æ®µéƒ½ä¼šåŠ å…¥åºåˆ—åŒ–å’Œååºåˆ—æ“ä½œ</p>
<p>ç°åœ¨æ¥çœ‹ä¸ªä¾‹å­ï¼Œä¿®æ”¹ User ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: leavesCZY</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2018/3/17 18:32</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Github</span>ï¼šhttps://github.com/leavesCZY</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Since(1.4)</span></span><br><span class="line">    <span class="keyword">private</span> String a;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Since(1.6)</span></span><br><span class="line">    <span class="keyword">private</span> String b;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Since(1.8)</span></span><br><span class="line">    <span class="keyword">private</span> String c;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Until(1.6)</span></span><br><span class="line">    <span class="keyword">private</span> String d;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Until(2.0)</span></span><br><span class="line">    <span class="keyword">private</span> String e;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String a, String b, String c, String d, String e)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.a = a;</span><br><span class="line">        <span class="built_in">this</span>.b = b;</span><br><span class="line">        <span class="built_in">this</span>.c = c;</span><br><span class="line">        <span class="built_in">this</span>.d = d;</span><br><span class="line">        <span class="built_in">this</span>.e = e;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;a=&#x27;&quot;</span> + a + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, b=&#x27;&quot;</span> + b + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, c=&#x27;&quot;</span> + c + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, d=&#x27;&quot;</span> + d + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, e=&#x27;&quot;</span> + e + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GsonBuilder</span>().setVersion(<span class="number">1.6</span>).create();</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>, <span class="string">&quot;D&quot;</span>, <span class="string">&quot;E&quot;</span>);</span><br><span class="line">    System.out.println();</span><br><span class="line">    System.out.println(gson.toJson(user));</span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> <span class="string">&quot;&#123;\&quot;a\&quot;:\&quot;A\&quot;,\&quot;b\&quot;:\&quot;B\&quot;,\&quot;c\&quot;:\&quot;C\&quot;,\&quot;d\&quot;:\&quot;D\&quot;,\&quot;e\&quot;:\&quot;E\&quot;&#125;&quot;</span>;</span><br><span class="line">    user = gson.fromJson(json, User.class);</span><br><span class="line">    System.out.println();</span><br><span class="line">    System.out.println(user.toString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/750f3b022d2d46889bbdeba6be5fcb3d~tplv-k3u1fbpfcp-zoom-1.image"></p>
<h2 id="3ã€åŸºäºè®¿é—®ä¿®é¥°ç¬¦"><a href="#3ã€åŸºäºè®¿é—®ä¿®é¥°ç¬¦" class="headerlink" title="3ã€åŸºäºè®¿é—®ä¿®é¥°ç¬¦"></a>3ã€åŸºäºè®¿é—®ä¿®é¥°ç¬¦</h2><p>è®¿é—®ä¿®é¥°ç¬¦ç”± <strong>java.lang.reflect.Modifier</strong> æä¾› int ç±»å‹çš„å®šä¹‰ï¼Œè€Œ GsonBuilder å¯¹è±¡çš„ <code>excludeFieldsWithModifiers</code>æ–¹æ³•æ¥æ”¶ä¸€ä¸ª int ç±»å‹å¯å˜å‚æ•°ï¼ŒæŒ‡å®šä¸è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–æ“ä½œçš„è®¿é—®ä¿®é¥°ç¬¦å­—æ®µ</p>
<p>çœ‹ä¸ªä¾‹å­</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: leavesCZY</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2018/3/17 18:32</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Github</span>ï¼šhttps://github.com/leavesCZY</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ModifierSample</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">String</span> <span class="variable">publicField</span> <span class="operator">=</span> <span class="string">&quot;public&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">String</span> <span class="variable">protectedField</span> <span class="operator">=</span> <span class="string">&quot;protected&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">privateField</span> <span class="operator">=</span> <span class="string">&quot;private&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">defaultField</span> <span class="operator">=</span> <span class="string">&quot;default&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="type">String</span> <span class="variable">finalField</span> <span class="operator">=</span> <span class="string">&quot;final&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">String</span> <span class="variable">staticField</span> <span class="operator">=</span> <span class="string">&quot;static&quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GsonBuilder</span>().excludeFieldsWithModifiers(Modifier.PRIVATE, Modifier.STATIC).create();</span><br><span class="line">    <span class="type">ModifierSample</span> <span class="variable">modifierSample</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModifierSample</span>();</span><br><span class="line">    System.out.println(gson.toJson(modifierSample));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ba1e07967c374dda91f1e10691fb6ac3~tplv-k3u1fbpfcp-zoom-1.image"></p>
<h2 id="4ã€åŸºäºç­–ç•¥"><a href="#4ã€åŸºäºç­–ç•¥" class="headerlink" title="4ã€åŸºäºç­–ç•¥"></a>4ã€åŸºäºç­–ç•¥</h2><p>GsonBuilder ç±»åŒ…å« <code>setExclusionStrategies(ExclusionStrategy... strategies)</code>æ–¹æ³•ç”¨äºä¼ å…¥ä¸å®šé•¿å‚æ•°çš„ç­–ç•¥æ–¹æ³•ï¼Œç”¨äºç›´æ¥æ’é™¤æŒ‡å®šå­—æ®µåæˆ–è€…æŒ‡å®šå­—æ®µç±»å‹</p>
<p>çœ‹ä¸ªä¾‹å­</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: leavesCZY</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2018/3/17 18:32</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Github</span>ï¼šhttps://github.com/leavesCZY</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Strategies</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String stringField;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> intField;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> doubleField;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Strategies</span><span class="params">(String stringField, <span class="type">int</span> intField, <span class="type">double</span> doubleField)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.stringField = stringField;</span><br><span class="line">        <span class="built_in">this</span>.intField = intField;</span><br><span class="line">        <span class="built_in">this</span>.doubleField = doubleField;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Strategies&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;stringField=&#x27;&quot;</span> + stringField + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, intField=&quot;</span> + intField +</span><br><span class="line">                <span class="string">&quot;, doubleField=&quot;</span> + doubleField +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GsonBuilder</span>().setExclusionStrategies(<span class="keyword">new</span> <span class="title class_">ExclusionStrategy</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">shouldSkipField</span><span class="params">(FieldAttributes fieldAttributes)</span> &#123;</span><br><span class="line">                <span class="comment">//æ’é™¤æŒ‡å®šå­—æ®µå</span></span><br><span class="line">                <span class="keyword">return</span> fieldAttributes.getName().equals(<span class="string">&quot;intField&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">shouldSkipClass</span><span class="params">(Class&lt;?&gt; aClass)</span> &#123;</span><br><span class="line">                <span class="comment">//æ’é™¤æŒ‡å®šå­—æ®µç±»å‹</span></span><br><span class="line">                <span class="keyword">return</span> aClass.getName().equals(<span class="type">double</span>.class.getName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).create();</span><br><span class="line"></span><br><span class="line">        <span class="type">Strategies</span> <span class="variable">strategies</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Strategies</span>(<span class="string">&quot;stringField&quot;</span>, <span class="number">111</span>, <span class="number">11.22</span>);</span><br><span class="line">        System.out.println();</span><br><span class="line">        System.out.println(gson.toJson(strategies));</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> <span class="string">&quot;&#123;\&quot;stringField\&quot;:\&quot;stringField\&quot;,\&quot;intField\&quot;:111,\&quot;doubleField\&quot;:11.22&#125;&quot;</span>;</span><br><span class="line">        strategies = gson.fromJson(json, Strategies.class);</span><br><span class="line">        System.out.println();</span><br><span class="line">        System.out.println(strategies);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>å­—æ®µåä¸º â€œintFieldâ€ å’Œå­—æ®µç±»å‹ä¸º double çš„å­—æ®µéƒ½ä¼šè¢«æ’é™¤æ‰</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b5ede196fb3b49dc89d689b63856d043~tplv-k3u1fbpfcp-zoom-1.image"></p>
<p><code>setExclusionStrategies</code> æ–¹æ³•åœ¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ—¶éƒ½ä¼šç”Ÿæ•ˆï¼Œå¦‚æœåªæ˜¯æƒ³æŒ‡å®šå…¶ä¸­ä¸€ç§æƒ…å†µä¸‹çš„æ’é™¤ç­–ç•¥æˆ–åˆ†åˆ«æŒ‡å®šæ’é™¤ç­–ç•¥ï¼Œå¯ä»¥æ”¹ä¸ºä½¿ç”¨ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">addSerializationExclusionStrategy(ExclusionStrategy strategy);</span><br><span class="line"></span><br><span class="line">addDeserializationExclusionStrategy(ExclusionStrategy strategy);</span><br></pre></td></tr></table></figure>

<h1 id="å››ã€ä¸ªæ€§åŒ–é…ç½®"><a href="#å››ã€ä¸ªæ€§åŒ–é…ç½®" class="headerlink" title="å››ã€ä¸ªæ€§åŒ–é…ç½®"></a>å››ã€ä¸ªæ€§åŒ–é…ç½®</h1><h2 id="1ã€è¾“å‡º-null"><a href="#1ã€è¾“å‡º-null" class="headerlink" title="1ã€è¾“å‡º null"></a>1ã€è¾“å‡º null</h2><p>å¯¹äº Gson è€Œè¨€ï¼Œåœ¨åºåˆ—åŒ–æ—¶å¦‚æœæŸä¸ªå±æ€§å€¼ä¸º null çš„è¯ï¼Œé‚£ä¹ˆåœ¨åºåˆ—åŒ–æ—¶è¯¥å­—æ®µä¸ä¼šå‚ä¸è¿›æ¥ï¼Œå¦‚æœæƒ³è¦æ˜¾ç¤ºè¾“å‡ºè¯¥å­—æ®µçš„è¯ï¼Œå¯ä»¥é€šè¿‡ GsonBuilder è¿›è¡Œé…ç½®</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: leavesCZY</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2018/3/17 18:32</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Github</span>ï¼šhttps://github.com/leavesCZY</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Strategies</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String stringField;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> intField;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> doubleField;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">       <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GsonBuilder</span>()</span><br><span class="line">               .serializeNulls() <span class="comment">//è¾“å‡ºnull</span></span><br><span class="line">               .create();</span><br><span class="line">       <span class="type">Strategies</span> <span class="variable">strategies</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Strategies</span>(<span class="literal">null</span>, <span class="number">24</span>, <span class="number">22.333</span>);</span><br><span class="line">       System.out.println();</span><br><span class="line">       System.out.println(gson.toJson(strategies));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b0c33efba86344c6974cacebcee3470f~tplv-k3u1fbpfcp-zoom-1.image"></p>
<h2 id="2ã€æ ¼å¼åŒ–è¾“å‡ºJson"><a href="#2ã€æ ¼å¼åŒ–è¾“å‡ºJson" class="headerlink" title="2ã€æ ¼å¼åŒ–è¾“å‡ºJson"></a>2ã€æ ¼å¼åŒ–è¾“å‡ºJson</h2><p>é»˜è®¤çš„åºåˆ—åŒ–åçš„ Josn å­—ç¬¦ä¸²å¹¶ä¸å¤ªç›´è§‚ï¼Œå¯ä»¥é€‰æ‹©æ ¼å¼åŒ–è¾“å‡º</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GsonBuilder</span>()</span><br><span class="line">            .serializeNulls() <span class="comment">//è¾“å‡ºnull</span></span><br><span class="line">            .setPrettyPrinting()<span class="comment">//æ ¼å¼åŒ–è¾“å‡º</span></span><br><span class="line">            .create();</span><br><span class="line">    <span class="type">Strategies</span> <span class="variable">strategies</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Strategies</span>(<span class="literal">null</span>, <span class="number">24</span>, <span class="number">22.333</span>);</span><br><span class="line">    System.out.println();</span><br><span class="line">    System.out.println(gson.toJson(strategies));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c28fa45112934426a4b7eb1ecf16e70c~tplv-k3u1fbpfcp-zoom-1.image"></p>
<h2 id="3ã€æ ¼å¼åŒ–æ—¶é—´"><a href="#3ã€æ ¼å¼åŒ–æ—¶é—´" class="headerlink" title="3ã€æ ¼å¼åŒ–æ—¶é—´"></a>3ã€æ ¼å¼åŒ–æ—¶é—´</h2><p>Gson ä¹Ÿå¯ä»¥å¯¹æ—¶é—´å€¼è¿›è¡Œæ ¼å¼åŒ–</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: leavesCZY</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2018/3/17 18:32</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Github</span>ï¼šhttps://github.com/leavesCZY</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Strategies</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Date date;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Date date2;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Strategies</span><span class="params">(Date date, Date date2)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.date = date;</span><br><span class="line">        <span class="built_in">this</span>.date2 = date2;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">simpleDateFormat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss:SSS&quot;</span>, Locale.CHINA);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Strategies&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;date=&quot;</span> + simpleDateFormat.format(date) +</span><br><span class="line">                <span class="string">&quot;, date2=&quot;</span> + simpleDateFormat.format(date2) +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GsonBuilder</span>()</span><br><span class="line">                .setPrettyPrinting()<span class="comment">//æ ¼å¼åŒ–è¾“å‡º</span></span><br><span class="line">                .setDateFormat(<span class="string">&quot;yyyy-MM-dd HH:mm:ss:SSS&quot;</span>)<span class="comment">//æ ¼å¼åŒ–æ—¶é—´</span></span><br><span class="line">                .create();</span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">        <span class="type">Strategies</span> <span class="variable">strategies</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Strategies</span>(date, <span class="keyword">new</span> <span class="title class_">Date</span>(date.getTime() + <span class="number">1000000</span>));</span><br><span class="line">        System.out.println();</span><br><span class="line">        System.out.println(gson.toJson(strategies));</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> <span class="string">&quot;&#123;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;  \&quot;date\&quot;: \&quot;2018-03-17 19:38:50:033\&quot;,\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;  \&quot;date2\&quot;: \&quot;2018-03-17 19:55:30:033\&quot;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">        System.out.println();</span><br><span class="line">        System.out.println(gson.fromJson(json, Strategies.class));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/367f08a42e6244d3b539d8cfd8db7ecc~tplv-k3u1fbpfcp-zoom-1.image"></p>
<h1 id="äº”ã€TypeAdapter"><a href="#äº”ã€TypeAdapter" class="headerlink" title="äº”ã€TypeAdapter"></a>äº”ã€TypeAdapter</h1><p>TypeAdapter æ˜¯ä¸€ä¸ªæ³›å‹æŠ½è±¡ç±»ï¼Œç”¨äºæ¥ç®¡æŸç§ç±»å‹çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–è¿‡ç¨‹ï¼ŒåŒ…å«ä¸¤ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œåˆ†åˆ«ç”¨äºè‡ªå®šä¹‰åºåˆ—åŒ–å’Œååºåˆ—åŒ–è¿‡ç¨‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">write</span><span class="params">(JsonWriter var1, T var2)</span> <span class="keyword">throws</span> IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> T <span class="title function_">read</span><span class="params">(JsonReader var1)</span> <span class="keyword">throws</span> IOException;</span><br></pre></td></tr></table></figure>

<p>ä¸‹é¢çœ‹ä¸ªç®€å•çš„ä¾‹å­</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: leavesCZY</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2018/3/17 18:32</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Github</span>ï¼šhttps://github.com/leavesCZY</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> sex;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String name, <span class="type">int</span> age, <span class="type">boolean</span> sex)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, sex=&quot;</span> + sex +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®šä¹‰ TypeAdapter çš„å­ç±» UserTypeAdapter æ¥æ¥ç®¡ User ç±»çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–è¿‡ç¨‹</p>
<p>è¿™é‡Œè®¾å®šå½“ User ç±»åºåˆ—åŒ–æ—¶ Json ä¸­çš„Keyå€¼éƒ½æ˜¯å¤§å†™å­—æ¯å¼€å¤´ï¼Œååºåˆ—åŒ–æ—¶æ”¯æŒâ€œnameâ€å’Œâ€œNameâ€ä¸¤ç§ä¸åŒçš„ Json é£æ ¼</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserTypeAdapter</span> <span class="keyword">extends</span> <span class="title class_">TypeAdapter</span>&lt;User&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">write</span><span class="params">(JsonWriter jsonWriter, User user)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//æµå¼åºåˆ—åŒ–æˆå¯¹è±¡å¼€å§‹</span></span><br><span class="line">        jsonWriter.beginObject();</span><br><span class="line">        <span class="comment">//å°†Jsonçš„Keyå€¼éƒ½æŒ‡å®šä¸ºå¤§å†™å­—æ¯å¼€å¤´</span></span><br><span class="line">        jsonWriter.name(<span class="string">&quot;Name&quot;</span>).value(user.getName());</span><br><span class="line">        jsonWriter.name(<span class="string">&quot;Age&quot;</span>).value(user.getAge());</span><br><span class="line">        jsonWriter.name(<span class="string">&quot;Sex&quot;</span>).value(user.isSex());</span><br><span class="line">        <span class="comment">//æµå¼åºåˆ—åŒ–ç»“æŸ</span></span><br><span class="line">        jsonWriter.endObject();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">read</span><span class="params">(JsonReader jsonReader)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        <span class="comment">//æµå¼ååºåˆ—åŒ–å¼€å§‹</span></span><br><span class="line">        jsonReader.beginObject();</span><br><span class="line">        <span class="keyword">while</span> (jsonReader.hasNext()) &#123;</span><br><span class="line">            <span class="keyword">switch</span> (jsonReader.nextName()) &#123;</span><br><span class="line">                <span class="comment">//é¦–å­—æ¯å¤§å°å†™å‡åˆæ³•</span></span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;name&quot;</span>:</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;Name&quot;</span>:</span><br><span class="line">                    user.setName(jsonReader.nextString());</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;age&quot;</span>:</span><br><span class="line">                    user.setAge(jsonReader.nextInt());</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;sex&quot;</span>:</span><br><span class="line">                    user.setSex(jsonReader.nextBoolean());</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æµå¼ååºåˆ—åŒ–ç»“æŸ</span></span><br><span class="line">        jsonReader.endObject();</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GsonBuilder</span>().registerTypeAdapter(User.class, <span class="keyword">new</span> <span class="title class_">UserTypeAdapter</span>()).create();</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;leavesC&quot;</span>, <span class="number">24</span>, <span class="literal">true</span>);</span><br><span class="line">    System.out.println();</span><br><span class="line">    System.out.println(gson.toJson(user));</span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> <span class="string">&quot;&#123;\&quot;Name\&quot;:\&quot;leavesC\&quot;,\&quot;age\&quot;:24,\&quot;sex\&quot;:true&#125;&quot;</span>;</span><br><span class="line">    user = gson.fromJson(json, User.class);</span><br><span class="line">    System.out.println();</span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ° User ç±»æŒ‰ç…§é¢„å®šä¹‰çš„ç­–ç•¥æ¥å®Œæˆåºåˆ—åŒ–å’Œååºåˆ—åŒ–äº†</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/317d550269a64d46b747d68c64203f26~tplv-k3u1fbpfcp-zoom-1.image"></p>
<h1 id="å…­ã€JsonSerializer-å’Œ-JsonDeserializer"><a href="#å…­ã€JsonSerializer-å’Œ-JsonDeserializer" class="headerlink" title="å…­ã€JsonSerializer å’Œ JsonDeserializer"></a>å…­ã€JsonSerializer å’Œ JsonDeserializer</h1><p>TypeAdapter å°†åºåˆ—åŒ–å’Œååºåˆ—æ“ä½œéƒ½æ¥ç®¡äº†è¿‡æ¥ï¼Œå…¶å® Gson è¿˜æä¾›äº†åªæ¥ç®¡åºåˆ—åŒ–è¿‡ç¨‹çš„æ¥å£ï¼Œå³ JsonSerializer</p>
<p>çœ‹ä¸ªä¾‹å­</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GsonBuilder</span>().registerTypeAdapter(User.class, <span class="keyword">new</span> <span class="title class_">JsonSerializer</span>&lt;User&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> JsonElement <span class="title function_">serialize</span><span class="params">(User user, Type type, JsonSerializationContext jsonSerializationContext)</span> &#123;</span><br><span class="line">            <span class="type">JsonObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JsonObject</span>();</span><br><span class="line">            jsonObject.addProperty(<span class="string">&quot;NameHi&quot;</span>, user.getName());</span><br><span class="line">            jsonObject.addProperty(<span class="string">&quot;Sex&quot;</span>, user.isSex());</span><br><span class="line">            jsonObject.addProperty(<span class="string">&quot;Age&quot;</span>, user.getAge());</span><br><span class="line">            <span class="keyword">return</span> jsonObject;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).create();</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;leavesC&quot;</span>, <span class="number">24</span>, <span class="literal">true</span>);</span><br><span class="line">    System.out.println();</span><br><span class="line">    System.out.println(gson.toJson(user));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a1ec92160824423da39f6c0409e27a26~tplv-k3u1fbpfcp-zoom-1.image"></p>
<p>ç›¸å¯¹åº”çš„ï¼ŒJsonDeserializer æ¥å£æä¾›äº†ååºåˆ—åŒ–çš„æ¥å£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GsonBuilder</span>().registerTypeAdapter(User.class, <span class="keyword">new</span> <span class="title class_">JsonDeserializer</span>&lt;User&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> User <span class="title function_">deserialize</span><span class="params">(JsonElement jsonElement, Type type, JsonDeserializationContext jsonDeserializationContext)</span> <span class="keyword">throws</span> JsonParseException &#123;</span><br><span class="line">                <span class="type">JsonObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> jsonElement.getAsJsonObject();</span><br><span class="line">                <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">                <span class="comment">//åŒæ—¶æ”¯æŒ userName å’Œ name ä¸¤ç§æƒ…å†µ</span></span><br><span class="line">                <span class="keyword">if</span> (jsonObject.has(<span class="string">&quot;userName&quot;</span>)) &#123;</span><br><span class="line">                    name = jsonObject.get(<span class="string">&quot;userName&quot;</span>).getAsString();</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (jsonObject.has(<span class="string">&quot;name&quot;</span>)) &#123;</span><br><span class="line">                    name = jsonObject.get(<span class="string">&quot;name&quot;</span>).getAsString();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> jsonObject.get(<span class="string">&quot;age&quot;</span>).getAsInt();</span><br><span class="line">                <span class="type">boolean</span> <span class="variable">sex</span> <span class="operator">=</span> jsonObject.get(<span class="string">&quot;sex&quot;</span>).getAsBoolean();</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>(name, age, sex);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).create();</span><br><span class="line">        <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> <span class="string">&quot;&#123;\&quot;userName\&quot;:\&quot;leavesC\&quot;,\&quot;sex\&quot;:true,\&quot;age\&quot;:24&#125;&quot;</span>;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> gson.fromJson(json, User.class);</span><br><span class="line">        System.out.println();</span><br><span class="line">        System.out.println(user);</span><br><span class="line"></span><br><span class="line">        json = <span class="string">&quot;&#123;\&quot;name\&quot;:\&quot;leavesC\&quot;,\&quot;sex\&quot;:true,\&quot;age\&quot;:24&#125;&quot;</span>;</span><br><span class="line">        user = gson.fromJson(json, User.class);</span><br><span class="line">        System.out.println();</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b9adbf6fa0b94ee4b0f2a32e26925174~tplv-k3u1fbpfcp-zoom-1.image"></p>
<p>è¿™é‡Œæœ‰ä¸ªæ¯”è¾ƒéº»çƒ¦çš„åœ°æ–¹ï¼Œé‚£å°±æ˜¯åœ¨ä½¿ç”¨ <strong>TypeAdapter ã€JsonSerializer</strong> å’Œ <strong>JsonDeserializer</strong> æ—¶ï¼Œæ€»éœ€è¦è°ƒç”¨ <strong>registerTypeAdapter</strong> æ–¹æ³•è¿›è¡Œæ³¨å†Œï¼Œé‚£æœ‰æ²¡æœ‰æ›´ç®€å•çš„æ³¨å†Œæ–¹æ³•å‘¢ï¼Ÿ<br>æœ‰çš„ï¼ŒGosn è¿˜æä¾›äº†å¦ä¸€ä¸ªæ³¨è§£ <strong>@JsonAdapter</strong> ç”¨äºè¿›è¡Œç®€å•çš„å£°æ˜</p>
<p>ç±»ä¼¼äºè¿™æ ·ï¼Œå£°æ˜äº† User ç±»çš„åºåˆ—åŒ–æˆ–ååºåˆ—åŒ–æ“ä½œç”± UserTypeAdapter å®Œæˆï¼Œæ³¨è§£çš„ä¼˜å…ˆçº§é«˜äº <strong>registerTypeAdapter</strong> æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@JsonAdapter(UserTypeAdapter.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ä¸ƒã€TypeAdapterFactory"><a href="#ä¸ƒã€TypeAdapterFactory" class="headerlink" title="ä¸ƒã€TypeAdapterFactory"></a>ä¸ƒã€TypeAdapterFactory</h1><p>TypeAdapterFactory æ˜¯ç”¨äºåˆ›å»º TypeAdapter çš„å·¥å‚ç±»ï¼Œé€šè¿‡å‚æ•° TypeToken æ¥æŸ¥æ‰¾ç¡®å®šå¯¹åº”çš„ TypeAdapterï¼Œå¦‚æœæ²¡æœ‰å°±è¿”å› null å¹¶ç”± Gson é»˜è®¤çš„å¤„ç†æ–¹æ³•æ¥è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–æ“ä½œï¼Œå¦åˆ™å°±ç”±ç”¨æˆ·é¢„å®šä¹‰çš„ TypeAdapter æ¥è¿›è¡Œå¤„ç†</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GsonBuilder</span>().registerTypeAdapterFactory(<span class="keyword">new</span> <span class="title class_">TypeAdapterFactory</span>() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; TypeAdapter&lt;T&gt; <span class="title function_">create</span><span class="params">(Gson gson, TypeToken&lt;T&gt; typeToken)</span> &#123;</span><br><span class="line">        <span class="comment">//å¦‚æœ Gson éœ€è¦ä¸ User ç±»ç›¸å…³çš„ TypeAdapter ï¼Œåˆ™è¿”å›æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ TypeAdapter å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">if</span> (typeToken.getType().getTypeName().equals(User.class.getTypeName())) &#123;</span><br><span class="line">            <span class="keyword">return</span> (TypeAdapter&lt;T&gt;) <span class="keyword">new</span> <span class="title class_">UserTypeAdapter</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ‰¾ä¸åˆ°åˆ™è¿”å›null</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).create();</span><br></pre></td></tr></table></figure>


<h1 id="å…«ã€ç»“è¯­"><a href="#å…«ã€ç»“è¯­" class="headerlink" title="å…«ã€ç»“è¯­"></a>å…«ã€ç»“è¯­</h1><p>è¿™ä¸€ç¯‡æ–‡ç« å¥½åƒå†™å¾—å¤ªé•¿äº†ä¸€ç‚¹ï¼ŸGson çš„çŸ¥è¯†ç‚¹ä»‹ç»åˆ°è¿™é‡Œä¹Ÿå·®ä¸å¤šäº†ï¼Œä»¥åå¦‚æœè¿˜å‘ç°æ–°å†…å®¹çš„è¯æˆ‘ä¼šç»§ç»­è¡¥å……ï¼Œç°åœ¨å°±å…ˆè¿™æ ·å•¦</p>
<p>æˆ‘çš„ GitHubï¼š <a target="_blank" rel="noopener" href="https://github.com/leavesCZY">leavesC</a>  -&gt; <a target="_blank" rel="noopener" href="https://github.com/leavesCZY">https://github.com/leavesCZY</a></p>

  </article>
  <!-- tag -->
  <div class="mt-12 pt-6 border-t border-gray-200">
    
  </div>
  <!-- prev and next -->
  <div class="flex justify-between mt-12 pt-6 border-t border-gray-200">
    <div>
      
        <a href="/hexo-blog/public/2025/03/02/md/kotlin/%E6%8E%A2%E7%A9%B6%20Kotlin%20%E7%9A%84%E9%9A%90%E8%97%8F%E6%80%A7%E8%83%BD%E5%BC%80%E9%94%80%E4%B8%8E%E9%81%BF%E5%9D%91%E6%8C%87%E5%8D%97/" class="text-sm text-gray-400 hover:text-gray-500 flex justify-center">
          <iconify-icon width="20" icon="ri:arrow-left-s-line" data-inline="false"></iconify-icon>
          æ¢ç©¶ Kotlin çš„éšè—æ€§èƒ½å¼€é”€ä¸é¿å‘æŒ‡å—
        </a>
      
    </div>
    <div>
      
        <a href="/hexo-blog/public/2025/03/02/md/kotlin/%E4%B8%80%E6%96%87%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%20Kotlin%20%E5%8D%8F%E7%A8%8B/" class="text-sm text-gray-400 hover:text-gray-500 flex justify-center">
          ä¸€æ–‡å¿«é€Ÿå…¥é—¨ Kotlin åç¨‹
          <iconify-icon width="20" icon="ri:arrow-right-s-line" data-inline="false"></iconify-icon>
        </a>
      
    </div>
  </div>
  <!-- comment -->
  <div class="article-comments mt-12">
    
<script
  src="https://giscus.app/client.js"
  data-repo="hqqich/giscus"
  data-repo-id="R_kgDOOCZUBA"
  data-category="General"
  data-category-id="DIC_kwDOOCZUBM4Cng1l"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="bottom"
  data-theme="preferred_color_scheme"
  data-lang="zh-CN"
  crossorigin="anonymous"
  async
></script>
<script>
  window.onload = function () {
    console.log("giscus loaded");
    const isDark = document.documentElement.classList.contains("dark");
    const giscusFrame = document.querySelector("iframe.giscus-frame");
    giscusFrame.contentWindow.postMessage(
      {
        giscus: {
          setConfig: {
            theme: isDark ? "dark" : "light",
          },
        },
      },
      "https://giscus.app"
    );
  };
</script>


  </div>
</section>
<!-- js inspect -->

<script src="/hexo-blog/public/lib/clipboard.min.js"></script>


<script async src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "HTML-CSS": {
        preferredFont: "TeX",
        availableFonts: ["STIX","TeX"],
        linebreaks: { automatic:true },
        EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
        inlineMath: [ ["$", "$"], ["\\(","\\)"] ],
        processEscapes: true,
        ignoreClass: "tex2jax_ignore|dno",
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
        equationNumbers: { autoNumber: "AMS" },
        noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
        Macros: { href: "{}" }
    },
    messageStyle: "none"
  });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>



<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>
  $(document).ready(() => {
    const maraidConfig = {
      theme: "default",
      logLevel: 3,
      flowchart: { curve: "linear" },
      gantt: { axisFormat: "%m/%d/%Y" },
      sequence: { actorMargin: 50 },
    };
    mermaid.initialize(maraidConfig);
  });
</script>



<script src="/hexo-blog/public/lib/fancybox/fancybox.umd.min.js"></script>

<script>
  $(document).ready(() => {
    $('.post-content').each(function(i){
      $(this).find('img').each(function(){
        if ($(this).parent().hasClass('fancybox') || $(this).parent().is('a')) return;
        var alt = this.alt;
        if (alt) $(this).after('<span class="fancybox-alt">' + alt + '</span>');
        $(this).wrap('<a class="fancybox-img" href="' + this.src + '" data-fancybox=\"gallery\" data-caption="' + alt + '"></a>')
      });
      $(this).find('.fancybox').each(function(){
        $(this).attr('rel', 'article' + i);
      });
    });

    Fancybox.bind('[data-fancybox="gallery"]', {
        // options
    })
  })
</script>

<!-- tocbot begin -->

<script src="/hexo-blog/public/lib/tocbot/tocbot.min.js"></script>

<script>
  $(document).ready(() => {
      tocbot.init({
        // Where to render the table of contents.
        tocSelector: '.post-toc',
        // Where to grab the headings to build the table of contents.
        contentSelector: '.post-content',
        // Which headings to grab inside of the contentSelector element.
        headingSelector: 'h1, h2, h3',
        // For headings inside relative or absolute positioned containers within content.
        hasInnerContainers: true,
    });
  })
</script>
<!-- tocbot end -->


  </main>
  <footer class="flex flex-col h-40 items-center justify-center text-gray-400 text-sm">
  <!-- busuanzi -->
  
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!-- Busuanzi Analytics -->
<div class="flex items-center gap-2">
  <span>Visitors</span>
  <span id="busuanzi_value_site_uv"></span>
  <span>Page Views</span>
  <span id="busuanzi_value_site_pv"></span>
</div>
<!-- End Busuanzi Analytics -->


  <!-- copyright -->
  <div class="flex items-center gap-2">
    <a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" style="color: inherit;">CC BY-NC-SA 4.0</a>
    <span>Â© 2022</span>
    <iconify-icon width="18" icon="emojione-monotone:maple-leaf" ></iconify-icon>
    <a href="https://github.com/xbmlz" target="_blank" rel="noopener noreferrer">xbmlz</a>
  </div>
  <!-- powered by -->
  <div class="flex items-center gap-2">
    <span>Powered by</span>
    <a href="https://hexo.io/" target="_blank" rel="noopener noreferrer">Hexo</a>
    <span>&</span>
    <a href="https://github.com/xbmlz/hexo-theme-maple" target="_blank" rel="noopener noreferrer">Maple</a>
  </div>

</footer>

  <div class="back-to-top box-border fixed right-6 z-1024 -bottom-20 rounded py-1 px-1 bg-slate-900 opacity-60 text-white cursor-pointer text-center dark:bg-slate-600">
    <span class="flex justify-center items-center text-sm">
      <iconify-icon width="18" icon="ion:arrow-up-c" id="go-top"></iconify-icon>
      <span id="scrollpercent"><span>0</span> %</span>
    </span>
  </div>
  
<script src="/hexo-blog/public/js/main.js"></script>


  <script>
    $(document).ready(function () {
      const mapleCount = "10";
      const speed = "0.5";
      const mapleEl = document.getElementById("maple");
      const maples = Array.from({ length: mapleCount }).map(() => {
        const maple = document.createElement("div");
        const scale = Math.random() * 0.5 + 0.5;
        const offset = Math.random() * 2 - 1;
        const x = Math.random() * mapleEl.clientWidth;
        const y = -Math.random() * mapleEl.clientHeight;
        const duration = 10 / speed;
        const delay = -duration;
        maple.className = "maple";
        maple.style.width = `${24 * scale}px`;
        maple.style.height = `${24 * scale}px`;
        maple.style.left = `${x}px`;
        maple.style.top = `${y}px`;
        maple.style.setProperty("--maple-fall-offset", offset);
        maple.style.setProperty("--maple-fall-height", `${Math.abs(y) + mapleEl.clientHeight}px`);
        maple.style.animation = `fall ${duration}s linear infinite`;
        maple.style.animationDelay = `${delay}s`;
        mapleEl.appendChild(maple)
        return maple
      })
    });
  </script>
  


  <div class="fixed top-0 bottom-0 left-0 right-0 pointer-events-none print:hidden" id="maple"></div>
</body>

</html>
