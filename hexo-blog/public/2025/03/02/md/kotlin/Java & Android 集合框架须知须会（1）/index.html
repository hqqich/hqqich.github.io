<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EHXM4GYP5W"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-EHXM4GYP5W');
</script>
<!-- End Google Analytics -->



<!-- Baidu Analytics -->
<script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?0a6515fb9c839d6a56d4cfd8b7d243d4";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>
<!-- End Baidu Analytics -->


<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

  <meta name="author" content="hqqich">


  <meta name="subtitle" content="å¿™ç¢ŒæŠŠæ—¶å…‰ç¼©çŸ­, è‹¦éš¾æŠŠå²æœˆæ‹‰é•¿">




<title>Java &amp; Android é›†åˆæ¡†æ¶é¡»çŸ¥é¡»ä¼šï¼ˆ1ï¼‰ | Hexo-blog</title>



<link rel="icon" href="/hexo-blog/public/favicon.ico">



<link rel="stylesheet" href="/hexo-blog/public/css/main.css">


<link rel="stylesheet" href="/hexo-blog/public/lib/nprogress/nprogress.css">



<script src="/hexo-blog/public/lib/jquery.min.js"></script>


<script src="/hexo-blog/public/lib/iconify-icon.min.js"></script>


<script src="https://cdn.tailwindcss.com?plugins=typography"></script>
<script>
  tailwind.config = {
    darkMode: "class",
  };
</script>


<script src="/hexo-blog/public/lib/nprogress/nprogress.js"></script>

<script>
  $(document).ready(() => {
    NProgress.configure({
      showSpinner: false,
    });
    NProgress.start();
    $("#nprogress .bar").css({
      background: "#de7441",
    });
    $("#nprogress .peg").css({
      "box-shadow": "0 0 2px #de7441, 0 0 4px #de7441",
    });
    $("#nprogress .spinner-icon").css({
      "border-top-color": "#de7441",
      "border-left-color": "#de7441",
    });
    setTimeout(function () {
      NProgress.done();
      $(".fade").removeClass("out");
    }, 800);
  });
</script>

<script>
  (function () {
    const prefersDark =
      window.matchMedia &&
      window.matchMedia("(prefers-color-scheme: dark)").matches;
    const setting = localStorage.getItem("hexo-color-scheme") || "auto";
    if (setting === "dark" || (prefersDark && setting !== "light"))
      document.documentElement.classList.toggle("dark", true);
    let isDark = document.documentElement.classList.contains("dark");
  })();

  $(document).ready(function () {
    // init icon
    const prefersDark =
      window.matchMedia &&
      window.matchMedia("(prefers-color-scheme: dark)").matches;
    const isDark = document.documentElement.classList.contains("dark");
    $("#theme-icon").attr("icon", isDark ? "ri:moon-line" : "ri:sun-line");

    function toggleGiscusTheme() {
      const isDark = document.documentElement.classList.contains("dark");
      const giscusFrame = document.querySelector("iframe.giscus-frame");
      if (giscusFrame) {
        giscusFrame.contentWindow.postMessage(
          {
            giscus: {
              setConfig: {
                theme: isDark ? "dark" : "light",
              },
            },
          },
          "https://giscus.app"
        );
      }
    }

    // toggle dark mode
    function toggleDark() {
      let isDark = document.documentElement.classList.contains("dark");
      const setting = localStorage.getItem("hexo-color-scheme") || "auto";
      isDark = !isDark;
      document.documentElement.classList.toggle("dark", isDark);
      $("#theme-icon").attr("icon", isDark ? "ri:moon-line" : "ri:sun-line");
      if (prefersDark === isDark) {
        localStorage.setItem("hexo-color-scheme", "auto");
      } else {
        localStorage.setItem("hexo-color-scheme", isDark ? "dark" : "light");
      }
      toggleGiscusTheme();
    }

    // listen dark mode change
    window
      .matchMedia("(prefers-color-scheme: dark)")
      .addEventListener("change", (e) => {
        const setting = localStorage.getItem("hexo-color-scheme") || "auto";
        if (setting === "auto") {
          document.documentElement.classList.toggle("dark", e.matches);
          $("#theme-icon").attr(
            "icon",
            e.matches ? "ri:moon-line" : "ri:sun-line"
          );
          toggleGiscusTheme();
        }
      });

    $("#toggle-dark").click((event) => {
      const isAppearanceTransition = document.startViewTransition && !window.matchMedia('(prefers-reduced-motion: reduce)').matches
      if (!isAppearanceTransition) {
        toggleDark()
        return
      }
      const x = event.clientX
      const y = event.clientY
      const endRadius = Math.hypot(
        Math.max(x, innerWidth - x),
        Math.max(y, innerHeight - y),
      )
      const transition = document.startViewTransition(async () => {
        toggleDark()
      })

      transition.ready
        .then(() => {
          const isDark = document.documentElement.classList.contains("dark")
          const clipPath = [
            `circle(0px at ${x}px ${y}px)`,
            `circle(${endRadius}px at ${x}px ${y}px)`,
          ]
          document.documentElement.animate(
            {
              clipPath: isDark
                ? [...clipPath].reverse()
                : clipPath,
            },
            {
              duration: 400,
              easing: 'ease-out',
              pseudoElement: isDark
                ? '::view-transition-old(root)'
                : '::view-transition-new(root)',
            },
          )
        })
    });
  });
</script>




<meta name="generator" content="Hexo 7.3.0"></head>
<body class="font-sans bg-white dark:bg-zinc-900 text-gray-700 dark:text-gray-200 relative">
  <header class="fixed w-full px-5 py-1 z-10 backdrop-blur-xl backdrop-saturate-150 border-b border-black/5">
  <div class="max-auto">
    <nav class="flex items-center text-base">
      <a href="/hexo-blog/public/" class="group">
        <h2 class="font-medium tracking-tighterp text-l p-2">
          <img class="w-5 mr-2 inline-block transition-transform group-hover:rotate-[30deg]" id="logo" src="https://moe-counter-vercel-gamma.vercel.app/a?theme=rule34" alt="Hexo-blog" />
          Hexo-blog
        </h2>
      </a>
      <div id="header-title" class="opacity-0 md:ml-2 md:mt-[0.1rem] text-xs font-medium whitespace-nowrap overflow-hidden overflow-ellipsis">
        Java & Android é›†åˆæ¡†æ¶é¡»çŸ¥é¡»ä¼šï¼ˆ1ï¼‰
      </div>
      <div class="flex-1"></div>
      <div class="flex items-center gap-3">
        
          <a class="hidden sm:flex" href="/hexo-blog/public/archives">Posts</a>
        
          <a class="hidden sm:flex" href="/hexo-blog/public/category">Categories</a>
        
          <a class="hidden sm:flex" href="/hexo-blog/public/tag">Tags</a>
        
        
          
            <a class="w-5 h-5 hidden sm:flex" title="Github" target="_blank" rel="noopener" href="https://github.com/hqqich">
              <iconify-icon width="20" icon="ri:github-line"></iconify-icon>
            </a>
          
        
        <a class="w-5 h-5 hidden sm:flex" title="Github" href="rss2.xml">
          <iconify-icon width="20" icon="ri:rss-line"></iconify-icon>
        </a>
        <a class="w-5 h-5" title="toggle theme" id="toggle-dark">
          <iconify-icon width="20" icon="" id="theme-icon"></iconify-icon>
        </a>
      </div>
      <div class="flex items-center justify-center gap-3 ml-3 sm:hidden">
        <span class="w-5 h-5" aria-hidden="true" role="img" id="open-menu">
          <iconify-icon width="20" icon="carbon:menu" ></iconify-icon>
        </span>
        <span class="w-5 h-5 hidden" aria-hidden="true" role="img" id="close-menu">
          <iconify-icon  width="20" icon="carbon:close" ></iconify-icon>
        </span>
      </div>
    </nav>
  </div>
</header>
<div id="menu-panel" class="h-0 overflow-hidden sm:hidden fixed left-0 right-0 top-12 bottom-0 z-10">
  <div id="menu-content" class="relative z-20 bg-white/80 px-6 sm:px-8 py-2 backdrop-blur-xl -translate-y-full transition-transform duration-300">
    <ul class="nav flex flex-col sm:flex-row text-sm font-medium">
      
        <li class="nav-portfolio sm:mx-2 border-b sm:border-0 border-black/5 last:border-0 hover:text-main">
          <a href="/hexo-blog/public/archives" class="flex h-12 sm:h-auto items-center">Posts</a>
        </li>
      
        <li class="nav-portfolio sm:mx-2 border-b sm:border-0 border-black/5 last:border-0 hover:text-main">
          <a href="/hexo-blog/public/category" class="flex h-12 sm:h-auto items-center">Categories</a>
        </li>
      
        <li class="nav-portfolio sm:mx-2 border-b sm:border-0 border-black/5 last:border-0 hover:text-main">
          <a href="/hexo-blog/public/tag" class="flex h-12 sm:h-auto items-center">Tags</a>
        </li>
      
    </ul>
  </div>
  <div class="mask bg-black/20 absolute inset-0"></div>
</div>

  <main class="pt-14">
    <!-- css -->

<link rel="stylesheet" href="/hexo-blog/public/lib/fancybox/fancybox.min.css">


<link rel="stylesheet" href="/hexo-blog/public/lib/tocbot/tocbot.min.css">

<!-- toc -->

  <!-- tocbot -->
<nav class="post-toc toc text-sm w-48 relative top-32 right-0 opacity-70 hidden lg:block" style="position: fixed !important;"></nav>


<section class="px-6 max-w-prose mx-auto md:px-0">
  <!-- header -->
  <header class="overflow-hidden pt-6 pb-6 md:pt-12">
    <div class="pt-4 md:pt-6">
      <h1 id="article-title" class="text-[2rem] font-bold leading-snug mb-4 md:mb-6 md:text-[2.6rem]">
        Java & Android é›†åˆæ¡†æ¶é¡»çŸ¥é¡»ä¼šï¼ˆ1ï¼‰
      </h1>
      <div>
        <section class="flex items-center gap-3 text-sm">
          <span class="flex items-center gap-1">
            <iconify-icon width="18" icon="carbon-calendar" ></iconify-icon>
            <time>2025-03-02</time>
          </span>
          <span class="text-gray-400">Â·</span>
          <span class="flex items-center gap-1">
            <iconify-icon width="18" icon="ic:round-access-alarm" ></iconify-icon>
            <span>34 min</span>
          </span>
          <span class="text-gray-400">Â·</span>
          <span class="flex items-center gap-1">
            <iconify-icon width="18" icon="icon-park-outline:font-search" ></iconify-icon>
            <span>8k words</span>
          </span>
          
            <span class="text-gray-400">Â·</span>
            <span class="flex items-center gap-1">
              <iconify-icon width="16" icon="icon-park-outline:box" class="mr-2"></iconify-icon>
              <a class="article-category-link" href="/hexo-blog/public/categories/kotlin/">kotlin</a>
            </span>
          
        </section>
      </div>
    </div>
  </header>
  <!-- content -->
  <article class="post-content prose m-auto slide-enter-content dark:prose-invert">
    <blockquote>
<p>å…¬ä¼—å·ï¼š<a target="_blank" rel="noopener" href="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/adbc507fc3704fd8955aae739a433db2~tplv-k3u1fbpfcp-zoom-1.image">å­—èŠ‚æ•°ç»„</a></p>
<p>å¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ© ğŸ¤£ğŸ¤£</p>
</blockquote>
<blockquote>
<p>æœ¬ç³»åˆ—æ–‡ç« ä¼šé™†ç»­å¯¹ Java å’Œ Android çš„é›†åˆæ¡†æ¶ï¼ˆJDK 1.8ï¼ŒAndroid SDK 30ï¼‰ä¸­çš„å‡ ä¸ªå¸¸è§å®¹å™¨ç»“åˆæºç è¿›è¡Œä»‹ç»ï¼Œäº†è§£ä¸åŒå®¹å™¨åœ¨<strong>æ•°æ®ç»“æ„ã€é€‚ç”¨åœºæ™¯ã€ä¼˜åŠ¿ç‚¹</strong>ä¸Šçš„ä¸åŒï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ© ğŸ¤£ğŸ¤£</p>
</blockquote>
<h1 id="ä¸€ã€æ•°ç»„å’Œé“¾è¡¨"><a href="#ä¸€ã€æ•°ç»„å’Œé“¾è¡¨" class="headerlink" title="ä¸€ã€æ•°ç»„å’Œé“¾è¡¨"></a>ä¸€ã€æ•°ç»„å’Œé“¾è¡¨</h1><p>å¾ˆå¤šé›†åˆæ¡†æ¶åœ¨åº•å±‚ç»“æ„éƒ½ä½¿ç”¨åˆ°äº†<strong>æ•°ç»„</strong>å’Œ<strong>é“¾è¡¨</strong>è¿™ä¸¤ç§æ•°æ®ç»“æ„ï¼Œå®ƒä»¬åœ¨<strong>æ•°æ®å­˜å‚¨æ–¹å¼</strong>å’Œ<strong>ä¼˜åŠ£ç‚¹</strong>è¿™ä¸¤æ–¹é¢æœ‰ç€å¾ˆå¤§åŒºåˆ«ï¼Œè¿™é‡Œå…ˆæ¥ä»‹ç»ä¸‹è¿™ä¸¤è€…çš„ç»“æ„å’ŒåŒºåˆ«</p>
<h2 id="1ã€æ•°ç»„"><a href="#1ã€æ•°ç»„" class="headerlink" title="1ã€æ•°ç»„"></a>1ã€æ•°ç»„</h2><p>å‡è®¾ç°åœ¨æœ‰å…­ä¸ªå…ƒç´ å­˜æ”¾åœ¨æ•°ç»„ä¸­ï¼Œåˆ™æ•°ç»„åœ¨å†…å­˜ä¸­çš„å­˜å‚¨ç»“æ„å°±å¦‚ä¸‹æ‰€ç¤º</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d35e498da26c4619acab1229db882021~tplv-k3u1fbpfcp-zoom-1.image"></p>
<ol>
<li>æ•°ç»„æ˜¯ä¸€å—è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œå…ƒç´ æŒ‰ç…§åæ ‡ç´¢å¼•ä¾æ¬¡æ’åˆ—ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡åæ ‡å®šä½åˆ°æ¯ä¸€ä¸ªæ•°æ®çš„å†…å­˜åœ°å€ï¼Œä¾‹å¦‚å¯ä»¥ç›´æ¥é€šè¿‡åæ ‡ 3 è·å–åˆ° element4ï¼Œçœå»äº†ä»å¤´åˆ°å°¾çš„éå†æ“ä½œï¼Œå› æ­¤éšæœºè¯»å–æ•°æ®çš„æ•ˆç‡è¾ƒé«˜</li>
<li>ç›¸å¯¹åº”çš„ï¼Œç”±äºæ•°ç»„è¦æ±‚å…ƒç´ æ˜¯è¿ç»­å­˜å‚¨çš„ï¼Œå› æ­¤åœ¨æ·»åŠ å’Œç§»é™¤æ•°æ®æ—¶æœ‰å¯èƒ½éœ€è¦ç§»åŠ¨å¤§é‡æ•°æ®ï¼Œæ‰€ä»¥åœ¨æ·»åŠ å’Œç§»é™¤æ•°æ®æ—¶æ•ˆç‡è¾ƒä½</li>
<li>æ•°ç»„åœ¨ä½¿ç”¨å‰éœ€è¦å…ˆæŒ‡å®šå…¶ç©ºé—´å¤§å°ï¼Œåœ¨å£°æ˜ç©ºé—´å¤§å°åæ— æ³•å†æ¬¡ä¿®æ”¹ã€‚å¦‚æœæˆ‘ä»¬åœ¨ä½¿ç”¨å‰å·²çŸ¥å¾…å­˜å…¥çš„æ•°æ®é‡çš„è¯ï¼Œè‡ªç„¶å¯ä»¥å°†æ•°ç»„åˆå§‹åŒ–ä¸ºç›®æ ‡å®¹é‡ï¼Œè¿™æ ·å°±ä¸ä¼šæµªè´¹å†…å­˜ç©ºé—´äº†ã€‚ä½†å®é™…ä¸Šæ•°æ®é‡å¾€å¾€æ˜¯æœªçŸ¥çš„ï¼Œç»å¸¸ä¼šå› ä¸ºç”³è¯·äº†è¾ƒå¤§çš„å†…å­˜ç©ºé—´å¯¼è‡´æµªè´¹ï¼Œæˆ–è€…æ˜¯ç”³è¯·å°‘äº†å¯¼è‡´éœ€è¦åç»­æ‰©å®¹ï¼Œè€Œæ•°ç»„åœ¨æ‰©å®¹æ—¶åªèƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„å¹¶å°†æ•°æ®æ•´ä½“è¿ç§»ï¼Œè¿™å°±å½±å“åˆ°äº†æ•°ç»„çš„è¿è¡Œæ€§èƒ½</li>
</ol>
<p>ArrayList åº•å±‚å°±æ˜¯ç”¨æ•°ç»„æ¥å­˜å‚¨æ•°æ®</p>
<h2 id="2ã€é“¾è¡¨"><a href="#2ã€é“¾è¡¨" class="headerlink" title="2ã€é“¾è¡¨"></a>2ã€é“¾è¡¨</h2><p>å‡è®¾ç°åœ¨æœ‰å››ä¸ªå…ƒç´ ä¾é é“¾è¡¨æ¥å­˜æ”¾ï¼Œé“¾è¡¨åœ¨å†…å­˜ä¸­çš„å­˜å‚¨ç»“æ„å°±å¦‚ä¸‹æ‰€ç¤º</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/073ecd6842734463804b9fc6dcbd151d~tplv-k3u1fbpfcp-zoom-1.image"></p>
<ol>
<li>å›¾ä¸­æ‰€å±•ç¤ºçš„æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œå³æ¯ä¸ªç»“ç‚¹é™¤äº†åŒ…å«å®é™…çš„æ•°æ®å¤–ï¼Œè¿˜å­˜åœ¨ä¸¤ä¸ªå¼•ç”¨åˆ†åˆ«æŒ‡å‘ä¸Šä¸€ä¸ªç»“ç‚¹ï¼ˆprevï¼‰å’Œä¸‹ä¸€ä¸ªç»“ç‚¹ï¼ˆnextï¼‰ï¼Œå„ä¸ªç»“ç‚¹é€šè¿‡è¿™ç§åŒå‘é“¾æ¥ä»è€Œä¸²è”åœ¨ä¸€èµ·ã€‚æ­¤å¤–è¿˜å­˜åœ¨ä¸¤ä¸ªå¼•ç”¨åˆ†åˆ«æŒ‡å‘å¤´ç»“ç‚¹ï¼ˆfirstï¼‰å’Œå°¾ç»“ç‚¹ï¼ˆlastï¼‰ï¼Œæ–¹ä¾¿è¿›è¡Œæ­£å‘éå†å’Œåå‘éå†</li>
<li>é“¾è¡¨ä¸è¦æ±‚æœ‰è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œæ–°æ·»åŠ çš„ç»“ç‚¹å¯ä»¥åœ¨å†…å­˜ä¸­çš„ä»»ä½•ä½ç½®ï¼Œåªè¦ä¸Šä¸€ä¸ªç»“ç‚¹å’Œä¸‹ä¸€ä¸ªç»“ç‚¹äº’ç›¸ä¿å­˜æœ‰å¯¹æ–¹çš„å¼•ç”¨å³å¯ï¼Œè¿™ä¹Ÿå¯¼è‡´åœ¨éšæœºè®¿é—®æ•°æ®æ—¶åªèƒ½éå†æ•´ä¸ªé“¾è¡¨ï¼Œåœ¨æœ€åçš„æƒ…å†µä¸‹ç”šè‡³éœ€è¦å…¨é‡éå†ã€‚å½“ç„¶ï¼Œå¯ä»¥æ ¹æ®å®é™…æƒ…å†µæ¥é€‰æ‹©æ˜¯æ­£å‘éå†è¿˜æ˜¯åå‘éå†ï¼Œä»¥æ­¤æé«˜è®¿é—®æ•ˆç‡ï¼Œä½†æ€»çš„æ¥è¯´é“¾è¡¨åœ¨éšæœºè®¿é—®æ•°æ®æ—¶æ•ˆç‡è¦æ¯”æ•°ç»„ä½</li>
<li>åœ¨æ·»åŠ æˆ–ç§»é™¤å…ƒç´ æ—¶ï¼Œåªéœ€è¦ä¿®æ”¹ç›¸é‚»ç»“ç‚¹å¯¹æŒ‡å®šç»“ç‚¹çš„å¼•ç”¨å³å¯ï¼Œè€Œä¸éœ€åƒæ•°ç»„é‚£æ ·éœ€è¦ç§»åŠ¨å…ƒç´ ï¼Œå› æ­¤é“¾è¡¨åœ¨æ·»åŠ å’Œç§»é™¤å…ƒç´ æ—¶æ•ˆç‡è¾ƒé«˜</li>
<li>é“¾è¡¨ä¸éœ€äº‹å…ˆç”³è¯·å†…å­˜ç©ºé—´ï¼Œæ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µè¿›è¡ŒåŠ¨æ€ç”³è¯·å³å¯</li>
<li>æ­¤å¤–è¿˜å­˜åœ¨ä¸€ç§å•å‘é“¾è¡¨çš„ç»“æ„ï¼Œå³æ¯ä¸ªç»“ç‚¹åŒ…å«å¯¹ä¸‹ä¸€ä¸ªç»“ç‚¹çš„å¼•ç”¨ nextï¼Œä½†ä¸åŒ…å« prevï¼Œæ‰€ä»¥å•å‘é“¾è¡¨åªèƒ½ä»å¤´åˆ°å°¾è¿›è¡Œéå†</li>
</ol>
<p>LinkedList åº•å±‚å°±æ˜¯ç”¨é“¾è¡¨æ¥å­˜å‚¨æ•°æ®</p>
<h1 id="äºŒã€ArrayList"><a href="#äºŒã€ArrayList" class="headerlink" title="äºŒã€ArrayList"></a>äºŒã€ArrayList</h1><p>ArrayList åº”è¯¥æ˜¯å¤§å¤šæ•°å¼€å‘è€…ä½¿ç”¨å¾—æœ€ä¸ºé¢‘ç¹çš„é›†åˆå®¹å™¨äº†ï¼ŒArrayList å®ç°äº† List æ¥å£ï¼Œæ˜¯ä¸€ä¸ªæœ‰åºå®¹å™¨ï¼Œå³å…ƒç´ çš„å­˜æ”¾é¡ºåºä¸æ·»åŠ é¡ºåºä¿æŒä¸€è‡´ï¼Œå…è®¸æ·»åŠ ç›¸åŒå…ƒç´ ï¼ŒåŒ…æ‹¬ null ã€‚ArrayList åº•å±‚é€šè¿‡æ•°ç»„æ¥è¿›è¡Œæ•°æ®å­˜å‚¨ï¼Œå½“å‘ ArrayList ä¸­æ·»åŠ å…ƒç´ æ—¶å¦‚æœå‘ç°æ•°ç»„ç©ºé—´ä¸è¶³ï¼ŒArrayList ä¼šè‡ªåŠ¨å¯¹åº•å±‚æ•°ç»„è¿›è¡Œæ‰©å®¹å¹¶è¿ç§»ç°æœ‰æ•°æ®</p>
<h2 id="1ã€ç±»å£°æ˜"><a href="#1ã€ç±»å£°æ˜" class="headerlink" title="1ã€ç±»å£°æ˜"></a>1ã€ç±»å£°æ˜</h2><p>ä» ArrayList å®ç°çš„æ¥å£å¯ä»¥çœ‹å‡ºæ¥å®ƒæ˜¯æ”¯æŒå¿«é€Ÿè®¿é—®ï¼Œå¯å…‹éš†ï¼Œå¯åºåˆ—åŒ–çš„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayList</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">AbstractList</span>&lt;E&gt; </span><br><span class="line">    <span class="keyword">implements</span> <span class="title class_">List</span>&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable</span><br></pre></td></tr></table></figure>

<h2 id="2ã€æˆå‘˜å˜é‡"><a href="#2ã€æˆå‘˜å˜é‡" class="headerlink" title="2ã€æˆå‘˜å˜é‡"></a>2ã€æˆå‘˜å˜é‡</h2><p>ArrayList ä¸€å…±åŒ…å«ä»¥ä¸‹å‡ ä¸ªæˆå‘˜å˜é‡ï¼Œä¸»è¦çœ‹ elementDataã€‚elementData æ˜¯ç”¨äºå­˜æ”¾æ•°æ®çš„åº•å±‚æ•°ç»„ï¼Œç”±äºå…¶æ•°æ®ç±»å‹å£°æ˜ä¸º Objectï¼Œæ‰€ä»¥å¯ä»¥ç”¨æ¥å­˜æ”¾ä»»ä½•ç±»å‹çš„æ•°æ®ã€‚è€Œ ArrayList å±äºæ³›å‹ç±»ï¼Œå¦‚æœæˆ‘ä»¬åœ¨åˆå§‹åŒ–æ—¶å°±æŒ‡å®šäº†æ•°æ®ç±»å‹çš„è¯ï¼Œä¾é  Java æ³›å‹ä¸ºæˆ‘ä»¬æä¾›çš„è¯­æ³•ç³–ï¼Œæˆ‘ä»¬åœ¨å‘ elementData å­˜å–æ•°æ®æ—¶ç¼–è¯‘å™¨å°±ä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹æ ¡éªŒå’Œç±»å‹è½¬æ¢ï¼Œç¡®ä¿å­˜å…¥å’Œå–å‡ºçš„æ•°æ®ç±»å‹æ˜¯å®‰å…¨çš„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åºåˆ—åŒ–ID</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">8683452581122892189L</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿›è¡Œæ‰©å®¹æ“ä½œåçš„æœ€å°å®¹é‡</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">DEFAULT_CAPACITY</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœå¤–éƒ¨ä¸ºé›†åˆè®¾ç½®çš„åˆå§‹åŒ–å¤§å°ä¸º 0ï¼Œåˆ™å°† elementData æŒ‡å‘æ­¤ç©ºæ•°ç»„</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[] EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœåœ¨åˆå§‹åŒ–é›†åˆæ—¶ä½¿ç”¨çš„æ˜¯æ— å‚æ„é€ å‡½æ•°ï¼Œåˆ™å°† elementData æŒ‡å‘æ­¤ç©ºæ•°ç»„</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç”¨æ¥å­˜æ”¾å…ƒç´ çš„æ•°ç»„</span></span><br><span class="line"><span class="keyword">transient</span> Object[] elementData;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é›†åˆå¤§å°</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ArrayList çš„å¿«ç…§ç‰ˆæœ¬å·</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">transient</span> <span class="type">int</span> <span class="variable">modCount</span> <span class="operator">=</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<h2 id="3ã€æ„é€ å‡½æ•°"><a href="#3ã€æ„é€ å‡½æ•°" class="headerlink" title="3ã€æ„é€ å‡½æ•°"></a>3ã€æ„é€ å‡½æ•°</h2><p>å¦‚æœå·²ç»çŸ¥é“ç›®æ ‡æ•°æ®é‡å¤§å°çš„è¯ï¼Œåœ¨åˆå§‹åŒ– ArrayList çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥ç›´æ¥ä¼ å…¥æœ€ç»ˆçš„å®¹é‡å€¼ï¼Œè¿™æ ·æ•ˆç‡ä¼šæ›´é«˜ä¸€äº›ã€‚å› ä¸ºå¦‚æœ initialCapacity è¿‡å¤§ï¼Œåˆ™ä¼šé€ æˆå†…å­˜æµªè´¹ï¼›å¦‚æœ initialCapacity è¿‡å°ï¼Œå¯èƒ½ä¼šå¯¼è‡´åç»­éœ€è¦å¤šæ¬¡æ‰©å®¹ï¼Œæ¯æ¬¡æ‰©å®¹éƒ½éœ€è¦å¤åˆ¶åŸæœ‰æ•°æ®åˆ°æ–°æ•°ç»„ï¼Œè¿™ä¼šé™ä½è¿è¡Œæ•ˆç‡</p>
<p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯æ— å‚æ„é€ å‡½æ•°æˆ–è€…æ˜¯æŒ‡å®šçš„ initialCapacity ä¸º 0ï¼Œæ­¤æ—¶ä¹Ÿåªä¼šå°† elementData æŒ‡å‘ç©ºæ•°ç»„ï¼Œå¹¶ä¸ä¼šæ–°å»ºä¸€ä¸ªæ•°ç»„å˜é‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æŒ‡å®šé›†åˆçš„åˆå§‹å®¹é‡ï¼Œä»¥æ­¤æ¥è¿›è¡Œæ•°ç»„çš„åˆå§‹åŒ–æ“ä½œ</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ArrayList</span><span class="params">(<span class="type">int</span> initialCapacity)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.elementData = <span class="keyword">new</span> <span class="title class_">Object</span>[initialCapacity];</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (initialCapacity == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.elementData = EMPTY_ELEMENTDATA;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Illegal Capacity: &quot;</span>+initialCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤–éƒ¨æ²¡æœ‰æŒ‡å®šåˆå§‹å®¹é‡ï¼Œæš‚ä¸”ä½¿ç”¨ç©ºæ•°ç»„</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ArrayList</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¼ å…¥ä¸€ä»½åˆå§‹æ•°æ®æ¥è¿›è¡Œåˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ArrayList</span><span class="params">(Collection&lt;? extends E&gt; c)</span> &#123;</span><br><span class="line">    elementData = c.toArray();</span><br><span class="line">    <span class="keyword">if</span> ((size = elementData.length) != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// c.toArray might (incorrectly) not return Object[] (see 6260652)</span></span><br><span class="line">        <span class="keyword">if</span> (elementData.getClass() != Object[].class)</span><br><span class="line">            elementData = Arrays.copyOf(elementData, size, Object[].class);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.elementData = EMPTY_ELEMENTDATA;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4ã€è·å–å…ƒç´ "><a href="#4ã€è·å–å…ƒç´ " class="headerlink" title="4ã€è·å–å…ƒç´ "></a>4ã€è·å–å…ƒç´ </h2><p>åœ¨è·å–æŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´ æ—¶ï¼ŒArrayList éƒ½æ˜¯ç›´æ¥é€šè¿‡åæ ‡å€¼æ¥è·å–å…ƒç´ ï¼Œæ— éœ€ä»å¤´éå†ï¼Œæ‰€ä»¥è¯´ ArrayList éå†å’Œéšæœºè®¿é—®çš„æ•ˆç‡è¾ƒé«˜</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">E <span class="title function_">elementData</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (E) elementData[index];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> E <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­å–å€¼èŒƒå›´æ˜¯å¦åˆæ³•</span></span><br><span class="line">    rangeCheck(index);</span><br><span class="line">    <span class="keyword">return</span> elementData(index);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5ã€æ·»åŠ å…ƒç´ "><a href="#5ã€æ·»åŠ å…ƒç´ " class="headerlink" title="5ã€æ·»åŠ å…ƒç´ "></a>5ã€æ·»åŠ å…ƒç´ </h2><p>ArrayList æ·»åŠ å…ƒç´ çš„æ“ä½œå°±ä¸æ˜¯é‚£ä¹ˆç†æƒ³äº†ã€‚å¦‚æœæ˜¯ç›´æ¥å‘é›†åˆå°¾ç«¯æ·»åŠ æ•°æ®ï¼Œé‚£ä¹ˆç›´æ¥å®šä½åˆ°è¯¥ä½ç½®è¿›è¡Œèµ‹å€¼å³å¯ï¼›å¦‚æœæ˜¯å‘é›†åˆçš„ä¸­é—´ä½ç½® index æ’å…¥æ•°æ®ï¼Œåˆ™éœ€è¦å°†æ•°ç»„ä¸­ç´¢å¼• index åçš„æ‰€æœ‰æ•°æ®å‘åæ¨ç§»ä¸€ä½ï¼Œç„¶åå°†æ•°æ®æ’å…¥åˆ°ç©ºå‡ºçš„ä½ç½®ä¸Šã€‚æ­¤å¤–ï¼Œåœ¨æ’å…¥æ•°æ®å‰ elementData å¯èƒ½å·²ç»ç©ºé—´ä¸è¶³äº†ï¼Œé‚£ä¹ˆè¿˜éœ€è¦å…ˆè¿›è¡Œæ‰©å®¹æ“ä½œã€‚æ‰©å®¹æ“ä½œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç¬¦åˆå¤§å°çš„æ•°ç»„ï¼Œå¹¶å°†åŸæ•°ç»„ä¸­çš„æ•°æ®è¿ç§»åˆ°æ–°æ•°ç»„ä¸­ï¼Œç„¶åè®© elementData æŒ‡å‘æ–°æ•°ç»„</p>
<p>ç”±æ­¤å¯ä»¥çœ‹å‡ºæ¥ï¼Œå‘é›†åˆæ·»åŠ æ•°æ®å’Œè¿›è¡Œæ‰©å®¹éƒ½å¯èƒ½ä¼šå¯¼è‡´æ•°ç»„å…ƒç´ å¤§é‡ç§»åŠ¨ï¼Œæ‰€ä»¥è¯´ ArrayList å­˜å…¥æ•°æ®çš„æ•ˆç‡å¹¶ä¸é«˜</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> &#123;</span><br><span class="line">    <span class="comment">//åœ¨éœ€è¦çš„æ—¶å€™è¿›è¡Œæ‰©å®¹</span></span><br><span class="line">    ensureCapacityInternal(size + <span class="number">1</span>);</span><br><span class="line">    elementData[size++] = e;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> index, E element)</span> &#123;</span><br><span class="line">    rangeCheckForAdd(index);</span><br><span class="line">    <span class="comment">//åœ¨éœ€è¦çš„æ—¶å€™è¿›è¡Œæ‰©å®¹</span></span><br><span class="line">    ensureCapacityInternal(size + <span class="number">1</span>);</span><br><span class="line">    <span class="comment">//å°†ç´¢å¼• index åçš„æ‰€æœ‰æ•°å€¼å‘åæ¨ç§»ä¸€ä½ </span></span><br><span class="line">    System.arraycopy(elementData, index, elementData, index + <span class="number">1</span>,size - index);</span><br><span class="line">    elementData[index] = element;</span><br><span class="line">    size++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šè¯´çš„æ˜¯å­˜å…¥å•ä¸ªæ•°æ®çš„æƒ…å†µï¼Œæ­¤å¤–è¿˜æœ‰å­˜å…¥æ•´ä¸ªé›†åˆçš„æƒ…å†µ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¦‚æœå¾…æ·»åŠ çš„æ•°æ®ä¸ä¸ºç©ºåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› false</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">addAll</span><span class="params">(Collection&lt;? extends E&gt; c)</span> &#123;</span><br><span class="line">    Object[] a = c.toArray();</span><br><span class="line">    <span class="type">int</span> <span class="variable">numNew</span> <span class="operator">=</span> a.length;</span><br><span class="line">    ensureCapacityInternal(size + numNew);</span><br><span class="line">    <span class="comment">//å°†æ•°ç»„ a å¤åˆ¶åˆ° elementData çš„å°¾ç«¯</span></span><br><span class="line">    System.arraycopy(a, <span class="number">0</span>, elementData, size, numNew);</span><br><span class="line">    size += numNew;</span><br><span class="line">    <span class="keyword">return</span> numNew != <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä»æŒ‡å®šç´¢å¼•å¤„æ·»åŠ æ•°æ®ï¼Œå¦‚æœå¾…æ·»åŠ çš„æ•°æ®ä¸ä¸ºç©ºåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› false</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">addAll</span><span class="params">(<span class="type">int</span> index, Collection&lt;? extends E&gt; c)</span> &#123;</span><br><span class="line">    rangeCheckForAdd(index);</span><br><span class="line">    Object[] a = c.toArray();</span><br><span class="line">    <span class="type">int</span> <span class="variable">numNew</span> <span class="operator">=</span> a.length;</span><br><span class="line">    ensureCapacityInternal(size + numNew);</span><br><span class="line">    <span class="comment">//éœ€è¦ç§»åŠ¨çš„æ•°ç»„å…ƒç´ æ•°é‡</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">numMoved</span> <span class="operator">=</span> size - index;</span><br><span class="line">    <span class="comment">//å› ä¸ºè¦æ·»åŠ çš„æ•°æ®å¯èƒ½åˆšå¥½æ˜¯ä»æ•°ç»„æœ€å°¾ç«¯å¼€å§‹æ·»åŠ ï¼Œæ‰€ä»¥ numMoved å¯èƒ½ä¸º 0</span></span><br><span class="line">    <span class="comment">//æ‰€ä»¥åªåœ¨ numMoved &gt; 0 çš„æ—¶å€™æ‰éœ€è¦å¯¹æ•°ç»„çš„å…ƒç´ å€¼è¿›è¡Œç§»åŠ¨ï¼Œä»¥æ­¤ç©ºå‡ºä½ç½®ç»™æ•°ç»„ a</span></span><br><span class="line">    <span class="keyword">if</span> (numMoved &gt; <span class="number">0</span>)</span><br><span class="line">        System.arraycopy(elementData, index, elementData, index + numNew, numMoved);</span><br><span class="line">    <span class="comment">//å°†æ•°ç»„ a åŒ…å«çš„æ•°æ®æ·»åŠ åˆ° elementData ä¸­</span></span><br><span class="line">    System.arraycopy(a, <span class="number">0</span>, elementData, index, numNew);</span><br><span class="line">    size += numNew;</span><br><span class="line">    <span class="keyword">return</span> numNew != <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6ã€ç§»é™¤å…ƒç´ "><a href="#6ã€ç§»é™¤å…ƒç´ " class="headerlink" title="6ã€ç§»é™¤å…ƒç´ "></a>6ã€ç§»é™¤å…ƒç´ </h2><p>å› ä¸ºæ•°ç»„æ˜¯ä¸€ç§å†…å­˜åœ°å€è¿ç»­çš„æ•°æ®ç»“æ„ï¼Œæ‰€ä»¥ç§»é™¤æŸä¸ªå…ƒç´ åŒæ ·å¯èƒ½å¯¼è‡´å¤§é‡å…ƒç´ ç§»åŠ¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç§»é™¤æŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´ å€¼ï¼Œå¹¶è¿”å›è¯¥å€¼</span></span><br><span class="line"><span class="keyword">public</span> E <span class="title function_">remove</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">    rangeCheck(index);</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="comment">//å¾…ç§»é™¤çš„å…ƒç´ å€¼</span></span><br><span class="line">    <span class="type">E</span> <span class="variable">oldValue</span> <span class="operator">=</span> elementData(index);</span><br><span class="line">    <span class="comment">//å› ä¸ºè¦ç§»é™¤å…ƒç´ å¯¼è‡´éœ€è¦ç§»åŠ¨çš„å…ƒç´ æ•°é‡</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">numMoved</span> <span class="operator">=</span> size - index - <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//å› ä¸ºè¦ç§»é™¤çš„å…ƒç´ å¯èƒ½åˆšå¥½æ˜¯æ•°ç»„æœ€åä¸€ä½ï¼Œæ‰€ä»¥ numMoved å¯èƒ½ä¸º 0</span></span><br><span class="line">    <span class="comment">//æ‰€ä»¥åªåœ¨ numMoved &gt; 0 çš„æ—¶å€™æ‰éœ€è¦å¯¹æ•°ç»„çš„å…ƒç´ å€¼è¿›è¡Œç§»åŠ¨</span></span><br><span class="line">    <span class="keyword">if</span> (numMoved &gt; <span class="number">0</span>)</span><br><span class="line">        System.arraycopy(elementData, index+<span class="number">1</span>, elementData, index, numMoved);</span><br><span class="line">    <span class="comment">//ä¸ç®¡æ•°ç»„æ˜¯å¦éœ€è¦å¯¹å…ƒç´ å€¼è¿›è¡Œç§»åŠ¨ï¼Œæ•°ç»„çš„æœ€åä¸€ä½éƒ½æ˜¯æ— æ•ˆæ•°æ®äº†</span></span><br><span class="line">    <span class="comment">//æ­¤å¤„å°†ä¹‹ç½®ä¸º null ä»¥å¸®åŠ©GCå›æ”¶                </span></span><br><span class="line">    elementData[--size] = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> oldValue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç§»é™¤é›†åˆä¸­åŒ…å«çš„ç¬¬ä¸€ä½å…ƒç´ å€¼ä¸º o çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">//å¦‚æœåŒ…å«è¯¥å¯¹è±¡ï¼Œåˆ™è¿”å› true ï¼Œå¦åˆ™è¿”å› false</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">remove</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (o == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>; index &lt; size; index++)</span><br><span class="line">            <span class="keyword">if</span> (elementData[index] == <span class="literal">null</span>) &#123;</span><br><span class="line">                fastRemove(index);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>; index &lt; size; index++)</span><br><span class="line">            <span class="keyword">if</span> (o.equals(elementData[index])) &#123;</span><br><span class="line">                fastRemove(index);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7ã€æ‰©å®¹æœºåˆ¶"><a href="#7ã€æ‰©å®¹æœºåˆ¶" class="headerlink" title="7ã€æ‰©å®¹æœºåˆ¶"></a>7ã€æ‰©å®¹æœºåˆ¶</h2><p>å†æ¥çœ‹ä¸‹æ•°ç»„çš„æ‰©å®¹æœºåˆ¶çš„å…·ä½“å®ç°é€»è¾‘</p>
<p><code>ensureCapacity</code> æ–¹æ³•çš„å…¥å‚å‚æ•° minCapacity å°±ç”¨äºæŒ‡å®šå¸Œæœ›æ‰©å®¹åçš„æœ€å°ç©ºé—´ï¼Œä½† minCapacity æœ€ç»ˆä¸ä¼šå°äº DEFAULT_CAPACITYï¼Œå³æ‰©å®¹åçš„æ•°ç»„å®¹é‡ä¸ä¼šå°äº 10ã€‚ä¹‹æ‰€ä»¥è¦è¿›è¡Œæœ€å°å®¹é‡çš„é™åˆ¶ï¼Œæ˜¯ä¸ºäº†å‡å°‘å¤šæ¬¡æ‰©å®¹çš„å¯èƒ½æ€§ï¼Œ10 ä»¥å†…çš„æ•°ç»„å¾ˆå®¹æ˜“å°±å‘ç”Ÿæ‰©å®¹</p>
<p>å¦‚æœåœ¨åˆå§‹åŒ– ArrayList å‰å·²çŸ¥ç›®æ ‡æ•°æ®çš„æ•°æ®é‡ï¼Œæœ€å¥½å°±ä½¿ç”¨<code>ArrayList(int initialCapacity)</code>æ¥è¿›è¡Œåˆå§‹åŒ–ï¼Œç›´æ¥è®©åº•å±‚æ•°ç»„æ‰©å……åˆ°ç›®æ ‡å¤§å°ï¼Œæˆ–è€…æ˜¯åœ¨æ·»åŠ æ•°æ®å‰å°±è°ƒç”¨ <code>ensureCapacity</code> æ–¹æ³•ç›´æ¥è®©æ•°ç»„æ‰©å®¹åˆ°ç›®æ ‡å¤§å°ï¼Œé¿å…ä¹‹åèµ‹å€¼è¿‡ç¨‹ä¸­å¤šæ¬¡æ‰©å®¹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ensureCapacity</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">minExpand</span> <span class="operator">=</span> (elementData != DEFAULTCAPACITY_EMPTY_ELEMENTDATA)</span><br><span class="line">        ? <span class="number">0</span></span><br><span class="line">        : DEFAULT_CAPACITY;</span><br><span class="line">    <span class="keyword">if</span> (minCapacity &gt; minExpand) &#123;</span><br><span class="line">        ensureExplicitCapacity(minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">ensureCapacityInternal</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class="line">        minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">    ensureExplicitCapacity(minCapacity);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">ensureExplicitCapacity</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="comment">//å¦‚æœå½“å‰æ•°ç»„å¤§å°çš„ç¡®æ˜¯æ¯”éœ€è¦çš„æœ€å°ç©ºé—´ minCapacity å°ï¼Œåˆ™è¿›è¡Œæ‰©å®¹</span></span><br><span class="line">    <span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>)</span><br><span class="line">        grow(minCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®é™…ä¸Šå®Œæˆæ‰©å®¹æ“ä½œçš„æ˜¯ <code>grow(int minCapacity)</code> æ–¹æ³•ã€‚åœ¨æ‰©å®¹å‰ï¼Œä¼šå…ˆåˆ¤æ–­å¦‚æœå°†å®¹é‡æå‡åˆ°å½“å‰çš„ 1.5 å€æ˜¯å¦èƒ½è¾¾åˆ° minCapacity çš„è¦æ±‚ ï¼Œå¦‚æœç¬¦åˆè¦æ±‚åˆ™ç›´æ¥å°†å®¹é‡æ‰©å……åˆ°å½“å‰çš„ 1.5 å€ï¼Œå¦åˆ™æ‰©å……åˆ° minCapacityï¼Œä½†æœ€ç»ˆå®¹é‡ä¸èƒ½å¤§äº Integer.MAX_VALUE</p>
<p>æ„å»ºå‡ºä¸€ä¸ªæ–°çš„ç¬¦åˆå¤§å°çš„æ•°ç»„åï¼Œå°±å°†åŸæ•°ç»„ä¸­çš„å…ƒç´ å¤åˆ¶åˆ°æ–°æ•°ç»„ä¸­ï¼Œè‡³æ­¤å°±å®Œæˆäº†æ‰©å®¹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ•°ç»„å¯æ‰©å®¹åˆ°çš„æœ€å¤§å®¹é‡</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">MAX_ARRAY_SIZE</span> <span class="operator">=</span> Integer.MAX_VALUE - <span class="number">8</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">grow</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">oldCapacity</span> <span class="operator">=</span> elementData.length;</span><br><span class="line">    <span class="comment">//å‡è®¾æ‰©å®¹åçš„ç©ºé—´å¤§å°æ˜¯åŸå…ˆçš„1.5å€</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">newCapacity</span> <span class="operator">=</span> oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = minCapacity;</span><br><span class="line">    <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">    elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="8ã€ä¿®æ”¹å…ƒç´ "><a href="#8ã€ä¿®æ”¹å…ƒç´ " class="headerlink" title="8ã€ä¿®æ”¹å…ƒç´ "></a>8ã€ä¿®æ”¹å…ƒç´ </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å°†ç´¢å¼• index å‡ºçš„å…ƒç´ å€¼ç½®ä¸º elementï¼Œå¹¶è¿”å›åŸå§‹æ•°å€¼</span></span><br><span class="line"><span class="keyword">public</span> E <span class="title function_">set</span><span class="params">(<span class="type">int</span> index, E element)</span> &#123;</span><br><span class="line">    rangeCheck(index);</span><br><span class="line">    <span class="type">E</span> <span class="variable">oldValue</span> <span class="operator">=</span> elementData(index);</span><br><span class="line">    elementData[index] = element;</span><br><span class="line">    <span class="keyword">return</span> oldValue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9ã€éå†æ•°ç»„"><a href="#9ã€éå†æ•°ç»„" class="headerlink" title="9ã€éå†æ•°ç»„"></a>9ã€éå†æ•°ç»„</h2><p>éå†æ•°ç»„çš„æ–¹æ³•åŒ…å«ä»¥ä¸‹å‡ ä¸ªï¼Œé€»è¾‘éƒ½æ¯”è¾ƒç®€å•ï¼Œç›´æ¥çœ‹æ³¨é‡Šå³å¯ã€‚ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„çŸ¥è¯†ç‚¹æ˜¯çœ‹æ–¹æ³•å†…éƒ¨å¯¹ modCount çš„æ ¡éªŒ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">forEach</span><span class="params">(Consumer&lt;? <span class="built_in">super</span> E&gt; action)</span> &#123;</span><br><span class="line">    Objects.requireNonNull(action);</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> <span class="variable">expectedModCount</span> <span class="operator">=</span> modCount;</span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    <span class="keyword">final</span> E[] elementData = (E[]) <span class="built_in">this</span>.elementData;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="built_in">this</span>.size;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; modCount == expectedModCount &amp;&amp; i &lt; size; i++) &#123;</span><br><span class="line">        <span class="comment">//å°†é›†åˆå…ƒç´ ä¾æ¬¡ä¼ é€’ç»™ accept æ–¹æ³•</span></span><br><span class="line">        action.accept(elementData[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¦‚æœ modCount å€¼è¢«æ”¹åŠ¨äº†ï¼Œè¯´æ˜éå†è¿‡ç¨‹ä¸­æ•°ç»„æœ‰è¢«æ”¹åŠ¨åˆ°</span></span><br><span class="line">    <span class="comment">//é‚£ä¹ˆå°±åœæ­¢éå†å¹¶æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">    <span class="keyword">if</span> (modCount != expectedModCount) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ConcurrentModificationException</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŒ‰ç…§ç»™å®šè§„åˆ™å¯¹é›†åˆå…ƒç´ è¿›è¡Œè¿‡æ»¤ï¼Œå¦‚æœå…ƒç´ ç¬¦åˆè¿‡æ»¤è§„åˆ™é‚£å°±å°†ä¹‹ç§»é™¤</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">removeIf</span><span class="params">(Predicate&lt;? <span class="built_in">super</span> E&gt; filter)</span> &#123;</span><br><span class="line">    Objects.requireNonNull(filter);</span><br><span class="line">    <span class="comment">//è¦ç§»é™¤çš„å…ƒç´ ä¸ªæ•°</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">removeCount</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//ç”¨äºæ ‡è®°é›†åˆæ˜¯å“ªä¸ªç´¢å¼•ä½ç½®éœ€è¦è¢«ç§»é™¤</span></span><br><span class="line">    <span class="keyword">final</span> <span class="type">BitSet</span> <span class="variable">removeSet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BitSet</span>(size);</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> <span class="variable">expectedModCount</span> <span class="operator">=</span> modCount;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="built_in">this</span>.size;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; modCount == expectedModCount &amp;&amp; i &lt; size; i++) &#123;</span><br><span class="line">        <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">        <span class="keyword">final</span> <span class="type">E</span> <span class="variable">element</span> <span class="operator">=</span> (E) elementData[i];</span><br><span class="line">        <span class="comment">//ä¾æ¬¡åˆ¤æ–­é›†åˆå…ƒç´ æ˜¯å¦ç¬¦åˆè¿‡æ»¤è§„åˆ™</span></span><br><span class="line">        <span class="keyword">if</span> (filter.test(element)) &#123;</span><br><span class="line">            <span class="comment">//set æ–¹æ³•å°†å¯¼è‡´ç´¢å¼•ä½ç½® i çš„å…ƒç´ å˜ä¸º true</span></span><br><span class="line">            removeSet.set(i);</span><br><span class="line">            removeCount++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ä¸å…è®¸åœ¨æ’åºçš„è¿‡ç¨‹ä¸­é›†åˆè¢«å…¶å®ƒæ–¹æ³•ä¿®æ”¹äº†æ•°ç»„ï¼ˆä¾‹å¦‚ï¼šç§»é™¤å…ƒç´ ï¼‰</span></span><br><span class="line">    <span class="keyword">if</span> (modCount != expectedModCount) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ConcurrentModificationException</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åªæœ‰ removeCount &gt; 0 æ‰è¯´æ˜éœ€è¦ç§»é™¤å…ƒç´ </span></span><br><span class="line">    <span class="keyword">final</span> <span class="type">boolean</span> <span class="variable">anyToRemove</span> <span class="operator">=</span> removeCount &gt; <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (anyToRemove) &#123;</span><br><span class="line">        <span class="comment">//é›†åˆç§»é™¤æŒ‡å®šå…ƒç´ åçš„å¤§å°</span></span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> <span class="variable">newSize</span> <span class="operator">=</span> size - removeCount;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>, j=<span class="number">0</span>; (i &lt; size) &amp;&amp; (j &lt; newSize); i++, j++) &#123;</span><br><span class="line">            <span class="comment">//ç•¥è¿‡è¢«æ ‡è®°ä¸º true çš„ä½ç½®ï¼Œç›´æ¥è·³åˆ°ä¸éœ€è¦ç§»é™¤å…ƒç´ çš„æ•°ç»„ç´¢å¼•ä½</span></span><br><span class="line">            i = removeSet.nextClearBit(i);</span><br><span class="line">            <span class="comment">//æœ‰æ•ˆæ•°æ®é€æ¸ä»å°¾éƒ¨å‘å¤´éƒ¨èšé›†</span></span><br><span class="line">            elementData[j] = elementData[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//ç§»é™¤å°¾éƒ¨çš„æ— æ•ˆæ•°æ®ï¼Œæœ‰åˆ©äºGCå›æ”¶</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> k=newSize; k &lt; size; k++) &#123;</span><br><span class="line">            elementData[k] = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.size = newSize;</span><br><span class="line">        <span class="comment">//ä¸å…è®¸åœ¨æ’åºçš„è¿‡ç¨‹ä¸­é›†åˆè¢«å…¶å®ƒæ–¹æ³•ä¿®æ”¹äº†æ•°ç»„ï¼ˆä¾‹å¦‚ï¼šç§»é™¤å…ƒç´ ï¼‰</span></span><br><span class="line">        <span class="keyword">if</span> (modCount != expectedModCount) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ConcurrentModificationException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        modCount++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> anyToRemove;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†é›†åˆå…ƒç´ éå†ä¼ é€’ç»™ operatorï¼Œå¹¶å°†åŸå§‹æ•°æ®æ›¿æ¢ä¸º operator çš„è¿”å›å€¼</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">replaceAll</span><span class="params">(UnaryOperator&lt;E&gt; operator)</span> &#123;</span><br><span class="line">    Objects.requireNonNull(operator);</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> <span class="variable">expectedModCount</span> <span class="operator">=</span> modCount;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="built_in">this</span>.size;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; modCount == expectedModCount &amp;&amp; i &lt; size; i++) &#123;</span><br><span class="line">        <span class="comment">//ä¾æ¬¡ä¼ é€’æ•°ç»„å…ƒç´ ç»™ apply æ–¹æ³•ï¼Œå¹¶å°†å…¶è¿”å›å€¼æ›¿æ¢åŸå§‹æ•°æ®</span></span><br><span class="line">        elementData[i] = operator.apply((E) elementData[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ä¸å…è®¸åœ¨æ’åºçš„è¿‡ç¨‹ä¸­é›†åˆè¢«å…¶å®ƒæ–¹æ³•ä¿®æ”¹äº†æ•°ç»„ï¼ˆä¾‹å¦‚ï¼šç§»é™¤å…ƒç´ ï¼‰</span></span><br><span class="line">    <span class="keyword">if</span> (modCount != expectedModCount) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ConcurrentModificationException</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    modCount++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="10ã€è¿­ä»£å™¨"><a href="#10ã€è¿­ä»£å™¨" class="headerlink" title="10ã€è¿­ä»£å™¨"></a>10ã€è¿­ä»£å™¨</h2><p>ArrayList å†…éƒ¨åŒ…å«ä¸€ä¸ªç”¨äºè¿­ä»£å…ƒç´ çš„ Iterator å®ç°ç±»ï¼Œå…¶ç”¨æ³•å¦‚ä¸‹æ‰€ç¤º</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    List&lt;String&gt; stringList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    stringList.add(<span class="string">&quot;https://github.com/leavesCZY&quot;</span>);</span><br><span class="line">    Iterator&lt;String&gt; iterator = stringList.iterator();</span><br><span class="line">    <span class="keyword">if</span> (iterator.hasNext()) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">next</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">        System.out.println(next);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™é‡Œæœ‰ä¸ªå°ç»†èŠ‚ï¼ŒArrayList é‡Œå¤šå¤„ä½¿ç”¨åˆ°äº† modCount è¿™ä¸ªæˆå‘˜å˜é‡ï¼ŒmodCount ç›¸å½“äºå¯¹ ArrayList çš„ä¸€ä¸ªç®€å•â€œå¿«ç…§â€ï¼Œå³ç±»ä¼¼äº ArrayList çš„ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œæ¯å½“æ·»åŠ ã€ç§»é™¤å’Œä¿®æ”¹å…ƒç´ æ—¶ï¼ŒmodCount éƒ½ä¼šé€’å¢</p>
<p>åœ¨æˆ‘ä»¬éå† ArrayList çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœåŒæ—¶è¿›è¡Œå¢å‡å…ƒç´ çš„æ“ä½œï¼Œæˆ–è€…æ˜¯å­˜åœ¨å¤šçº¿ç¨‹åŒæ—¶å¢å‡å…ƒç´ ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´éå†ç»“æœå˜å¾—ä¸å¯é ï¼Œæˆ–è€…æ˜¯ç›´æ¥å°±å¯¼è‡´æ•°ç»„è¶Šç•Œå¼‚å¸¸ï¼Œæ‰€ä»¥ ArrayList å°±é€šè¿‡ modCount æ¥æ ‡è®°å½“å‰çš„è¿­ä»£è¡Œä¸ºæ˜¯å¦å¤„äºå¯é çŠ¶æ€ã€‚å¦‚æœåœ¨éå†æ•°ç»„å…ƒç´ çš„è¿‡ç¨‹ä¸­åˆ¤æ–­åˆ° modCount çš„å€¼å‰åå‘ç”Ÿäº†å˜åŒ–ï¼Œå°±è¯´æ˜åœ¨éå†è¿‡ç¨‹ä¸­ ArrayList è¢«æ”¹åŠ¨äº†ï¼Œæ­¤æ—¶å°±è®¤å®šéå†ç»“æœä¸å¯é ï¼Œç›´æ¥æŠ›å‡ºå¼‚å¸¸ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒmodCount åšçš„åªæ˜¯ä¸€ä¸ªç®€å•æ ¡éªŒï¼Œæ— æ³•å‡†ç¡®åˆ¤æ–­å‡ºå½“å‰çš„éå†æ“ä½œå°±çœŸçš„æ˜¯å®‰å…¨çš„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">transient</span> <span class="type">int</span> <span class="variable">modCount</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Iterator&lt;E&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Itr</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">Itr</span> <span class="keyword">implements</span> <span class="title class_">Iterator</span>&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//lastRet æŒ‡å‘çš„å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•</span></span><br><span class="line">    <span class="type">int</span> cursor;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æœ€åä¸€ä¸ªè¿”å›çš„å…ƒç´ çš„ç´¢å¼•</span></span><br><span class="line">    <span class="comment">//å¦‚æœå€¼ä¸º -1ï¼Œè¯´æ˜è¿˜æœªè¿”å›è¿‡å…ƒç´ æˆ–è€…æ”¹å…ƒç´ è¢«ç§»é™¤äº†</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">lastRet</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”¨äºéªŒè¯é›†åˆçš„æ•°æ®ç»“æ„åœ¨è¿­ä»£çš„è¿‡ç¨‹ä¸­æ˜¯å¦è¢«ä¿®æ”¹äº†</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">expectedModCount</span> <span class="operator">=</span> modCount;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ˜¯å¦è¿˜æœ‰å…ƒç´ æœªè¢«éå†</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> cursor != size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–ä¸‹ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">        checkForComodification();</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> cursor;</span><br><span class="line">        <span class="comment">//å¦‚æœç´¢å¼•å€¼è¶…å‡ºå–å€¼èŒƒå›´åˆ™æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">        <span class="keyword">if</span> (i &gt;= size)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NoSuchElementException</span>();</span><br><span class="line">        Object[] elementData = ArrayList.<span class="built_in">this</span>.elementData;</span><br><span class="line">        <span class="comment">//å¦‚æœç´¢å¼•å€¼è¶…å‡ºæ•°ç»„çš„å¯ç´¢å¼•èŒƒå›´åˆ™æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">        <span class="keyword">if</span> (i &gt;= elementData.length)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ConcurrentModificationException</span>();</span><br><span class="line">        cursor = i + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> (E) elementData[lastRet = i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç§»é™¤ lastRet æŒ‡å‘çš„å…ƒç´ </span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (lastRet &lt; <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>();</span><br><span class="line">        checkForComodification();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ArrayList.<span class="built_in">this</span>.remove(lastRet);</span><br><span class="line">            <span class="comment">//å› ä¸º lastRet ä½ç½®åŸå§‹çš„å…ƒç´ è¢«ç§»é™¤äº†ï¼Œæ‰€ä»¥æ­¤æ—¶ lastRet æŒ‡å‘çš„å…ƒç´ æ˜¯åŸå…ˆ lastRet+1 ä½ç½®çš„å…ƒç´ </span></span><br><span class="line">            cursor = lastRet;</span><br><span class="line">            lastRet = -<span class="number">1</span>;</span><br><span class="line">            <span class="comment">//å› ä¸ºæ˜¯ Itr ä¸»åŠ¨å¯¹é›†åˆè¿›è¡Œä¿®æ”¹ï¼Œæ‰€ä»¥æ­¤å¤„éœ€è¦ä¸»åŠ¨æ›´æ–° expectedModCount å€¼ï¼Œé¿å…ä¹‹åæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">            expectedModCount = modCount;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IndexOutOfBoundsException ex) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ConcurrentModificationException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//éå†ä»ç´¢å¼• cursor å¼€å§‹ä¹‹åå‰©ä¸‹çš„å…ƒç´ </span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">forEachRemaining</span><span class="params">(Consumer&lt;? <span class="built_in">super</span> E&gt; consumer)</span> &#123;</span><br><span class="line">        Objects.requireNonNull(consumer);</span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> ArrayList.<span class="built_in">this</span>.size;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> cursor;</span><br><span class="line">        <span class="keyword">if</span> (i &gt;= size) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">final</span> Object[] elementData = ArrayList.<span class="built_in">this</span>.elementData;</span><br><span class="line">        <span class="keyword">if</span> (i &gt;= elementData.length) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ConcurrentModificationException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//éå†è°ƒç”¨ accept æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">while</span> (i != size &amp;&amp; modCount == expectedModCount) &#123;</span><br><span class="line">            consumer.accept((E) elementData[i++]);</span><br><span class="line">        &#125;</span><br><span class="line">        cursor = i;</span><br><span class="line">        lastRet = i - <span class="number">1</span>;</span><br><span class="line">        checkForComodification();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ¤æ–­è¿­ä»£å™¨åœ¨éå†é›†åˆçš„è¿‡ç¨‹ä¸­ï¼Œé›†åˆæ˜¯å¦è¢«å¤–éƒ¨æ”¹åŠ¨äº†ï¼ˆä¾‹å¦‚è¢«å…¶å®ƒè¿­ä»£å™¨ç§»é™¤äº†å…ƒç´ ï¼‰</span></span><br><span class="line">    <span class="comment">//å¦‚æœæ˜¯çš„è¯åˆ™æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">checkForComodification</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (modCount != expectedModCount)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ConcurrentModificationException</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="11ã€æ•ˆç‡æµ‹è¯•"><a href="#11ã€æ•ˆç‡æµ‹è¯•" class="headerlink" title="11ã€æ•ˆç‡æµ‹è¯•"></a>11ã€æ•ˆç‡æµ‹è¯•</h2><p>æœ€åå†æ¥æµ‹è¯•ä¸‹ ArrayList æ‰©å®¹æ¬¡æ•°çš„é«˜ä½å¯¹å…¶è¿è¡Œæ•ˆç‡çš„å½±å“</p>
<p>å¯¹ä¸‰ä¸ª ArrayList å­˜å…¥ç›¸åŒæ•°æ®é‡çš„æ•°æ®ï¼Œä½†åˆ†åˆ«ä¸º ArrayList æŒ‡å®šä¸åŒçš„åˆå§‹åŒ–å¤§å°</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">long</span> <span class="variable">startTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    List&lt;String&gt; stringList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">300000</span>; i++) &#123;</span><br><span class="line">        stringList.add(<span class="string">&quot;leavesC &quot;</span> + i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">long</span> <span class="variable">endTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    System.out.println(<span class="string">&quot;åˆå§‹å®¹é‡ä¸º0ï¼Œæ‰€ç”¨æ—¶é—´ï¼š&quot;</span> + (endTime - startTime) + <span class="string">&quot;æ¯«ç§’&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    startTime = System.currentTimeMillis();</span><br><span class="line">    List&lt;String&gt; stringList2 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(<span class="number">100000</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">300000</span>; i++) &#123;</span><br><span class="line">        stringList2.add(<span class="string">&quot;leavesC &quot;</span> + i);</span><br><span class="line">    &#125;</span><br><span class="line">    endTime = System.currentTimeMillis();</span><br><span class="line">    System.out.println(<span class="string">&quot;åˆå§‹å®¹é‡ä¸º100000ï¼Œæ‰€ç”¨æ—¶é—´ï¼š&quot;</span> + (endTime - startTime) + <span class="string">&quot;æ¯«ç§’&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    startTime = System.currentTimeMillis();</span><br><span class="line">    List&lt;String&gt; stringList3 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(<span class="number">300000</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">300000</span>; i++) &#123;</span><br><span class="line">        stringList3.add(<span class="string">&quot;leavesC &quot;</span> + i);</span><br><span class="line">    &#125;</span><br><span class="line">    endTime = System.currentTimeMillis();</span><br><span class="line">    System.out.println(<span class="string">&quot;åˆå§‹å®¹é‡ä¸º300000ï¼Œæ‰€ç”¨æ—¶é—´ï¼š&quot;</span> + (endTime - startTime) + <span class="string">&quot;æ¯«ç§’&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸‰ç§æ–¹å¼ä¸‹ ArrayList ä¹‹é—´çš„è¿è¡Œæ•ˆç‡å·®è·è¿˜æ˜¯å¾ˆå¤§çš„ï¼Œè™½ç„¶è¿™ç§æµ‹è¯•æ–¹æ³•å¹¶ä¸ä¸¥è°¨ï¼Œä½†ä¹Ÿå¯ä»¥çœ‹åˆ°åœ¨çœå»æ‰©å®¹æ“ä½œå ArrayList çš„è¿è¡Œæ•ˆç‡è¿˜æ˜¯æå‡äº†å¾ˆå¤šçš„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">åˆå§‹å®¹é‡ä¸º<span class="number">0</span>ï¼Œæ‰€ç”¨æ—¶é—´ï¼š<span class="number">39</span>æ¯«ç§’</span><br><span class="line">åˆå§‹å®¹é‡ä¸º<span class="number">100000</span>ï¼Œæ‰€ç”¨æ—¶é—´ï¼š<span class="number">32</span>æ¯«ç§’</span><br><span class="line">åˆå§‹å®¹é‡ä¸º<span class="number">300000</span>ï¼Œæ‰€ç”¨æ—¶é—´ï¼š<span class="number">13</span>æ¯«ç§’</span><br></pre></td></tr></table></figure>

<h1 id="ä¸‰ã€LinkedList"><a href="#ä¸‰ã€LinkedList" class="headerlink" title="ä¸‰ã€LinkedList"></a>ä¸‰ã€LinkedList</h1><p>LinkedList åŒæ—¶å®ç°äº† List æ¥å£å’Œ Deque æ¥å£ï¼Œæ‰€ä»¥æ—¢å¯ä»¥å°† LinkedList å½“åšä¸€ä¸ªæœ‰åºå®¹å™¨ï¼Œä¹Ÿå¯ä»¥å°†ä¹‹çœ‹ä½œä¸€ä¸ªé˜Ÿåˆ—ï¼ˆQueueï¼‰ï¼ŒåŒæ—¶åˆå¯ä»¥çœ‹ä½œä¸€ä¸ªæ ˆï¼ˆStackï¼‰ã€‚è™½ç„¶ LinkedList å’Œ ArrayList ä¸€æ ·éƒ½å®ç°äº† List æ¥å£ï¼Œä½†å…¶åº•å±‚æ˜¯é€šè¿‡<strong>åŒå‘é“¾è¡¨</strong>æ¥å®ç°çš„ï¼Œæ‰€ä»¥æ’å…¥å’Œåˆ é™¤å…ƒç´ çš„æ•ˆç‡éƒ½è¦æ¯” ArrayList é«˜ï¼Œä½†ä¹Ÿå› æ­¤éšæœºè®¿é—®çš„æ•ˆç‡è¦æ¯” ArrayList ä½</p>
<h2 id="1ã€ç±»å£°æ˜-1"><a href="#1ã€ç±»å£°æ˜-1" class="headerlink" title="1ã€ç±»å£°æ˜"></a>1ã€ç±»å£°æ˜</h2><p>ä» LinkedList å®ç°çš„å‡ ä¸ªæ¥å£å¯ä»¥çœ‹å‡ºæ¥ï¼ŒLinkedList æ˜¯æ”¯æŒå¿«é€Ÿè®¿é—®ï¼Œå¯å…‹éš†ï¼Œå¯åºåˆ—åŒ–çš„ï¼Œè€Œä¸”å¯ä»¥å°†ä¹‹çœ‹æˆä¸€ä¸ª<strong>æ”¯æŒæœ‰åºè®¿é—®çš„é˜Ÿåˆ—æˆ–è€…æ ˆ</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedList</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">AbstractSequentialList</span>&lt;E&gt; </span><br><span class="line">    <span class="keyword">implements</span> <span class="title class_">List</span>&lt;E&gt;, Deque&lt;E&gt;, Cloneable, java.io.Serializable</span><br></pre></td></tr></table></figure>

<p>LinkedList å†…éƒ¨é€šè¿‡åŒå‘é“¾è¡¨çš„æ•°æ®ç»“æ„æ¥å®ç°çš„ï¼Œæ¯ä¸ªé“¾è¡¨ç»“ç‚¹é™¤äº†å­˜å‚¨æœ¬ç»“ç‚¹çš„æ•°æ®å…ƒç´ å¤–ï¼Œè¿˜æœ‰ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«ç”¨äºæŒ‡å‘å…¶ä¸Šä¸‹ä¸¤ä¸ªç›¸é‚»ç»“ç‚¹ï¼Œè¿™ä¸ªç»“ç‚¹å°±æ˜¯ LinkedList ä¸­çš„é™æ€ç±» Node</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å½“å‰ç»“ç‚¹åŒ…å«çš„å®é™…å…ƒç´ </span></span><br><span class="line">    E item;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŒ‡å‘ä¸‹ä¸€ä¸ªç»“ç‚¹</span></span><br><span class="line">    Node&lt;E&gt; next;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŒ‡å‘ä¸Šä¸€ä¸ªç»“ç‚¹</span></span><br><span class="line">    Node&lt;E&gt; prev;</span><br><span class="line"></span><br><span class="line">    Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123;</span><br><span class="line">        <span class="built_in">this</span>.item = element;</span><br><span class="line">        <span class="built_in">this</span>.next = next;</span><br><span class="line">        <span class="built_in">this</span>.prev = prev;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2ã€æˆå‘˜å˜é‡-1"><a href="#2ã€æˆå‘˜å˜é‡-1" class="headerlink" title="2ã€æˆå‘˜å˜é‡"></a>2ã€æˆå‘˜å˜é‡</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åŒå‘é“¾è¡¨åŒ…å«çš„ç»“ç‚¹æ€»æ•°ï¼Œå³æ•°æ®æ€»é‡</span></span><br><span class="line"><span class="keyword">transient</span> <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åŒå‘é“¾è¡¨çš„å¤´ç»“ç‚¹</span></span><br><span class="line"><span class="keyword">transient</span> Node&lt;E&gt; first;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åŒå‘é“¾è¡¨çš„å°¾ç»“ç‚¹</span></span><br><span class="line"><span class="keyword">transient</span> Node&lt;E&gt; last;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åºåˆ—åŒ–ID</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">876323262645176354L</span>;</span><br></pre></td></tr></table></figure>

<p>å½“ä¸­çš„æˆå‘˜å˜é‡ first å’Œ last åˆ†åˆ«ç”¨äºæŒ‡å‘é“¾è¡¨çš„å¤´éƒ¨å’Œå°¾éƒ¨ç»“ç‚¹ï¼Œå› æ­¤ LinkedList çš„æ•°æ®ç»“æ„å›¾æ˜¯ç±»ä¼¼äºè¿™æ ·çš„</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5ea71d0950c04d8a947867ad892ff6c6~tplv-k3u1fbpfcp-zoom-1.image"></p>
<h2 id="3ã€æ„é€ å‡½æ•°-1"><a href="#3ã€æ„é€ å‡½æ•°-1" class="headerlink" title="3ã€æ„é€ å‡½æ•°"></a>3ã€æ„é€ å‡½æ•°</h2><p>LinkedList ä¸éœ€è¦å»è¯·æ±‚ä¸€ç‰‡è¿ç»­çš„å†…å­˜ç©ºé—´æ¥å­˜å‚¨æ•°æ®ï¼Œè€Œæ˜¯åœ¨æ¯æ¬¡æœ‰æ–°çš„å…ƒç´ éœ€è¦æ·»åŠ æ—¶å†æ¥åŠ¨æ€è¯·æ±‚å†…å­˜ç©ºé—´ï¼Œå› æ­¤ LinkedList çš„ä¸¤ä¸ªæ„é€ å‡½æ•°éƒ½å¾ˆç®€å•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">LinkedList</span><span class="params">()</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¼ å…¥åˆå§‹æ•°æ®</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">LinkedList</span><span class="params">(Collection&lt;? extends E&gt; c)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>();</span><br><span class="line">    addAll(c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4ã€æ·»åŠ å…ƒç´ "><a href="#4ã€æ·»åŠ å…ƒç´ " class="headerlink" title="4ã€æ·»åŠ å…ƒç´ "></a>4ã€æ·»åŠ å…ƒç´ </h2><p><code>add(E e)</code> æ–¹æ³•ç”¨äºå‘é“¾è¡¨çš„å°¾éƒ¨æ·»åŠ ç»“ç‚¹ï¼Œå› ä¸ºæœ‰ <code>last</code> æŒ‡å‘é“¾è¡¨çš„å°¾ç»“ç‚¹ï¼Œå› æ­¤å‘å°¾éƒ¨æ·»åŠ æ–°å…ƒç´ åªéœ€è¦ä¿®æ”¹å‡ ä¸ªå¼•ç”¨å³å¯ï¼Œæ•ˆç‡è¾ƒé«˜</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å°†å…ƒç´  e ä½œä¸ºå°¾ç»“ç‚¹æ·»åŠ </span></span><br><span class="line"><span class="comment">//å› ä¸º LinkedList å…è®¸æ·»åŠ ç›¸åŒå…ƒç´ ï¼Œæ‰€ä»¥æ­¤æ–¹æ³•å›ºå®šè¿”å› true</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> &#123;</span><br><span class="line">    linkLast(e);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†å…ƒç´  e ç½®ä¸ºå°¾ç»“ç‚¹</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">linkLast</span><span class="params">(E e)</span> &#123;</span><br><span class="line">    <span class="comment">//å…ˆä¿å­˜åŸå°¾ç»“ç‚¹</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; l = last;</span><br><span class="line">    <span class="comment">//æ„å»ºæ–°çš„å°¾ç»“ç‚¹ï¼Œå¹¶æŒ‡å‘åŸå°¾ç»“ç‚¹</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; newNode = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(l, e, <span class="literal">null</span>);</span><br><span class="line">    last = newNode;</span><br><span class="line">    <span class="comment">//å¦‚æœåŸå°¾ç»“ç‚¹ä¸º nullï¼Œè¯´æ˜åŸé“¾è¡¨åŒ…å«çš„å…ƒç´ ä¸ªæ•°ä¸º 0ï¼Œåˆ™æ­¤æ—¶æ’å…¥çš„å°¾ç»“ç‚¹åŒæ—¶å³ä¸ºå¤´ç»“ç‚¹</span></span><br><span class="line">    <span class="comment">//å¦‚æœåŸå°¾ç»“ç‚¹ä¸ä¸º nullï¼Œåˆ™å°† next æŒ‡å‘æ–°çš„å°¾ç»“ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (l == <span class="literal">null</span>)</span><br><span class="line">        first = newNode;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        l.next = newNode;</span><br><span class="line">    <span class="comment">//å…ƒç´ ä¸ªæ•°åŠ 1</span></span><br><span class="line">    size++;</span><br><span class="line">    modCount++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/83bed0a5917a494c88aa6edc2be08ab6~tplv-k3u1fbpfcp-zoom-1.image"></p>
<p><code>add(int index, E element)</code> æ–¹æ³•ç”¨äºå‘æŒ‡å®šç´¢å¼•å¤„æ·»åŠ å…ƒç´ ï¼Œéœ€è¦å…ˆé€šè¿‡ç´¢å¼• index è·å–ç›¸åº”ä½ç½®çš„ç»“ç‚¹ï¼Œå¹¶åœ¨è¯¥ä½ç½®å¼€è¾Ÿä¸€ä¸ªæ–°çš„ç»“ç‚¹æ¥å­˜å‚¨å…ƒç´  elementï¼Œæœ€åè¿˜éœ€è¦ä¿®æ”¹ç›¸é‚»ç»“ç‚¹é—´çš„å¼•ç”¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åœ¨ç´¢å¼• index å¤„æ’å…¥å…ƒç´  element</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> index, E element)</span> &#123;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­ç´¢å¼•å¤§å°æ˜¯å¦åˆæ³•ï¼Œä¸åˆæ³•åˆ™æŠ›å‡º IndexOutOfBoundsException</span></span><br><span class="line">    checkPositionIndex(index);</span><br><span class="line">    <span class="comment">//å¦‚æœ index == sizeï¼Œåˆ™å°† element ä½œä¸ºå°¾ç»“ç‚¹æ¥æ·»åŠ </span></span><br><span class="line">    <span class="comment">//å¦åˆ™åˆ™åœ¨ç´¢å¼• index å‰å¼€è¾Ÿä¸€ä¸ªæ–°ç»“ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (index == size)</span><br><span class="line">        linkLast(element);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        linkBefore(element, node(index));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†å…ƒç´  e ç½®ä¸º succ ç»“ç‚¹çš„ä¸Šä¸€ä¸ªç»“ç‚¹</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">linkBefore</span><span class="params">(E e, Node&lt;E&gt; succ)</span> &#123;</span><br><span class="line">    <span class="comment">//ä¿å­˜ succ çš„ä¸Šä¸€ä¸ªç»“ç‚¹ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; pred = succ.prev;</span><br><span class="line">    <span class="comment">//æ„å»ºå…ƒç´  e å¯¹åº”çš„ç»“ç‚¹</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; newNode = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(pred, e, succ);</span><br><span class="line">    <span class="comment">//å°†ç»“ç‚¹ succ çš„ä¸Šä¸€ä¸ªç»“ç‚¹æŒ‡å‘ newNode</span></span><br><span class="line">    succ.prev = newNode;</span><br><span class="line">    <span class="comment">//å¦‚æœ pred ä¸º nullï¼Œè¯´æ˜ succ æ˜¯å¤´ç»“ç‚¹ï¼Œåˆ™å°† newNode ç½®ä¸ºæ–°çš„å¤´ç»“ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (pred == <span class="literal">null</span>)</span><br><span class="line">        first = newNode;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        pred.next = newNode;</span><br><span class="line">    <span class="comment">//å…ƒç´ ä¸ªæ•°åŠ 1</span></span><br><span class="line">    size++;</span><br><span class="line">    modCount++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6853b99e131840ccb6c4efaa2584e399~tplv-k3u1fbpfcp-zoom-1.image"></p>
<h2 id="5ã€ç§»é™¤å…ƒç´ "><a href="#5ã€ç§»é™¤å…ƒç´ " class="headerlink" title="5ã€ç§»é™¤å…ƒç´ "></a>5ã€ç§»é™¤å…ƒç´ </h2><p><code>remove()</code> æ–¹æ³•æœ‰ä¸¤ç§é‡è½½å½¢å¼ï¼Œå…¶å†…éƒ¨éƒ½æ˜¯é€šè¿‡è°ƒç”¨ <code>unlink(Node&lt;E&gt; x)</code> æ–¹æ³•æ¥ç§»é™¤æŒ‡å®šç»“ç‚¹åœ¨é“¾è¡¨ä¸­çš„å¼•ç”¨ï¼Œä¸åŒäº ArrayList åœ¨ç§»é™¤å…ƒç´ æ—¶å¯èƒ½å¯¼è‡´çš„å¤§é‡æ•°æ®ç§»åŠ¨ï¼ŒLinkedList åªéœ€è¦é€šè¿‡ç§»é™¤å¼•ç”¨å³å¯å°†æŒ‡å®šå…ƒç´ ä»é“¾è¡¨ä¸­ç§»é™¤</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç§»é™¤ç´¢å¼• index å¤„çš„ç»“ç‚¹</span></span><br><span class="line"><span class="keyword">public</span> E <span class="title function_">remove</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­ç´¢å¼•å¤§å°æ˜¯å¦åˆæ³•ï¼Œä¸åˆæ³•åˆ™æŠ›å‡º IndexOutOfBoundsException</span></span><br><span class="line">    checkElementIndex(index);</span><br><span class="line">    <span class="keyword">return</span> unlink(node(index));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¹é“¾è¡¨è¿›è¡Œæ­£å‘éå†ï¼Œç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ å€¼ä¸º o çš„ç»“ç‚¹</span></span><br><span class="line"><span class="comment">//å¦‚æœç§»é™¤æˆåŠŸåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› false</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">remove</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (o == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (Node&lt;E&gt; x = first; x != <span class="literal">null</span>; x = x.next) &#123;</span><br><span class="line">            <span class="keyword">if</span> (x.item == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="comment">//ç§»é™¤ç»“ç‚¹ x</span></span><br><span class="line">                unlink(x);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (Node&lt;E&gt; x = first; x != <span class="literal">null</span>; x = x.next) &#123;</span><br><span class="line">            <span class="keyword">if</span> (o.equals(x.item)) &#123;</span><br><span class="line">                <span class="comment">//ç§»é™¤ç»“ç‚¹ x</span></span><br><span class="line">                unlink(x);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç§»é™¤ç»“ç‚¹ x å¹¶è¿”å›å…¶åŒ…å«çš„å…ƒç´ å€¼</span></span><br><span class="line">E <span class="title function_">unlink</span><span class="params">(Node&lt;E&gt; x)</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">E</span> <span class="variable">element</span> <span class="operator">=</span> x.item;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; next = x.next;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; prev = x.prev;</span><br><span class="line">    <span class="comment">//å¦‚æœ prev == nullï¼Œè¯´æ˜ç»“ç‚¹ x ä¸ºå¤´ç»“ç‚¹ï¼Œåˆ™å°†å¤´ç»“ç‚¹ç½®ä¸ºåŸå…ˆçš„ç¬¬äºŒä¸ªç»“ç‚¹</span></span><br><span class="line">    <span class="comment">//å¦‚æœ prev != nullï¼Œåˆ™ç§»é™¤å¯¹ç»“ç‚¹ x çš„å¼•ç”¨</span></span><br><span class="line">    <span class="keyword">if</span> (prev == <span class="literal">null</span>) &#123;</span><br><span class="line">        first = next;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        prev.next = next;</span><br><span class="line">        x.prev = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¦‚æœ next == nullï¼Œåˆ™è¯´æ˜ç»“ç‚¹ x ä¸ºå°¾ç»“ç‚¹ï¼Œåˆ™å°†å°¾ç»“ç‚¹ç½®ä¸ºåŸå…ˆçš„å€’æ•°ç¬¬äºŒä¸ªç»“ç‚¹</span></span><br><span class="line">    <span class="comment">//å¦‚æœ next != nullï¼Œåˆ™ç§»é™¤å¯¹ç»“ç‚¹ x çš„å¼•ç”¨</span></span><br><span class="line">    <span class="keyword">if</span> (next == <span class="literal">null</span>) &#123;</span><br><span class="line">        last = prev;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        next.prev = prev;</span><br><span class="line">        x.next = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¸®åŠ©GCå›æ”¶</span></span><br><span class="line">    x.item = <span class="literal">null</span>;</span><br><span class="line">    <span class="comment">//å…ƒç´ ä¸ªæ•°å‡1</span></span><br><span class="line">    size--;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="keyword">return</span> element;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6ã€éšæœºè®¿é—®å…ƒç´ "><a href="#6ã€éšæœºè®¿é—®å…ƒç´ " class="headerlink" title="6ã€éšæœºè®¿é—®å…ƒç´ "></a>6ã€éšæœºè®¿é—®å…ƒç´ </h2><p>å¯¹äºå•å‘é“¾è¡¨æ¥è¯´ï¼Œå¦‚æœæƒ³éšæœºå®šä½åˆ°æŸä¸ªç»“ç‚¹ï¼Œé‚£ä¹ˆåªèƒ½é€šè¿‡ä»å¤´ç»“ç‚¹å¼€å§‹éå†çš„æ–¹å¼æ¥å®šä½ï¼Œæœ€æç«¯çš„æƒ…å†µä¸‹éœ€è¦éå†æ•´ä¸ªé“¾è¡¨æ‰èƒ½å®šä½åˆ°ç›®æ ‡ç»“ç‚¹ã€‚å¦‚æœæ˜¯åŒå‘é“¾è¡¨ï¼Œåˆ™å¯ä»¥é€‰æ‹©æ­£å‘éå†æˆ–è€…åå‘éå†ï¼Œæœ€æç«¯çš„æƒ…å†µä¸‹éœ€è¦éå†ä¸€åŠé“¾è¡¨æ‰èƒ½å®šä½åˆ°ç›®æ ‡ç»“ç‚¹ã€‚æ‰€ä»¥ï¼Œç›¸æ¯”æ•°ç»„æ¥è¯´ LinkedList çš„éšæœºè®¿é—®æ•ˆç‡å¹¶ä¸é«˜</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è·å–ç´¢å¼• index å¤„çš„ç»“ç‚¹å…ƒç´ </span></span><br><span class="line"><span class="keyword">public</span> E <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­ç´¢å¼•å¤§å°æ˜¯å¦åˆæ³•ï¼Œä¸åˆæ³•åˆ™æŠ›å‡º IndexOutOfBoundsException</span></span><br><span class="line">    checkElementIndex(index);</span><br><span class="line">    <span class="keyword">return</span> node(index).item;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†ç´¢å¼• index å¤„çš„ç»“ç‚¹åŒ…å«çš„å…ƒç´ ä¿®æ”¹ä¸º elementï¼Œå¹¶è¿”å›æ—§å…ƒç´ </span></span><br><span class="line"><span class="keyword">public</span> E <span class="title function_">set</span><span class="params">(<span class="type">int</span> index, E element)</span> &#123;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­ç´¢å¼•å¤§å°æ˜¯å¦åˆæ³•ï¼Œä¸åˆæ³•åˆ™æŠ›å‡º IndexOutOfBoundsException</span></span><br><span class="line">    checkElementIndex(index);</span><br><span class="line">    Node&lt;E&gt; x = node(index);</span><br><span class="line">    <span class="type">E</span> <span class="variable">oldVal</span> <span class="operator">=</span> x.item;</span><br><span class="line">    x.item = element;</span><br><span class="line">    <span class="keyword">return</span> oldVal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–ç´¢å¼• index å¤„çš„ç»“ç‚¹</span></span><br><span class="line">Node&lt;E&gt; <span class="title function_">node</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">    <span class="comment">//size &gt;&gt; 1 çš„å«ä¹‰å³ä¸ºï¼šå°† size å€¼é™¤ä»¥ 2</span></span><br><span class="line">    <span class="comment">//å¦‚æœ index é è¿‘é“¾è¡¨çš„å¤´éƒ¨ï¼Œåˆ™ä»å¤´éƒ¨å‘å°¾éƒ¨æ­£å‘éå†æŸ¥æ‰¾ç»“ç‚¹</span></span><br><span class="line">    <span class="comment">//å¦‚æœ index é è¿‘é“¾è¡¨çš„å°¾éƒ¨ï¼Œåˆ™ä»å°¾éƒ¨å‘å¤´éƒ¨åå‘éå†æŸ¥æ‰¾ç»“ç‚¹</span></span><br><span class="line">    <span class="comment">//æœ€æç«¯çš„æƒ…å†µä¸‹éå†ä¸€åŠå…ƒç´ æ‰èƒ½å®šä½åˆ°ç›®æ ‡èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (index &lt; (size &gt;&gt; <span class="number">1</span>)) &#123;</span><br><span class="line">        Node&lt;E&gt; x = first;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; index; i++)</span><br><span class="line">            x = x.next;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        Node&lt;E&gt; x = last;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> size - <span class="number">1</span>; i &gt; index; i--)</span><br><span class="line">            x = x.prev;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7ã€å‡ ä¸ªå¸¸ç”¨çš„æ–¹æ³•"><a href="#7ã€å‡ ä¸ªå¸¸ç”¨çš„æ–¹æ³•" class="headerlink" title="7ã€å‡ ä¸ªå¸¸ç”¨çš„æ–¹æ³•"></a>7ã€å‡ ä¸ªå¸¸ç”¨çš„æ–¹æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ¤æ–­æ˜¯å¦åŒ…å«å…ƒç´  o</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> indexOf(o) != -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–å…ƒç´ ä¸ªæ•°</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> size;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¸…ç©ºé“¾è¡¨å…ƒç´ ï¼Œå°†å„ä¸ªç»“ç‚¹ä¹‹é—´çš„å¼•ç”¨éƒ½åˆ‡æ–­</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clear</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (Node&lt;E&gt; x = first; x != <span class="literal">null</span>; ) &#123;</span><br><span class="line">        Node&lt;E&gt; next = x.next;</span><br><span class="line">        x.item = <span class="literal">null</span>;</span><br><span class="line">        x.next = <span class="literal">null</span>;</span><br><span class="line">        x.prev = <span class="literal">null</span>;</span><br><span class="line">        x = next;</span><br><span class="line">    &#125;</span><br><span class="line">    first = last = <span class="literal">null</span>;</span><br><span class="line">    size = <span class="number">0</span>;</span><br><span class="line">    modCount++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ å€¼ä¸º o çš„ç»“ç‚¹æ‰€åœ¨çš„ç´¢å¼•å€¼</span></span><br><span class="line"><span class="comment">//å¦‚æœæŸ¥æ‰¾ä¸åˆ°ï¼Œåˆ™è¿”å› -1</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">indexOf</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (o == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (Node&lt;E&gt; x = first; x != <span class="literal">null</span>; x = x.next) &#123;</span><br><span class="line">            <span class="keyword">if</span> (x.item == <span class="literal">null</span>)</span><br><span class="line">                <span class="keyword">return</span> index;</span><br><span class="line">            index++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (Node&lt;E&gt; x = first; x != <span class="literal">null</span>; x = x.next) &#123;</span><br><span class="line">            <span class="keyword">if</span> (o.equals(x.item))</span><br><span class="line">                <span class="keyword">return</span> index;</span><br><span class="line">            index++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›æœ€åä¸€ä¸ªå…ƒç´ å€¼ä¸º o çš„ç»“ç‚¹æ‰€åœ¨çš„ç´¢å¼•å€¼</span></span><br><span class="line"><span class="comment">//å¦‚æœæŸ¥æ‰¾ä¸åˆ°ï¼Œåˆ™è¿”å› -1</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">lastIndexOf</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> size;</span><br><span class="line">    <span class="keyword">if</span> (o == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (Node&lt;E&gt; x = last; x != <span class="literal">null</span>; x = x.prev) &#123;</span><br><span class="line">            index--;</span><br><span class="line">            <span class="keyword">if</span> (x.item == <span class="literal">null</span>)</span><br><span class="line">                <span class="keyword">return</span> index;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (Node&lt;E&gt; x = last; x != <span class="literal">null</span>; x = x.prev) &#123;</span><br><span class="line">            index--;</span><br><span class="line">            <span class="keyword">if</span> (o.equals(x.item))</span><br><span class="line">                <span class="keyword">return</span> index;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="8ã€Deque-æ¥å£"><a href="#8ã€Deque-æ¥å£" class="headerlink" title="8ã€Deque æ¥å£"></a>8ã€Deque æ¥å£</h2><p>ä»¥ä¸Šä»‹ç»çš„å‡ ä¸ªæ–¹æ³•éƒ½æ˜¯ List æ¥å£ä¸­æ‰€å£°æ˜çš„ï¼Œæ¥ä¸‹æ¥çœ‹ä¸‹ Deque æ¥å£ä¸­çš„æ–¹æ³•</p>
<p>å…¶å® Deque æ¥å£ä¸­å¾ˆå¤šæ–¹æ³•çš„å«ä¹‰éƒ½æ˜¯ç±»ä¼¼çš„ï¼Œä¸”ä¸€äº›æ–¹æ³•éƒ½æ˜¯ç›¸äº’è°ƒç”¨çš„ï¼Œå¹¶ä¸ç®—å¤æ‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å°†å…ƒç´  e ç½®ä¸ºå¤´ç»“ç‚¹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addFirst</span><span class="params">(E e)</span> &#123;</span><br><span class="line">    linkFirst(e);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†å…ƒç´  e ç½®ä¸ºå°¾ç»“ç‚¹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addLast</span><span class="params">(E e)</span> &#123;</span><br><span class="line">    linkLast(e);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†å…ƒç´  e ä½œä¸ºå°¾ç»“ç‚¹æ·»åŠ </span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offer</span><span class="params">(E e)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> add(e);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†å…ƒç´  e ä½œä¸ºå¤´ç»“ç‚¹æ·»åŠ </span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offerFirst</span><span class="params">(E e)</span> &#123;</span><br><span class="line">    addFirst(e);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†å…ƒç´  e ä½œä¸ºå°¾ç»“ç‚¹æ·»åŠ </span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offerLast</span><span class="params">(E e)</span> &#123;</span><br><span class="line">    addLast(e);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–å¤´éƒ¨ç»“ç‚¹çš„å…ƒç´ å€¼</span></span><br><span class="line"><span class="keyword">public</span> E <span class="title function_">peekFirst</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; f = first;</span><br><span class="line">    <span class="keyword">return</span> (f == <span class="literal">null</span>) ? <span class="literal">null</span> : f.item;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–å°¾éƒ¨ç»“ç‚¹çš„å…ƒç´ å€¼</span></span><br><span class="line"><span class="keyword">public</span> E <span class="title function_">peekLast</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; l = last;</span><br><span class="line">    <span class="keyword">return</span> (l == <span class="literal">null</span>) ? <span class="literal">null</span> : l.item;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–å¤´éƒ¨ç»“ç‚¹çš„å…ƒç´ å€¼ï¼Œå¹¶å°†ä¹‹ä»é“¾è¡¨ä¸­ç§»é™¤</span></span><br><span class="line"><span class="keyword">public</span> E <span class="title function_">pollFirst</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; f = first;</span><br><span class="line">    <span class="keyword">return</span> (f == <span class="literal">null</span>) ? <span class="literal">null</span> : unlinkFirst(f);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–å°¾éƒ¨ç»“ç‚¹çš„å…ƒç´ å€¼ï¼Œå¹¶å°†ä¹‹ä»é“¾è¡¨ä¸­ç§»é™¤</span></span><br><span class="line"><span class="keyword">public</span> E <span class="title function_">pollLast</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; l = last;</span><br><span class="line">    <span class="keyword">return</span> (l == <span class="literal">null</span>) ? <span class="literal">null</span> : unlinkLast(l);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†å…ƒç´  e ä½œä¸ºå¤´ç»“ç‚¹æ·»åŠ </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(E e)</span> &#123;</span><br><span class="line">    addFirst(e);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–å¤´éƒ¨ç»“ç‚¹çš„å…ƒç´ å€¼ï¼Œå¹¶å°†ä¹‹ä»é“¾è¡¨ä¸­ç§»é™¤</span></span><br><span class="line"><span class="keyword">public</span> E <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> removeFirst();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä»é“¾è¡¨å¤´éƒ¨å‘å°¾éƒ¨æ­£å‘éå†ï¼Œç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ å€¼ä¸º o çš„ç»“ç‚¹</span></span><br><span class="line"><span class="comment">//å¦‚æœç§»é™¤æˆåŠŸåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› false</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">removeFirstOccurrence</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> remove(o);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä»é“¾è¡¨å°¾éƒ¨å‘å¤´éƒ¨åå‘éå†ï¼Œç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ å€¼ä¸º o çš„ç»“ç‚¹</span></span><br><span class="line"><span class="comment">//å¦‚æœç§»é™¤æˆåŠŸåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› false</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">removeLastOccurrence</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (o == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (Node&lt;E&gt; x = last; x != <span class="literal">null</span>; x = x.prev) &#123;</span><br><span class="line">            <span class="keyword">if</span> (x.item == <span class="literal">null</span>) &#123;</span><br><span class="line">                unlink(x);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (Node&lt;E&gt; x = last; x != <span class="literal">null</span>; x = x.prev) &#123;</span><br><span class="line">            <span class="keyword">if</span> (o.equals(x.item)) &#123;</span><br><span class="line">                unlink(x);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9ã€æ•ˆç‡æµ‹è¯•"><a href="#9ã€æ•ˆç‡æµ‹è¯•" class="headerlink" title="9ã€æ•ˆç‡æµ‹è¯•"></a>9ã€æ•ˆç‡æµ‹è¯•</h2><p>ä¸Šé¢è¯´è¿‡ï¼ŒLinkedList ç›¸æ¯” ArrayList åœ¨æ·»åŠ å’Œç§»é™¤å…ƒç´ æ—¶æ•ˆç‡ä¸Šä¼šé«˜å¾ˆå¤šï¼Œä½†éšæœºè®¿é—®å…ƒç´ çš„æ•ˆç‡è¦æ¯” ArrayList ä½ï¼Œè¿™é‡Œä¹Ÿæ¥åšä¸ªæµ‹è¯•ï¼ŒéªŒè¯ä¸¤è€…ä¹‹é—´çš„å·®åˆ«</p>
<p>åˆ†åˆ«å‘ ArrayList å’Œ LinkedList å­˜å…¥åŒç­‰æ•°æ®é‡çš„æ•°æ®ï¼Œç„¶åå„è‡ªç§»é™¤ 100 ä¸ªå…ƒç´ ä»¥åŠéå† 10000 ä¸ªå…ƒç´ ï¼Œè§‚å¯Ÿä¸¤è€…æ‰€ç”¨çš„æ—¶é—´</p>
<p>ArrayListï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    List&lt;String&gt; stringArrayList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">300000</span>; i++) &#123;</span><br><span class="line">        stringArrayList.add(<span class="string">&quot;leavesC &quot;</span> + i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">long</span> <span class="variable">startTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">        stringArrayList.remove(<span class="number">100</span> + i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">long</span> <span class="variable">endTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    System.out.println(<span class="string">&quot;ç§»é™¤ ArrayList ä¸­çš„100ä¸ªå…ƒç´ ,ç”¨æ—¶ï¼š&quot;</span> + (endTime - startTime) + <span class="string">&quot;æ¯«ç§’&quot;</span>);</span><br><span class="line"></span><br><span class="line">    startTime = System.currentTimeMillis();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">        stringArrayList.get(i);</span><br><span class="line">    &#125;</span><br><span class="line">    endTime = System.currentTimeMillis();</span><br><span class="line">    System.out.println(<span class="string">&quot;éå† ArrayList ä¸­çš„10000ä¸ªå…ƒç´ ,ç”¨æ—¶ï¼š&quot;</span> + (endTime - startTime) + <span class="string">&quot;æ¯«ç§’&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>LinkedListï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    List&lt;String&gt; stringLinkedList = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">300000</span>; i++) &#123;</span><br><span class="line">        stringLinkedList.add(<span class="string">&quot;leavesC &quot;</span> + i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">long</span> <span class="variable">startTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">        stringLinkedList.remove(<span class="number">100</span> + i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">long</span> <span class="variable">endTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    System.out.println(<span class="string">&quot;ç§»é™¤ LinkedList ä¸­çš„100ä¸ªå…ƒç´ ,ç”¨æ—¶ï¼š&quot;</span> + (endTime - startTime) + <span class="string">&quot;æ¯«ç§’&quot;</span>);</span><br><span class="line"></span><br><span class="line">    startTime = System.currentTimeMillis();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">        stringLinkedList.get(i);</span><br><span class="line">    &#125;</span><br><span class="line">    endTime = System.currentTimeMillis();</span><br><span class="line">    System.out.println(<span class="string">&quot;éå† LinkedList ä¸­çš„10000ä¸ªå…ƒç´ ,ç”¨æ—¶ï¼š&quot;</span> + (endTime - startTime) + <span class="string">&quot;æ¯«ç§’&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹å‡ºæ¥ä¸¤è€…ä¹‹é—´çš„å·®è·è¿˜æ˜¯éå¸¸å¤§çš„ï¼Œåœ¨ä½¿ç”¨é›†åˆæ¡†æ¶å‰éœ€è¦æ ¹æ®å®é™…åº”ç”¨åœºæ™¯æ¥å†³å®šä½¿ç”¨å“ªä¸€ä¸ª</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ç§»é™¤ ArrayList ä¸­çš„<span class="number">100</span>ä¸ªå…ƒç´ ,ç”¨æ—¶ï¼š<span class="number">18</span>æ¯«ç§’</span><br><span class="line">éå† ArrayList ä¸­çš„<span class="number">10000</span>ä¸ªå…ƒç´ ,ç”¨æ—¶ï¼š<span class="number">1</span>æ¯«ç§’</span><br><span class="line">    </span><br><span class="line">ç§»é™¤ LinkedList ä¸­çš„<span class="number">100</span>ä¸ªå…ƒç´ ,ç”¨æ—¶ï¼š<span class="number">0</span>æ¯«ç§’</span><br><span class="line">éå† LinkedList ä¸­çš„<span class="number">10000</span>ä¸ªå…ƒç´ ,ç”¨æ—¶ï¼š<span class="number">237</span>æ¯«ç§’</span><br></pre></td></tr></table></figure>

  </article>
  <!-- tag -->
  <div class="mt-12 pt-6 border-t border-gray-200">
    
  </div>
  <!-- prev and next -->
  <div class="flex justify-between mt-12 pt-6 border-t border-gray-200">
    <div>
      
        <a href="/hexo-blog/public/2025/03/02/md/kotlin/Kotlin%20%E5%8D%8F%E7%A8%8B%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%EF%BC%883%EF%BC%89%E7%BB%84%E5%90%88%E6%8C%82%E8%B5%B7%E5%87%BD%E6%95%B0/" class="text-sm text-gray-400 hover:text-gray-500 flex justify-center">
          <iconify-icon width="20" icon="ri:arrow-left-s-line" data-inline="false"></iconify-icon>
          Kotlin åç¨‹å®˜æ–¹æ–‡æ¡£ï¼ˆ3ï¼‰ç»„åˆæŒ‚èµ·å‡½æ•°
        </a>
      
    </div>
    <div>
      
        <a href="/hexo-blog/public/2025/03/02/md/kotlin/Java%20&%20Android%20%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6%E9%A1%BB%E7%9F%A5%E9%A1%BB%E4%BC%9A%EF%BC%882%EF%BC%89/" class="text-sm text-gray-400 hover:text-gray-500 flex justify-center">
          Java & Android é›†åˆæ¡†æ¶é¡»çŸ¥é¡»ä¼šï¼ˆ2ï¼‰
          <iconify-icon width="20" icon="ri:arrow-right-s-line" data-inline="false"></iconify-icon>
        </a>
      
    </div>
  </div>
  <!-- comment -->
  <div class="article-comments mt-12">
    
<script
  src="https://giscus.app/client.js"
  data-repo="hqqich/giscus"
  data-repo-id="R_kgDOOCZUBA"
  data-category="General"
  data-category-id="DIC_kwDOOCZUBM4Cng1l"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="bottom"
  data-theme="preferred_color_scheme"
  data-lang="zh-CN"
  crossorigin="anonymous"
  async
></script>
<script>
  window.onload = function () {
    console.log("giscus loaded");
    const isDark = document.documentElement.classList.contains("dark");
    const giscusFrame = document.querySelector("iframe.giscus-frame");
    giscusFrame.contentWindow.postMessage(
      {
        giscus: {
          setConfig: {
            theme: isDark ? "dark" : "light",
          },
        },
      },
      "https://giscus.app"
    );
  };
</script>


  </div>
</section>
<!-- js inspect -->

<script src="/hexo-blog/public/lib/clipboard.min.js"></script>


<script async src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "HTML-CSS": {
        preferredFont: "TeX",
        availableFonts: ["STIX","TeX"],
        linebreaks: { automatic:true },
        EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
        inlineMath: [ ["$", "$"], ["\\(","\\)"] ],
        processEscapes: true,
        ignoreClass: "tex2jax_ignore|dno",
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
        equationNumbers: { autoNumber: "AMS" },
        noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
        Macros: { href: "{}" }
    },
    messageStyle: "none"
  });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>



<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>
  $(document).ready(() => {
    const maraidConfig = {
      theme: "default",
      logLevel: 3,
      flowchart: { curve: "linear" },
      gantt: { axisFormat: "%m/%d/%Y" },
      sequence: { actorMargin: 50 },
    };
    mermaid.initialize(maraidConfig);
  });
</script>



<script src="/hexo-blog/public/lib/fancybox/fancybox.umd.min.js"></script>

<script>
  $(document).ready(() => {
    $('.post-content').each(function(i){
      $(this).find('img').each(function(){
        if ($(this).parent().hasClass('fancybox') || $(this).parent().is('a')) return;
        var alt = this.alt;
        if (alt) $(this).after('<span class="fancybox-alt">' + alt + '</span>');
        $(this).wrap('<a class="fancybox-img" href="' + this.src + '" data-fancybox=\"gallery\" data-caption="' + alt + '"></a>')
      });
      $(this).find('.fancybox').each(function(){
        $(this).attr('rel', 'article' + i);
      });
    });

    Fancybox.bind('[data-fancybox="gallery"]', {
        // options
    })
  })
</script>

<!-- tocbot begin -->

<script src="/hexo-blog/public/lib/tocbot/tocbot.min.js"></script>

<script>
  $(document).ready(() => {
      tocbot.init({
        // Where to render the table of contents.
        tocSelector: '.post-toc',
        // Where to grab the headings to build the table of contents.
        contentSelector: '.post-content',
        // Which headings to grab inside of the contentSelector element.
        headingSelector: 'h1, h2, h3',
        // For headings inside relative or absolute positioned containers within content.
        hasInnerContainers: true,
    });
  })
</script>
<!-- tocbot end -->


  </main>
  <footer class="flex flex-col h-40 items-center justify-center text-gray-400 text-sm">
  <!-- busuanzi -->
  
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!-- Busuanzi Analytics -->
<div class="flex items-center gap-2">
  <span>Visitors</span>
  <span id="busuanzi_value_site_uv"></span>
  <span>Page Views</span>
  <span id="busuanzi_value_site_pv"></span>
</div>
<!-- End Busuanzi Analytics -->


  <!-- copyright -->
  <div class="flex items-center gap-2">
    <a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" style="color: inherit;">CC BY-NC-SA 4.0</a>
    <span>Â© 2022</span>
    <iconify-icon width="18" icon="emojione-monotone:maple-leaf" ></iconify-icon>
    <a href="https://github.com/xbmlz" target="_blank" rel="noopener noreferrer">xbmlz</a>
  </div>
  <!-- powered by -->
  <div class="flex items-center gap-2">
    <span>Powered by</span>
    <a href="https://hexo.io/" target="_blank" rel="noopener noreferrer">Hexo</a>
    <span>&</span>
    <a href="https://github.com/xbmlz/hexo-theme-maple" target="_blank" rel="noopener noreferrer">Maple</a>
  </div>

</footer>

  <div class="back-to-top box-border fixed right-6 z-1024 -bottom-20 rounded py-1 px-1 bg-slate-900 opacity-60 text-white cursor-pointer text-center dark:bg-slate-600">
    <span class="flex justify-center items-center text-sm">
      <iconify-icon width="18" icon="ion:arrow-up-c" id="go-top"></iconify-icon>
      <span id="scrollpercent"><span>0</span> %</span>
    </span>
  </div>
  
<script src="/hexo-blog/public/js/main.js"></script>


  <script>
    $(document).ready(function () {
      const mapleCount = "10";
      const speed = "0.5";
      const mapleEl = document.getElementById("maple");
      const maples = Array.from({ length: mapleCount }).map(() => {
        const maple = document.createElement("div");
        const scale = Math.random() * 0.5 + 0.5;
        const offset = Math.random() * 2 - 1;
        const x = Math.random() * mapleEl.clientWidth;
        const y = -Math.random() * mapleEl.clientHeight;
        const duration = 10 / speed;
        const delay = -duration;
        maple.className = "maple";
        maple.style.width = `${24 * scale}px`;
        maple.style.height = `${24 * scale}px`;
        maple.style.left = `${x}px`;
        maple.style.top = `${y}px`;
        maple.style.setProperty("--maple-fall-offset", offset);
        maple.style.setProperty("--maple-fall-height", `${Math.abs(y) + mapleEl.clientHeight}px`);
        maple.style.animation = `fall ${duration}s linear infinite`;
        maple.style.animationDelay = `${delay}s`;
        mapleEl.appendChild(maple)
        return maple
      })
    });
  </script>
  


  <div class="fixed top-0 bottom-0 left-0 right-0 pointer-events-none print:hidden" id="maple"></div>
</body>

</html>
